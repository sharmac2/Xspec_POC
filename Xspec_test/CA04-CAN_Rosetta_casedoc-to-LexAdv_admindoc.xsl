<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xsltdoc="http://www.lexisnexis.com/xmlstylesheets/documentation/xslt-documentation/1/"
    xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/"
    xmlns:admindecision="urn:x-lexisnexis:content:administrative-decision:sharedservices:1"
    xmlns:admindoc="urn:x-lexisnexis:content:administrative-document:sharedservices:1"
    xmlns:base="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/"
    xmlns:case="http://www.lexis-nexis.com/glp/case"
    xmlns:case2="http://www.lexisnexis.com/xmlschemas/content/legal/case/1/"
    xmlns:casehist="http://www.lexisnexis.com/xmlschemas/content/legal/case-history/1/"
    xmlns:caseinfo="http://www.lexisnexis.com/xmlschemas/content/legal/case-information/1/"
    xmlns:casesum="http://www.lexisnexis.com/xmlschemas/content/legal/case-summary/1/"
    xmlns:ci="http://www.lexis-nexis.com/ci"
    xmlns:classify="http://www.lexisnexis.com/xmlschemas/content/shared/classification/1/"
    xmlns:comm="http://www.lexis-nexis.com/glp/comm"
    xmlns:contact="http://www.lexisnexis.com/xmlschemas/content/shared/contact/1/"
    xmlns:courtcase="http://www.lexisnexis.com/xmlschemas/content/legal/courtcase/1/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:decision="http://www.lexisnexis.com/xmlschemas/content/legal/decision/1/"
    xmlns:dig="http://www.lexis-nexis.com/glp/dig"
    xmlns:dita="http://dita.oasis-open.org/architecture/2005/"
    xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/"
    xmlns:doc="http://www.lexisnexis.com/xmlschemas/content/shared/document-level-metadata/1/"
    xmlns:docinfo="http://www.lexis-nexis.com/glp/docinfo"
    xmlns:error="urn:x-lexisnexis:conversion:global:error:1" xmlns:ext="http://exslt.org/common"
    xmlns:form="http://www.lexisnexis.com/xmlschemas/content/shared/form/1/"
    xmlns:frm="http://www.lexis-nexis.com/glp/frm"
    xmlns:globalentity="urn:x-lexisnexis:content:identified-entities:global:1"
    xmlns:glp="http://www.lexis-nexis.com/glp" xmlns:guid="urn:x-lexisnexis:content:guid:global:1"
    xmlns:in="http://www.lexis-nexis.com/glp/in"
    xmlns:index="urn:x-lexisnexis:content:publicationindex:sharedservices:1"
    xmlns:jrnl="http://www.lexis-nexis.com/glp/jrnl"
    xmlns:jurisinfo="http://www.lexisnexis.com/xmlschemas/content/legal/jurisdiction-info/1/"
    xmlns:leg="http://www.lexis-nexis.com/glp/leg"
    xmlns:legisinfo="http://www.lexisnexis.com/xmlschemas/content/legal/legislation-info/1/"
    xmlns:lnci="http://www.lexisnexis.com/xmlschemas/content/shared/citations/1/"
    xmlns:lncr="http://www.lexis-nexis.com/lncr"
    xmlns:lnf="urn:x-lexisnexis:conversion:global:functions:1"
    xmlns:lnmeta="http://www.lexisnexis.com/xmlschemas/content/shared/lexisnexis-metadata/1/"
    xmlns:lntbl="http://www.lexisnexis.com/xmlschemas/content/shared/lexisnexis-table-extensions/1/"
    xmlns:lnv="http://www.lexis-nexis.com/lnv" xmlns:lnvxe="http://www.lexis-nexis.com/lnvxe"
    xmlns:location="http://www.lexisnexis.com/xmlschemas/content/shared/location/1/"
    xmlns:person="http://www.lexisnexis.com/xmlschemas/content/shared/person/1/"
    xmlns:primlaw="http://www.lexisnexis.com/xmlschemas/content/legal/primarylaw/1/"
    xmlns:primlawhist="http://www.lexisnexis.com/xmlschemas/content/legal/primarylaw-history/1/"
    xmlns:proc="http://www.lexisnexis.com/xmlschemas/content/shared/process-elements/1/"
    xmlns:pubinfo="http://www.lexisnexis.com/xmlschemas/content/shared/publication-info/1/"
    xmlns:ref="http://www.lexisnexis.com/xmlschemas/content/shared/reference/1/"
    xmlns:seclaw="http://www.lexisnexis.com/xmlschemas/content/legal/secondary-law/1/"
    xmlns:source_cttr="http://www.lexis-nexis.com/glp/cttr"
    xmlns:source_dict="http://www.lexis-nexis.com/glp/dict"
    xmlns:source_docinfo="http://www.lexis-nexis.com/glp/docinfo"
    xmlns:source_lnci="http://www.lexis-nexis.com/lnci"
    xmlns:topic="urn:x-lexisnexis:content:topic:global:1"
    xmlns:xd="http://www.oxygenxml.com/ns/doc/xsl"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0"
    exclude-result-prefixes="#all"
    xmlns:annot="http://www.lexisnexis.com/xmlschemas/content/shared/annotations/1/"
    xmlns:functx="http://www.functx.com"
    xmlns:pubfm="http://www.lexisnexis.com/xmlschemas/content/shared/publication-front-matter/1/"
    xmlns:pubup="http://www.lexisnexis.com/xmlschemas/content/shared/publication-update/1/">



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_refpt-to-LexisAdvance_ref.anchor">
        <title><sourcexml>refpt</sourcexml> to <targetxml>ref:anchor</targetxml>
            <lnpid>id-CCCC-10458</lnpid></title>
        <body>
            <section>
                <title>Instructions <i>[common element]</i></title>
                <p><b>Please note that the conversion of <sourcexml>refpt</sourcexml> into
                            <targetxml>ref:anchor</targetxml> must follow specific rules based on
                        its location in the source document.</b> These context sensitive aspects are
                    not all discussed in detail in the general instructions given here. Please see
                    the specific document type instructions for more information regarding the
                    context sensitive conversion details of this element. If there is any
                    contradiction between these general instructions and the document type specific
                    instructions, the specific instructions should be given precedence.</p>
                <p>Drop <sourcexml>refpt</sourcexml> when it occurs as a child of
                        <sourcexml>ci:content</sourcexml> or
                    <sourcexml>case:casename</sourcexml>.</p>
                <p><sourcexml>refpt</sourcexml> becomes <targetxml>ref:anchor</targetxml>. Attribute
                        <sourcexml>@id</sourcexml> becomes <targetxml>@id</targetxml> and
                        <sourcexml>@type</sourcexml> becomes <targetxml>@anchortype</targetxml> with
                    values tokenized as follows: <ul>
                        <li><targetxml>ref:anchor[@anchortype="global"]</targetxml></li>
                        <li><targetxml>ref:anchor[@anchortype="local"]</targetxml></li>
                    </ul>
                </p>
                <p>All occurrences of refpt/@type="ext" should map to
                    ref:anchor/@anchortype="global". If value of refpt/@type="local", or is omitted
                    or any other value the mapping should be ref:anchor/@anchortype="local" </p>
                <note><targetxml>ref:anchor/@id</targetxml> that begins with a number must have an
                    underscore added at start. </note>
                <p>Duplicate anchors should be suppressed. Repeating anchors are ok however (non
                    duplicate multiple anchors). Need to remove duplicates. </p>
                <p>If <sourcexml>refpt</sourcexml> comes within <sourcexml>l/li/lilabel</sourcexml>
                    then <targetxml>ref:anchor</targetxml> will become the first child of
                        <targetxml>listitem</targetxml>.</p>
                <p><sourcexml>entry/refpt</sourcexml> becomes
                        <targetxml>entry/ref:anchor</targetxml></p>
                <p>If <sourcexml>refpt</sourcexml> comes within <sourcexml>figure</sourcexml> then
                    drop the <sourcexml>refpt</sourcexml> since id has dummy values.</p>
                <p>If <sourcexml>refpt</sourcexml> comes with <sourcexml>page</sourcexml> as sibling
                    then drop the <sourcexml>refpt</sourcexml> element.</p>
                <p>If <sourcexml>refpt</sourcexml> and <sourcexml>remotelink</sourcexml> occur as
                    adjacent siblings, refer to topic <i><sourcexml>endnote</sourcexml> to
                            <targetxml>endnote</targetxml></i>.</p>

                <!-- 2013-11-14 (JCG): Removed the xref to the endnote topic in the above sentence because there are times when the refpt topic is used in a CI but the endnote topic is not. In this case, the xref causes a validation warning because endnote is xref'ed but is not in the DITAMAP. 
		    NOTE: I purposely made this a comment rather than a change log entry because there is no need for it to appear in a change log. -->

                <note>Whenever an <targetxml>@xml:id</targetxml> has the same value as ANY
                        <targetxml>ref:anchor/@id</targetxml>, suppress the
                        <targetxml>@xml:id</targetxml>.</note>
            </section>
            <example>
                <title>Source XML 1</title>
                <codeblock> &lt;case:judgments&gt; &lt;glp:note&gt; &lt;refpt id="257_ALR_1_2"
                    type="ext"/&gt; &lt;remotelink dpsi="000G" refpt="257_ALR_1_1"
                    remotekey1="REFPTID" service="DOC-ID"&gt; Previous page in this case
                    &lt;/remotelink&gt; &lt;/glp:note&gt; &lt;case:order subdoc="true"
                    toc-caption="Orders"&gt; &lt;heading&gt; &lt;title&gt;Orders&lt;/title&gt;
                    &lt;/heading&gt; &lt;p&gt; &lt;text&gt; Order that the questions stated in the
                    amended special case be answered as follows: &lt;/text&gt; &lt;/p&gt;
                    &lt;/case:order&gt; &lt;/case:judgments&gt; </codeblock>
            </example>
            <example>
                <title>Target XML 1</title>
                <codeblock> &lt;courtcase:opinions&gt; &lt;note&gt; &lt;ref:anchor id="_257_ALR_1_2"
                    anchortype="global"/&gt; ... &lt;/note&gt; courtcase:order will be moved under
                    courtcase:body... &lt;courtcase:opinions&gt; </codeblock>
            </example>
            <example>
                <title>Source XML 2</title>
                <p>Here is an example of <sourcexml>refpt</sourcexml> occurring within
                        <sourcexml>ci:content</sourcexml>. </p>
                <codeblock> &lt;ci:cite type="cite4thisdoc"&gt; &lt;ci:case&gt; &lt;ci:caseref&gt;
                    &lt;ci:reporter value="urj"/&gt; &lt;ci:refnum num="BC200702133"/&gt;
                    &lt;/ci:caseref&gt; &lt;/ci:case&gt; &lt;ci:content&gt; &lt;citefragment
                    searchtype="CASE-CITE-REF"&gt;BC200702133&lt;/citefragment&gt; &lt;refpt
                    id="BC200702133" type="ext"&gt;&lt;/refpt&gt; &lt;/ci:content&gt;
                    &lt;/ci:cite&gt; </codeblock>
            </example>
            <example>
                <title>Target XML 2</title>
                <p>When <sourcexml>refpt</sourcexml> occurs within
                    <sourcexml>ci:content</sourcexml>, it is dropped. </p>
                <codeblock> &lt;ref:cite4thisresource citetype="reporter"&gt; &lt;lnci:case&gt;
                    &lt;lnci:caseref&gt; &lt;lnci:reporter value="urj"/&gt; &lt;lnci:refnum
                    num="BC200702133"/&gt; &lt;/lnci:caseref&gt; &lt;/lnci:case&gt;
                    &lt;lnci:content&gt;BC200702133&lt;/lnci:content&gt;
                    &lt;/ref:cite4thisresource&gt; </codeblock>
            </example>
            <example>
                <title>Source XML 3: Element refpt comes with page element.</title>
                <codeblock> &lt;p&gt; &lt;text&gt; &lt;refpt id="PAGE6" type="ext"/&gt; &lt;page
                    reporter="PBAP" text="Page " count="6"/&gt; In civil trials the position is
                    summarised by Wrottesley, &lt;emph typestyle="it"&gt;Principles of
                    Advocacy&lt;/emph&gt;, p13: &lt;/text&gt; &lt;/p&gt; </codeblock>
            </example>
            <example>
                <title>Target XML 3</title>
                <codeblock> &lt;p&gt; &lt;text&gt; &lt;ref:page num="6" page-scheme="PBAP"
                    page-scheme-type="reporter-abbreviation"/&gt; In civil trials the position is
                    summarised by Wrottesley, &lt;emph typestyle="it"&gt;Principles of
                    Advocacy&lt;/emph&gt;, p13: &lt;/text&gt; &lt;/p&gt; </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2012-08-30: Major revision for modularization.</p>
            </section>
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_refpt-LxAdv-ref.anchor.dita  -->


    <xsl:template match="refpt" name="refpt-generic">

        <!--  Original Target XPath:  ref:anchor   -->
        <xsl:variable name="dup">
            <xsl:call-template name="amIaDuplicate"/>
        </xsl:variable>
        <xsl:choose>
            <xsl:when
                test="
                    parent::leg:bodytext or parent::ci:content or parent::case:casename or ancestor::figure or preceding-sibling::page
                    or following-sibling::*[1][self::page] or $dup = 'true'"/>
            <xsl:otherwise>
                <ref:anchor>
                    <xsl:apply-templates select="@*"/>
                    <xsl:if test="not(@type)">
                        <xsl:attribute name="anchortype" select="'local'"/>
                    </xsl:if>
                    <xsl:if test="node()">
                        <ref:anchortext>
                            <xsl:apply-templates select="node()"/>
                        </ref:anchortext>
                    </xsl:if>
                </ref:anchor>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>


    <!-- JL: @id and @xml:id transformations handled by module
		XSLT/ContentArch/Rosetta-to-LA/modules/nonamespace/Rosetta_identifier-LxAdv-ID_data_type-HandlingDuplicates.xsl -->

    <xsl:template match="refpt/@type">
        <!--  Original Target XPath:  @anchortype   -->
        <xsl:attribute name="anchortype">
            <xsl:value-of
                select="
                    if (. = 'ext') then
                        'global'
                    else
                        'local'"
            />
        </xsl:attribute>
    </xsl:template>





    <!-- Set as 'true' if you want inline (embedded) citations.  -->
    <xsl:param name="outputEmbeddedCitations" as="xs:string" select="'false'"/>

    <!-- Set as 'segmentsOnly' if you want as flat as possible (only segement elements containing strings) when performing transforms to VisfXML.  -->
    <xsl:param name="visfXmlOutputLevel" as="xs:string" select="'false'"/>

    <!-- Set as 'true' if you want globalentity:* pass-through.  -->
    <xsl:param name="passThroughGlobalEntityMarkup" as="xs:string" select="'false'"/>

    <xsl:variable name="outputCitation" as="xs:boolean"
        select="
            if ($outputEmbeddedCitations = 'true') then
                true()
            else
                false()"/>
    <xsl:variable name="passThroughGlobalEntity" as="xs:boolean"
        select="
            if ($passThroughGlobalEntityMarkup = 'true') then
                true()
            else
                false()"/>

    <!-- Set as 'true' if you want errors thrown for elements or attributes not explicitly matched elsewhere; elements are output and wrapped in error element.  Set to 'false' to drop entirely plus no errors; set to 'noErrors' to suppress errors but still copy elements and attributes to the output; set to ICCE (default) for error messages to be output with offending element/attribute suppressed (no forced schema validation error).  -->
    <xsl:param name="outputUnmatchedElements" as="xs:string" select="'ICCE'"/>
    <xsl:param name="debugMode" as="xs:string" select="'false'"/>
    <xsl:variable name="debug" as="xs:boolean"
        select="
            if ($debugMode = 'true') then
                true()
            else
                false()"/>

    <!-- Current date/time and file being processed; these global variables only really used for debug/error processing.  current-dateTime() outputs in YYYY-MM-DDTHH:MM:SS-TZ:TZ format when we need YYYY-MM-DD HH:MI:SS   -->
    <xsl:param name="sourceFilename" as="xs:string*" select="tokenize(document-uri(/), '/')[last()]"/>
    <xsl:variable name="fileName" as="xs:string"
        select="
            if (string($sourceFilename) = '') then
                'UNKNOWN'
            else
                $sourceFilename"/>
    <xsl:variable name="dateTime" as="xs:string"
        select="translate(substring(string(current-dateTime()), 1, 19), 'T', ' ')"/>

    <!--  @SBy:  2016-09-20  ROM 1218 IRM Strategic:  add variables introduced by copyright and LEGDOC-LDC conversions  -->
    <xsl:variable name="acceptableID_Chars" as="xs:string"
        select="'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789.-_:'"/>
    <xsl:variable name="unallowedFirstCharAcceptableID_Chars" as="xs:string" select="'0123456789.-'"/>
    <xsl:variable name="irmSection" as="xs:string"
        select="substring-after(/LEGDOC-LDC/lnv:CITE/ref:cite4thisresource/source_lnci:cite/source_lnci:content, 'IRM ')"/>

    <xsl:param name="legacy-filename" as="xs:string" select="''"/>
    <!-- Creating variable to hold all upper-case letters -->
    <xsl:variable name="vUpperCase" as="xs:string" select="'ABCDEFGHIJKLMNOPQRSTUVWXYZ'"/>
    <!-- Creating variable to hold all lower-case letters -->
    <xsl:variable name="vLowerCase" as="xs:string" select="'abcdefghijklmnopqrstuvwxyz'"/>

    <xsl:variable name="outputErrors" as="xs:boolean"
        select="
            if ($outputUnmatchedElements = 'true') then
                true()
            else
                false()"/>

    <!-- comments | text | PIs START -->
    <dita:topic id="comment.text.processing-instruction">
        <dita:title>comment() | text() | processing-instruction()</dita:title>
        <dita:body>
            <dita:section>
                <dita:title>Explanation</dita:title>
                <dita:p>This template rule copies over text nodes, comment nodes, and processing
                    instructions to the target as is.</dita:p>
            </dita:section>
        </dita:body>
    </dita:topic>
    <xsl:template match="comment() | text() | processing-instruction()">
        <xsl:copy-of select="."/>
    </xsl:template>
    <!-- comments | text | PIs END -->

    <xd:doc>
        <xd:desc>
            <xd:p>When matching the <xd:i class="xmlSource">/</xd:i> root element, just process
                child nodes.</xd:p>
        </xd:desc>
    </xd:doc>
    <xsl:template match="/">
        <xsl:apply-templates/>
        <!--xsl:apply-templates>
			<xsl:with-param name="errorStatus" tunnel="yes" as="xs:string" select=" 'E' "/>
		</xsl:apply-templates-->
    </xsl:template>

    <xd:doc>
        <xd:desc>
            <xd:p>
                <xd:i class="xmlSource">lncr:*</xd:i> are just pass through, just process child
                elements. <xd:i class="xmlSource">lncr:metadata</xd:i> is suppressed.</xd:p>
        </xd:desc>
    </xd:doc>
    <xsl:template match="lncr:*">
        <!--  drop wrapper applied to any lncr:* elements and ignore all children but elements  -->
        <xsl:apply-templates select="*"/>
    </xsl:template>

    <xsl:template match="lncr:metadata"/>
    <!--  suppress lncr:metadata and it's children  -->

    <!--  matched templates  -->
    <xd:doc>
        <xd:desc>
            <xd:p>
                <xd:i class="xmlSource">* | @*</xd:i> (unmatched element and attribute nodes). This
                template will throw an error, unless $outputUnmatchedElements is set to 'noErrors'
                as a parameter to the conversion. Named template "outputErrorMessage" is called
                which will use the xsl:message instruction to generate an error message. If
                $outputUnmatchedElements is set to 'ICCE' (the default), then the error message will
                be in the form of an exception element.</xd:p>
            <xd:p>Example exception handling output:</xd:p>
            <xd:pre><![CDATA[
<exception timestamp="2017-01-04 14:54:22">
  <filename>test.xml</filename>
  <status>W</status>
  <code>402</code>
  <context>/jcd:judicialCourtDecision[1]/jcd:information[1]/courtcase:history[1]/courtcase:historySummary[1]/courtcase:historyItem[1]/citation:citation[1]/citation:content[1]/citation:contentSpan[1]/@citation:contentSpanRole</context>
  <message>Unexpected Attribute:  name()=citation:contentSpanRole encountered in source document!  Attribute value is=hierarchyReference</message>
</exception>]]>
			</xd:pre>
        </xd:desc>
    </xd:doc>
    <xsl:template match="* | @*">
        <!--  matching this pattern is an error  -->
        <xsl:param name="errorStatus" tunnel="yes" as="xs:string" select="'W'"/>
        <!--  default is W for warning.  If 'E' is passed, then some systems will ensure the target document is not passed along in the pipeline  -->

        <!--  calling the elementOrAttributeCopy named template to copy the node as is   -->
        <!--    if element node, wrap withinin error element  -->
        <!--    if attribute node, also output an error attribute  -->
        <xsl:choose>
            <xsl:when test="$outputUnmatchedElements = 'ICCE'">
                <xsl:call-template name="outputErrorMessage">
                    <xsl:with-param name="messageText" as="xs:string"
                        select="
                            concat(if (self::*) then
                                'Unexpected Element:  name()=' (:  first item is either element (self::* = true()) or attribute (otherwise)  :)
                            else
                                'Unexpected Attribute:  name()=',
                            name(), (:  second item is element or attribute name  :)
                            ' encountered in source document!', (:  third item  :)
                            if (self::* and text()) then (:  last item is empty string if element and no text() nodes, or if attribute and no value.  :)
                                concat('  Text value is=', string-join(text(), '')) (:	Otherwise provide @ value or text() value  :)
                            else
                                if (not(self::*) and . != '') then
                                    concat('  Attribute value is=', .)
                                else
                                    '')"/>
                    <xsl:with-param name="errorType" as="xs:string" select="'ICCE'"/>
                    <!--   ICCE error type  -->
                    <xsl:with-param name="errorCode" as="xs:string"
                        select="
                            if (self::*) then
                                '401'
                            else
                                '402'"/>
                    <!--   401 if element node, 402 if attribute node  -->
                    <xsl:with-param name="context" as="xs:string">
                        <xsl:call-template name="generateXPath"/>
                    </xsl:with-param>
                    <xsl:with-param name="status" as="xs:string" select="$errorStatus"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:when test="$outputUnmatchedElements = 'noErrors'">
                <xsl:sequence select="."/>
            </xsl:when>
            <xsl:when test="not($outputErrors)"/>
            <xsl:when test="self::*">
                <!--  self:* is false for attribute nodes  -->

                <error:error>
                    <xsl:sequence select="."/>
                </error:error>
                <xsl:call-template name="outputErrorMessage">
                    <xsl:with-param name="messageText" as="xs:string"
                        select="concat('Unexpected Element:  ', name(), ' encountered in source document!')"
                    />
                </xsl:call-template>

            </xsl:when>
            <xsl:otherwise>
                <!--  must be an attribute  -->

                <xsl:attribute name="error:error" select="'error:  unexpected attribute!'"/>
                <xsl:sequence select="."/>
                <xsl:call-template name="outputErrorMessage">
                    <xsl:with-param name="messageText" as="xs:string"
                        select="concat('Unexpected Attribute:  ', name(..), '/@', name(), ' (= ', ., ') encountered in source document!')"
                    />
                </xsl:call-template>

            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>



    <!--configurationManagementInformation xmlns="urn:x-lexisnexis:configuration-management:1">
		<title>Globally Shared Functions and Named Templates</title>
		<purpose>This stylesheet module contains XSLT functions and named templates that are globally shared regardless of transformation direction or tier, such as the named template for processing errors, etc.</purpose>
		<versionInfo>
			<version>
				<rev>-00</rev>
				<date>20-Mar-2013</date>
				<author>S. Byland</author>
				<description>Initial version.</description>
			</version>
			<version>
				<rev>A00</rev>
				<date>26-Jan-2016</date>
				<author>S. Byland</author>
				<description>Some general cleanup of comments.  Also commented out elementOrAttributeCopy named template as this method was not really used.  There is some code in the CRM LA-to-MNCR baseline that will need to be modified so as to not use this named template anymore.</description>
			</version>
		</versionInfo>
	</configurationManagementInformation-->

    <!--  global custom functions  -->
    <dita:topic id="global.functions">
        <dita:title>Global Functions</dita:title>
        <dita:body>
            <dita:section>
                <dita:title>Instructions</dita:title>
            </dita:section>
            <dita:p>Global functions apply primarily to XSL style conversions but would include such
                items as error messaging, etc.</dita:p>
        </dita:body>
    </dita:topic>

    <!--  named template rules START  -->
    <!--  error detected; throw a message to the output START  -->
    <xd:doc>
        <xd:desc>
            <xd:p>
                <xd:b>outputErrorMessage Named Template</xd:b>
            </xd:p>
            <xd:p>This named template is called whenever the XSLT needs to throw an error or
                warning. It will use the xsl:message instruction to generate an error message. If
                $errorType is set to 'ICCE' (the default), then the error message will be in the
                form of an exception element.</xd:p>
            <xd:p>Example exception handling output:</xd:p>
            <xd:pre><![CDATA[
<exception timestamp="2017-01-04 14:54:22">
  <filename>test.xml</filename>
  <status>W</status>
  <code>402</code>
  <context>/jcd:judicialCourtDecision[1]/jcd:information[1]/courtcase:history[1]/courtcase:historySummary[1]/courtcase:historyItem[1]/citation:citation[1]/citation:content[1]/citation:contentSpan[1]/@citation:contentSpanRole</context>
  <message>Unexpected Attribute:  name()=citation:contentSpanRole encountered in source document!  Attribute value is=hierarchyReference</message>
</exception>]]>
				</xd:pre>
        </xd:desc>
    </xd:doc>
    <xsl:template name="outputErrorMessage">
        <xsl:param name="CurrentDBD" required="no" as="xs:string" select="'notApplicable'"/>
        <xsl:param name="messageText" as="xs:string*" select="'Error!'"/>
        <!--  text passed in by caller  -->
        <xsl:param name="errorType" as="xs:string*" select="'ICCE'"/>
        <xsl:param name="errorCode" as="xs:string*" select="'401'"/>
        <xsl:param name="context" as="xs:string*" select="'/unknown'"/>
        <xsl:param name="status" as="xs:string*" select="'W'"/>

        <xsl:choose>
            <xsl:when test="$errorType = 'debug'">

                <!-- Example of how debug mode might be used; maybe auto create something like these lines after each template rule when building the monolithic and a certain flag is passed? 
					<xsl:if test=" $debug and contains( . , 'Hello Errors' ) ">
						<xsl:call-template name="outputErrorMessage">
							<xsl:with-param name="messageText" as="xs:string" select=" 'Template:  xh:p[translate( normalize-space( string-join( descendant-or-self::*/text() , ... ]' "/>
							<xsl:with-param name="errorType" as="xs:string" select=" 'debug' "/>
							<xsl:with-param name="context" as="xs:string">
								<xsl:call-template name="generateXPath"/>
							</xsl:with-param>
						</xsl:call-template>
					</xsl:if>
					 end example debug mode  -->

                <xsl:message>

                    <xsl:element name="debug" inherit-namespaces="no" namespace="">
                        <xsl:attribute name="timestamp" select="$dateTime"/>
                        <xsl:element name="message" inherit-namespaces="no" namespace="">
                            <xsl:if test="$context != '/unknown'">
                                <xsl:text>Context/XPath:  </xsl:text>
                                <xsl:sequence select="$context"/>
                                <xsl:text>.  </xsl:text>
                            </xsl:if>
                            <xsl:sequence select="$messageText"/>
                        </xsl:element>
                    </xsl:element>

                </xsl:message>
            </xsl:when>
            <xsl:when test="$errorType = 'ICCE'">
                <xsl:message>

                    <xsl:element name="exception" inherit-namespaces="no" namespace="">
                        <xsl:attribute name="timestamp" select="$dateTime"/>
                        <xsl:element name="filename" inherit-namespaces="no" namespace="">
                            <xsl:sequence select="$fileName"/>
                        </xsl:element>
                        <xsl:element name="status" inherit-namespaces="no" namespace="">
                            <xsl:sequence select="$status"/>
                        </xsl:element>
                        <xsl:element name="code" inherit-namespaces="no" namespace="">
                            <xsl:sequence select="$errorCode"/>
                        </xsl:element>
                        <xsl:element name="context" inherit-namespaces="no" namespace="">
                            <xsl:sequence select="$context"/>
                        </xsl:element>
                        <xsl:element name="message" inherit-namespaces="no" namespace="">
                            <xsl:sequence select="$messageText"/>
                        </xsl:element>
                    </xsl:element>

                </xsl:message>
            </xsl:when>
            <!--for DBD errors, note template matched element name directly in the output file-->
            <xsl:when test="$errorType = 'DBD'">DBDerr:<xsl:value-of select="name()"/>
                <!--<xsl:value-of select="error()"/>-->
                <xsl:if test="not($CurrentDBD = 'DeScopedDbd' or $CurrentDBD = 'notApplicable')">
                    <xsl:message>
                        <xsl:text>DBDerr:</xsl:text>
                        <xsl:value-of select="$CurrentDBD"/>
                        <xsl:text>:</xsl:text>
                        <xsl:value-of select="name()"/>
                    </xsl:message>
                </xsl:if>
            </xsl:when>
            <xsl:otherwise>

                <xsl:message>
                    <xsl:value-of select="$messageText"/>
                    <!--  just output the message text to the output  -->
                </xsl:message>

            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>
    <!--  error detected; throw a message to the output END  -->

    <!--  generate and output the source XPath START  -->
    <!--  @SBy:  2016-09-20  ROM 1218 IRM Strategic:  updated to allow optionally outputting without brackets (predicates indicating sibling order)  -->
    <xd:doc>
        <xd:desc>
            <xd:p>
                <xd:b>generateXPath Named Template</xd:b>
            </xd:p>
            <xd:p>This named template is used to create the XPath leading to the current node in the
                form of a string, such as
                "/jcd:judicialCourtDecision[1]/jcd:information[1]/courtcase:history[1]/courtcase:historySummary[1]/courtcase:historyItem[1]/citation:citation[1]/citation:content[1]/citation:contentSpan[1]/@citation:contentSpanRole".
                Parameter $includeBrackets can be set to false() to suppress the predicate output if
                desired.</xd:p>
        </xd:desc>
    </xd:doc>
    <xsl:template name="generateXPath" as="xs:string">
        <xsl:param name="includeBrackets" as="xs:boolean" select="true()"/>
        <xsl:sequence
            select="
                string-join((:  use string join function to insert the '/' chars of the XPath  :)
                ('', (:  Build a sequence of strings.  First item is empty to ensure XPath starts with a '/'  :)
                (for $i in ancestor-or-self::*
                return (:  Walk the ancestor-or-self:: axis and return the name of each element followed by position in brackets  :)
                    concat(name($i), (:  next item is the element name followed by position in brackets  :)
                    if ($includeBrackets) then
                        concat(
                        '[', (:  open bracket, then count preceding sibling elements of same name and add 1; convert to string  :)
                        string(count($i/preceding-sibling::*[name(.) = name($i)]) + 1),
                        ']') (:  close bracket. This for loop returns sequence of strings in form of 'element-name[#]'  :)
                    else
                        '')
                ), (:  Last item in sequence is to add the attribute name if necessary, since  :)
                if (self::*) then
                    () (:  ancestor-or-self::* won't include 'self' if this is an attribute  :)
                else
                    concat('@', name())
                ),
                '/')"/>
        <!--   Use '/' as the string separator since this is an XPath  -->
    </xsl:template>
    <!--  generate and output the source XPath END  -->

    <!--  combined nested trees START  -->
    <xd:doc>
        <xd:desc>
            <xd:p>
                <xd:b>combineTrees Named Template</xd:b>
            </xd:p>
            <xd:p>This named template is used to combine the content from following sibling elements
                of the same base name into a single element, such as lnv:TEXT-1, lnv:TEXT-2, etc.,
                into a single lnv:TEXT-1 element, when these elements contain nested hierarchical
                content requiring the hierarchies to be knitted back together. It assumes the
                sibling element descendants are structured the same way, and that the nodes can be
                combined at specific levels identifed by $combiningElements parameter.</xd:p>
            <xd:p>The base element name (such as "lnv:TEXT-") must be passed as parameter
                $baseEleName, and the sibling nodes passed as $nodesToCombine.</xd:p>
            <xd:p>Recursion is used to process through all the siblings provided in
                $nodesToCombine.</xd:p>
        </xd:desc>
    </xd:doc>
    <xsl:template name="combineTrees" as="element()">
        <!--  combines the content from following sibling elements of the same base name into a single element (into the "-1" element of same name)  -->
        <!--  assumes the sibling element descendants are structured the same way, and that the nodes can be combined at specific levels identifed by $combiningElements parameter  -->
        <xsl:param name="baseEleName" tunnel="yes" as="xs:string"/>
        <!--  base element name before the digit, such as 'lnv:TEXT-'  -->
        <xsl:param name="nodesToCombine" as="document-node()"/>
        <!--  all of the, or the remaing, sibling segments to be combined under one element  -->
        <xsl:param name="combiningElements" as="xs:string*"/>
        <!--  sequence of element names (strings) where node combining can occur  -->

        <xsl:variable name="updatedTree" as="element()">
            <!--  combine first remaining segment with second remaining segment and save in this variable  -->

            <xsl:apply-templates select="$nodesToCombine/*/*[1]" mode="combineTrees">
                <!--  perform combinging of nodes via the combineTrees mode   -->
                <xsl:with-param name="matchingXPath" tunnel="yes" as="xs:string">
                    <!--  node combining will occur when current XPath matches this XPath   -->
                    <!--  the matching XPath is determined by first finding the last node in the document that contains text.  Then, start moving up the ancestor-or-self axis until arrive at one of the elements identified in $combiningElements   -->
                    <xsl:for-each
                        select="$nodesToCombine/*/*[1]/descendant-or-self::*[text()][last()]/ancestor-or-self::*[name() = $combiningElements][1]">
                        <xsl:call-template name="generateXPath"/>
                        <!--  utility that returnes the XPath of the current node   -->
                    </xsl:for-each>
                </xsl:with-param>
                <xsl:with-param name="baseEleName" tunnel="yes" as="xs:string" select="$baseEleName"/>
                <!--  pass on baseEleName  -->
                <xsl:with-param name="currentEleName" tunnel="yes" as="xs:string"
                    select="name($nodesToCombine/*/*[1])"/>
                <!--  pass on the name of the first remaining segment  -->
                <xsl:with-param name="nextEleName" tunnel="yes" as="xs:string"
                    select="name($nodesToCombine/*/*[2])"/>
                <!--  pass on the name of the next remaining segment  -->
            </xsl:apply-templates>

        </xsl:variable>

        <xsl:choose>
            <xsl:when test="$nodesToCombine/*/*[3]">
                <!--  if there are 3 or more siblings, then need to recurse   -->

                <xsl:call-template name="combineTrees">
                    <xsl:with-param name="baseEleName" tunnel="yes" as="xs:string"
                        select="$baseEleName"/>
                    <!--  pass on baseEleName  -->
                    <xsl:with-param name="nodesToCombine" as="document-node()">
                        <!--  update nodesToContinue to first be the $updatedTree followed by all other sibling after the 2nd one  -->
                        <xsl:document>
                            <!--  Forcing nodesToCombine element below to be in the empty namespace.  This is necessary because even though there is no default namespace declared in this XSLT file, 
											there usually is when building the monolithic deliverable stylesheet (and it is set to the base: namespace URI).  In that scenario, when transforming with the monolithic XSLT, 
											this element would be in the base: namespace, and will cause Saxon to throw various errors since the non-namespaced children being combined below are in the empty namespace.  
											Saxon is require to output all the namespace nodes that are in scope for each element, and to have a default namespace of base: copied for an element that is in no namespace is an error.  -->
                            <nodesToCombine xmlns="">
                                <xsl:copy-of select="$updatedTree"/>
                                <!--  first the $updatedTree containing the newly combined siblings  -->
                                <xsl:copy-of select="$nodesToCombine/*/*[position() gt 2]"/>
                                <!--  remaining siblings to be combined  -->
                            </nodesToCombine>
                        </xsl:document>
                    </xsl:with-param>
                    <xsl:with-param name="combiningElements" as="xs:string*"
                        select="$combiningElements"/>
                    <!--  pass on combiningElements  -->
                </xsl:call-template>

            </xsl:when>
            <xsl:otherwise>
                <xsl:copy-of select="$updatedTree"/>
                <!--  all siblings combined, just output the newly combined tree   -->
            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>
    <!--  combined nested trees END  -->

    <!--  combineSiblingsOfSameName START  -->
    <xd:doc>
        <xd:desc>
            <xd:p>
                <xd:b>combineSiblingsOfSameName Named Template</xd:b>
            </xd:p>
            <xd:p>This named template is used to combine immediate siblings of the same name into a
                single target element (instead of multiple target elements of same name).</xd:p>
            <xd:p>Within the template of the first sibling, create the output element and
                apply-templates on child nodes of that element first. Then use for-each to change
                context to the next sibling and call this named template.</xd:p>
            <xd:p>Be sure to suppress elements of the same name that have preceding siblings with
                that name (elementXYX[ preceding-sibling::node()[1][ self::elementXYX ] ]).</xd:p>
        </xd:desc>
    </xd:doc>
    <xsl:template name="combineSiblingsOfSameName" as="item()*">
        <!--  this named template assumes the first sibling's attribute and nodes were already processed, so first call to this rule is the second immediate sibling   -->

        <!--  capture name of current element   -->
        <xsl:variable name="currentEleName" as="xs:string" select="name(.)"/>

        <!--  process child nodes; note attribute nodes are skipped in deference to the first sibling's attributes   -->
        <xsl:apply-templates select="node()"/>

        <!--  recursively process the next immediately following sibling node if it has the same name   -->
        <xsl:for-each select="following-sibling::node()[1][name() = $currentEleName]">
            <xsl:call-template name="combineSiblingsOfSameName"/>
        </xsl:for-each>

    </xsl:template>
    <!--  combineSiblingsOfSameName END  -->

    <!--  named template rules END  -->

    <!--  modal template rules START  -->

    <!--  combined nested trees mode START  -->
    <xd:doc>
        <xd:desc>
            <xd:p>
                <xd:b>combineTrees Processing Mode</xd:b>
            </xd:p>
            <xd:p>mode="combineTrees" is used in conjunction with the combineTrees named template to
                combine multiple siblings into a single element (see description for "combineTrees
                Named Template").</xd:p>
            <xd:p>For most nodes in the tree, this mode will simply copy itself to the output
                destination (equivalent to the identity template).</xd:p>
            <xd:p>However, if the current node is a location where a pair of siblng structures can
                be combined, the combining is done as part of this mode and processing
                continues.</xd:p>
        </xd:desc>
    </xd:doc>
    <xsl:template match="node()" mode="combineTrees">
        <!--  the combineTree mode is used to copy nodes at the same location in a sibling tree as following siblings in current location  -->
        <xsl:param name="matchingXPath" tunnel="yes" as="xs:string"/>
        <!--  the path to the last node containing text in the tree to be combined into  -->
        <xsl:param name="baseEleName" tunnel="yes" as="xs:string"/>
        <!--  base element name before the digit, such as 'lnv:TEXT-'  -->
        <xsl:param name="currentEleName" tunnel="yes" as="xs:string"/>
        <!--  element name of the base of the tree to be combined into  -->
        <xsl:param name="nextEleName" tunnel="yes" as="xs:string"/>
        <!--  element name of the base of the tree to be combined from  -->

        <xsl:variable name="currentXPath" as="xs:string">
            <!--  determine XPath of current node for later use  -->
            <xsl:call-template name="generateXPath"/>
        </xsl:variable>

        <xsl:copy>
            <!--  copy over current node and attributes to the combined tree  -->
            <xsl:copy-of select="@*"/>
            <xsl:apply-templates select="node()" mode="combineTrees"/>
            <!--  process child nodes to be output first, then determine if nodes from other tree need to be copied over as following siblings  -->

            <xsl:if test="$matchingXPath = $currentXPath">
                <!--  if processing the last text-containing node in the primary tree, then need to copy over remaining nodes in following tree as siblings  -->

                <xsl:variable name="currentXPathNoBrackets" as="xs:string">
                    <!--  create and save version of current XPath without the square brackets (predicates)  -->
                    <xsl:call-template name="generateXPath">
                        <xsl:with-param name="includeBrackets" as="xs:boolean" select="false()"/>
                    </xsl:call-template>
                </xsl:variable>

                <xsl:for-each select="/*/*[name() = $nextEleName]/descendant-or-self::*[text()][1]">
                    <!--  now change context over to the first text-containing node in the sibling tree (the one with base element name of $nextEleName)  -->
                    <xsl:for-each select="ancestor-or-self::*">
                        <!--  start up the ancestor-or-self axis until XPaths match.  Note this should end up at one of the elements identified in $combiningElements  -->
                        <xsl:variable name="altTreeXPath" as="xs:string">
                            <!--  capture the XPath to compare against current XPath; again no predicates  -->
                            <xsl:call-template name="generateXPath">
                                <xsl:with-param name="includeBrackets" as="xs:boolean"
                                    select="false()"/>
                            </xsl:call-template>
                        </xsl:variable>
                        <!--  since the base element names are different, need to only compare strings after those element names  -->
                        <xsl:if
                            test="substring-after($altTreeXPath, $nextEleName) = substring-after($currentXPathNoBrackets, $currentEleName)">
                            <xsl:copy-of select="*"/>
                            <!--  if the XPaths match, copy over the children.  Note current output destination is the same spot in primary tree   -->
                        </xsl:if>
                    </xsl:for-each>
                </xsl:for-each>

            </xsl:if>

        </xsl:copy>

        <!--  now need to check if there are nodes in sibling tree that need to get copied *after* current node.  Only check when XPath is the same, or starts with, the matching XPath (leading to last text-containing node in primary tree)  -->
        <xsl:if test="starts-with($matchingXPath, $currentXPath)">

            <xsl:variable name="currentXPathNoBrackets" as="xs:string">
                <!--  again, create and save version of current XPath without the square brackets (predicates)  -->
                <xsl:call-template name="generateXPath">
                    <xsl:with-param name="includeBrackets" as="xs:boolean" select="false()"/>
                </xsl:call-template>
            </xsl:variable>

            <xsl:for-each select="/*/*[name() = $nextEleName]/descendant-or-self::*[text()][1]">
                <!--  now change context just like before.  The processing below is same, except the copy-of will grab different nodes  -->
                <xsl:for-each select="ancestor-or-self::*">
                    <xsl:variable name="altTreeXPath" as="xs:string">
                        <xsl:call-template name="generateXPath">
                            <xsl:with-param name="includeBrackets" as="xs:boolean" select="false()"
                            />
                        </xsl:call-template>
                    </xsl:variable>
                    <xsl:if
                        test="substring-after($altTreeXPath, $nextEleName) = substring-after($currentXPathNoBrackets, $currentEleName)">
                        <!--  if the XPaths match, need to copy over the following siblings of the same node as in the output destination.  Just up to parent and copy child::* as long as not first one.  -->
                        <xsl:copy-of
                            select="../*[position() != 1][not(starts-with(name(), $baseEleName))]"/>
                    </xsl:if>
                </xsl:for-each>
            </xsl:for-each>

        </xsl:if>

    </xsl:template>
    <!--  combined nested trees mode END  -->

    <!--  default fixSourceNesting mode START  -->
    <xd:doc>
        <xd:desc>
            <xd:p>
                <xd:b>fixSourceNesting Processing Mode (default rule)</xd:b>
            </xd:p>
            <xd:p>mode="fixSourceNesting" for any node matching this rule will simply copy itself to
                the output destination (equivalent to the identity template).</xd:p>
            <xd:p>It does trap elements in the lndocmeta <xd:i class="xmlSource">source</xd:i>
                namespace and ensures they remain in the source namespace after copying.</xd:p>
        </xd:desc>
    </xd:doc>
    <xsl:template match="node()" mode="fixSourceNesting">
        <!--  the fixSourceNesting mode can be used to resolve issues such as p/lnvxe:text/lnvxe:note when, in the target, note and p are siblings  -->
        <!--  default for this mode is identity template, so first copy over current node and attributes  -->
        <xsl:choose>
            <xsl:when
                test="not(self::*) or (contains(name(), ':') and not(substring-before(name(), ':') = 'lndocmeta'))">

                <xsl:copy>
                    <xsl:copy-of select="@*"/>
                    <xsl:apply-templates select="node()" mode="fixSourceNesting"/>
                    <!--  process child nodes  -->
                </xsl:copy>

            </xsl:when>
            <xsl:otherwise>

                <xsl:variable name="nsURI" as="xs:string"
                    select="
                        if (substring-before(name(), ':') = 'lndocmeta') then
                            'http://www.lexis-nexis.com/lndocmeta'
                        else
                            ''"/>
                <xsl:variable name="eleName" as="xs:string"
                    select="
                        if (substring-before(name(), ':') = 'lndocmeta') then
                            local-name()
                        else
                            name()"/>

                <xsl:element name="{name()}" namespace="{$nsURI}">
                    <xsl:copy-of select="@*"/>
                    <xsl:apply-templates select="node()" mode="fixSourceNesting"/>
                    <!--  process child nodes  -->
                </xsl:element>

            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>
    <!--  default fixSourceNesting mode END  -->

    <!--  modal template rules END  -->

    <!--  functions START  -->

    <!--  lnf:trim Function START  -->
    <xd:doc>
        <xd:desc>
            <xd:p>
                <xd:b>lnf:trim Function</xd:b>
            </xd:p>
            <xd:p>Adapted from "functx:trim"
                (http://www.xsltfunctions.com/xsl/functx_trim.html)</xd:p>
            <xd:p>This function removes whitespace at the beginning and end of a string. Unlike the
                built-in normalize-space function, it only removes leading and trailing whitespace,
                not whitespace in the middle of the value. Whitespace is defined as it is in XML,
                namely as space, tab, carriage return and line feed characters. If $arg is the empty
                sequence, it returns a zero-length string.</xd:p>
        </xd:desc>
    </xd:doc>
    <xsl:function name="lnf:trim" as="xs:string">
        <xsl:param name="arg" as="xs:string?"/>

        <xsl:sequence select="replace(replace($arg, '\s+$', ''), '^\s+', '')"/>

    </xsl:function>
    <!--  lnf:trim Function END  -->

    <!--  replaceString START  -->
    <xd:doc>
        <xd:desc>
            <xd:p>
                <xd:b>lnf:replaceString Function</xd:b>
            </xd:p>
            <xd:p>This function was created to remove specific string segments from the VISF output
                as part of the MNCR to VISF code base.</xd:p>
            <xd:p>It will remove all occurrences of all string segments contained within $states
                from the input string $fileCodeInput.</xd:p>
        </xd:desc>
    </xd:doc>
    <xsl:function name="lnf:replaceString" as="xs:string">
        <xsl:param name="fileCodeInput" as="xs:string"/>
        <xsl:param name="states" as="xs:string*"/>

        <xsl:choose>
            <xsl:when
                test="
                    (for $s in $states
                    return
                        contains($fileCodeInput, $s))[.][1]">
                <xsl:variable name="fileCodeInputNew" as="xs:string*">
                    <xsl:for-each select="$states[contains($fileCodeInput, .)][1]">
                        <xsl:sequence select="substring-before($fileCodeInput, .)"/>
                        <xsl:sequence select="substring-after($fileCodeInput, .)"/>
                    </xsl:for-each>
                </xsl:variable>

                <xsl:sequence
                    select="lnf:replaceString(string-join($fileCodeInputNew, ''), $states)"/>

            </xsl:when>
            <xsl:otherwise>
                <xsl:sequence select="$fileCodeInput"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:function>
    <!--  replaceString END  -->

    <!-- titleCase START -->
    <xd:doc>
        <xd:desc>
            <xd:p>Function to return a string in Title Case. Currently configured to exclude 'and',
                'or'.</xd:p>
            <xd:p>Call using
                <![CDATA[<xsl:sequence select="string-join(for $x in tokenize($text,'\s') return lnf:titleCase($x),' ')"/>]]></xd:p>
        </xd:desc>
    </xd:doc>
    <!-- function copied from http://p2p.wrox.com/xslt/80938-title-case-string.html -->
    <xsl:function name="lnf:titleCase">
        <xsl:param name="s" as="xs:string"/>
        <xsl:choose>
            <!-- when lower case string is 'and', 'or' just output  -->
            <xsl:when test="lower-case($s) = ('and', 'or')">
                <xsl:value-of select="lower-case($s)"/>
            </xsl:when>
            <!-- when the string is in upper case the below would originally pass throug in all upper case; commenting -->
            <!--<xsl:when test="$s=upper-case($s)">
				<!-\-<xsl:value-of select="$s"/>-\->
			</xsl:when>-->
            <!-- otherwise convert the first char to upper case and subsequent chars to lower case  -->
            <xsl:otherwise>
                <xsl:value-of
                    select="concat(upper-case(substring($s, 1, 1)), lower-case(substring($s, 2)))"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:function>
    <!-- titleCase END -->
    <!-- stringToTitleCase START -->
    <xsl:function name="lnf:stringToTitleCase" as="xs:string">
        <xsl:param name="inputString" as="xs:string"/>
        <!--  input string of one or more words  -->
        <xsl:param name="keepAllLower" as="xs:string*"/>
        <!--  string sequence of words to keep as lowercase, such as the, or, and, for, of  -->

        <xsl:variable name="outputSequence" as="xs:string*">
            <xsl:for-each select="tokenize($inputString, '\s')">
                <xsl:choose>
                    <!-- when lower case string is any one of $keepAllLower, just output lower-case of it  -->
                    <xsl:when test="lower-case(.) = $keepAllLower">
                        <xsl:value-of select="lower-case(.)"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of
                            select="concat(upper-case(substring(., 1, 1)), lower-case(substring(., 2)))"
                        />
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:for-each>
        </xsl:variable>
        <xsl:sequence select="string-join($outputSequence, ' ')"/>
        <!--  string join the sequence with a space as the separator  -->

    </xsl:function>
    <!-- stringToTitleCase END -->

    <!--  removeSequenceOfStrings START  -->
    <xd:doc>
        <xd:desc>
            <xd:p>
                <xd:b>lnf:removeSequenceOfStrings Function</xd:b>
            </xd:p>
            <xd:p>This function was created to remove a set of substrings from an input string, if
                any of these strings exist in the input string</xd:p>
            <xd:p>$stringsToRemove is the input string sequence of *regex* items; the function will
                go through this sequence one by one and remove all occurrences of each item in this
                sequence.</xd:p>
            <xd:p>The removal can be case sensitive or case insensitive.</xd:p>
        </xd:desc>
    </xd:doc>
    <xsl:function name="lnf:removeSequenceOfStrings" as="xs:string">
        <xsl:param name="inputString" as="xs:string"/>
        <xsl:param name="stringsToRemove" as="xs:string*"/>
        <xsl:param name="caseInsensitive" as="xs:boolean"/>

        <xsl:choose>
            <xsl:when test="string-join($stringsToRemove, '') = ''">
                <xsl:sequence select="$inputString"/>
            </xsl:when>
            <xsl:when test="$stringsToRemove[1] = '' or $stringsToRemove[1] = ()">
                <xsl:sequence
                    select="lnf:removeSequenceOfStrings($inputString, remove($stringsToRemove, 1), $caseInsensitive)"
                />
            </xsl:when>
            <xsl:otherwise>
                <xsl:sequence
                    select="
                        lnf:removeSequenceOfStrings(replace($inputString, $stringsToRemove[1], '', if ($caseInsensitive) then
                            'i'
                        else
                            ''), remove($stringsToRemove, 1), $caseInsensitive)"
                />
            </xsl:otherwise>
        </xsl:choose>
    </xsl:function>
    <!--  removeSequenceOfStrings END  -->

    <!--  @SBy:  2016-09-20  ROM 1218 IRM Strategic:  add substringBeforeLast function  -->
    <!--   Original idea from Tomalak at stackoverflow, http://stackoverflow.com/questions/1119449/removing-the-last-characters-in-an-xslt-string/1119666#1119666  -->
    <!--  substringBeforeLast START  -->
    <xd:doc>
        <xd:desc>
            <xd:p>
                <xd:b>lnf:substringBeforeLast Function</xd:b>
            </xd:p>
            <xd:p>This function will return that part of an input string that appears before the
                final occurence of an input substring.</xd:p>
        </xd:desc>
    </xd:doc>
    <xsl:function name="lnf:substringBeforeLast" as="xs:string">
        <xsl:param name="inputString" as="xs:string"/>
        <xsl:param name="searchString" as="xs:string"/>

        <xsl:variable name="remString" as="xs:string"
            select="substring-after($inputString, $searchString)"/>

        <xsl:sequence
            select="
                concat(
                substring-before($inputString, $searchString),
                if (contains($remString, $searchString)) then
                    concat($searchString,
                    lnf:substringBeforeLast($remString, $searchString)
                    )
                else
                    '')"/>

    </xsl:function>
    <!--  substringBeforeLast END  -->

    <!--  @SBy:  2016-11-04  ROM 1218 IRM Strategic:  save the DOC-ID string logic for use in ref:cross-reference  -->
    <!--  createDocIdString START  -->
    <xd:doc>
        <xd:desc>
            <xd:p>
                <xd:b>lnf:createDocIdString Function</xd:b>
            </xd:p>
            <xd:p>This function will create the correct string for DOC-ID style links for certain
                conversions. For the Internal Revenue Manual as an example, where $legacy-filename =
                'IRSMNL', and input string is 'IRM 3.10.72', the output string will be
                'IRSMNL-3_10_72'.</xd:p>
        </xd:desc>
    </xd:doc>
    <xsl:function name="lnf:createDocIdString" as="xs:string">
        <xsl:param name="inputElement" as="element()"/>

        <xsl:variable name="inputString" as="xs:string"
            select="
                if ($inputElement/source_lnci:cite/@normcite != '') then
                    $inputElement/source_lnci:cite/@normcite
                else
                    if (starts-with(string($inputElement), 'IRM ')) then
                        substring-after(string($inputElement), 'IRM ')
                    else
                        string($inputElement)"/>
        <xsl:variable name="badCharacters" as="xs:string"
            select="translate($inputString, $acceptableID_Chars, '')"/>
        <xsl:variable name="normString" select="translate($inputString, $badCharacters, ' ')"/>
        <xsl:variable name="outputString"
            select="translate(normalize-space($normString), ' .', '__')"/>

        <xsl:sequence select="concat($legacy-filename, '-', $outputString)"/>

    </xsl:function>
    <!--  createDocIdString END  -->

    <!--  @SBy:  2017-05-25  ROCKET ReWrites:  function to return a string that is a valid value for attributes of type ID  -->
    <!--  createValidIDstring START  -->
    <xd:doc>
        <xd:desc>
            <xd:p>
                <xd:b>lnf:createValidIDstring Function</xd:b>
            </xd:p>
            <xd:p>Given an arbitrary input string, this function will return a string that is valid
                for attribute values of type ID. </xd:p>
        </xd:desc>
    </xd:doc>
    <xsl:function name="lnf:createValidIDstring" as="xs:string">
        <xsl:param name="inputString" as="xs:string"/>

        <xsl:variable name="badCharacters" as="xs:string"
            select="translate($inputString, $acceptableID_Chars, '')"/>
        <xsl:variable name="normString" select="translate($inputString, $badCharacters, '')"/>

        <xsl:sequence
            select="
                if (translate(substring($normString, 1, 1), $unallowedFirstCharAcceptableID_Chars, '') = '') then
                    concat('_', $normString)
                else
                    $normString"/>

    </xsl:function>
    <!--  createValidIDstring END  -->

    <!--  NOTE:  the next two functions can allow a transformation to not require sibling recursion moded rules such as mode="textEleRecurse".   However, this function does not apply templates and so does not
				work in the "target" space.  One must use this function and throw results to a variable, then apply templates on that variable to transform the nodes to target format.  Keep in mind that any processing
				of such a variable only has the variable plus descendants in scope.  So, for example, footnote processing that looks for matching node values in the entire source document tree will not actually
				be searching the entire tree anymore, just the tree defined by the variable.  In general, it is safest to use these functions when writing the entire document to a variable and then A-T on that variable.  -->

    <!--  @SBy:  2017-01-17  ROM 1218 IRM Strategic:	general function version of sibling recursion type grouping, for situations such as 
																					handling children of "p" in the source converting to p/text - p/blockquote - p/text etc. in the target  -->
    <!--  siblingBlockGrouping START  -->
    <xd:doc>
        <xd:desc>
            <xd:p>
                <xd:b>lnf:siblingBlockGrouping Function</xd:b>
            </xd:p>
            <xd:p>This function will sibling recursion type grouping for situations such as handling
                children of "p" in the source converting to p/text - p/blockquote - p/text etc. in
                the target; for that scenario, the $groupingContainer = 'text' (the text element),
                $blockElements = ('blockquote', 'table', etc), and $siblingNodes would contain the
                set of siblings that need to be split into groups of $groupingContainer elements
                broken up by $blockElements.</xd:p>
        </xd:desc>
    </xd:doc>
    <xsl:function name="lnf:siblingBlockGrouping" as="item()*">
        <xsl:param name="groupingContainer" as="xs:string"/>
        <!--  name of container element to group consecutive siblings under (typically the "text" element)   -->
        <xsl:param name="blockElements" as="xs:string*"/>
        <!--  list of element names (can be empty string) that cannot be grouped under $groupingContainer (typically table, blockquote, etc)   -->
        <xsl:param name="siblingNodes" as="element()"/>
        <!--  (remaining) sibling nodes (typically text() nodes and elements, can be instances of $groupingContainer too) to perform grouping on, all under a single element parent  -->

        <!--  save name of element parent  -->
        <xsl:variable name="siblingNodesParent" as="xs:string" select="name($siblingNodes)"/>

        <xsl:for-each select="$siblingNodes/node()[1]">
            <xsl:choose>
                <!--  if the first node is not an element, OR it is an element but there are no blockElements and it's not groupingContainer, or it's an element not in blockElements and it's not groupingContainer; then create container and move on   -->
                <xsl:when
                    test="not(self::*) or ($blockElements = '' and not(name() = $groupingContainer)) or not(name() = $blockElements or name() = $groupingContainer)">

                    <xsl:element name="{$groupingContainer}" namespace="">
                        <!--  create container   -->

                        <xsl:choose>
                            <xsl:when
                                test="$blockElements = '' or not(following-sibling::node()[name() = $blockElements or name() = $groupingContainer])">
                                <!--  no grouping required; just copy self and all following siblings to output, and no recurse   -->

                                <xsl:copy-of select="."/>
                                <xsl:copy-of select="following-sibling::node()"/>

                            </xsl:when>
                            <xsl:otherwise>
                                <xsl:for-each
                                    select="following-sibling::node()[name() = $blockElements or name() = $groupingContainer][1]">
                                    <!--  grouping required; change context to the first blocker (either a group container or block element) and then copy over alll preceding siblings; close container   -->

                                    <xsl:copy-of select="preceding-sibling::node()"/>

                                </xsl:for-each>
                            </xsl:otherwise>
                        </xsl:choose>

                    </xsl:element>

                    <!--  if grouping was required in prior section; change context to the first blocker again to copy over the blocker, and if necessary initiate recursive call   -->
                    <xsl:if
                        test="not($blockElements = '' or not(following-sibling::node()[name() = $blockElements or name() = $groupingContainer]))">

                        <xsl:for-each
                            select="following-sibling::node()[name() = $blockElements or name() = $groupingContainer][1]">

                            <!--  copy over the blocker or container   -->
                            <xsl:copy-of select="."/>

                            <!--  if there are following siblings, need to recurse   -->
                            <xsl:if test="following-sibling::node()">

                                <!--  update sibling list to be only the remaining following siblings   -->
                                <xsl:variable name="siblingNodesUpdated" as="element()">
                                    <xsl:element name="{$siblingNodesParent}">
                                        <xsl:copy-of select="following-sibling::node()"/>
                                    </xsl:element>
                                </xsl:variable>

                                <!--  recurse   -->
                                <xsl:sequence
                                    select="lnf:siblingBlockGrouping($groupingContainer, $blockElements, $siblingNodesUpdated)"/>

                            </xsl:if>

                        </xsl:for-each>

                    </xsl:if>

                </xsl:when>
                <!--  first node is an element, AND it is an element that is either in blockElements or in groupingContainer. This is the only other possibility, so using xsl:otherwise.  Copy myself over, and recurse    -->
                <!--xsl:when test=" name() eq $blockElements or name() eq $groupingContainer "-->
                <xsl:otherwise>

                    <!--  since we are a blocker or container, copy over myself   -->
                    <xsl:copy-of select="."/>

                    <!--  if there are following siblings, need to recurse   -->
                    <xsl:if test="following-sibling::node()">

                        <!--  update sibling list to be only the remaining following siblings   -->
                        <xsl:variable name="siblingNodesUpdated" as="element()">
                            <!-- JD: 2017-04-04: added namespace="" and copy-namespaces="no" after 
							getting error "XTDE0440: Cannot output a namespace node for the default namespace when the element is in no namespace" (source lnvxe:footnote with p child)-->
                            <xsl:element name="{$siblingNodesParent}" namespace="">
                                <xsl:copy-of select="following-sibling::node()" copy-namespaces="no"
                                />
                            </xsl:element>
                        </xsl:variable>

                        <!--  recurse   -->
                        <xsl:sequence
                            select="lnf:siblingBlockGrouping($groupingContainer, $blockElements, $siblingNodesUpdated)"/>

                    </xsl:if>

                </xsl:otherwise>
            </xsl:choose>
        </xsl:for-each>

    </xsl:function>
    <!--  siblingBlockGrouping END  -->

    <!--  @SBy:  2017-01-17  ROM 1218 IRM Strategic:	general function to pull child elements up to be intermingled with the parent.  For example,  
																					handling children note elements of "p" in the source converting to p then note then p then note etc.in the target  -->
    <!--  siblingToParentGrouping START  -->
    <xd:doc>
        <xd:desc>
            <xd:p>
                <xd:b>lnf:siblingToParentGrouping Function</xd:b>
            </xd:p>
            <xd:p>This function will pull child elements up to be intermingled with the parent, such
                as handling children lnvxe:note elements of "p" in the source converting to p then
                lnvxe:note then p then lnvxe:note etc.in the target; for that scenario, the
                $childElements = 'lnvxe:note' (the note element), $currentParent would contain the
                parent that had one or more $childElements elements needing to be pulled up to the
                parent level.</xd:p>
        </xd:desc>
    </xd:doc>
    <xsl:function name="lnf:siblingToParentGrouping" as="item()*">
        <xsl:param name="childElements" as="xs:string*"/>
        <!--  list of element names (such as lnvxe:note) that need to be pulled up and mingled with the parent   -->
        <xsl:param name="currentParent" as="element()"/>
        <!--  the current single parent that contains one or more nodes including $childElements  -->

        <!--  save name of element parent  -->
        <xsl:variable name="currentParentName" as="xs:string" select="name($currentParent)"/>

        <xsl:for-each select="$currentParent/node()[1]">
            <xsl:choose>
                <!--  if the first node is not an element, OR it is an element but there are no childElements, or it's an element not in childElements; then create currentParent and move on   -->
                <xsl:when
                    test="not(self::*) or ($childElements = '') or not(name() = $childElements)">

                    <xsl:choose>
                        <xsl:when test="contains($currentParentName, ':')">

                            <xsl:element name="{$currentParentName}">
                                <!--  create container   -->

                                <xsl:choose>
                                    <xsl:when
                                        test="$childElements = '' or not(following-sibling::node()[name() = $childElements])">
                                        <!--  no grouping required; just copy self and all following siblings to output, and no recurse   -->

                                        <xsl:copy-of select="." copy-namespaces="no"/>
                                        <xsl:copy-of select="following-sibling::node()"
                                            copy-namespaces="no"/>

                                    </xsl:when>
                                    <xsl:otherwise>
                                        <xsl:for-each
                                            select="following-sibling::node()[name() = $childElements][1]">
                                            <!--  grouping required; change context to the first childElements element and then copy over alll preceding siblings; close currentParent   -->

                                            <xsl:copy-of select="preceding-sibling::node()"
                                                copy-namespaces="no"/>

                                        </xsl:for-each>
                                    </xsl:otherwise>
                                </xsl:choose>

                            </xsl:element>

                        </xsl:when>
                        <xsl:otherwise>

                            <xsl:element name="{$currentParentName}" namespace="">
                                <!--  create container   -->

                                <xsl:choose>
                                    <xsl:when
                                        test="$childElements = '' or not(following-sibling::node()[name() = $childElements])">
                                        <!--  no grouping required; just copy self and all following siblings to output, and no recurse   -->

                                        <xsl:copy-of select="." copy-namespaces="no"/>
                                        <xsl:copy-of select="following-sibling::node()"
                                            copy-namespaces="no"/>

                                    </xsl:when>
                                    <xsl:otherwise>
                                        <xsl:for-each
                                            select="following-sibling::node()[name() = $childElements][1]">
                                            <!--  grouping required; change context to the first childElements element and then copy over alll preceding siblings; close currentParent   -->

                                            <xsl:copy-of select="preceding-sibling::node()"
                                                copy-namespaces="no"/>

                                        </xsl:for-each>
                                    </xsl:otherwise>
                                </xsl:choose>

                            </xsl:element>

                        </xsl:otherwise>
                    </xsl:choose>

                    <!--  if grouping was required in prior section; change context to the first childElements element again to copy over the childElements element, and if necessary initiate recursive call   -->
                    <xsl:if
                        test="not($childElements = '' or not(following-sibling::node()[name() = $childElements]))">

                        <xsl:for-each select="following-sibling::node()[name() = $childElements][1]">

                            <!--  copy over the childElements element   -->
                            <xsl:copy-of select="." copy-namespaces="no"/>

                            <!--  if there are following siblings, need to recurse   -->
                            <xsl:if test="following-sibling::node()">

                                <!--  update sibling list to be only the remaining following siblings   -->
                                <xsl:variable name="currentParentUpdated" as="element()">
                                    <xsl:element name="{$currentParentName}">
                                        <xsl:copy-of select="following-sibling::node()"
                                            copy-namespaces="no"/>
                                    </xsl:element>
                                </xsl:variable>

                                <!--  recurse   -->
                                <xsl:sequence
                                    select="lnf:siblingToParentGrouping($childElements, $currentParentUpdated)"/>

                            </xsl:if>

                        </xsl:for-each>

                    </xsl:if>

                </xsl:when>
                <!--  first node is an element, AND it is an element that is in childElements. This is the only other possibility, so using xsl:otherwise.  Copy myself over, and recurse    -->
                <!--xsl:when test=" name() eq $blockElements or name() eq $groupngContainer "-->
                <xsl:otherwise>

                    <!--  since we are a childElements element, copy over myself   -->
                    <xsl:copy-of select="." copy-namespaces="no"/>

                    <!--  if there are following siblings, need to recurse   -->
                    <xsl:if test="following-sibling::node()">

                        <!--  update sibling list to be only the remaining following siblings   -->
                        <xsl:variable name="currentParentUpdated" as="element()">
                            <xsl:element name="{$currentParentName}">
                                <xsl:copy-of select="following-sibling::node()" copy-namespaces="no"
                                />
                            </xsl:element>
                        </xsl:variable>

                        <!--  recurse   -->
                        <xsl:sequence
                            select="lnf:siblingToParentGrouping($childElements, $currentParentUpdated)"/>

                    </xsl:if>

                </xsl:otherwise>
            </xsl:choose>
        </xsl:for-each>

    </xsl:function>
    <!--  siblingToParentGrouping END  -->



    <!-- This template takes an element having @month, @day, or @year attributes and provides the provided attributes and their enhanced values back to the element. -->
    <!-- Much of the logic is designed to create a normalized date value of YYYY-MM-DD.   -->
    <!-- @month is tested for value between 1 and 12.  If other value exists, it outputs but does not create a normalized date. Leading zeros added if value is below 9. -->
    <!-- @day is tested for value between 1 and 31.  If other value exists, it outputs but does not create a normalized date. Leading zeros added if value is below 9. -->
    <!-- @year is tested for four characters.  By testing for current year value the template outputs a four digit year value when only provided with a two digit year value.  -->
    <!-- Some logic taken from DATE template in '/dataArch/XSLT/ContentArch/CRE-to-LA/modules/lnvxe/n=DATE.xsl' -->
    <xsl:template name="DATE_attributes">
        <xsl:param name="date"/>
        <xsl:variable name="dayValue" as="xs:integer">
            <xsl:choose>
                <xsl:when test="$date/date/@day">
                    <xsl:value-of select="xs:integer($date/date/@day)"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:text>0</xsl:text>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>
        <xsl:variable name="monthValue" as="xs:integer">
            <xsl:choose>
                <xsl:when test="$date/date/@month">
                    <xsl:value-of select="xs:integer($date/date/@month)"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:text>0</xsl:text>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>

        <xsl:variable name="monthValueString" as="xs:string"
            select="
                if ($monthValue lt 10 and $monthValue gt 0) then
                    concat('0', string($monthValue))
                else
                    string($monthValue)"/>

        <!-- 20170516:  MCJ:  Added default for $yearValue as was already done for $monthValue and $dayValue. -->
        <!-- <xsl:variable name="yearValue" as="xs:integer" select="xs:integer($date/date/@year)"/> -->
        <xsl:variable name="yearValue" as="xs:integer">
            <xsl:choose>
                <xsl:when test="$date/date/@year">
                    <xsl:value-of select="xs:integer($date/date/@year)"/>
                </xsl:when>
                <xsl:otherwise>0</xsl:otherwise>
            </xsl:choose>
        </xsl:variable>

        <xsl:variable name="current2digitYear" as="xs:integer"
            select="xs:integer(substring(string(current-date()), 3, 2))"/>
        <xsl:variable name="outputDay" as="xs:boolean"
            select="
                if ($dayValue gt 0 and $dayValue lt 32) then
                    true()
                else
                    false()"/>
        <xsl:variable name="outputMonth" as="xs:boolean"
            select="
                if ($monthValue gt 0 and $monthValue lt 13) then
                    true()
                else
                    false()"/>
        <xsl:variable name="outputYear" as="xs:boolean"
            select="
                if ($yearValue gt 0) then
                    true()
                else
                    false()"/>
        <xsl:variable name="dayNorm" as="xs:string"
            select="
                if ($dayValue lt 10) then
                    concat('0', string($dayValue))
                else
                    string($dayValue)"/>
        <xsl:variable name="yearNorm" as="xs:string"
            select="
                if ($yearValue lt 10) then
                    concat('200', string($yearValue))
                else
                    if ($yearValue le $current2digitYear) then
                        concat('20', string($yearValue))
                    else
                        if ($yearValue lt 100) then
                            concat('19', string($yearValue))
                        else
                            if ($yearValue lt 1000) then
                                concat('0', string($yearValue))
                            else
                                string($yearValue)"/>

        <xsl:if test="$outputDay and $outputMonth and $outputYear">
            <xsl:attribute name="day" select="$dayValue"/>
        </xsl:if>
        <xsl:if test="$outputMonth and $outputYear">
            <xsl:attribute name="month" select="$monthValueString"/>
        </xsl:if>
        <xsl:if test="$outputYear">
            <xsl:attribute name="year" select="$yearValue"/>
        </xsl:if>
        <xsl:choose>
            <xsl:when test="$streamID = 'NZ11'"/>
            <xsl:otherwise>
                <xsl:if test="$outputDay and $outputMonth and $outputYear and $yearValue lt 10000">
                    <xsl:attribute name="normdate"
                        select="concat($yearNorm, '-', $monthValueString, '-', $dayNorm)"/>
                </xsl:if>
            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>



    <!--  functions END  -->



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="Admindecisions_Namespaces">
        <title>Namespaces <lnpid>id-CA04-13409</lnpid></title>
        <body>
            <ul>
                <li>xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/"</li>
                <li>xmlns:admindecision="urn:x-lexisnexis:content:administrative-decision:sharedservices:1"</li>
                <li>xmlns:admindoc="urn:x-lexisnexis:content:administrative-document:sharedservices:1"</li>
                <li>xmlns:annot="http://www.lexisnexis.com/xmlschemas/content/shared/annotations/1/"</li>
                <li>xmlns:annotinfo="http://www.lexisnexis.com/xmlschemas/content/shared/annotations-info/1/"</li>
                <li>xmlns:casehist="http://www.lexisnexis.com/xmlschemas/content/legal/case-history/1/"</li>
                <li>xmlns:caseinfo="http://www.lexisnexis.com/xmlschemas/content/legal/case-information/1/"</li>
                <li>xmlns:casesum="http://www.lexisnexis.com/xmlschemas/content/legal/case-summary/1/"</li>
                <li>xmlns:cfi="http://www.lexisnexis.com/xmlschemas/content/shared/cite-finding-information/1/"</li>
                <li>xmlns:classify="http://www.lexisnexis.com/xmlschemas/content/shared/classification/1/"</li>
                <li>xmlns:contact="http://www.lexisnexis.com/xmlschemas/content/shared/contact/1/"</li>
                <li>xmlns:courtcase="http://www.lexisnexis.com/xmlschemas/content/legal/courtcase/1/"</li>
                <li>xmlns:dc="http://purl.org/dc/elements/1.1/"</li>
                <li>xmlns:dcterms="http://purl.org/dc/terms/"</li>
                <li>xmlns:decision="http://www.lexisnexis.com/xmlschemas/content/legal/decision/1/"</li>
                <li>xmlns:doc="http://www.lexisnexis.com/xmlschemas/content/shared/document-level-metadata/1/"</li>
                <li>xmlns:entity="http://www.lexisnexis.com/xmlschemas/content/shared/identified-entities/1/"</li>
                <li>xmlns:form="http://www.lexisnexis.com/xmlschemas/content/shared/form/1/"</li>
                <li>xmlns:globalentity="urn:x-lexisnexis:content:identified-entities:global:1"</li>
                <li>xmlns:guid="urn:x-lexisnexis:content:guid:global:1"</li>
                <li>xmlns:index="urn:x-lexisnexis:content:publicationindex:sharedservices:1"</li>
                <li>xmlns:jurisinfo="http://www.lexisnexis.com/xmlschemas/content/legal/jurisdiction-info/1/"</li>
                <li>xmlns:legis="http://www.lexisnexis.com/xmlschemas/content/legal/legislation/1/"</li>
                <li>xmlns:lnci="http://www.lexisnexis.com/xmlschemas/content/shared/citations/1/"</li>
                <li>xmlns:lndocmeta="http://www.lexisnexis.com/xmlschemas/content/shared/lndocmeta/1/"</li>
                <li>xmlns:lnmeta="http://www.lexisnexis.com/xmlschemas/content/shared/lexisnexis-metadata/1/"</li>
                <li>xmlns:lnsys="http://www.lexisnexis.com/xmlschemas/content/shared/lnsys/1/"</li>
                <li>xmlns:lntbl="http://www.lexisnexis.com/xmlschemas/content/shared/lexisnexis-table-extensions/1/"</li>
                <li>xmlns:location="http://www.lexisnexis.com/xmlschemas/content/shared/location/1/"</li>
                <li>xmlns:nitf="http://iptc.org/std/NITF/2006-10-18/"</li>
                <li>xmlns:person="http://www.lexisnexis.com/xmlschemas/content/shared/person/1/"</li>
                <li>xmlns:primlaw="http://www.lexisnexis.com/xmlschemas/content/legal/primarylaw/1/"</li>
                <li>xmlns:proc="http://www.lexisnexis.com/xmlschemas/content/shared/process-elements/1/"</li>
                <li>xmlns:pubinfo="http://www.lexisnexis.com/xmlschemas/content/shared/publication-info/1/"</li>
                <li>xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"</li>
                <li>xmlns:ref="http://www.lexisnexis.com/xmlschemas/content/shared/reference/1/"</li>
                <li>xmlns:rfc="http://www.lexisnexis.com/xmlschemas/content/legal/reason-for-citing/1/"</li>
                <li>xmlns:topic="urn:x-lexisnexis:content:topic:global:1"</li>
            </ul>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\Admindecisions_Namespaces.dita  -->
    <!--<xsl:message>Admindecisions_Namespaces.xsl requires manual development!</xsl:message>-->

    <xsl:variable name="lexisAdvanceNamespaces" as=" element() ">
        <lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:admindecision="urn:x-lexisnexis:content:administrative-decision:sharedservices:1"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:admindoc="urn:x-lexisnexis:content:administrative-document:sharedservices:1"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:annot="http://www.lexisnexis.com/xmlschemas/content/shared/annotations/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:annotinfo="http://www.lexisnexis.com/xmlschemas/content/shared/annotations-info/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:casehist="http://www.lexisnexis.com/xmlschemas/content/legal/case-history/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:caseinfo="http://www.lexisnexis.com/xmlschemas/content/legal/case-information/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:casesum="http://www.lexisnexis.com/xmlschemas/content/legal/case-summary/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:cfi="http://www.lexisnexis.com/xmlschemas/content/shared/cite-finding-information/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:classify="http://www.lexisnexis.com/xmlschemas/content/shared/classification/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:contact="http://www.lexisnexis.com/xmlschemas/content/shared/contact/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:courtcase="http://www.lexisnexis.com/xmlschemas/content/legal/courtcase/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:dc="http://purl.org/dc/elements/1.1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:dcterms="http://purl.org/dc/terms/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:decision="http://www.lexisnexis.com/xmlschemas/content/legal/decision/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:doc="http://www.lexisnexis.com/xmlschemas/content/shared/document-level-metadata/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:entity="http://www.lexisnexis.com/xmlschemas/content/shared/identified-entities/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:form="http://www.lexisnexis.com/xmlschemas/content/shared/form/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:globalentity="urn:x-lexisnexis:content:identified-entities:global:1"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:guid="urn:x-lexisnexis:content:guid:global:1"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:index="urn:x-lexisnexis:content:publicationindex:sharedservices:1"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:jurisinfo="http://www.lexisnexis.com/xmlschemas/content/legal/jurisdiction-info/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:legis="http://www.lexisnexis.com/xmlschemas/content/legal/legislation/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:lnci="http://www.lexisnexis.com/xmlschemas/content/shared/citations/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:lndocmeta="http://www.lexisnexis.com/xmlschemas/content/shared/lndocmeta/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:lnmeta="http://www.lexisnexis.com/xmlschemas/content/shared/lexisnexis-metadata/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:lnsys="http://www.lexisnexis.com/xmlschemas/content/shared/lnsys/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:lntbl="http://www.lexisnexis.com/xmlschemas/content/shared/lexisnexis-table-extensions/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:location="http://www.lexisnexis.com/xmlschemas/content/shared/location/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:nitf="http://iptc.org/std/NITF/2006-10-18/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:person="http://www.lexisnexis.com/xmlschemas/content/shared/person/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:primlaw="http://www.lexisnexis.com/xmlschemas/content/legal/primarylaw/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:proc="http://www.lexisnexis.com/xmlschemas/content/shared/process-elements/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:pubinfo="http://www.lexisnexis.com/xmlschemas/content/shared/publication-info/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:ref="http://www.lexisnexis.com/xmlschemas/content/shared/reference/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:rfc="http://www.lexisnexis.com/xmlschemas/content/legal/reason-for-citing/1/"</lexisAdvanceNamespaces>
            <lexisAdvanceNamespaces>xmlns:topic="urn:x-lexisnexis:content:topic:global:1"</lexisAdvanceNamespaces>
        </lexisAdvanceNamespaces>

    </xsl:variable>


    <xd:doc scope="stylesheet">
        <xd:desc>
            <xd:p><xd:b>Created on:</xd:b> May 10, 2017</xd:p>
            <xd:p><xd:b>Author:</xd:b> rohillvx</xd:p>
            <xd:p/>
        </xd:desc>
    </xd:doc>

    <xsl:variable name="docRelatedContent-TableCA01">
        <ext:references>
            <ext:reference primary-language="French" alternate-language="English"
                primary-citation="A.C.F. no" alternate-citation="F.C.J. No."/>
            <ext:reference primary-language="French" alternate-language="English"
                primary-citation="A.C.I. no" alternate-citation="T.C.J. No."/>
            <ext:reference primary-language="French" alternate-language="English"
                primary-citation="A.C.S. no" alternate-citation="S.C.J. No."/>
            <ext:reference primary-language="French" alternate-language="English"
                primary-citation="J.Q. no" alternate-citation="Q.J. No."/>
            <ext:reference primary-language="French" alternate-language="English"
                primary-citation="A.N.-B. no" alternate-citation="N.B.J. No."/>
            <ext:reference primary-language="French" alternate-language="English"
                primary-citation=" R.C. de l'É" alternate-citation="Ex. C.R."/>
            <ext:reference primary-language="French" alternate-language="English"
                primary-citation="R.C.F." alternate-citation="F.C.R."/>
            <ext:reference primary-language="French" alternate-language="English"
                primary-citation="C.F." alternate-citation="F.C."/>
            <ext:reference primary-language="French" alternate-language="English"
                primary-citation="R.C.S." alternate-citation="S.C.R."/>
            <ext:reference primary-language="French" alternate-language="English"
                primary-citation="C.S.C.R. no" alternate-citation="S.C.C.A. No."/>
            <ext:reference primary-language="French" alternate-language="English"
                primary-citation="A.C.A.C. no" alternate-citation="C.M.A.J. No."/>
            <ext:reference primary-language="English" alternate-language="French"
                primary-citation="C.M.A.J. No." alternate-citation="A.C.A.C. no"/>
            <ext:reference primary-language="English" alternate-language="French"
                primary-citation="Ex.C.R." alternate-citation=" R.C. de l'É"/>
            <ext:reference primary-language="English" alternate-language="French"
                primary-citation="F.C.J. No." alternate-citation="A.C.F. no"/>
            <ext:reference primary-language="English" alternate-language="French"
                primary-citation="F.C.R" alternate-citation="R.C.F."/>
            <ext:reference primary-language="English" alternate-language="French"
                primary-citation="F.C." alternate-citation="C.F."/>
            <ext:reference primary-language="English" alternate-language="French"
                primary-citation="Q.J. No." alternate-citation="J.Q. no"/>
            <ext:reference primary-language="English" alternate-language="French"
                primary-citation="N.B.J. No." alternate-citation="A.N.-B. no"/>
            <ext:reference primary-language="English" alternate-language="French"
                primary-citation="S.C.C.A. No." alternate-citation="C.S.C.R. no"/>
            <ext:reference primary-language="English" alternate-language="French"
                primary-citation="S.C.J. No." alternate-citation="A.C.S. no"/>
            <ext:reference primary-language="English" alternate-language="French"
                primary-citation="S.C.R." alternate-citation="R.C.S."/>
            <ext:reference primary-language="English" alternate-language="French"
                primary-citation="T.C.J. No." alternate-citation="A.C.I. no"/>
            <!--<ext:reference primary-language="" alternate-language="" primary-citation="N.J." alternate-citation=""/>
            <ext:reference primary-language="" alternate-language="" primary-citation="N.S.J." alternate-citation=""/>
            <ext:reference primary-language="" alternate-language="" primary-citation="Nu.J." alternate-citation=""/>
            <ext:reference primary-language="" alternate-language="" primary-citation="N.W.T.J." alternate-citation=""/>
            <ext:reference primary-language="" alternate-language="" primary-citation="O.J." alternate-citation=""/>
            <ext:reference primary-language="" alternate-language="" primary-citation="O.R." alternate-citation=""/>
            <ext:reference primary-language="" alternate-language="" primary-citation="P.E.I.J." alternate-citation=""/>
            <ext:reference primary-language="" alternate-language="" primary-citation="Ex. C.J." alternate-citation=""/>
            <ext:reference primary-language="" alternate-language="" primary-citation="S.J." alternate-citation=""/>
            <ext:reference primary-language="" alternate-language="" primary-citation="A.J." alternate-citation=""/>
            <ext:reference primary-language="" alternate-language="" primary-citation="B.C.J." alternate-citation=""/>
            <ext:reference primary-language="" alternate-language="" primary-citation="Y.J." alternate-citation=""/>
            <ext:reference primary-language="" alternate-language="" primary-citation="I.L.R." alternate-citation=""/>
            <ext:reference primary-language="" alternate-language="" primary-citation="C.N.L.R." alternate-citation=""/>
            <ext:reference primary-language="" alternate-language="" primary-citation="DTC" alternate-citation=""/>
            <ext:reference primary-language="" alternate-language="" primary-citation="Ex.C.J." alternate-citation=""/>
            <ext:reference primary-language="" alternate-language="" primary-citation="J.C.J." alternate-citation=""/>
            <ext:reference primary-language="" alternate-language="" primary-citation="UKPC" alternate-citation=""/>
            <ext:reference primary-language="" alternate-language="" primary-citation="M.J." alternate-citation=""/>-->
        </ext:references>
    </xsl:variable>

    <xsl:key name="KRefrencebyName" match="ext:reference" use="string(@primary-citation)"/>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="CourtOrder_Namespaces">
        <title>Namespaces <lnpid>id-AU07-19235</lnpid></title>
        <body>
            <ul>
                <li>xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/"</li>
                <li>xmlns:abstract="urn:x-lexisnexis:content:abstract:sharedservices:1"</li>
                <li>xmlns:admincode="http://www.lexisnexis.com/xmlschemas/content/legal/administrative-code/1/"</li>
                <li>xmlns:admindecision="urn:x-lexisnexis:content:administrative-decision:sharedservices:1"</li>
                <li>xmlns:admindoc="urn:x-lexisnexis:content:administrative-document:sharedservices:1"</li>
                <li>xmlns:annot="http://www.lexisnexis.com/xmlschemas/content/shared/annotations/1/"</li>
                <li>xmlns:annotinfo="http://www.lexisnexis.com/xmlschemas/content/shared/annotations-info/1/"</li>
                <li>xmlns:article="urn:x-lexisnexis:content:article:sharedservices:1"</li>
                <li>xmlns:base="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/"</li>
                <li>xmlns:biblio="urn:x-lexisnexis:content:bibliography:sharedservices:1"</li>
                <li>xmlns:billhist="urn:x-lexisnexis:content:billhistory:sharedservices:1"</li>
                <li>xmlns:billtrack="urn:x-lexisnexis:content:billtracking:1"</li>
                <li>xmlns:casedigest="http://www.lexisnexis.com/xmlschemas/content/legal/case-digest/1/"</li>
                <li>xmlns:casehist="http://www.lexisnexis.com/xmlschemas/content/legal/case-history/1/"</li>
                <li>xmlns:caseinfo="http://www.lexisnexis.com/xmlschemas/content/legal/case-information/1/"</li>
                <li>xmlns:casesum="http://www.lexisnexis.com/xmlschemas/content/legal/case-summary/1/"</li>
                <li>xmlns:cfi="http://www.lexisnexis.com/xmlschemas/content/shared/cite-finding-information/1/"</li>
                <li>xmlns:classify="http://www.lexisnexis.com/xmlschemas/content/shared/classification/1/"</li>
                <li>xmlns:compcase="urn:x-lexisnexis:content:compositecourtcase:sharedservices:1"</li>
                <li>xmlns:const="http://www.lexisnexis.com/xmlschemas/content/legal/constitution/1/"</li>
                <li>xmlns:contact="http://www.lexisnexis.com/xmlschemas/content/shared/contact/1/"</li>
                <li>xmlns:courtcase="http://www.lexisnexis.com/xmlschemas/content/legal/courtcase/1/"</li>
                <li>xmlns:courtfiling="http://www.lexisnexis.com/xmlschemas/content/legal/courtfiling/1/"</li>
                <li>xmlns:courtorder="urn:x-lexisnexis:content:courtorder:sharedservices:1"</li>
                <li>xmlns:courtrule="http://www.lexisnexis.com/xmlschemas/content/legal/courtrule/1/"</li>
                <li>xmlns:cttr="urn:x-lexisnexis:content:citator:sharedservices:1"</li>
                <li>xmlns:currencystatement="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/currencystatement"</li>
                <li>xmlns:dc="http://purl.org/dc/elements/1.1/"</li>
                <li>xmlns:dcterms="http://purl.org/dc/terms/"</li>
                <li>xmlns:decision="http://www.lexisnexis.com/xmlschemas/content/legal/decision/1/"</li>
                <li>xmlns:dict="urn:x-lexisnexis:content:dict:sharedservices:1"</li>
                <li>xmlns:directory="urn:x-lexisnexis:content:directory:sharedservices:1"</li>
                <li>xmlns:doc="http://www.lexisnexis.com/xmlschemas/content/shared/document-level-metadata/1/"</li>
                <li>xmlns:entity="http://www.lexisnexis.com/xmlschemas/content/shared/identified-entities/1/"</li>
                <li>xmlns:form="http://www.lexisnexis.com/xmlschemas/content/shared/form/1/"</li>
                <li>xmlns:funddoc="urn:x-lexisnexis:content:fundamentallegaldocument:sharedservices:1"</li>
                <li>xmlns:globalentity="urn:x-lexisnexis:content:identified-entities:global:1"</li>
                <li>xmlns:guid="urn:x-lexisnexis:content:guid:global:1"</li>
                <li>xmlns:index="urn:x-lexisnexis:content:publicationindex:sharedservices:1"</li>
                <li>xmlns:jurisinfo="http://www.lexisnexis.com/xmlschemas/content/legal/jurisdiction-info/1/"</li>
                <li>xmlns:legis="http://www.lexisnexis.com/xmlschemas/content/legal/legislation/1/"</li>
                <li>xmlns:legishist="http://www.lexisnexis.com/xmlschemas/content/legal/legislation-history/1/"</li>
                <li>xmlns:legisinfo="http://www.lexisnexis.com/xmlschemas/content/legal/legislation-info/1/"</li>
                <li>xmlns:lnci="http://www.lexisnexis.com/xmlschemas/content/shared/citations/1/"</li>
                <li>xmlns:lndocmeta="http://www.lexisnexis.com/xmlschemas/content/shared/lndocmeta/1/"</li>
                <li>xmlns:lnmeta="http://www.lexisnexis.com/xmlschemas/content/shared/lexisnexis-metadata/1/"</li>
                <li>xmlns:lnsys="http://www.lexisnexis.com/xmlschemas/content/shared/lnsys/1/"</li>
                <li>xmlns:lntbl="http://www.lexisnexis.com/xmlschemas/content/shared/lexisnexis-table-extensions/1/"</li>
                <li>xmlns:location="http://www.lexisnexis.com/xmlschemas/content/shared/location/1/"</li>
                <li>xmlns:lpa="urn:x-lexisnexis:content:parameter:lexispracticeadvisor:1"</li>
                <li>xmlns:navaid="urn:x-lexisnexis:content:navigationaid:sharedservices:1"</li>
                <li>xmlns:newsitem="http://www.lexisnexis.com/xmlschemas/content/news/newsitem/1/"</li>
                <li>xmlns:nitf="http://iptc.org/std/NITF/2006-10-18/"</li>
                <li>xmlns:org="urn:x-lexisnexis:content:organization:sharedservices:1"</li>
                <li>xmlns:person="http://www.lexisnexis.com/xmlschemas/content/shared/person/1/"</li>
                <li>xmlns:primlaw="http://www.lexisnexis.com/xmlschemas/content/legal/primarylaw/1/"</li>
                <li>xmlns:primlawhist="http://www.lexisnexis.com/xmlschemas/content/legal/primarylaw-history/1/"</li>
                <li>xmlns:primlawinfo="http://www.lexisnexis.com/xmlschemas/content/legal/primarylaw-info/1/"</li>
                <li>xmlns:proc="http://www.lexisnexis.com/xmlschemas/content/shared/process-elements/1/"</li>
                <li>xmlns:pubfm="http://www.lexisnexis.com/xmlschemas/content/shared/publication-front-matter/1/"</li>
                <li>xmlns:pubinfo="http://www.lexisnexis.com/xmlschemas/content/shared/publication-info/1/"</li>
                <li>xmlns:pubup="http://www.lexisnexis.com/xmlschemas/content/shared/publication-update/1/"</li>
                <li>xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"</li>
                <li>xmlns:ref="http://www.lexisnexis.com/xmlschemas/content/shared/reference/1/"</li>
                <li>xmlns:register="http://www.lexisnexis.com/xmlschemas/content/legal/register/1/"</li>
                <li>xmlns:registerinfo="http://www.lexisnexis.com/xmlschemas/content/legal/register-info/1/"</li>
                <li>xmlns:regulation="urn:x-lexisnexis:content:regulation:sharedservices:1"</li>
                <li>xmlns:rfc="http://www.lexisnexis.com/xmlschemas/content/legal/reason-for-citing/1/"</li>
                <li>xmlns:seclaw="http://www.lexisnexis.com/xmlschemas/content/legal/secondary-law/1/"</li>
                <li>xmlns:statcode="http://www.lexisnexis.com/xmlschemas/content/legal/statutorycode/1/"</li>
                <li>xmlns:tei="http://www.tei-c.org/ns/1.0/"</li>
                <li>xmlns:topic="urn:x-lexisnexis:content:topic:global:1"</li>
                <li>xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</li>
            </ul>
        </body>
    </dita:topic>

    <xsl:variable name="lexisAdvNamespaces" as="element()">
        <lexisAdvNamepaces>
            <lexisAdvNamespace>xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:abstract="urn:x-lexisnexis:content:abstract:sharedservices:1"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:admincode="http://www.lexisnexis.com/xmlschemas/content/legal/administrative-code/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:admindecision="urn:x-lexisnexis:content:administrative-decision:sharedservices:1"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:admindoc="urn:x-lexisnexis:content:administrative-document:sharedservices:1"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:annot="http://www.lexisnexis.com/xmlschemas/content/shared/annotations/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:annotinfo="http://www.lexisnexis.com/xmlschemas/content/shared/annotations-info/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:article="urn:x-lexisnexis:content:article:sharedservices:1"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:base="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:biblio="urn:x-lexisnexis:content:bibliography:sharedservices:1"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:billhist="urn:x-lexisnexis:content:billhistory:sharedservices:1"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:billtrack="urn:x-lexisnexis:content:billtracking:1"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:casedigest="http://www.lexisnexis.com/xmlschemas/content/legal/case-digest/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:casehist="http://www.lexisnexis.com/xmlschemas/content/legal/case-history/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:caseinfo="http://www.lexisnexis.com/xmlschemas/content/legal/case-information/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:casesum="http://www.lexisnexis.com/xmlschemas/content/legal/case-summary/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:cfi="http://www.lexisnexis.com/xmlschemas/content/shared/cite-finding-information/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:classify="http://www.lexisnexis.com/xmlschemas/content/shared/classification/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:compcase="urn:x-lexisnexis:content:compositecourtcase:sharedservices:1"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:const="http://www.lexisnexis.com/xmlschemas/content/legal/constitution/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:contact="http://www.lexisnexis.com/xmlschemas/content/shared/contact/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:courtcase="http://www.lexisnexis.com/xmlschemas/content/legal/courtcase/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:courtfiling="http://www.lexisnexis.com/xmlschemas/content/legal/courtfiling/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:courtorder="urn:x-lexisnexis:content:courtorder:sharedservices:1"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:courtrule="http://www.lexisnexis.com/xmlschemas/content/legal/courtrule/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:cttr="urn:x-lexisnexis:content:citator:sharedservices:1"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:currencystatement="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/currencystatement"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:dc="http://purl.org/dc/elements/1.1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:dcterms="http://purl.org/dc/terms/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:decision="http://www.lexisnexis.com/xmlschemas/content/legal/decision/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:dict="urn:x-lexisnexis:content:dict:sharedservices:1"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:directory="urn:x-lexisnexis:content:directory:sharedservices:1"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:doc="http://www.lexisnexis.com/xmlschemas/content/shared/document-level-metadata/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:entity="http://www.lexisnexis.com/xmlschemas/content/shared/identified-entities/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:form="http://www.lexisnexis.com/xmlschemas/content/shared/form/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:funddoc="urn:x-lexisnexis:content:fundamentallegaldocument:sharedservices:1"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:globalentity="urn:x-lexisnexis:content:identified-entities:global:1"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:guid="urn:x-lexisnexis:content:guid:global:1"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:index="urn:x-lexisnexis:content:publicationindex:sharedservices:1"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:jurisinfo="http://www.lexisnexis.com/xmlschemas/content/legal/jurisdiction-info/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:legis="http://www.lexisnexis.com/xmlschemas/content/legal/legislation/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:legishist="http://www.lexisnexis.com/xmlschemas/content/legal/legislation-history/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:legisinfo="http://www.lexisnexis.com/xmlschemas/content/legal/legislation-info/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:lnci="http://www.lexisnexis.com/xmlschemas/content/shared/citations/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:lndocmeta="http://www.lexisnexis.com/xmlschemas/content/shared/lndocmeta/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:lnmeta="http://www.lexisnexis.com/xmlschemas/content/shared/lexisnexis-metadata/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:lnsys="http://www.lexisnexis.com/xmlschemas/content/shared/lnsys/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:lntbl="http://www.lexisnexis.com/xmlschemas/content/shared/lexisnexis-table-extensions/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:location="http://www.lexisnexis.com/xmlschemas/content/shared/location/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:lpa="urn:x-lexisnexis:content:parameter:lexispracticeadvisor:1"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:navaid="urn:x-lexisnexis:content:navigationaid:sharedservices:1"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:newsitem="http://www.lexisnexis.com/xmlschemas/content/news/newsitem/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:nitf="http://iptc.org/std/NITF/2006-10-18/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:org="urn:x-lexisnexis:content:organization:sharedservices:1"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:person="http://www.lexisnexis.com/xmlschemas/content/shared/person/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:primlaw="http://www.lexisnexis.com/xmlschemas/content/legal/primarylaw/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:primlawhist="http://www.lexisnexis.com/xmlschemas/content/legal/primarylaw-history/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:primlawinfo="http://www.lexisnexis.com/xmlschemas/content/legal/primarylaw-info/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:proc="http://www.lexisnexis.com/xmlschemas/content/shared/process-elements/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:pubfm="http://www.lexisnexis.com/xmlschemas/content/shared/publication-front-matter/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:pubinfo="http://www.lexisnexis.com/xmlschemas/content/shared/publication-info/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:pubup="http://www.lexisnexis.com/xmlschemas/content/shared/publication-update/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:ref="http://www.lexisnexis.com/xmlschemas/content/shared/reference/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:register="http://www.lexisnexis.com/xmlschemas/content/legal/register/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:registerinfo="http://www.lexisnexis.com/xmlschemas/content/legal/register-info/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:regulation="urn:x-lexisnexis:content:regulation:sharedservices:1"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:rfc="http://www.lexisnexis.com/xmlschemas/content/legal/reason-for-citing/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:seclaw="http://www.lexisnexis.com/xmlschemas/content/legal/secondary-law/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:statcode="http://www.lexisnexis.com/xmlschemas/content/legal/statutorycode/1/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:tei="http://www.tei-c.org/ns/1.0/"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:topic="urn:x-lexisnexis:content:topic:global:1"</lexisAdvNamespace>
            <lexisAdvNamespace>xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</lexisAdvNamespace>
        </lexisAdvNamepaces>
    </xsl:variable>

    <xsl:template name="generateNSGlobalBindings">
        <xsl:for-each select="$lexisAdvNamespaces/*">
            <xsl:sort/>
            <xsl:namespace name="{substring-after(substring-before(., '='), ':')}"
                select="substring-after(translate(., '&#034;', ''), '=')"/>
        </xsl:for-each>
    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Admindecisions_Introduction">
        <title>Introduction <lnpid>id-CA04-13408</lnpid></title>

        <body>
            <p>This Conversion Instruction describes the conversion of Rosetta CASEDOC DTD to
                Admindoc 3.10 PROD schema in the document.</p>

            <p>Administrative Decisions are identified using the root element
                    <sourcexml>CASEDOC</sourcexml> with attribute
                <sourcexml>@type=”fulltext”</sourcexml> and also "FOLDER NAME" i.e.
                "CA_Boards_Tribunals".</p>

            <p><sourcexml>CASEDOC</sourcexml> becomes <targetxml>admindoc:admindoc</targetxml>. Its
                a root element for Administrative Decisions. The source attribute is:
                    <sourcexml>@type</sourcexml> becomes <targetxml>@admindoctype</targetxml> with
                value set as <b>administrative-decision</b>. </p>

            <note>The attribute <sourcexml>@searchtype</sourcexml> will be suppressed from the
                conversion except citation markup.</note>

            <pre>

&lt;CASEDOC type="fulltext"&gt;
        ...
        &lt;docinfo:doc-lang lang="en"/&gt;
        &lt;docinfo:doc-country iso-cc="CA"/&gt;
        ...
&lt;/CASEDOC&gt;
<b>Becomes</b>

&lt;admindoc:admindoc xml:lang="en-CA" type="administrative-decision"&gt;
      
      &lt;admindoc:head&gt;...&lt;/admindoc:head&gt;

      &lt;admindoc:body&gt;...&lt;/admindoc:body&gt;

      &lt;doc:metadata&gt;...&lt;/doc:metadata&gt;
      
&lt;/admindoc:admindoc&gt;
</pre>

            <p><targetxml>admindoc:head</targetxml>, <targetxml>admindoc:body</targetxml>, and
                    <targetxml>doc:metadata</targetxml> are created as required children of
                    <targetxml>admindoc:admindoc</targetxml></p>

            <section>
                <title>Note:</title>
                <p>Source elements and attributes are highlighted like this:
                        <sourcexml>SOURCEXML</sourcexml></p>
                <p>Target elements and attributes are highlighted like this:
                        <targetxml>TARGETXML</targetxml></p>
                <p>Copy source attributes to target attributes unless otherwise specified.</p>
                <p>Every example is represented like "EXAMPLE" in all the dita's and is captured
                    under <pre>pre</pre> tag.</p>
            </section>
        </body>

    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\Admindecisions_Introduction.dita  -->
    <!--<xsl:message>Admindecisions_Introduction.xsl requires manual development!</xsl:message>-->
    <xsl:param name="outputSchemaLoc"
        select="'urn:x-lexisnexis:content:administrative-document:sharedservices:1 sch_admindoc.xsd'"/>

    <!-- map  CA04 Rosetta CASEDOC to LexAdv Admindoc  -->
    <xsl:output indent="no" method="xml"/>
    <xsl:key name="idTypeValue" match="*[@id]" use="@id"/>
    <xsl:key name="idTypeValue" match="*[@ID]" use="@ID"/>
    <xsl:key name="idTypeValue" match="footnote" use="@fntoken"/>
    <xsl:key name="idTypeValue" match="fnr" use="@fnrtoken"/>
    <xsl:key name="fnr-footnote-tokens" match="fnr" use="@fntoken"/>

    <xsl:variable name="streamID" as="xs:string" select="'CA04'"/>
    <xsl:param name="dpsi" as="xs:string" select="'From LBU Manifest File'"/>
    <xsl:param name="smi" as="xs:string" select="'From LBU Manifest File'"/>

    <xsl:param name="inlineobjBoilerplateFiles"/>
    <xsl:param name="inlineobjFilesToSuppress"
        select="('1.gif', '2.gif', '3.gif', '4.gif', '5.gif', 'IconSignalPositive.gif', 'IconSignalNegative.gif', 'IconSignalNeutral.gif', 'IconSignalPossibleNegative.gif', 'IconSignalCiteInfoOnly.gif', 'cbcc.gif', 'leg1.gif', 'mb.gif', 'au_repealed.gif', 'au_exclaim.gif', '1.png', '2.png', '3.png', '4.png', '5.png', 'IconSignalPositive.png', 'IconSignalNegative.png', 'IconSignalNeutral.png', 'IconSignalPossibleNegative.png', 'IconSignalCiteInfoOnly.png', 'cbcc.png', 'leg1.png', 'mb.png', 'au_repealed.png', 'au_exclaim.png')"/>

    <xsl:template match="CASEDOC">


        <admindoc:admindoc>
            <xsl:call-template name="generateNSGlobalBindings"/>

            <xsl:attribute name="xsi:schemaLocation" select="$outputSchemaLoc"/>
            <xsl:call-template name="xml_lang"/>
            <xsl:apply-templates select="@*"/>
            <admindoc:head>
                <xsl:apply-templates select="case:body/case:headnote/case:info[1]"/>
                <xsl:apply-templates select="case:body/case:headnote/case:priorhist"/>
                <xsl:apply-templates
                    select="case:body/case:headnote/case:decisionsummary | /CASEDOC/case:body/case:headnote/catchwordgrp | /CASEDOC/case:body/case:headnote/case:references"
                />
            </admindoc:head>


            <admindoc:body>
                <xsl:apply-templates
                    select="case:body/case:headnote/case:info/case:constituents | case:body/case:content"
                />
            </admindoc:body>

            <doc:metadata>
                <xsl:apply-templates select="docinfo"/>
            </doc:metadata>
        </admindoc:admindoc>
    </xsl:template>

    <xsl:template match="CASEDOC/@type">
        <xsl:attribute name="admindoctype">
            <xsl:text>administrative-decision</xsl:text>
        </xsl:attribute>
    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="common_target_xml.lang">
        <title>
            <sourcexml>docinfo:doc-lang</sourcexml> and <sourcexml>docinfo:doc-country</sourcexml>
            to <targetxml>@xml:lang</targetxml> and <targetxml>@xml:ID</targetxml>
            <lnpid>id-CCCC-10294</lnpid>
        </title>
        <body>
            <section>
                <title>xml:lang Instructions</title>
                <p>The combination of <sourcexml>docinfo/docinfo:doc-lang[@lang]</sourcexml> and
                        <sourcexml>docinfo/docinfo:doc-country[@iso-cc]</sourcexml> becomes
                        <targetxml>{target.root.element}[@xml:lang]</targetxml>
                </p>
            </section>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;docinfo:doc-lang lang="en"/&gt; &lt;docinfo:doc-country
                    iso-cc="NZ"/&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;{target.root.elm} xml:lang="en-NZ" ...&gt; </codeblock>
            </example>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;docinfo:doc-lang lang="en"/&gt; &lt;docinfo:doc-country
                    iso-cc="GB"/&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;{target.root.elm} xml:lang="en-GB" ...&gt; </codeblock>
            </example>

            <section>
                <title>xml:id Instructions</title>
                <p>The attribute <targetxml>xml:id</targetxml> is an W3C standard with a datatype of
                    "ID". Outlined below are some of the cases where the source ID values need to be
                    adjusted to conform to the <targetxml>xml:id</targetxml> standard:</p>
            </section>

            <example>
                <title>Colon ":" in ID value</title>
                <p> When a colon is found within an XML ID replace the colon ":" with an underscore
                    "_" as shown below:</p>
                <codeblock> &lt;level
                    id="NZSTATUTES_ACTS-A4.SGM_PARA-1925A41:1908A96-EDITORIAL-NOTES"
                    leveltype="comm.chap"&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;primlaw:level
                    id="NZSTATUTES_ACTS-A4.SGM-PARA-1925A41_1908A96-EDITORIAL-NOTES"
                    leveltype="chapter"&gt; </codeblock>
            </example>

            <example>
                <title>ID value begins with number</title>
                <p>When attribute XML ID value begins with number, then add an underscore "_" as
                    shown below:</p>
                <codeblock> &lt;level id="475:B005_V2:H1" leveltype="chapter" subdoc="false"
                    toc-caption="PART III THE ADMINISTRATION OF ASSETS"&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;seclaw:level xml:id="_475_B005_V2_H1" leveltype="chapter"
                    includeintoc="false" alternatetoccaption="PART III THE ADMINISTRATION OF
                    ASSETS"&gt; </codeblock>
            </example>

            <note>
                <p>The restrictions and required modifications for <targetxml>xml:id</targetxml>
                    also apply to the following situations:</p>
                <ul>
                    <li>The mapping of <sourcexml>refpt/@id</sourcexml> to
                            <targetxml>ref:anchor/@id</targetxml>
                    </li>
                    <li>The mapping of <sourcexml>footnote/@fntoken</sourcexml> to
                            <targetxml>footnote/ref:anchor/@id</targetxml>
                    </li>
                    <li>The mapping <sourcexml>fnr/@fnrtoken</sourcexml> to
                            <targetxml>footnote-ref/ref:anchor/@id</targetxml>
                    </li>
                    <li>The mapping of <sourcexml>fnr/@fntoken</sourcexml> to
                            <targetxml>foonote-ref/@anchoridref</targetxml>
                    </li>
                </ul>
            </note>

            <section>
                <title>Changes</title>
                <p>2013-07-16: <ph id="change_20130716_SK">Instruction narrative edited for
                        language; no changes to mappings, no impact to stylesheets.</ph>
                </p>
                <p>2013-04-19: <ph id="change_20130419_DSF">Added note about applicability of
                        restrictions and required modifications for <targetxml>xml:id</targetxml> to
                        other scenarios.</ph>
                </p>
                <p>2012-12-13: Instruction and example update where "ID value begins with
                    number".</p>
                <p>2012-10-05: Example added for UK content.</p>
                <p>2012-09-27: Added information for the handling of XML:ID</p>
                <p>2012-05-23: Added information for the handling of XML:ID</p>
                <p>2011-12-15: Created.</p>
            </section>
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_docinfo.doc-lang-and-doc-country-LxAdv-ROOT_xml.lang.dita  -->

    <!-- WPK: this doc-country template is correct and tested -->
    <!--<xsl:template name="parse_id">
		<!-\- This template returns valid ID data type value.  -\->
		<xsl:param name="attr_value" select="."/>
		<xsl:if test="contains('0123456789', substring($attr_value, 1, 1))">
			<xsl:text>_</xsl:text>
		</xsl:if>
		<xsl:value-of select="translate($attr_value, ':', '_')"/>
	</xsl:template>-->

    <!-- WPK: this template is correct and tested -->
    <!--<xsl:template match="@id">
		<!-\- This template creates @xml:id target from @id source.  For any non-specific cases of @id.
                    For specific other use cases of @id, use more specific match, such as "refpt/@id".  -\->
		<xsl:attribute name="xml:id">
			<xsl:call-template name="parse_id">
				<xsl:with-param name="attr_value" select="."/>
			</xsl:call-template>
		</xsl:attribute>
	</xsl:template>-->

    <!-- Vikas Rohilla : Updated the template Removed the double slash	-->

    <!-- 2017-10-04 - MDS:  This should not be used.  Instead use the xml_lang named template -->
    <!--	<xsl:template name="xml_lang_HK">
		<!-\- This template creates @xml:lang from doc-lang and doc-country only for HK stream-\->
		<xsl:attribute name="xml:lang" select="concat(docinfo/docinfo:doc-lang/@lang, '-', docinfo/docinfo:doc-country/@iso-cc)"/>
	</xsl:template>-->

    <!-- WPK: this doc-lang template is correct and tested -->
    <xsl:template match="docinfo:doc-lang/@lang">
        <xsl:value-of select="."/>
    </xsl:template>

    <!-- WPK: this doc-country template is correct and tested -->
    <xsl:template match="docinfo:doc-country/@iso-cc">
        <xsl:value-of select="."/>
    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="common_target_xml_char_ent">
        <title><sourcexml>XML Character Entities</sourcexml> to <targetxml>Unicode code
                points</targetxml>
            <lnpid>id-CCCC-10489</lnpid></title>
        <body>
            <section>
                <title>Instructions</title>
                <p>Throughout these instructions, XML character entities are used in both the source
                    and target examples to ensure they are easily viewable in a variety of formats.
                    However, please keep in mind that <b><u>all XML character entities in the source
                            files must be converted to Unicode code points in the target
                        files.</u></b></p>
                <note>
                    <p>Certain XML character entities will be interpreted by the ‘browser’ or
                        ‘Database’ as code, rather than literal (Unicode exact) character.
                        Therefore, we should not convert certain xml character entities to Unicode
                        character. Refer the below table for your reference:</p>
                    <table id="table_oml_cei_cl">
                        <tgroup cols="4">
                            <tbody>
                                <row>
                                    <entry align="center">
                                        <b>XML Character Entity</b>
                                    </entry>
                                    <entry align="center">
                                        <b>Character name</b>
                                    </entry>
                                    <entry align="center">
                                        <b>Transformation Output</b>
                                    </entry>
                                    <entry align="left">
                                        <b> Remarks </b>
                                    </entry>
                                </row>
                                <row>
                                    <entry align="left"> &amp;lt; </entry>
                                    <entry align="left"> Less-Than Sign </entry>
                                    <entry align="left"> &amp;lt; </entry>
                                    <entry/>
                                </row>
                                <row>
                                    <entry align="left"> &amp;gt; </entry>
                                    <entry align="left"> Greater-Than Sign </entry>
                                    <entry align="left"> &amp;gt; </entry>
                                    <entry/>
                                </row>
                                <row>
                                    <entry align="left"> &amp;amp; </entry>
                                    <entry align="left"> Ampersand </entry>
                                    <entry align="left"> &amp;amp; </entry>
                                    <entry/>
                                </row>
                                <row>
                                    <entry align="left"> &amp;apos; </entry>
                                    <entry align="left"> Apostrophe </entry>
                                    <entry align="left"> '   </entry>
                                    <entry align="left">If part of PCDATA this should be converted
                                        otherwise left as is in case of attribute value.</entry>
                                </row>
                                <row>
                                    <entry align="left"> &amp;quot; </entry>
                                    <entry align="left"> Quotation Mark </entry>
                                    <entry align="left"> " </entry>
                                    <entry align="left">If part of PCDATA this should be converted
                                        otherwise left as is in case of attribute value.</entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                </note>
            </section>

            <section>
                <title>Changes</title>
                <p>2013-08-08: <ph id="change_20130808_xx">This change does not represent a change
                        to conversion but rather documentation of the existing behavior.</ph></p>
                <p>2011-12-22: Created.</p>
            </section>

        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_XML_Character_Entities-LxAdv-Unicode.dita  -->

    <!--xsl:template match="*/text()[ contains( . , '&apos;' ) or contains( . , '&quot;' ) ]">
		<xsl:variable name="quoteLiterals" as="xs:string">'"</xsl:variable-->

    <!--  Original Target XPath:  Unicodecodepoints   -->
    <!--xsl:value-of select=" translate( . , '&apos;&quot;' , $quoteLiterals ) "/>

	</xsl:template-->



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="common_target_maintain_element_order">
        <title>Maintain the Order of Elements Whenever Possible <lnpid>id-CCCC-10311</lnpid></title>
        <body>
            <section>
                <title>Instructions</title>
                <p>Each source element should be converted to its associated target element such
                    that the target element will occur in the target document in the same relative
                    order as its respective source element did in the source document, so long as
                        <u>the target schema does not require a specific order for that target
                        element within that target element's parent element</u> (first exception),
                    and <u>there are no other instructions regarding the moving of that target
                        element</u> (second exception). In other words, when converting elements
                    from the source documents, the order of elements as they are encountered in the
                    source documents should in general be maintained whenever possible, subject to
                    the two important exceptions mentioned in the previous sentence and elaborated
                    below. </p>
                <p>Note that according to this rule, the order of particular target elements within
                    a parent target element may be different than the order that these elements are
                    listed, noted or otherwise mentioned in these instructions. This includes
                    situations when a set of child target elements are specified in these
                    instructions as items in a list following instructions regarding the parent
                    target element; the order of the items dictates the order that the target
                    elements should occur.</p>
                <p><b>Elaboration regarding first exception:</b> there are ordering constraints
                    imposed by the target schema for some elements, requiring that target child
                    elements must occur in a certain order within target parent elements, and this
                    order may differ from the order of their corresponding source elements in the
                    source documents. In this case, the constraints imposed by the target schema
                    must be respected.</p>
                <p><b>Elaboration regarding second exception:</b> there will be occasional scenarios
                    when the source elements must not only be converted to particular target
                    elements, but must also be shifted to specifically different locations within in
                    the target documents. These scenarios will be explicitly mentioned for the
                    source and target elements affected and must override the general rule to
                    maintain element order.</p>
            </section>
            <section>
                <title>Processing Instructions</title>
                <p> In the source content there may be <b>processing instructions</b>. For example
                    &lt;?page.*?&gt;. If a processing instruction is encountered it should be
                    suppressed and not converted into the output.</p>
            </section>
            <section>
                <title>Changes</title>
                <p>2012-01-19: Created. </p>
                <p>2012-05-10: Added instruction for Processing Instructions. </p>
                <p>2012-05-15: Adjusted the language for the instruction.</p>
            </section>
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_Elements-LxAdv-Maintain_Sequential_Order.dita  -->
    <xsl:template match="processing-instruction()" priority="25"/>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="common_target_whitespace">
        <title>Preserve Significant Whitespace <lnpid>id-CCCC-10488</lnpid></title>
        <body>
            <section>
                <title>Instructions</title>
                <p>All significant whitespace characters (i.e. newlines, spaces, tabs, non-breaking
                    spaces, etc. in data content or mixed content in elements) should be preserved.
                    No significant whitespace should be added, removed or altered. In some cases, an
                    element that contains only whitespace in the input may be stripped from the
                    output by specific instruction; in those cases, both the tags and the whitespace
                    should be removed.</p>
            </section>
            <section>
                <title>Changes</title>
                <p>2012-06-07: Created. </p>
            </section>
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_whitespace-LxAdv-preserve_whitespace.dita  -->

    <!-- THIS IS INFORMATIONAL ONLY AND NEVER EVER EVER STRIP SPACE FOR EVERY ELEMENT.  -->





    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="common_target_empty_elements">
        <title>Suppress each empty element unless otherwise stated
            <lnpid>id-CCCC-10310</lnpid></title>
        <body>
            <section>
                <title>Instructions</title>
                <p>
                    <b>Suppress empty elements unless:</b>
                </p>
                <ol>
                    <li> It results in an invalid document. </li>
                    <li> It is expressly exempted. </li>
                    <li> It has attributes. </li>
                </ol>
                <note>The intent is to suppress meaningless markup (no semantic, formatting or other
                    meaning). Not intended to cause re-evaluation of parent elements, i.e. do not go
                    "up the tree".</note>
            </section>
            <section>
                <p>
                    <b>List of elements to suppress if empty</b>
                </p>
                <ul>
                    <li>base:aliased-text</li>
                    <li>base:altdesig</li>
                    <li>base:alttitle</li>
                    <li>base:byline</li>
                    <li>base:connector</li>
                    <li>base:copyright</li>
                    <li>base:copyright-holder</li>
                    <li>base:copyright-year</li>
                    <li>base:credit</li>
                    <li>base:currencystatement</li>
                    <li>base:date</li>
                    <li>base:date-text</li>
                    <li>base:defterm</li>
                    <li>base:denom</li>
                    <li>base:desig</li>
                    <li>base:desigrange</li>
                    <li>base:emph</li>
                    <li>base:formula</li>
                    <li>base:h</li>
                    <li>base:inlinenote</li>
                    <li>base:label</li>
                    <li>base:modified-word</li>
                    <li>base:money</li>
                    <li>base:num</li>
                    <li>base:numer</li>
                    <li>base:population</li>
                    <li>base:redaction</li>
                    <li>base:refnum</li>
                    <li>base:role</li>
                    <li>base:strike</li>
                    <li>base:sub</li>
                    <li>base:subtitle</li>
                    <li>base:sup</li>
                    <li>base:text</li>
                    <li>base:textitem</li>
                    <li>base:time</li>
                    <li>base:title</li>
                    <li>base:url</li>
                    <li>contact:email</li>
                    <li>contact:fax</li>
                    <li>contact:phone</li>
                    <li>doc:bookseqnum</li>
                    <li>doc:processes</li>
                    <li>location:address.line</li>
                    <li>location:borough</li>
                    <li>location:city</li>
                    <li>location:country</li>
                    <li>location:county</li>
                    <li>location:location</li>
                    <li>location:po-box</li>
                    <li>location:post-office-name</li>
                    <li>location:postalcode</li>
                    <li>location:province</li>
                    <li>location:region</li>
                    <li>location:state</li>
                    <li>location:street</li>
                    <li>location:sublocation</li>
                    <li>location:territory</li>
                    <li>person:contributor</li>
                    <li>person:degreetype</li>
                    <li>person:employer</li>
                    <li>person:fieldofstudy</li>
                    <li>person:name.degree</li>
                    <li>person:name.discrim</li>
                    <li>person:name.family</li>
                    <li>person:name.given</li>
                    <li>person:name.honorific</li>
                    <li>person:name.maiden</li>
                    <li>person:name.mid</li>
                    <li>person:name.nickname</li>
                    <li>person:name.other</li>
                    <li>person:name.prefix</li>
                    <li>person:name.suffix</li>
                    <li>person:name.text</li>
                    <li>pubinfo:aggregationname</li>
                    <li>pubinfo:edition</li>
                    <li>pubinfo:isbn</li>
                    <li>pubinfo:issn</li>
                    <li>pubinfo:issue</li>
                    <li>pubinfo:issuedate</li>
                    <li>pubinfo:lccn</li>
                    <li>pubinfo:pubdate</li>
                    <li>pubinfo:publength</li>
                    <li>pubinfo:publicationname</li>
                    <li>pubinfo:publicationnum</li>
                    <li>pubinfo:publicationsubtitle</li>
                    <li>pubinfo:publisher</li>
                    <li>pubinfo:pubunit</li>
                    <li>pubinfo:relatedpublicationcite</li>
                    <li>pubinfo:update</li>
                    <li>pubinfo:volume</li>
                </ul>
            </section>
            <section>
                <title>Changes</title>
                <p>2014-01-16: <ph id="change_20140116_js">Added list of elements to suppress if
                        empty.</ph></p>
                <p>2013-10-14: <ph id="change_20131014_RS">Changed antecedent to singular to match
                        instructions.</ph></p>
                <p>2013-03-28: <ph id="change_20130328_SP">Created.</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_Elements-LxAdv-Empty_Elements.dita  -->

    <!--xsl:template match="	base:aliased-text[ . = '' ][not( @* )] |
										base:altdesig[ . = '' ][not( @* )] |
										base:alttitle[ . = '' ][not( @* )] |
										base:byline[ . = '' ][not( @* )] |
										base:connector[ . = '' ][not( @* )] |
										base:copyright[ . = '' ][not( @* )] |
										base:copyright-holder[ . = '' ][not( @* )] |
										base:copyright-year[ . = '' ][not( @* )] |
										base:credit[ . = '' ][not( @* )] |
										base:currencystatement[ . = '' ][not( @* )] |
										base:date[ . = '' ][not( @* )] |
										base:date-text[ . = '' ][not( @* )] |
										base:defterm[ . = '' ][not( @* )] |
										base:denom[ . = '' ][not( @* )] |
										base:desig[ . = '' ][not( @* )] |
										base:desigrange[ . = '' ][not( @* )] |
										base:emph[ . = '' ][not( @* )] |
										base:formula[ . = '' ][not( @* )] |
										base:h[ . = '' ][not( @* )] |
										base:inlinenote[ . = '' ][not( @* )] |
										base:label[ . = '' ][not( @* )] |
										base:modified-word[ . = '' ][not( @* )] |
										base:money[ . = '' ][not( @* )] |
										base:num[ . = '' ][not( @* )] |
										base:numer[ . = '' ][not( @* )] |
										base:population[ . = '' ][not( @* )] |
										base:redaction[ . = '' ][not( @* )] |
										base:refnum[ . = '' ][not( @* )] |
										base:role[ . = '' ][not( @* )] |
										base:strike[ . = '' ][not( @* )] |
										base:sub[ . = '' ][not( @* )] |
										base:subtitle[ . = '' ][not( @* )] |
										base:sup[ . = '' ][not( @* )] |
										base:text[ . = '' ][not( @* )] |
										base:textitem[ . = '' ][not( @* )] |
										base:time[ . = '' ][not( @* )] |
										base:title[ . = '' ][not( @* )] |
										base:url[ . = '' ][not( @* )] |
										contact:email[ . = '' ][not( @* )] |
										contact:fax[ . = '' ][not( @* )] |
										contact:phone[ . = '' ][not( @* )] |
										doc:bookseqnum[ . = '' ][not( @* )] |
										doc:processes[ . = '' ][not( @* )] |
										location:address.line[ . = '' ][not( @* )] |
										location:borough[ . = '' ][not( @* )] |
										location:city[ . = '' ][not( @* )] |
										location:country[ . = '' ][not( @* )] |
										location:county[ . = '' ][not( @* )] |
										location:location[ . = '' ][not( @* )] |
										location:po-box[ . = '' ][not( @* )] |
										location:post-office-name[ . = '' ][not( @* )] |
										location:postalcode[ . = '' ][not( @* )] |
										location:province[ . = '' ][not( @* )] |
										location:region[ . = '' ][not( @* )] |
										location:state[ . = '' ][not( @* )] |
										location:street[ . = '' ][not( @* )] |
										location:sublocation[ . = '' ][not( @* )] |
										location:territory[ . = '' ][not( @* )] |
										person:contributor[ . = '' ][not( @* )] |
										person:degreetype[ . = '' ][not( @* )] |
										person:employer[ . = '' ][not( @* )] |
										person:fieldofstudy[ . = '' ][not( @* )] |
										person:name.degree[ . = '' ][not( @* )] |
										person:name.discrim[ . = '' ][not( @* )] |
										person:name.family[ . = '' ][not( @* )] |
										person:name.given[ . = '' ][not( @* )] |
										person:name.honorific[ . = '' ][not( @* )] |
										person:name.maiden[ . = '' ][not( @* )] |
										person:name.mid[ . = '' ][not( @* )] |
										person:name.nickname[ . = '' ][not( @* )] |
										person:name.other[ . = '' ][not( @* )] |
										person:name.prefix[ . = '' ][not( @* )] |
										person:name.suffix[ . = '' ][not( @* )] |
										person:name.text[ . = '' ][not( @* )] |
										pubinfo:aggregationname[ . = '' ][not( @* )] |
										pubinfo:edition[ . = '' ][not( @* )] |
										pubinfo:isbn[ . = '' ][not( @* )] |
										pubinfo:issn[ . = '' ][not( @* )] |
										pubinfo:issue[ . = '' ][not( @* )] |
										pubinfo:issuedate[ . = '' ][not( @* )] |
										pubinfo:lccn[ . = '' ][not( @* )] |
										pubinfo:pubdate[ . = '' ][not( @* )] |
										pubinfo:publength[ . = '' ][not( @* )] |
										pubinfo:publicationname[ . = '' ][not( @* )] |
										pubinfo:publicationnum[ . = '' ][not( @* )] |
										pubinfo:publicationsubtitle[ . = '' ][not( @* )] |
										pubinfo:publisher[ . = '' ][not( @* )] |
										pubinfo:pubunit[ . = '' ][not( @* )] |
										pubinfo:relatedpublicationcite[ . = '' ][not( @* )] |
										pubinfo:update[ . = '' ][not( @* )] |
										pubinfo:volume[ . = '' ][not( @* )]"/-->



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="common_topic_identifiers">
        <title>Topic Identifiers <lnpid>id-CCCC-10481</lnpid></title>
        <body>
            <section>
                <title>Instructions</title>
                <p>All topics in this conversion instruction document contain persistent
                    identifiers. They will appear next to the title for example: <ul>
                        <li>case:headnote (id-CA01-d330e3)</li>
                        <li>alttitle to alttitle (id-CCCC-d57e3)</li></ul></p>
                <p>They will take the form of (id<b>-</b>[<i>stream id or common
                        rule</i>]<b>-</b>[<i>unique id</i>]) and have the following
                    characteristics:</p>

                <ul>
                    <li>IDs for a specific stream topic e.g. (id-AU01-d730e3) will occur only in a
                        single CI document -- AU01 for this example.</li>
                    <li>IDs for common reusable topics e.g. (id-CCCC-d57e3) will occur in many CI
                        documents according to its reuse. While the ID is unique across all LNI
                        topics, the topic itself is repeated along with the ID in numerous CI
                        documents.</li>
                </ul>
            </section>
            <section>
                <title>Changes</title>
                <p>2014-05-02: <ph id="change_2014-05-02_wpk">Created.</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_Topic_Identifiers.dita  -->



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_identifier-LxAdv-ID_data_type-HandlingPatternRestrictions">
        <title>Identifiers to ID Data Type - Handling Pattern Restrictions
                <lnpid>id-CCCC-10353</lnpid></title>
        <body>
            <section>
                <title>Instructions</title>
                <p>Identifiers such as <targetxml>xml:id</targetxml> and
                        <targetxml>ref:anchor/@id</targetxml> are ID data typed. Refer to the target
                    schema/documentation to determine whether or not the value is ID data typed.  </p>
                <p>ID data types cannot contain colons and may not begin with a number (among other
                    restrictions).  To properly map to a node that is ID data typed, conversion
                    instructions state to substitute a colon or a space with an underscore. Also,
                    prefix values beginning with a number, with an underscore. The xml schema will
                    enforce these constraints post conversion.</p>
                <p>Do not convert the following cases:<ul id="ul_hyr_rrg_wk">
                        <li>Leading and trailing space(s) (e.g. id=" example_id_value_001 ")</li>
                        <li>XML Entities (e.g. id="example_id_value_001&amp;#xA;")</li>
                    </ul>      </p>
            </section>
            <example>
                <title>Example Markup - Source</title>
                <codeblock> &lt;refpt id="&amp;#xA; 0KMN_2_F_FC__S_CLAUSE:HTDICT-TERM&amp;#xA; "
                    type="ext"/&gt; </codeblock>
            </example>
            <example>
                <title>Example Markup - Target</title>
                <codeblock> &lt;ref:anchor id="_0KMN_2_F_FC__S_CLAUSE_HTDICT-TERM"
                    anchortype="global"/&gt; </codeblock>
            </example>
            <section>
                <p>Other identifiers, such as <targetxml>@anchoridref</targetxml> are <i>not</i> ID
                    data typed. However, they may link to those that are. For example, an
                        <targetxml>@anchoridref</targetxml> may point a
                        <targetxml>ref:anchor/@id</targetxml>. Since
                        <targetxml>@anchoridref</targetxml> is not ID data typed, the ID constraints
                    will not be enforced by the schema post conversion, and will result in broken
                    links. So, to ensure proper link resolution, it is imperative that such
                    identifiers also follow the ID data type restrictions
                        (<targetxml>@anchoridref</targetxml> in this case).</p>
            </section>


            <section>
                <title>Changes</title>
                <p>2013-07-17: <ph id="change_20130717_raj">Added instructions for handling
                        leading/trailing space(s) and XML entities.</ph></p>
                <p>2013-07-10: <ph id="change_20130710_raj">Added instruction to replace space with
                        underscore.</ph></p>
            </section>
            <!-- SEP 2015-8-12 added -->
            <!--<xsltinclusion>
			<xsl:stylesheet version="2.0">
				<xsl:template match="*[@id]">
					<!-\- need to better combine with other @id functions-\->
					<!-\- need to handle entities, currently does not -\->
					<xsl:variable name="idval" select="@id"/>
					<xsl:choose>
						<xsl:when test="contains($idval, ':') or contains($idval, ' ') or contains('0123456789', substring($idval, 1, 1)) ">
							<xsl:variable name="idvalNoBegNums">
							   <!-\- need recursive function call here to remove leading numerals , currently only handles one  -\->
							   <xsl:choose>
								   <xsl:when test="contains('0123456789', substring(normalize-space($idval), 1, 1))">                           
									   <xsl:value-of select="normalize-space(substring($idval,2))"/>                           
								   </xsl:when>
								   <xsl:otherwise>
									   <xsl:value-of select="normalize-space($idval)"/>                           
								   </xsl:otherwise>
							   </xsl:choose>
							</xsl:variable>
							<xsl:copy>
								<xsl:attribute name="id" select="translate(normalize-space($idvalNoBegNums), ' :', '__')"/>
								<xsl:apply-templates select="@*[name()!='id'] | node()"/>
							</xsl:copy>               
						</xsl:when>
						<xsl:otherwise>
							<xsl:copy>
								<xsl:apply-templates select="@* | node()"/>
							</xsl:copy>
						</xsl:otherwise>
					</xsl:choose>
				</xsl:template>

				need recursive function to remove leading numerals , currently only handles one 

			</xsl:stylesheet>
		</xsltinclusion>-->
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_identifier-LxAdv-ID_data_type-HandlingPatternRestrictions.dita  -->

    <!-- 
**************************************************************************************
NOTE:
The context node for this template MUST be a string value.
This template returns a string value that has been modified to 
meet the restrictions of the xs:id datatype.

It was originally intended for xml:id, id, and ID attributes, but would
also work for anything else where the xs:id datatype is required.

This template does not handle ALL entities,as 
Saxon will by default, *resolve* entities before this template 
processes the string.  XSLT cannot change this behavior. It will now identify and
replace pointy brackets and ampersands, however, with an underscore as resolving
those would definitely be a problem for the parser.

****************************************************************************************

-->
    <xsl:template name="normalizeIdString">
        <!-- first step: replace illegal characters with an underscore -->
        <!-- WPK 2017-10-19.  Added mdash to list of disallowed chars. 
		 WPK 2017-10-24.  	
				added   (left double quote #x93;)
				added   (non printable control character #x80;)
				added Â
				added Ã
				added ¢
				added –   (en dash &#x2013;) 
				
			Background.  These are likely encoding issues.  This allows for valid IDs to be created because they are invalid characters nevertheless.
			AU10 PS2017050503412620096LNIAULNPG_input_BUS_GUID_74731000.xml	
			in		Ã¢ÂÂ
			out		Ã¢Â&#x80;Â&#x93;
			
			Ã¢    becomes Ã¢
			Â    becomes Â&#x80;  (control character displays as blank)
			Â    becomes Â&#x93;  (back slanted double quote)
			
			http://www.i18nqa.com/debug/utf8-debug.html
			(expected is not what LN expects but what the website indicates as expected in its context)
			Unicode...Windows1252...Expected...Actual...UTF-8 Bytes
			U+00A2    0xA2          ¢          Â¢       %C2 %A2     (not tilde, but carrot - not exactly what is in data)
			U+201C    0x93          “          â€œ      %E2 %80 %9C   
			U+00E2    0xE2          â          Ã¢       %C3 %A2     (carrot as found in data)
			
			AU10 PS2017050812233824638LNIAULNPG_input_BUS_GUID_93431000.xml
			–   (en dash &#x2013;) 
	-->
        <xsl:variable name="idWithoutDisallowedChars">
            <xsl:value-of
                select="translate(., ',!#$%()*+/:;=?@![]\^`|{}~’‘—ÂÃ¢–', '__________________________________')"
            />
        </xsl:variable>
        <!-- get rid of stubborn entities-->
        <xsl:variable name="idWithoutDisallowedEnts">
            <xsl:analyze-string select="$idWithoutDisallowedChars" regex="&lt;|&gt;|&amp;|&#39;">
                <xsl:matching-substring>
                    <xsl:text>_</xsl:text>
                </xsl:matching-substring>
                <xsl:non-matching-substring>
                    <xsl:value-of select="."/>
                </xsl:non-matching-substring>
            </xsl:analyze-string>
        </xsl:variable>
        <!-- remove leading and trailing spaces and entities -->
        <xsl:variable name="idWoLeadingSpaces">
            <xsl:value-of select="replace($idWithoutDisallowedEnts, '^\s+', '')"/>
        </xsl:variable>
        <xsl:variable name="idWoTrailingSpaces">
            <!-- this should also handle resolved whitespace and ampersand entities -->
            <xsl:value-of select="replace($idWoLeadingSpaces, '\s+$', '')"/>
        </xsl:variable>
        <xsl:variable name="idWoInternalSpaces">
            <xsl:value-of select="replace($idWoTrailingSpaces, '\s+', '_')"/>
        </xsl:variable>
        <!--  prepend underscore with leading values of period, hyphen, or numeral -->
        <xsl:choose>
            <xsl:when test="matches($idWoInternalSpaces, '^[0-9]|^\.|^\-')">
                <xsl:value-of select="concat('_', $idWoInternalSpaces)"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$idWoInternalSpaces"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <!-- named template normalizeIdString_dropchars receives the same input (string) as 
	normalizeIdString, but replaces all illegal characters and spaces with nothing. It still
	prepends an underscore if the string begins with a number or illegal starting character. 
	The output should still be a valid id datatype and NMTOKEN.  This is less commonly used
	for IDs than the normalizeIdString template but may be useful for some other attributes-->

    <xsl:template name="normalizeIdString_dropchars">
        <!-- first step: replace illegal characters with an underscore -->
        <xsl:variable name="idWithoutDisallowedChars">
            <xsl:value-of select="translate(., ',!#$%()*+/:;=?@![]\^`|{}~’‘', '')"/>
        </xsl:variable>
        <!-- get rid of stubborn entities-->
        <xsl:variable name="idWithoutDisallowedEnts">
            <xsl:analyze-string select="$idWithoutDisallowedChars" regex="&lt;|&gt;|&amp;|&#39;">
                <xsl:matching-substring/>
                <xsl:non-matching-substring>
                    <xsl:value-of select="."/>
                </xsl:non-matching-substring>
            </xsl:analyze-string>
        </xsl:variable>
        <!-- remove leading and trailing spaces and entities -->
        <xsl:variable name="idWoLeadingSpaces">
            <xsl:value-of select="replace($idWithoutDisallowedEnts, '^\s+', '')"/>
        </xsl:variable>
        <xsl:variable name="idWoTrailingSpaces">
            <!-- this should also handle resolved whitespace and ampersand entities -->
            <xsl:value-of select="replace($idWoLeadingSpaces, '\s+$', '')"/>
        </xsl:variable>
        <xsl:variable name="idWoInternalSpaces">
            <xsl:value-of select="replace($idWoTrailingSpaces, '\s+', '')"/>
        </xsl:variable>
        <!--  prepend underscore with leading values of period, hyphen, or numeral -->
        <xsl:choose>
            <xsl:when test="matches($idWoInternalSpaces, '^[0-9]|^\.|^\-')">
                <xsl:value-of select="concat('_', $idWoInternalSpaces)"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$idWoInternalSpaces"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <!--
stolen from the web, and for reference: id datatypes must follow NCName restrictions		
		
Practical restrictions of an NCName

The practical restrictions of NCName are that it cannot contain several symbol characters like :, @,  $, %, &, /, +, ,, ;, 
whitespace characters or different parenthesis. Furthermore an NCName cannot begin with a number, dot or minus character 
although they can appear later in an NCName.

Allowed characters: -, ., 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z, _, 
a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z

Also, - and . cannot be used as the first character of the value.

Disallowed characters: , !, ", #, $, %, &, ', (, ), *, +, ,, /, :, ;, <, =, >, ?, @, [, \, ], ^, `, {, |, }, ~ -->



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_identifier-LxAdv-ID_data_type-HandlingDuplicates">
        <title>Identifiers to ID Data Type - Handling Duplicates
            <lnpid>id-CCCC-10352</lnpid></title>
        <body>
            <section>
                <title>Instructions</title>
                <p>Identifier values in the source, such as <sourcexml>@id</sourcexml>, may not have
                    uniqueness constraints applied to them. As a result, duplicate identifier values
                    may exist. If such values are mapped to a target such as
                        <targetxml>@xml:id</targetxml>, schema validation errors will occur. The
                        <targetxml>@xml:id</targetxml> attribute is ID data typed, and therefore
                        <i>does</i> have the uniqueness constraint applied. In this case:<ul
                        id="ul_wyb_bxf_yh">
                        <li>convert the first value in the duplicate sequence</li>
                        <li>drop the remaining values in the duplicate sequence</li>
                    </ul></p>
            </section>
            <example>
                <title>Source XML 1</title>
                <codeblock> &lt;p&gt; &lt;table id="T0103011"&gt; ... &lt;/table&gt; &lt;/p&gt;
                    &lt;page count="302" /&gt; &lt;p&gt; &lt;table id="T0103011"&gt; ...
                    &lt;/table&gt; &lt;/p&gt; </codeblock>
            </example>
            <example>
                <title>Target XML 1</title>
                <codeblock> &lt;p&gt; &lt;table xml:id="T0103011"&gt; ... &lt;/table&gt; &lt;/p&gt;
                    &lt;ref:page num="302"/&gt; &lt;p&gt; &lt;table&gt; ... &lt;/table&gt;
                    &lt;/p&gt; </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2012-10-18: Created. </p>
            </section>
            <!-- SEP 2015-8-12 added;  need to better combine with other @id functions -->
            <!--<xsltinclusion>
				<xsl:stylesheet version="2.0">
				<xsl:template match="*[@id]">
					<xsl:variable name="idval" select="@id"/>
					<xsl:choose>
						<xsl:when test="preceding::*[@id=$idval]">
							<xsl:copy>
								<xsl:apply-templates select="@*[name()!='id'] | node()"/>
							</xsl:copy>               
						</xsl:when>
						<xsl:otherwise>
							<xsl:copy>
								<xsl:apply-templates select="@* | node()"/>
							</xsl:copy>
						</xsl:otherwise>
					</xsl:choose>
				</xsl:template>      
			</xsl:stylesheet>
			</xsltinclusion>-->
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_identifier-LxAdv-ID_data_type-HandlingDuplicates.dita  -->
    <!-- 1.	 There are @id and @ID elements in dictionarydoc-norm.dtd.  
		In some cases these need to be transformed to xml:id and in other cases they need to be transformed to @id.  
		All of them need to be checked for duplicate values. We know these 4 cases:
           The mapping of refpt/@id to ref:anchor/@id - IS DONE IN THIS AND modules/nonamespace/Rosetta_refpt-LxAdv-ref.anchor.xsl
           The following mapping is NOT YET DONE as of 3/20/17 because these modules are not in scope for HK05:
           The mapping of footnote/@fntoken to footnote/ref:anchor/@id
           The mapping fnr/@fnrtoken to footnote-ref/ref:anchor/@id
           The mapping of fnr/@fntoken to foonote-ref/@anchoridref
 -->
    <!-- keys for testing -->
    <!--
	<xsl:key name="idTypeValue" match="*[@id]" use="@id"/>
	<xsl:key name="idTypeValue" match="*[@ID]" use="@ID"/>
	<xsl:key name="idTypeValue" match="footnote" use="@fntoken"/>
	<xsl:key name="idTypeValue" match="fnr" use="@fnrtoken"/>

	<xsl:include href="Rosetta_identifier-LxAdv-ID_data_type-HandlingPatternRestrictions.xsl"/>
	
	<xsl:template match="refpt">
		<xsl:apply-templates/>	
		**<xsl:call-template name="amIaDuplicate"/>**
	</xsl:template>
	<xsl:template match="footnote">
		<xsl:apply-templates/>	
		**<xsl:call-template name="amIaDuplicate"/>**
	</xsl:template>
	<xsl:template match="fnr">
		<xsl:apply-templates/>	
		**<xsl:call-template name="amIaDuplicate"/>**
	</xsl:template>
	<xsl:template match="title">
		<xsl:apply-templates/>
		<xsl:if test="@ID or @id">	
			**<xsl:call-template name="amIaDuplicate"/>**
		</xsl:if>	
	</xsl:template>-->
    <!-- end testing code -->

    <xsl:template match="@id | @ID">
        <xsl:if test="not(. = '')">
            <xsl:variable name="dupStatus">
                <xsl:for-each select="parent::*">
                    <xsl:call-template name="amIaDuplicate"/>
                </xsl:for-each>
            </xsl:variable>
            <xsl:if test="$dupStatus = 'false'">
                <xsl:choose>
                    <xsl:when test="local-name(parent::*) = 'refpt'">
                        <xsl:attribute name="id">
                            <xsl:call-template name="normalizeIdString"/>
                        </xsl:attribute>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:attribute name="xml:id">
                            <xsl:call-template name="normalizeIdString"/>
                        </xsl:attribute>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:if>
        </xsl:if>
    </xsl:template>



    <!-- *****************************************************************************
			 This named template "amIaDuplicate" returns 'false' if the @id or @ID is 
			 a unique */@ID or  */@id in the document. It returns 'true' if the @id 
			 or @ID is the 2nd or subsequent @id or @ID in the document with the same value.
			 The parent element name does not matter; whether the attribute name is @id 
			 or @ID does not matter.
			 
			 It must be used in conjunction with
			 
			 	<xsl:key name="idTypeValue" match="*[@id]" use="@id"/> 
				<xsl:key name="idTypeValue" match="*[@ID]" use="@ID"/>
				(if your stream contains footnotes also include)
				<xsl:key name="idTypeValue" match="footnote" use="@fntoken"/>
	            <xsl:key name="idTypeValue" match="fnr" use="@fnrtoken"/>
	            
			BOTH inserted at the TOP LEVEL of the stylesheet driver.
			
			It needs to be called from the element containing the attribute as a context
			node, not the attribute itself, or it won't work
			
			For example:
				<xsl:template match="refpt">
					<xsl:call-template name="amIaDuplicate"/>	
				</xsl:template>
				
			will return true if this is a refpt with unique @id or is the first of 
			more than one element in the document having the same @id or @ID value.
			How the context template handles this boolean value is left as an exercise
			for the developer of that template. 
						
			If the test for unique values is element-specific or attribute-specific
			within the document, a copy of/variation on this code with a more specific key is 
			recommended rather than reusing this generic template.
			
			- JL
		********************************************************************************-->


    <xsl:template name="amIaDuplicate">
        <xsl:choose>
            <xsl:when
                test="not(key('idTypeValue', @id | @ID | @fntoken[parent::footnote] | @fnrtoken[parent::fnr])[2])">
                <!-- id value is unique to document -->
                <xsl:text>false</xsl:text>
            </xsl:when>
            <xsl:otherwise>
                <xsl:variable name="contextNodeGenID" select="generate-id(.)"/>
                <xsl:choose>
                    <xsl:when
                        test="key('idTypeValue', @id | @ID | @fntoken[parent::footnote] | @fnrtoken[parent::fnr])[local-name(.) != ('refpt', 'footnote', 'fnr')] and key('idTypeValue', @id | @ID)[local-name(.) = ('refpt', 'footnote', 'fnr')]">
                        <!--*** key has mixed refpt, footnote, fnr / and other values ***-->
                        <!-- non-refpt/footenote/fnr values are all dupes by definition -->
                        <!-- TO DO only the first refpt/footnote/fnr key is false -->
                        <!-- so IF I am the first refpt/footnote/fnr, I am the only nondupe -->
                        <xsl:for-each
                            select="key('idTypeValue', @id | @ID | @fntoken[parent::footnote] | @fnrtoken[parent::fnr])[local-name(.) = ('refpt', 'footnote', 'fnr')][1]">
                            <xsl:choose>
                                <xsl:when test="generate-id(.) = $contextNodeGenID">false</xsl:when>
                                <xsl:otherwise>true</xsl:otherwise>
                            </xsl:choose>
                        </xsl:for-each>
                    </xsl:when>
                    <xsl:otherwise>
                        <!-- everything with matching id is a refpt/footnote/fnr or everything with matching id is not a 
							refpt/footnote/fnr	so everything but the first id is a dup -->
                        <xsl:for-each
                            select="key('idTypeValue', @id | @ID | @fntoken[parent::footnote] | @fnrtoken[parent::fnr])[1]">
                            <xsl:choose>
                                <xsl:when test="generate-id(.) = $contextNodeGenID">false</xsl:when>
                                <xsl:otherwise>true</xsl:otherwise>
                            </xsl:choose>
                        </xsl:for-each>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>



    <!--<xsl:template match="@xml:id">	
		<xsl:variable name="idval" select="."/>
		<xsl:if test="not(preceding::*[@xml:id=$idval])">
			<xsl:attribute name="xml:id">	
				<xsl:call-template name="normalizeIdString"/>
			</xsl:attribute>
		</xsl:if>		
	</xsl:template>	-->



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.headnote">
        <title>case:headnote <lnpid>id-CA04-13423</lnpid></title>
        <body>
            <section>
                <ul>
                    <li class="- topic/li ">
                        <sourcexml class="+ topic/keyword xml-d/sourcexml "
                            >case:headnote</sourcexml> becomes <targetxml
                            class="+ topic/keyword xml-d/targetxml "
                            >admindoc:admindoc/admindoc:head</targetxml>.
                        <pre xml:space="preserve" class="- topic/pre ">

&lt;case:headnote&gt;
&lt;case:info&gt;
    &lt;!-- .... --&gt;
    &lt;abbrvname display-name="Indexed as:" searchtype="SHORT-CASE-NAME"&gt;Boucher (Re)&lt;/abbrvname&gt;    
&lt;/case:info&gt;     
&lt;/case:headnote&gt; 

                  
<b class="+ topic/ph hi-d/b ">Becomes</b>
             
&lt;admindoc:head&gt;
&lt;admindecision:decisioninfo&gt;
  &lt;admindecision:caseinfo&gt;
            &lt;!-- .... --&gt;
             &lt;caseinfo:casename&gt;
                 &lt;caseinfo:shortcasename name="Indexed as:"&gt;Boucher (Re)&lt;/caseinfo:shortcasename&gt;
             &lt;/caseinfo:casename&gt;
    &lt;/admindecision:caseinfo&gt;
 &lt;admindecision:decisioninfo&gt;
&lt;/admindoc:head&gt;

</pre>
                    </li>
                </ul>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.headnote.dita  -->
    <!--<xsl:message>CA04-Administrative_Decisions_case.headnote.xsl requires manual development!</xsl:message> -->

    <xsl:template match="case:headnote">

        <!--  Original Target XPath:  admindoc:admindoc/admindoc:head   -->
        <xsl:choose>
            <xsl:when test="parent::case:appendix">
                <xsl:apply-templates select="node()"/>
            </xsl:when>
            <xsl:otherwise>
                <admindoc:head>
                    <xsl:apply-templates select="@* | node()"/>
                </admindoc:head>
            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>


    <xsl:template match="sub">
        <sub>
            <xsl:value-of select="@* | node()"/>
        </sub>
    </xsl:template>


    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.info">
        <title>case:info <lnpid>id-CA04-13424</lnpid></title>
        <body>
            <section>
                <ul>
                    <li class="- topic/li ">
                        <sourcexml class="+ topic/keyword xml-d/sourcexml ">case:info</sourcexml>
                        becomes <targetxml class="+ topic/keyword xml-d/targetxml "
                            >admindecision:decisioninfo/admindecision:caseinfo</targetxml> and
                        children are described below: <pre xml:space="preserve" class="- topic/pre ">

&lt;case:headnote&gt;
           &lt;case:info&gt;
              &lt;!-- .... --&gt;
              &lt;abbrvname display-name="Indexed as:" searchtype="SHORT-CASE-NAME"&gt;Boucher (Re)&lt;/abbrvname&gt;              
          &lt;/case:info&gt; 
&lt;/case:headnote&gt; 

                    
          <b class="+ topic/ph hi-d/b ">Becomes</b>          
           
&lt;admindoc:head&gt;
           &lt;admindecision:decisioninfo&gt;
               &lt;admindecision:caseinfo&gt;
               &lt;!-- .... --&gt;
                  &lt;caseinfo:casename&gt;
                    &lt;caseinfo:shortcasename name="Indexed as:"&gt;Boucher (Re)&lt;/caseinfo:shortcasename&gt;
                  &lt;/caseinfo:casename&gt;               
              &lt;/admindecision:caseinfo&gt;
           &lt;admindecision:decisioninfo&gt;
&lt;/admindoc:head&gt;

          </pre>
                        <pre xml:space="preserve" class="- topic/pre ">
    <b>Handling of case:info/glp:note scenario</b>
&lt;case:info&gt;
    &lt;glp:note&gt;
        &lt;p&gt;
            &lt;text&gt; [Quicklaw note: Original Award filed November 17, 1994. See &lt;ci:cite&gt;
                    &lt;ci:case&gt;
                        &lt;ci:caseref ID="cref00025966" spanref="cspan00025966"&gt;
                            &lt;ci:reporter value="BCCAA"/&gt;
                            &lt;ci:edition&gt;
                                &lt;ci:date year="1994"/&gt;
                            &lt;/ci:edition&gt;
                            &lt;ci:refnum num="423"/&gt;
                        &lt;/ci:caseref&gt;
                    &lt;/ci:case&gt;
                    &lt;ci:content&gt;
                        &lt;ci:span spanid="cspan00025966"&gt;[1994] B.C.C.A.A.A. No. 423&lt;/ci:span&gt;
                    &lt;/ci:content&gt;
            &lt;/ci:cite&gt;.] 
            &lt;/text&gt;
        &lt;/p&gt;
    &lt;/glp:note&gt;
&lt;/case:info&gt;

          </pre>
                        <b class="+ topic/ph hi-d/b ">Becomes</b>
                        <pre xml:space="preserve" class="- topic/pre ">
&lt;admindecision:decisioninfo&gt;
    &lt;admindecision:caseinfo&gt;
        &lt;note&gt;
            &lt;bodytext&gt;
                &lt;p&gt;
                    &lt;text&gt; [Quicklaw note: Original Award filed November 17, 1994. See &lt;lnci:cite&gt;
                            &lt;lnci:case&gt;
                                &lt;lnci:caseref ID="cref00025966"&gt;
                                    &lt;lnci:reporter value="BCCAA"/&gt;
                                    &lt;lnci:edition&gt;
                                        &lt;lnci:date year="1994"/&gt;
                                    &lt;/lnci:edition&gt;
                                    &lt;lnci:refnum num="423"/&gt;
                                &lt;/lnci:caseref&gt;
                            &lt;/lnci:case&gt;
                            &lt;lnci:content&gt; [1994] B.C.C.A.A.A. No. 423 &lt;/lnci:content&gt;
                        &lt;/lnci:cite&gt;.] &lt;/text&gt;
                &lt;/p&gt;
            &lt;/bodytext&gt;
        &lt;/note&gt;
    &lt;/admindecision:caseinfo&gt;
&lt;/admindecision:decisioninfo&gt;   
         </pre>
                    </li>
                </ul>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.info.dita  -->
    <!--<xsl:message>CA04-Administrative_Decisions_case.info.xsl requires manual development!</xsl:message> -->

    <xsl:template match="case:info[child::case:courtinfo or child::case:casename]">
        <admindecision:decisioninfo>
            <admindecision:caseinfo>
                <xsl:apply-templates select="case:casename | case:courtinfo/case:filenum"/>
                <xsl:element name="ref:citations">
                    <xsl:apply-templates
                        select="case:reportercite | case:parallelcite | case:courtinfo/case:courtcite"
                    />
                </xsl:element>
                <xsl:apply-templates
                    select="case:courtinfo[child::case:judges], case:courtinfo/case:judges, /CASEDOC/case:body/case:headnote/case:info/case:pubinfo[1]"
                />
            </admindecision:caseinfo>
            <xsl:apply-templates select="case:courtinfo[1]"/>
        </admindecision:decisioninfo>

    </xsl:template>
    <xsl:template match="case:info[parent::case:headnote/parent::case:appendix]">
        <xsl:apply-templates select="node()"/>
    </xsl:template>
    <xsl:template match="case:info/glp:note">
        <note>
            <bodytext>
                <xsl:apply-templates select="@* | node()"/>
            </bodytext>
        </note>
    </xsl:template>


    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.dates">
        <title>case:dates <lnpid>id-CA04-13420</lnpid></title>
        <body>
            <section>
                <ul>
                    <li class="- topic/li ">
                        <sourcexml class="+ topic/keyword xml-d/sourcexml ">case:dates</sourcexml>
                        becomes <targetxml class="+ topic/keyword xml-d/targetxml "
                            >admindecision:decisioninfo/admindecision:dates</targetxml>
                        <ul class="- topic/ul ">
                            <li class="- topic/li ">
                                <sourcexml class="+ topic/keyword xml-d/sourcexml "
                                    >case:hearingdates</sourcexml> becomes <targetxml
                                    class="+ topic/keyword xml-d/targetxml "
                                    >admindecision:decisioninfo/admindecision:dates/decision:argueddate</targetxml>
                            </li>
                            <li class="- topic/li ">Create <targetxml
                                    class="+ topic/keyword xml-d/targetxml ">date-text</targetxml>
                                for capturing the PCDATA of <sourcexml
                                    class="+ topic/keyword xml-d/sourcexml "
                                    >case:hearingdates</sourcexml>
                            </li> <li class="- topic/li ">
                                <sourcexml class="+ topic/keyword xml-d/sourcexml "
                                    >case:decisiondate</sourcexml> becomes <targetxml
                                    class="+ topic/keyword xml-d/targetxml "
                                    >admindecision:decisioninfo/admindecision:dates/decision:decisiondate</targetxml>
                                populated with below mentioned children and attributes: <ul>
                                    <li>The attribute
                                            <targetxml>decision:decisiondate/@normdate</targetxml>
                                        should be populated with the values of
                                            <sourcexml>case:decisiondate/date/@year</sourcexml>,
                                            <sourcexml>case:decisiondate/date/@month</sourcexml> and
                                            <sourcexml>case:decisiondate/date/@day</sourcexml>
                                        concatenated and separated by a single hyphen. The values of
                                            <sourcexml>case:decisiondate/date/@month</sourcexml> and
                                            <sourcexml>case:decisiondate/date/@day</sourcexml>
                                        should be padded with zeroes so that they are 2 digits.
                                            <note>If one or more of the three date values (year,
                                            month or day) are absent, then
                                                <targetxml>decision:decisiondate/@normdate</targetxml>
                                            should <b>not</b> be populated.</note></li>
                                    <li><sourcexml>case:decisiondate/date/@day</sourcexml> becomes
                                            <targetxml>decision:decisiondate/@day</targetxml>.</li>
                                    <li><sourcexml>case:decisiondate/date/@month</sourcexml> becomes
                                            <targetxml>decision:decisiondate/@month</targetxml>.</li>
                                    <li><sourcexml>case:decisiondate/date/@year</sourcexml> becomes
                                            <targetxml>decision:decisiondate/@year</targetxml>.</li>
                                </ul>
                                <ul class="- topic/ul ">
                                    <li class="- topic/li ">
                                        <sourcexml class="+ topic/keyword xml-d/sourcexml "
                                            >case:decisiondate/date</sourcexml> becomes <targetxml
                                            class="+ topic/keyword xml-d/targetxml "
                                            >decision:dates/decision:decisiondate/date-text.</targetxml>
                                        <targetxml>date-text</targetxml> will only be mapped around
                                        the text of the date. </li>
                                    <li>If there are any <sourcexml>nl</sourcexml> elements in
                                            <sourcexml>case:hearingdates</sourcexml>, then
                                            <sourcexml>nl</sourcexml> should be suppressed, but a
                                        new <targetxml>date-text</targetxml> should be started for
                                        every occurence of <sourcexml>nl</sourcexml>.</li>
                                </ul>
                                <pre xml:space="preserve" class="- topic/pre ">

  &lt;case:dates&gt;
    &lt;case:hearingdates&gt;Decision: November 1, 2011. &lt;/case:hearingdates&gt;   
  &lt;/case:dates&gt;
  
<b class="+ topic/ph hi-d/b ">Becomes</b>

  &lt;admindecision:dates&gt;
    &lt;decision:argueddate&gt;
      Decision: &lt;date-text&gt;November 1, 2011.&lt;/date-text&gt;
    &lt;/decision:argueddate&gt;
  &lt;/admindecision:dates&gt;
              </pre>
                                <pre xml:space="preserve" class="- topic/pre ">
<b>Handling of case:hearingdates/glp:note scenario</b>
&lt;case:hearingdates&gt;Heard: January 28, 2010.&lt;nl/&gt; Award: Supplementary award: March 24, 2010.&lt;nl/&gt;
&lt;glp:note&gt;
    &lt;p nl="0"&gt;
        &lt;text&gt;[Editor's note: Original reasons for award were released June 9, 2009.
                See&lt;nl/&gt; [2009] A.G.A.A. No. 17.]&lt;/text&gt;
    &lt;/p&gt;
&lt;/glp:note&gt;
&lt;/case:hearingdates&gt;

<b class="+ topic/ph hi-d/b ">Becomes</b>

&lt;admindecision:dates&gt;
    &lt;decision:argueddate&gt;
        Heard: &lt;date-text&gt;January 28, 2010.&lt;/date-text&gt;
        Award: Supplementary award: &lt;date-text&gt;March 24, 2010.&lt;/date-text&gt;
        &lt;note&gt;
            &lt;bodytext&gt;
                &lt;p&gt;
                    &lt;text&gt;[Editor's note: Original reasons for award were released June 9, 2009.
                        See&lt;proc:nl/&gt; [2009] A.G.A.A. No. 17.]&lt;/text&gt;
                &lt;/p&gt;
            &lt;/bodytext&gt;
        &lt;/note&gt;
    &lt;/decision:argueddate&gt;
&lt;/admindecision:dates&gt;
              </pre>
                                <pre>
<b>Mapping of <sourcexml>case:dates/case:hearingdates</sourcexml> with <sourcexml>nl</sourcexml></b>
                
&lt;case:dates&gt;
    &lt;case:hearingdates&gt;Heard: May 23, 2007.&lt;nl/&gt; Oral judgment: May 23, 2007.&lt;nl/&gt; Filed: June 25, 2007.&lt;/case:hearingdates&gt;
&lt;/case:dates&gt;

<b>becomes</b>
                
&lt;decision:dates&gt;
    &lt;decision:argueddate&gt;
        Heard: &lt;date-text&gt;May 23, 2007.&lt;/date-text&gt;
    &lt;/decision:argueddate&gt;
    &lt;decision:argueddate&gt;
        Oral judgment: &lt;date-text&gt;May 23, 2007.&lt;/date-text&gt; 
    &lt;/decision:argueddate&gt;
    &lt;decision:argueddate&gt;
        Filed: &lt;date-text&gt;June 25, 2007.&lt;/date-text&gt;
    &lt;/decision:argueddate&gt;
&lt;/decision:dates&gt;

           
              </pre>
                                <note class="- topic/note ">when <sourcexml
                                        class="+ topic/keyword xml-d/sourcexml "
                                        >@ln.user-displayed="false“</sourcexml> appears on a date
                                    element (i.e, <sourcexml
                                        class="+ topic/keyword xml-d/sourcexml "
                                        >case:decisiondate/@ln.user-displayed="false"</sourcexml>),
                                    that element is translated into the target but with the element
                                    content omitted. Only the attributes are populated. So there is
                                    no display content.</note>
                                <pre xml:space="preserve" class="- topic/pre ">

&lt;case:dates&gt;
  &lt;case:decisiondate ln.user-displayed="false"&gt;
    &lt;date year="2011" month="11" day="01"&gt;2011/11/01&lt;/date&gt; 
  &lt;/case:decisiondate&gt;
&lt;/case:dates&gt;

<b class="+ topic/ph hi-d/b ">Becomes</b>

&lt;admindecision:dates&gt;  
  &lt;decision:decisiondate day="01" month="11" year="2011" normdate="2011-11-01"/&gt;
&lt;/admindecision:dates&gt;
              </pre>
                            </li> </ul>
                        <note class="- topic/note ">The formatting of the date-text should not be
                            normalized to YYYY-MM-DD. The attributes are used for normalization, but
                            the element content should remain the same.</note>
                    </li>
                </ul>
            </section>
            <section>
                <title>Changes</title>
                <p>2014-08-19: <ph id="change_20140819_AS">Updated example for nl. Multiple argued
                        date will not be created, multiple date-text will be created.</ph></p>
                <p>2014-08-01: <ph id="change_20140801_AS">Added instruction to suppress
                            <sourcexml>nl</sourcexml> in target.. <b>P4 Issue #301 and
                    297</b></ph></p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.dates.dita  -->
    <!--<xsl:message>CA04-Administrative_Decisions_case.dates.xsl requires manual development!</xsl:message> -->

    <xsl:template match="case:dates">
        <admindecision:dates>
            <xsl:apply-templates
                select="/CASEDOC/case:body/case:headnote/case:info/case:courtinfo/case:dates/case:hearingdates"/>
            <xsl:apply-templates select="@* | node()"/>
        </admindecision:dates>
    </xsl:template>

    <xsl:template match="case:hearingdates">
        <xsl:if test="/CASEDOC/docinfo/docinfo:doc-lang/@lang = 'en'">
            <xsl:for-each select="text()">
                <xsl:variable name="hearingdate-string" select="normalize-space(.)"/>
                <decision:argueddate>
                    <xsl:analyze-string select="$hearingdate-string"
                        regex="([A-Za-z].[^0-9]+\s)((January|February|March|April|May|June|July|August|September|October|November|December)\s[0-9]+.\s.+)">
                        <xsl:matching-substring>
                            <xsl:value-of select="regex-group(1)"/>
                            <date-text>
                                <xsl:value-of select="regex-group(2)"/>
                            </date-text>
                        </xsl:matching-substring>
                        <xsl:non-matching-substring>
                            <xsl:choose>
                                <xsl:when test="matches(., '^[0-9]{4}')">
                                    <date-text>
                                        <xsl:value-of select="."/>
                                    </date-text>
                                </xsl:when>
                                <xsl:when test="matches(., '^[0-9]{2}[,]')">
                                    <xsl:value-of select="concat(substring-before(., ','), ',')"/>
                                    <date-text>
                                        <xsl:value-of select="substring-after(., ',')"/>
                                    </date-text>
                                </xsl:when>
                                <xsl:otherwise>
                                    <xsl:value-of select="."/>
                                </xsl:otherwise>
                            </xsl:choose>
                        </xsl:non-matching-substring>
                    </xsl:analyze-string>
                </decision:argueddate>
            </xsl:for-each>
        </xsl:if>
        <!--2018-01-25 ::RS Added choose condition in  '<xsl:if test="/CASEDOC/docinfo/docinfo:doc-lang/@lang='fr'">' template against webstar number #7100343  -->
        <xsl:if test="/CASEDOC/docinfo/docinfo:doc-lang/@lang = 'fr'">
            <xsl:choose>
                <xsl:when test="child::glp:note">
                    <decision:argueddate>
                        <xsl:for-each select="text()">
                            <xsl:variable name="hearingdate-string" select="normalize-space(.)"/>

                            <xsl:analyze-string select="$hearingdate-string"
                                regex="([A-Za-z].[^0-9]+\s)((janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)\s[0-9]+.\s.+)">
                                <xsl:matching-substring>
                                    <xsl:value-of select="regex-group(1)"/>
                                    <date-text>
                                        <xsl:value-of select="regex-group(2)"/>
                                    </date-text>
                                </xsl:matching-substring>
                                <xsl:non-matching-substring>
                                    <xsl:choose>
                                        <xsl:when test="contains(normalize-space(.), ':')">
                                            <xsl:value-of select="substring-before(., ':')"/>
                                            <xsl:text>:</xsl:text>
                                            <date-text>
                                                <xsl:value-of select="substring-after(., ':')"/>
                                            </date-text>
                                        </xsl:when>
                                        <xsl:otherwise>
                                            <date-text>
                                                <xsl:value-of select="."/>
                                            </date-text>
                                        </xsl:otherwise>
                                    </xsl:choose>
                                </xsl:non-matching-substring>
                            </xsl:analyze-string>
                        </xsl:for-each>
                        <xsl:apply-templates select="child::glp:note"/>
                    </decision:argueddate>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:for-each select="text()">
                        <xsl:variable name="hearingdate-string" select="normalize-space(.)"/>
                        <decision:argueddate>
                            <xsl:analyze-string select="$hearingdate-string"
                                regex="([A-Za-z].[^0-9]+\s)((janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)\s[0-9]+.\s.+)">
                                <xsl:matching-substring>
                                    <xsl:value-of select="regex-group(1)"/>
                                    <date-text>
                                        <xsl:value-of select="regex-group(2)"/>
                                    </date-text>
                                </xsl:matching-substring>
                                <xsl:non-matching-substring>
                                    <xsl:choose>
                                        <xsl:when test="contains(normalize-space(.), ':')">
                                            <xsl:value-of select="substring-before(., ':')"/>
                                            <xsl:text>:</xsl:text>
                                            <date-text>
                                                <xsl:value-of select="substring-after(., ':')"/>
                                            </date-text>
                                        </xsl:when>
                                        <xsl:otherwise>
                                            <date-text>
                                                <xsl:value-of select="."/>
                                            </date-text>
                                        </xsl:otherwise>
                                    </xsl:choose>
                                </xsl:non-matching-substring>
                            </xsl:analyze-string>
                        </decision:argueddate>
                    </xsl:for-each>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:if>
    </xsl:template>

    <xsl:template match="case:decisiondate">
        <decision:decisiondate>
            <xsl:attribute name="month">
                <xsl:value-of select="date/@month"/>
            </xsl:attribute>
            <xsl:attribute name="day">
                <xsl:value-of select="date/@day"/>
            </xsl:attribute>
            <xsl:attribute name="year">
                <xsl:value-of select="date/@year"/>
            </xsl:attribute>
            <xsl:attribute name="normdate">
                <xsl:value-of select="concat(date/@year, '-', date/@month, '-', date/@day)"/>
            </xsl:attribute>
        </decision:decisiondate>
    </xsl:template>

    <xsl:template match="case:decisiondate/date"/>
    <xsl:template match="case:hearingdates/nl"/>
    <xsl:template match="case:hearingdates/glp:note">
        <note>
            <bodytext>
                <xsl:apply-templates select="@* | node()"/>
            </bodytext>
        </note>
    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.pubinfo">
        <title>case:pubinfo <lnpid>id-CA04-13433</lnpid></title>
        <body>
            <section>
                <p><sourcexml>case:pubinfo</sourcexml> becomes <targetxml>note</targetxml> with the
                    value of <targetxml>note/@notetype</targetxml> set to "other".</p>
                <p><sourcexml>case:pubinfo</sourcexml> should be suppressed if it contains any of
                    the following values: <ul>
                        <li>** Preliminary Version **</li>
                        <li>** Unedited **</li>
                        <li>** Version textuele **</li>
                        <li>Intitulé de la cause :</li>
                        <li>** Translation**</li>
                        <li>**Translation **</li>
                        <li>* Translation **</li>
                        <li>** Version textuelle**</li>
                        <li>* Traduction **</li>
                        <li>** Traducation **</li>
                        <li>** Traducion **</li>
                        <li>** Traduction *</li>
                        <li>** Traduction ***</li>
                        <li>** Traduction**</li>
                        <li>** Translation</li>
                        <li>** Translation **)</li>
                        <li>** Translation**</li>
                        <li>**Traduction **</li>
                        <li>**: Traduction **</li>
                        <li>'@c** Traduction **</li>
                        <li>'@** Traduction **</li>
                        <li>Rpertori:</li>
                        <li>** Version textuellle **</li>
                        <li>** Translations **</li>
                        <li>**Translation **</li>
                        <li>** Version textuelle**</li>
                        <li>** Version textuelle **#</li>
                        <li>** Version Textuelle **</li>
                        <li>** Version textuelle *</li>
                        <li>** Version textuelle</li>
                        <li>** Version franaise **</li>
                        <li>** Version francaise **</li>
                        <li>** Unofficial Translation [*] **</li>
                        <li>** Unofficial Translation ** [*]</li>
                    </ul></p>
                <p>The content of <sourcexml>case:pubinfo</sourcexml> should be placed in
                        <targetxml>note/bodytext/p/text</targetxml>.</p>
                <!--  <note>Kindly refer the spreadsheet posted in Administrative Decisions discussion boards having valid and invalid entries of <sourcexml>case:pubinfo</sourcexml>.</note>-->
            </section>
            <example>
                <title>Mapping of <sourcexml>case:pubinfo</sourcexml></title>
                <codeblock> &lt;case:pubinfo&gt;** Traduction **&lt;/case:pubinfo&gt; </codeblock>
                <b>becomes</b>
                <codeblock> &lt;note notetype="other"&gt; &lt;bodytext&gt; &lt;p&gt; &lt;text&gt;**
                    Traduction **&lt;/text&gt; &lt;/p&gt; &lt;/bodytext&gt; &lt;/note&gt;
                </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2014-07-17: <ph id="change_20140717_AS">Added the list of values when
                            <sourcexml>case:pubinfo</sourcexml> needs to be suppressed.</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.pubinfo.dita  -->
    <!--<xsl:message>CA04-Administrative_Decisions_case.pubinfo.xsl requires manual development!</xsl:message> -->
    <!-- need to add more values in contains -->

    <xsl:template match="case:pubinfo">
        <xsl:choose>
            <xsl:when test="following-sibling::case:pubinfo">
                <xsl:if
                    test="not(contains(., '** Preliminary Version **') or contains(., '** Unedited **') or contains(., '** Version textuele **') or contains(., 'Intitulé de la cause :'))">
                    <note notetype="other">
                        <bodytext>
                            <p>
                                <text>
                                    <xsl:apply-templates select="@* | node()"/>
                                </text>
                            </p>
                            <xsl:for-each select="following-sibling::case:pubinfo">
                                <p>
                                    <text>
                                        <xsl:apply-templates select="@* | node()"/>
                                    </text>
                                </p>
                            </xsl:for-each>
                        </bodytext>
                    </note>
                </xsl:if>
            </xsl:when>
            <xsl:otherwise>
                <xsl:if
                    test="not(contains(., '** Preliminary Version **') or contains(., '** Unedited **') or contains(., '** Version textuele **') or contains(., 'Intitulé de la cause :'))">
                    <note notetype="other">
                        <bodytext>
                            <p>
                                <text>
                                    <xsl:apply-templates select="@* | node()"/>
                                </text>
                            </p>
                        </bodytext>
                    </note>
                </xsl:if>
            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>

    <!-- inline object handling for CA04 -->
    <xsl:template match="inlineobject[$streamID = 'CA04']" priority="25">

        <xsl:apply-templates select="." mode="refinline"/>
    </xsl:template>

    <xsl:template match="figure/p" priority="25">
        <xsl:apply-templates select="@* | node()"/>
    </xsl:template>

    <xsl:template match="text[ancestor::figure]" priority="25">
        <xsl:apply-templates select="@* | node()"/>
    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="CAN_Rosetta_abbrvname-to-LexisAdvance_caseinfo.shortcasename">
        <title>abbrvname <lnpid>id-CA04-13407</lnpid></title>
        <body>
            <section>
                <ul>
                    <li class="- topic/li ">
                        <sourcexml class="+ topic/keyword xml-d/sourcexml ">abbrvname</sourcexml>
                        becomes <targetxml class="+ topic/keyword xml-d/targetxml "
                            >caseinfo:casename/caseinfo:shortcasename</targetxml> and attribute
                            <sourcexml>@display-name</sourcexml> becomes
                        <targetxml>name</targetxml>. <pre xml:space="preserve" class="- topic/pre ">

&lt;case:headnote&gt;
    &lt;case:info&gt;
        &lt;abbrvname display-name="Indexed as:" searchtype="SHORT-CASE-NAME"&gt;Boucher (Re)&lt;/abbrvname&gt;
    &lt;/case:info&gt;
&lt;/case:headnote&gt; 

                   
<b class="+ topic/ph hi-d/b ">Becomes</b>          
    
&lt;admindoc:head&gt;
    &lt;admindecision:decisioninfo&gt;
        &lt;admindecision:caseinfo&gt;
            &lt;caseinfo:casename&gt;
                &lt;caseinfo:shortcasename name="Indexed as:"&gt;Boucher (Re)&lt;/caseinfo:shortcasename&gt;
            &lt;/caseinfo:casename&gt;
        &lt;/admindecision:caseinfo&gt;
    &lt;/admindecision:decisioninfo&gt;
&lt;/admindoc:head&gt;

           </pre>
                        <note class="- topic/note ">If input document has <sourcexml
                                class="+ topic/keyword xml-d/sourcexml ">nl</sourcexml> within
                                <sourcexml class="+ topic/keyword xml-d/sourcexml "
                                >abbrvname</sourcexml> then convert all newlines to a single space
                            character.</note>
                    </li>

                    <li class="- topic/li "> If <sourcexml class="+ topic/keyword xml-d/sourcexml "
                            >abbrvname</sourcexml> is the child of <targetxml
                            class="+ topic/keyword xml-d/targetxml ">case:courtinfo</targetxml> then
                        it will become
                            <targetxml>jurisinfo:courtinfo/jurisinfo:courtname</targetxml> with
                        attribute <targetxml>@normshortname</targetxml>
                        <pre xml:space="preserve" class="- topic/pre ">

&lt;case:headnote&gt;
    &lt;case:info&gt;
        &lt;case:courtinfo&gt;
            &lt;abbrvname ln.user-displayed="false"&gt;ABEnvAppBd&lt;/abbrvname&gt;
        &lt;/case:courtinfo&gt;
    &lt;/case:info&gt;
&lt;/case:headnote&gt;

                    
      <b class="+ topic/ph hi-d/b ">Becomes</b> 
      
&lt;admindoc:head&gt;
    &lt;admindecision:decisioninfo&gt;
        &lt;admindecision:caseinfo&gt;
            &lt;jurisinfo:courtinfo&gt;
                &lt;jurisinfo:courtname normshortname="ABEnvAppBd"/&gt;
            &lt;/jurisinfo:courtinfo&gt;
        &lt;/admindecision:caseinfo&gt;
    &lt;/admindecision:decisioninfo&gt;
&lt;/admindoc:head&gt;

      </pre>
                        <note><sourcexml>case:courtinfo/abbrvname</sourcexml> will also be mapped in
                                <targetxml>jurisinfo:courtinfo/jurisinfo:alternatecourtcode</targetxml>.
                            For more confirmation please see below examples.</note><pre>


&lt;case:headnote&gt;
    &lt;case:info&gt;
        &lt;case:courtinfo&gt;
            &lt;abbrvname ln.user-displayed="false"&gt;CASCC&lt;/abbrvname&gt;
            &lt;case:courtname&gt;Supreme Court of Canada&lt;nl/&gt; On appeal from British Columbia&lt;/case:courtname&gt;
        &lt;/case:courtinfo&gt;
    &lt;/case:info&gt;
&lt;/case:headnote&gt;

<b>Becomes</b> 
   
&lt;casedigest:head&gt;
    &lt;casedigest:caseinfo&gt;
        &lt;jurisinfo:courtinfo&gt;
            &lt;jurisinfo:courtname normshortname="CASCC"&gt;Supreme Court of Canada&lt;proc:nl/&gt; On appeal from British
                Columbia&lt;/jurisinfo:courtname&gt;
            &lt;jurisinfo:alternatecourtcode alternatecourtcode="CASCC"/&gt;
        &lt;/jurisinfo:courtinfo&gt;
    &lt;/casedigest:caseinfo&gt;
&lt;/casedigest:head&gt;</pre>
                        <!-- <note>For
                        handling <b>@ln.user-displayed</b> attribute, refer the general markup <xref
                            href="../../common_newest/Rosetta_abbrvname_ln.user-displayed.dita"
                            >ln.user_displayed="false"</xref> section in the CI.</note> -->
                    </li>
                </ul>
            </section>
            <section>
                <title>Changes</title>
                <p>2014-10-22<ph id="change_20141022">Updated CI for
                            <targetxml>jurisinfo:courtname@normshortname</targetxml> to also be
                        placed in
                            <targetxml>jurisinfo:alternatecourtcode@alternatecourtcode</targetxml>...R4.5
                        Db issue #1987</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\abbrvname.dita  -->
    <!--<xsl:message>CA04-Administrative_Decisions_abbrvname.xsl requires manual development!</xsl:message> -->

    <xsl:template match="abbrvname">
        <xsl:choose>
            <xsl:when test="parent::case:courtinfo">
                <jurisinfo:courtname>
                    <xsl:attribute name="normshortname">
                        <xsl:value-of select="."/>
                    </xsl:attribute>
                    <xsl:apply-templates select="following-sibling::case:courtname"/>
                </jurisinfo:courtname>
            </xsl:when>
            <xsl:otherwise>
                <caseinfo:shortcasename>
                    <xsl:apply-templates select="@* | node()"/>
                </caseinfo:shortcasename>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <xsl:template match="abbrvname/@display-name">

        <!--  Original Target XPath:  name   -->
        <xsl:attribute name="name">
            <xsl:value-of select="."/>
        </xsl:attribute>

    </xsl:template>


    <xsl:template match="case:courtinfo">
        <jurisinfo:courtinfo>
            <xsl:apply-templates select="@* | node()"/>
        </jurisinfo:courtinfo>
    </xsl:template>

    <xsl:template match="case:courtinfo/abbrvname" mode="courtinfo">
        <jurisinfo:alternatecourtcode>
            <xsl:attribute name="alternatecourtcode">
                <xsl:value-of select="."/>
            </xsl:attribute>
        </jurisinfo:alternatecourtcode>
    </xsl:template>

    <xsl:template match="abbrvname/nl">
        <xsl:value-of select="' '"/>
    </xsl:template>

    <xsl:template match="abbrvname/@searchtype"/>


    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.casename">
        <title>case:casename <lnpid>id-CA04-13413</lnpid></title>
        <body>
            <section>
                <ul>
                    <li class="- topic/li ">
                        <sourcexml class="+ topic/keyword xml-d/sourcexml "
                            >case:casename</sourcexml> becomes <targetxml
                            class="+ topic/keyword xml-d/targetxml ">caseinfo:casename</targetxml>
                        and populate the child as below: <ul class="- topic/ul ">
                            <li class="- topic/li ">Create <targetxml
                                    class="+ topic/keyword xml-d/targetxml "
                                    >caseinfo:fullcasename</targetxml>
                            </li>
                            <li>Any <sourcexml>nl</sourcexml> elements that occur inside
                                    <sourcexml>case:casename</sourcexml> should be suppressed if
                                they are preceded or followed by a space. Any
                                    <sourcexml>nl</sourcexml> elements that are not preceded or
                                followed by a space should be converted into a single space
                                character. If <sourcexml>nl</sourcexml> element is followed by new
                                line, then <sourcexml>nl</sourcexml> and new line will be replaced
                                by single space.</li>
                        </ul>
                        <pre xml:space="preserve" class="- topic/pre ">
&lt;case:casename&gt;IN THE MATTER OF Sections 84, 85, 86 and 87 of the&lt;nl/&gt; Environmental Protection and
    Enhancement Act (S.A. 1992, ch.&lt;nl/&gt; E-13.3) as amended;&lt;nl/&gt; AND IN THE MATTER OF an appeal
    filed by Maurice Boucher et al&lt;nl/&gt; dated December 4, 1993 with respect to Approval
    93-MUN-008&lt;nl/&gt; issued on November 8, 1993 by Mr. David Spink, then Acting&lt;nl/&gt; Director,
    Department of Environmental Protection, relative to&lt;nl/&gt; the construction of a water
    transmission line from the Village&lt;nl/&gt; of Nampa to the Hamlet of Marie Reine. &lt;/case:casename&gt;         
             
          <b class="+ topic/ph hi-d/b ">Becomes</b>             
          

&lt;caseinfo:fullcasename&gt;IN THE MATTER OF Sections 84, 85, 86 and 87 of the Environmental Protection
    and Enhancement Act (S.A. 1992, ch. E-13.3) as amended; AND IN THE MATTER OF an appeal filed by
    Maurice Boucher et al dated December 4, 1993 with respect to Approval 93-MUN-008 issued on
    November 8, 1993 by Mr. David Spink, then Acting Director, Department of Environmental
    Protection, relative to the construction of a water transmission line from the Village of Nampa
    to the Hamlet of Marie Reine. &lt;/caseinfo:fullcasename&gt;
</pre>
                        <b>Example of <sourcexml>nl</sourcexml> followed by space:</b>
                        <pre><b>Source XML</b>

&lt;case:casename&gt;Concordia University, appellant;&lt;nl/&gt; v.&lt;nl/&gt; Richard Bisaillon, respondent, and&lt;nl/&gt;
    Régie des rentes du Québec, respondent, and&lt;nl/&gt; Concordia University Faculty Association
    (CUFA), John&lt;nl/&gt; Hall and Howard Fink, respondents.&lt;nl/&gt; And between&lt;nl/&gt; Concordia University
    Faculty Association (CUFA),&lt;nl/&gt; appellant;&lt;nl/&gt; v.&lt;nl/&gt; Richard Bisaillon, respondent, and&lt;nl/&gt;
    Régie des rentes du Québec, respondent, and&lt;nl/&gt; Concordia University, John Hall and Howard
    Fink,&lt;nl/&gt; respondents.&lt;/case:casename&gt;      

<b>Target XML</b>

&lt;caseinfo:fullcasename&gt;Concordia University, appellant; v. Richard Bisaillon, respondent, and Régie
    des rentes du Québec, respondent, and Concordia University Faculty Association (CUFA), John
    Hall and Howard Fink, respondents. And between Concordia University Faculty Association (CUFA),
    appellant; v. Richard Bisaillon, respondent, and Régie des rentes du Québec, respondent, and
    Concordia University, John Hall and Howard Fink, respondents.&lt;/caseinfo:fullcasename&gt;        
          </pre>
                        <pre xml:space="preserve" class="- topic/pre ">
<b>Handling of case:casename/glp:note scenario</b>
&lt;case:casename&gt;Requests for Leave to Intervene&lt;nl/&gt; Reasons and Order&lt;nl/&gt;
    &lt;glp:note&gt;
        &lt;p&gt;
            &lt;text&gt;[Ed. note: Rev'd [1989] 2 F.C. 88 (C.A.), rev'd&lt;nl/&gt; [1989] 1 S.C.R. 236.]&lt;/text&gt;
        &lt;/p&gt;
    &lt;/glp:note&gt;&lt;nl/&gt; IN THE MATTER OF an application by the Director of&lt;nl/&gt; Investigation and
    Research under Subsection 64(1) of the&lt;nl/&gt; Competition Act, R.S.C., 1970, c. C-23 as
    amended;&lt;nl/&gt; AND IN THE MATTER OF a Limited Partnership formed to combine&lt;nl/&gt; the operations
    of the Reservec and Pegasus computer&lt;nl/&gt; reservation systems;&lt;nl/&gt; AND IN THE MATTER OF The
    Gemini Group Automated Distribution&lt;nl/&gt; Systems Inc.&lt;nl/&gt; Between&lt;nl/&gt; The Director of
    Investigation and Research, Applicant, and&lt;nl/&gt; Air Canada, Air Canada Services Inc., PWA
    Corporation,&lt;nl/&gt; Canadian Airlines International Ltd., Pacific Western&lt;nl/&gt; Airlines Ltd.,
    Canadian Pacific Air Lines, Limited, 154793&lt;nl/&gt; Canada Ltd., 153333 Canada Limited Partnership,
    The Gemini&lt;nl/&gt; Group Automated Distribution Systems Inc., Respondents,&lt;nl/&gt; Consumers'
    Association of Canada, American Airlines Inc.,&lt;nl/&gt; Wardair Canada Inc., Applicants for Leave to
    Intervene 
&lt;/case:casename&gt;
          
          <b class="+ topic/ph hi-d/b ">Becomes</b>           
          
&lt;caseinfo:fullcasename&gt;Requests for Leave to Intervene Reasons and Order 
    &lt;note&gt;
        &lt;bodytext&gt;
            &lt;p&gt;
                &lt;text&gt;[Ed. note: Rev'd [1989] 2 F.C. 88 (C.A.), rev'd  [1989] 1 S.C.R. 236.] &lt;/text&gt;
            &lt;/p&gt;
        &lt;/bodytext&gt;
    &lt;/note&gt; IN THE MATTER OF an application by the Director of Investigation and Research under
    Subsection 64(1) of the Competition Act, R.S.C., 1970, c. C-23 as amended; AND IN THE MATTER OF
    a Limited Partnership formed to combine the operations of the Reservec and Pegasus computer
    reservation systems; AND IN THE MATTER OF The Gemini Group Automated Distribution Systems Inc.
    Between The Director of Investigation and Research, Applicant, and Air Canada, Air Canada
    Services Inc., PWA Corporation, Canadian Airlines International Ltd., Pacific Western Airlines
    Ltd., Canadian Pacific Air Lines, Limited, 154793 Canada Ltd., 153333 Canada Limited
    Partnership, The Gemini Group Automated Distribution Systems Inc., Respondents, Consumers'
    Association of Canada, American Airlines Inc., Wardair Canada Inc., Applicants for Leave to
    Intervene 
&lt;/caseinfo:fullcasename&gt;  
           </pre>
                    </li>
                </ul>
            </section>

            <section>
                <title>Changes</title>
                <p>2014-08-20: <ph id="change_20140820_AS">Update rule for <sourcexml>nl</sourcexml>
                        inside <sourcexml>case:casename</sourcexml> where there is a newline after
                            <sourcexml>nl</sourcexml>. <b>Db issue no. #329</b></ph></p>
                <p>2014-04-01: <ph id="change_20140401_VA">Update rule for <sourcexml>nl</sourcexml>
                        inside <sourcexml>case:casename</sourcexml>. These changes immediate applies
                        to CA04 - Administrative Decisions.</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.casename.dita  -->
    <!--<xsl:message>CA04-Administrative_Decisions_case.casename.xsl requires manual development!</xsl:message> -->

    <xsl:template match="case:casename">
        <caseinfo:casename>
            <caseinfo:fullcasename>
                <xsl:apply-templates select="@* | node()"/>
            </caseinfo:fullcasename>
            <xsl:apply-templates select="/CASEDOC/case:body/case:headnote/case:info/abbrvname"/>
        </caseinfo:casename>
    </xsl:template>

    <!--RS[2017-12-01]: Created template for handling nl elements that are not preceded or followed by a space should be converted into a single space character-->
    <xsl:template match="case:casename/nl">
        <xsl:choose>
            <xsl:when
                test="ends-with(preceding-sibling::text()[1], ' ') or starts-with(following-sibling::text()[1], ' ')"/>
            <xsl:otherwise>
                <xsl:text> </xsl:text>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>




    <xsl:template match="case:casename/glp:note">
        <note>
            <bodytext>
                <xsl:apply-templates select="@* | node()"/>
            </bodytext>
        </note>
    </xsl:template>


    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.reportercite">
        <title>case:reportercite <lnpid>id-CA04-13435</lnpid></title>
        <body>
            <section>
                <ul>
                    <li class="- topic/li ">
                        <sourcexml class="+ topic/keyword xml-d/sourcexml "
                            >case:reportercite</sourcexml> becomes <targetxml
                            class="+ topic/keyword xml-d/targetxml ">ref:citations</targetxml> with
                        child elements as described below: <ul class="- topic/ul ">
                            <li class="- topic/li "> Create <targetxml
                                    class="+ topic/keyword xml-d/targetxml "
                                    >admindecision:caseinfo/ref:citations/ref:cite4thisresource</targetxml>
                                with attribute <targetxml class="+ topic/keyword xml-d/targetxml "
                                    >@citetype</targetxml> defines the type of citation "reporter".
                                    <note class="- topic/note ">For handling of citation markup;
                                    kindly refer <xref
                                        href="../../common_newest/Rosetta_ci.cite-LxAdv-lnci.cite.dita"
                                        class="- topic/xref ">ci:cite</xref> instructions under
                                    General Markup Section.</note>
                            </li>
                        </ul>
                        <pre xml:space="preserve" class="- topic/pre ">

&lt;case:reportercite&gt;
  &lt;ci:cite type="cite4thisdoc"&gt;
    &lt;ci:case&gt;
         &lt;ci:caseref ID="cref00002980" spanref="cspan00002980"&gt;
        &lt;ci:reporter value="AEUBD"/&gt;        
        &lt;ci:edition&gt;
          &lt;ci:date year="2011"/&gt;
        &lt;/ci:edition&gt;
        &lt;ci:refnum num="552"/&gt;        
      &lt;/ci:caseref&gt;
    &lt;/ci:case&gt;
    &lt;ci:content&gt;
      &lt;ci:span spanid="cspan00002980"&gt;[2011] A.E.U.B.D. No. 552&lt;/ci:span&gt;
    &lt;/ci:content&gt;    
  &lt;/ci:cite&gt;
&lt;/case:reportercite&gt;

<b class="+ topic/ph hi-d/b ">Becomes</b>

&lt;ref:citations&gt;
  &lt;ref:cite4thisresource citetype="reporter"&gt;
    &lt;lnci:cite&gt;
      &lt;lnci:case&gt;        
        &lt;lnci:caseref ID="cref00002980"&gt;
          &lt;lnci:reporter value="AEUBD"/&gt;        
          &lt;lnci:edition&gt;
            &lt;lnci:date year="2011"/&gt;
          &lt;/lnci:edition&gt;
          &lt;lnci:refnum num="552"/&gt;         
        &lt;/lnci:caseref&gt;
      &lt;/lnci:case&gt;
      &lt;lnci:content&gt;[2011] A.E.U.B.D. No. 552&lt;/lnci:content&gt;
    &lt;/lnci:cite&gt;
  &lt;/ref:cite4thisresource&gt;
&lt;/ref:citations&gt;
</pre>
                    </li>
                </ul>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.reportercite.dita  -->
    <!--<xsl:message>CA04-Administrative_Decisions_case.reportercite.xsl requires manual development!</xsl:message> -->

    <xsl:template match="case:reportercite">
        <ref:cite4thisresource citetype="reporter">
            <xsl:apply-templates select="@* | node()"/>
        </ref:cite4thisresource>
    </xsl:template>

    <!-- post processing to wrap ref:citation all together -->
    <!-- <xsl:template name="wrapps">
    <xsl:param name="node"/>
    <!-\-        <xsl:apply-templates select="$node"/>-\->
    <xsl:for-each select="$node/child::node()">
      <xsl:copy>
        <xsl:copy-of select="@*"/>
        <xsl:apply-templates mode="hierarchy"/>
      </xsl:copy>
      
    </xsl:for-each>
    <xsl:if test="$node/following-sibling::*[1][self::ref:citations]">
      <xsl:call-template name="wrapps">
        <xsl:with-param name="node" select="$node/following-sibling::*[1][self::ref:citations]"/>
      </xsl:call-template>
    </xsl:if>
  </xsl:template>
  
  <xsl:template match="ref:citations[not(preceding-sibling::*[1][self::ref:citations])]" mode="hierarchy">
    <ref:citations>
      <xsl:apply-templates select="node()|@*" mode="hierarchy"/>
      <xsl:if test="following-sibling::*[1][self::ref:citations]">
        <xsl:call-template name="wrapps">
          <xsl:with-param name="node" select="following-sibling::*[1][self::ref:citations]"/>
        </xsl:call-template>
      </xsl:if>
    </ref:citations>
  </xsl:template>
  
  <xsl:template match="ref:citations[preceding-sibling::*[1][self::ref:citations]]" mode="hierarchy"/>
  
  
  <xsl:template match="node()|@*" mode="hierarchy" >
    <xsl:copy>
      <xsl:apply-templates select="node()|@*" mode="hierarchy"/>
    </xsl:copy>
  </xsl:template>-->


    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.parallelcite">
        <title>case:parallelcite <lnpid>id-CA04-13431</lnpid></title>
        <body>
            <section>
                <ul>
                    <li class="- topic/li ">
                        <sourcexml class="+ topic/keyword xml-d/sourcexml "
                            >case:parallelcite</sourcexml> becomes <targetxml
                            class="+ topic/keyword xml-d/targetxml "
                            >admindecision:caseinfo/ref:citations/ref:parallelcite/@citetype="parallel"</targetxml>. <pre xml:space="preserve" class="- topic/pre ">
&lt;case:info&gt;
  &lt;case:parallelcite&gt; 
    &lt;ci:cite type="cite4thisdoc"&gt;
      &lt;ci:case&gt;
        &lt;ci:caseref ID="cref00000332" spanref="cspan00000332"&gt;
          &lt;ci:reporter value="MPLR3"/&gt;
          &lt;ci:volume num="6"/&gt;         
          &lt;ci:page num="147"/&gt;
        &lt;/ci:caseref&gt;
      &lt;/ci:case&gt;
      &lt;ci:content&gt;        
          &lt;ci:span spanid="cspan00000332"&gt;6 M.P.L.R. (3d) 147&lt;/ci:span&gt;       
      &lt;/ci:content&gt;
    &lt;/ci:cite&gt;
  &lt;/case:parallelcite&gt;
&lt;/case:info&gt;

<b class="+ topic/ph hi-d/b ">Becomes</b>

&lt;admindecision:caseinfo&gt;
  &lt;ref:citations&gt;
    &lt;ref:parallelcite citetype="parallel"&gt; 
      &lt;lnci:cite&gt;
        &lt;lnci:case&gt;
          &lt;lnci:caseref ID="cref00000332"&gt;
            &lt;lnci:reporter value="MPLR3"/&gt;
            &lt;lnci:volume num="6"/&gt;           
            &lt;lnci:page num="147"/&gt;
          &lt;/lnci:caseref&gt;
        &lt;/lnci:case&gt;
        &lt;lnci:content&gt;6 M.P.L.R. (3d) 147&lt;/lnci:content&gt;
      &lt;/lnci:cite&gt;
    &lt;/ref:parallelcite&gt;
  &lt;/ref:citations&gt;
&lt;/admindecision:caseinfo&gt;
</pre>
                        <note>In case of multiple occurance of <sourcexml>ci:cite</sourcexml> under
                                <targetxml>case:parallelcite</targetxml> conversion need to generate
                            separate <targetxml>ref:parallelcite</targetxml> for every
                                <sourcexml>ci:cite</sourcexml> element with attribute
                            @type="parallel". Please refer the example below.</note>
                        <pre>
 &lt;case:parallelcite&gt;
     &lt;ci:cite type="cite4thisdoc"&gt;
      &lt;ci:case&gt;
       &lt;ci:caseref ID="cref00001074" spanref="cspan00001074"&gt;
        &lt;ci:reporter value="JE"/&gt;
        &lt;ci:edition&gt;
         &lt;ci:date year="1993"/&gt;
        &lt;/ci:edition&gt;
        &lt;ci:page num="877"/&gt;
       &lt;/ci:caseref&gt;
      &lt;/ci:case&gt;
      &lt;ci:content&gt;&lt;ci:span spanid="cspan00001074"&gt;J.E. 93-877&lt;/ci:span&gt;, &lt;/ci:content&gt;
     &lt;/ci:cite&gt;
     &lt;ci:cite type="cite4thisdoc"&gt;
      &lt;ci:case&gt;
       &lt;ci:caseref ID="cref00001075" spanref="cspan00001075"&gt;
        &lt;ci:reporter value="DTE"/&gt;
        &lt;ci:edition&gt;
         &lt;ci:date year="1993"/&gt;
        &lt;/ci:edition&gt;
        &lt;ci:page num="598"/&gt;
       &lt;/ci:caseref&gt;
      &lt;/ci:case&gt;
      &lt;ci:content&gt;&lt;ci:span spanid="cspan00001075"&gt;D.T.E. 93T-598&lt;/ci:span&gt;, &lt;/ci:content&gt;
     &lt;/ci:cite&gt;
     &lt;ci:cite type="cite4thisdoc"&gt;
      &lt;ci:case&gt;
       &lt;ci:caseref ID="cref00001076" spanref="cspan00001076"&gt;
        &lt;ci:reporter value="RJQ"/&gt;
        &lt;ci:edition&gt;
         &lt;ci:date year="1993"/&gt;
        &lt;/ci:edition&gt;
        &lt;ci:page num="1297"/&gt;
       &lt;/ci:caseref&gt;
      &lt;/ci:case&gt;
      &lt;ci:content&gt;&lt;ci:span spanid="cspan00001076"&gt;[1993] R.J.Q. 1297&lt;/ci:span&gt;,&lt;/ci:content&gt;
     &lt;/ci:cite&gt;
   &lt;/case:parallelcite&gt;   
   
   <b class="+ topic/ph hi-d/b ">Becomes</b>

  &lt;ref:parallelcite citetype="parallel"&gt;
      &lt;lnci:cite&gt;
       &lt;lnci:case&gt;
        &lt;lnci:caseref ID="cref00001074"&gt;
         &lt;lnci:reporter value="JE"/&gt;
         &lt;lnci:edition&gt;
          &lt;lnci:date year="1993"/&gt;
         &lt;/lnci:edition&gt;
         &lt;lnci:page num="877"/&gt;
        &lt;/lnci:caseref&gt;
       &lt;/lnci:case&gt;
       &lt;lnci:content&gt;J.E. 93-877&lt;/lnci:content&gt;
      &lt;/lnci:cite&gt;
     &lt;/ref:parallelcite&gt;
     &lt;ref:parallelcite citetype="parallel"&gt;
      &lt;lnci:cite&gt;
       &lt;lnci:case&gt;
        &lt;lnci:caseref ID="cref00001075"&gt;
         &lt;lnci:reporter value="DTE"/&gt;
         &lt;lnci:edition&gt;
          &lt;lnci:date year="1993"/&gt;
         &lt;/lnci:edition&gt;
         &lt;lnci:page num="598"/&gt;
        &lt;/lnci:caseref&gt;
       &lt;/lnci:case&gt;  
       &lt;lnci:content&gt;D.T.E. 93T-598&lt;/lnci:content&gt;
      &lt;/lnci:cite&gt;
     &lt;/ref:parallelcite&gt;
     &lt;ref:parallelcite citetype="parallel"&gt;
      &lt;lnci:cite&gt;
       &lt;lnci:case&gt; 
        &lt;lnci:caseref ID="cref00001076"&gt;
         &lt;lnci:reporter value="RJQ"/&gt;
         &lt;lnci:edition&gt;
          &lt;lnci:date year="1993"/&gt;
         &lt;/lnci:edition&gt;
         &lt;lnci:page num="1297"/&gt;
        &lt;/lnci:caseref&gt;
       &lt;/lnci:case&gt;
       &lt;lnci:content&gt;[1993] R.J.Q. 1297&lt;/lnci:content&gt;
      &lt;/lnci:cite&gt;
     &lt;/ref:parallelcite&gt;            
            
           </pre>
                    </li>
                </ul>
            </section>

            <section>
                <title>Changes Specific to CA04</title>
                <p>2014-06-23: <ph id="change_20140623_AS">Instructions for multiple occurance of
                            <sourcexml>ci:cite</sourcexml> under
                            <targetxml>case:parallelcite</targetxml>... Db issue #234</ph></p>
                <p>2014-06-11: <ph id="change_20140611_SSX">Updated instruction and example to add
                        attribute <targetxml>ref:parallelcite/@citetype="parallel"</targetxml> in
                        target.</ph></p>
                <p>2014-04-16: <ph id="change_20140416_VA">Update target mapping and target example
                        for <sourcexml>case:parallelcite</sourcexml>.</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.parallelcite.dita  -->
    <!--<xsl:message>CA04-Administrative_Decisions_case.parallelcite.xsl requires manual development!</xsl:message> -->

    <xsl:template match="case:parallelcite">
        <xsl:for-each select="child::ci:cite">
            <ref:parallelcite>
                <xsl:attribute name="citetype">
                    <xsl:text>parallel</xsl:text>
                </xsl:attribute>
                <lnci:cite>
                    <xsl:apply-templates select="@* | node()"/>
                </lnci:cite>
            </ref:parallelcite>
        </xsl:for-each>
    </xsl:template>

    <xsl:template match="case:reportercite[$streamID = 'CA04']" mode="docrelated-content">
        <xsl:variable name="reportercite">
            <xsl:value-of select="ci:cite/ci:content"/>
        </xsl:variable>
        <xsl:variable name="alternate-cite">
            <xsl:for-each select="$docRelatedContent-TableCA04/references/reference">
                <xsl:variable name="primary-cite" select="@primary-citation"/>
                <xsl:if test="contains($reportercite, $primary-cite)">
                    <xsl:value-of select="@alternate-citation"/>
                </xsl:if>
            </xsl:for-each>
        </xsl:variable>
        <xsl:if
            test="count(../case:parallelcite[descendant::ci:content[contains(., $alternate-cite)]]) > 0">
            <doc:related-content>
                <doc:related-content-grp content-type="alternate-language-version">
                    <doc:related-content-item>
                        <doc:related-content-link>
                            <ref:lnlink service="TRAVERSE">
                                <ref:marker>
                                    <xsl:choose>
                                        <xsl:when
                                            test="/CASEDOC/docinfo/docinfo:doc-lang/@lang = 'fr'">
                                            <xsl:text>English Version</xsl:text>
                                        </xsl:when>
                                        <xsl:when
                                            test="/CASEDOC/docinfo/docinfo:doc-lang/@lang = 'en'">
                                            <xsl:text>French Version</xsl:text>
                                        </xsl:when>
                                    </xsl:choose>
                                </ref:marker>
                                <ref:locator>
                                    <ref:locator-key>
                                        <ref:key-name name="normcite"/>
                                        <ref:key-value>
                                            <xsl:choose>
                                                <xsl:when
                                                  test="../case:parallelcite[cicite/ci:content[contains(., $alternate-cite)]]">
                                                  <xsl:attribute name="value">
                                                  <xsl:value-of
                                                  select="../case:parallelcite[cicite/ci:content[contains(., $alternate-cite)]][1]"
                                                  />
                                                  </xsl:attribute>
                                                </xsl:when>
                                                <xsl:otherwise>
                                                  <xsl:attribute name="value">
                                                  <xsl:value-of
                                                  select="//case:parallelcite[parent::case:info][1]/ci:cite/ci:content"
                                                  />
                                                  </xsl:attribute>
                                                </xsl:otherwise>
                                            </xsl:choose>
                                        </ref:key-value>
                                    </ref:locator-key>
                                    <ref:locator-params>
                                        <proc:param name="normprotocol" value="CAEditorial"/>
                                        <proc:param name="countrycode">
                                            <xsl:attribute name="value">
                                                <xsl:value-of
                                                  select="/CASEDOC/docinfo/docinfo:doc-country/@iso-cc"
                                                />
                                            </xsl:attribute>
                                        </proc:param>
                                        <proc:param>
                                            <xsl:attribute name="name">targetdoclang</xsl:attribute>
                                            <xsl:attribute name="value">
                                                <xsl:choose>
                                                  <xsl:when
                                                  test="/CASEDOC/docinfo/docinfo:doc-lang/@lang = 'fr'">
                                                  <xsl:value-of
                                                  select="concat('en', '-', /CASEDOC/docinfo/docinfo:doc-country/@iso-cc)"
                                                  />
                                                  </xsl:when>
                                                  <xsl:when
                                                  test="/CASEDOC/docinfo/docinfo:doc-lang/@lang = 'en'">
                                                  <xsl:value-of
                                                  select="concat('fr', '-', /CASEDOC/docinfo/docinfo:doc-country/@iso-cc)"
                                                  />
                                                  </xsl:when>
                                                </xsl:choose>
                                                <!--<xsl:value-of select="concat(/CASEDOC/docinfo/docinfo:doc-lang/@lang,'-',/CASEDOC/docinfo/docinfo:doc-country/@iso-cc)"/>-->
                                            </xsl:attribute>
                                        </proc:param>
                                    </ref:locator-params>
                                </ref:locator>
                            </ref:lnlink>
                        </doc:related-content-link>
                    </doc:related-content-item>
                </doc:related-content-grp>
            </doc:related-content>
        </xsl:if>
    </xsl:template>




    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.courtcite">
        <title>case:courtcite <lnpid>id-CA04-13416</lnpid></title>
        <body>
            <section>
                <ul>
                    <li class="- topic/li ">
                        <sourcexml class="+ topic/keyword xml-d/sourcexml "
                            >case:courtcite</sourcexml> becomes <targetxml
                            class="+ topic/keyword xml-d/targetxml "
                            >/admindecision:decisioninfo/admindecision:caseinfo/ref:citations/ref:parallelcite</targetxml>.
                        The value of <targetxml>ref:parallelcite/@citetype</targetxml> should be set
                        to "court".
                        <pre xml:space="preserve" class="- topic/pre ">
&lt;case:courtcite&gt;
    &lt;ci:cite type="cite4thisdoc"&gt;
        &lt;ci:case&gt;
            &lt;ci:caseinfo spanref="cspan00000937"&gt;
                &lt;ci:opinionnum num="388"/&gt;
                &lt;ci:jurisinfo&gt;
                    &lt;ci:can courtcode="ABQB"/&gt;
                &lt;/ci:jurisinfo&gt;
                &lt;ci:decisiondate year="2000"/&gt;
            &lt;/ci:caseinfo&gt;
        &lt;/ci:case&gt;
        &lt;ci:content&gt;
            &lt;ci:span spanid="cspan00000937"&gt;2000 ABQB 388&lt;/ci:span&gt;
        &lt;/ci:content&gt;
    &lt;/ci:cite&gt;
&lt;/case:courtcite&gt;
            
<b class="+ topic/ph hi-d/b ">Becomes</b>           
           

&lt;admindecision:caseinfo&gt;
...
&lt;ref:citations&gt;
    &lt;ref:parallelcite citetype="court"&gt;
        &lt;lnci:cite&gt;
            &lt;lnci:case&gt;
                &lt;lnci:caseinfo&gt;
                    &lt;lnci:opinionnum num="388"/&gt;
                    &lt;lnci:jurisinfo&gt;
                        &lt;lnci:can courtcode="ABQB"/&gt;
                    &lt;/lnci:jurisinfo&gt;
                    &lt;lnci:decisiondate year="2000"/&gt;
                &lt;/lnci:caseinfo&gt;
            &lt;/lnci:case&gt;
            &lt;lnci:content&gt;2000 ABQB 388&lt;/lnci:content&gt;
        &lt;/lnci:cite&gt;
    &lt;/ref:parallelcite&gt;
&lt;/ref:citations&gt;
...
&lt;/admindecision:caseinfo&gt;
          
</pre>
                    </li>
                    <li>
                        <p>If there are more than one <sourcexml>ci:cite</sourcexml> within
                                <sourcexml>case:courtcite</sourcexml> then seperate
                                <targetxml>ref:parallelcite</targetxml> will be created for every
                                <sourcexml>ci:cite/@type="cite4thisdoc"</sourcexml>. Please refer
                            the example below.</p>
                        <pre>
&lt;case:courtcite&gt;
    &lt;ci:cite type="cite4thisdoc"&gt;
        &lt;ci:case&gt;
            &lt;ci:caseinfo spanref="cspan00001104"&gt;
                &lt;ci:opinionnum num="42"/&gt;
                &lt;ci:jurisinfo&gt;
                    &lt;ci:can courtcode="CAOHS"/&gt;
                &lt;/ci:jurisinfo&gt;
                &lt;ci:decisiondate year="2007"/&gt;
            &lt;/ci:caseinfo&gt;
        &lt;/ci:case&gt;
        &lt;ci:content&gt;Interlocutory Decision Nos. &lt;ci:span spanid="cspan00001104"
            &gt;CAO-07-042&lt;/ci:span&gt;(A),
            &lt;ci:cite type="cite4thisdoc"&gt;
                &lt;ci:case&gt;&lt;ci:caseinfo
                    spanref="cspan00001105"&gt;&lt;ci:opinionnum num="52"/&gt;&lt;ci:jurisinfo&gt;&lt;ci:can courtcode="CAOHS"
                    /&gt;&lt;/ci:jurisinfo&gt;&lt;ci:decisiondate year="2006"
                    /&gt;&lt;/ci:caseinfo&gt;&lt;/ci:case&gt;&lt;ci:content&gt;&lt;ci:span spanid="cspan00001105"
                        &gt;CAO-06-052&lt;/ci:span&gt;&lt;/ci:content&gt;&lt;/ci:cite&gt;(S)&lt;/ci:content&gt;
    &lt;/ci:cite&gt;
&lt;/case:courtcite&gt;

<b>Becomes</b>
&lt;ref:citations&gt;
    &lt;ref:parallelcite citetype="court"&gt;
        &lt;lnci:cite&gt;
            &lt;lnci:case&gt;
                &lt;lnci:caseref ID="cspan00001104"&gt;
                    &lt;lnci:opinionnum num="42"/&gt;
                    &lt;lnci:jurisinfo&gt;
                        &lt;lnci:can courtcode="CAOHS"/&gt;
                    &lt;/lnci:jurisinfo&gt;
                    &lt;lnci:decisiondate year="2007"/&gt;
                &lt;/lnci:caseref&gt;
            &lt;/lnci:case&gt;
            &lt;lnci:content&gt;Interlocutory Decision Nos. CAO-07-042(A),&lt;/lnci:content&gt;
        &lt;/lnci:cite&gt;
    &lt;/ref:parallelcite&gt;
    &lt;ref:parallelcite citetype="court"&gt;
        &lt;lnci:cite&gt;
            &lt;lnci:case&gt;
                &lt;lnci:caseref ID="cspan00001105"&gt;
                    &lt;lnci:opinionnum num="52"/&gt;
                    &lt;lnci:jurisinfo&gt;
                        &lt;lnci:can courtcode="CAOHS"/&gt;
                    &lt;/lnci:jurisinfo&gt;
                    &lt;lnci:decisiondate year="2006"/&gt;
                &lt;/lnci:caseref&gt;
            &lt;/lnci:case&gt;
            &lt;lnci:content&gt;CAO-06-052(S)&lt;/lnci:content&gt;
        &lt;/lnci:cite&gt;
    &lt;/ref:parallelcite&gt;
&lt;/ref:citations&gt;


        </pre>
                        <note>If <sourcexml>case:courtcite</sourcexml>,
                                <sourcexml>case:parallelcite</sourcexml> and
                                <sourcexml>case:reportercite</sourcexml> are sibling then, map them
                            under one <targetxml>ref:citations</targetxml>. </note>
                        <b>Source XML</b>
                        <pre>&lt;case:reportercite&gt;
    &lt;ci:cite type="cite4thisdoc"&gt;
        &lt;ci:case&gt;
            &lt;ci:caseref ID="cref00000912" spanref="cspan00000912"&gt;
                &lt;ci:reporter value="CARTD"/&gt;
                &lt;ci:edition&gt;
                    &lt;ci:date year="2010"/&gt;
                &lt;/ci:edition&gt;
                &lt;ci:refnum num="18"/&gt;
            &lt;/ci:caseref&gt;
        &lt;/ci:case&gt;
        &lt;ci:content&gt;
            &lt;ci:span spanid="cspan00000912"&gt;[2010] C.A.R.T.D. No. 18&lt;/ci:span&gt;
        &lt;/ci:content&gt;
    &lt;/ci:cite&gt;
&lt;/case:reportercite&gt;
&lt;case:parallelcite&gt;
    &lt;ci:cite&gt;
        &lt;ci:case&gt;
            &lt;ci:caseref ID="cref00000913" spanref="cspan00000913"&gt;
                &lt;ci:reporter value="CARTD"/&gt;
                &lt;ci:edition&gt;
                    &lt;ci:date year="2010"/&gt;
                &lt;/ci:edition&gt;
                &lt;ci:refnum num="18"/&gt;
            &lt;/ci:caseref&gt;
        &lt;/ci:case&gt;
        &lt;ci:content&gt;
            &lt;ci:span spanid="cspan00000913"&gt;[2010] D.C.R.A.C. no 18&lt;/ci:span&gt;
        &lt;/ci:content&gt;
    &lt;/ci:cite&gt;
&lt;/case:parallelcite&gt;
&lt;case:courtinfo&gt;
    &lt;case:courtcite&gt;
        &lt;ci:cite type="cite4thisdoc"&gt;
            &lt;ci:case&gt;
                &lt;ci:caseinfo spanref="cspan00000914"&gt;
                    &lt;ci:opinionnum num="17"/&gt;
                    &lt;ci:jurisinfo&gt;
                        &lt;ci:can courtcode="CAGRT"/&gt;
                    &lt;/ci:jurisinfo&gt;
                    &lt;ci:decisiondate year="2010"/&gt;
                &lt;/ci:caseinfo&gt;
            &lt;/ci:case&gt;
            &lt;ci:content&gt;
                &lt;ci:span spanid="cspan00000914"&gt;2010 CART 17&lt;/ci:span&gt;
            &lt;/ci:content&gt;
        &lt;/ci:cite&gt;
    &lt;/case:courtcite&gt;
    &lt;case:filenum&gt;No. RTA-60380&lt;/case:filenum&gt;
    &lt;case:filenum&gt;(RT-1525)&lt;/case:filenum&gt;
&lt;/case:courtinfo&gt;</pre>
                    </li>
                    <li>
                        <b>Target XML</b>
                        <pre>
&lt;ref:citations&gt;
    &lt;ref:cite4thisresource citetype="reporter"&gt;
        &lt;lnci:cite&gt;
            &lt;lnci:case&gt;
                &lt;lnci:caseref ID="cref00000912"&gt;
                    &lt;lnci:reporter value="CARTD"/&gt;
                    &lt;lnci:edition&gt;
                        &lt;lnci:date year="2010"/&gt;
                    &lt;/lnci:edition&gt;
                    &lt;lnci:refnum num="18"/&gt;
                &lt;/lnci:caseref&gt;
            &lt;/lnci:case&gt;
            &lt;lnci:content&gt;[2010] C.A.R.T.D. No. 18&lt;/lnci:content&gt;
        &lt;/lnci:cite&gt;
    &lt;/ref:cite4thisresource&gt;
    &lt;ref:parallelcite&gt;
        &lt;lnci:cite&gt;
            &lt;lnci:case&gt;
                &lt;lnci:caseref ID="cref00000913"&gt;
                    &lt;lnci:reporter value="CARTD"/&gt;
                    &lt;lnci:edition&gt;
                        &lt;lnci:date year="2010"/&gt;
                    &lt;/lnci:edition&gt;
                    &lt;lnci:refnum num="18"/&gt;
                &lt;/lnci:caseref&gt;
            &lt;/lnci:case&gt;
            &lt;lnci:content&gt;[2010] D.C.R.A.C. no 18&lt;/lnci:content&gt;
        &lt;/lnci:cite&gt;
    &lt;/ref:parallelcite&gt;
    &lt;ref:parallelcite citetype="court"&gt;
        &lt;lnci:cite&gt;
            &lt;lnci:case&gt;
                &lt;lnci:caseinfo&gt;
                    &lt;lnci:opinionnum num="17"/&gt;
                    &lt;lnci:jurisinfo&gt;
                        &lt;lnci:can courtcode="CAGRT"/&gt;
                    &lt;/lnci:jurisinfo&gt;
                    &lt;lnci:decisiondate year="2010"/&gt;
                &lt;/lnci:caseinfo&gt;
            &lt;/lnci:case&gt;
            &lt;lnci:content&gt;2010 CART 17&lt;/lnci:content&gt;
        &lt;/lnci:cite&gt;
    &lt;/ref:parallelcite&gt;
&lt;/ref:citations&gt;                        
                    </pre>
                    </li>
                </ul>
            </section>
            <section>
                <title>Changes</title>
                <p>2015-06-24: <ph id="change_20150624_AS"><sourcexml>case:courtcite</sourcexml>
                        will be mapped to
                            <targetxml>admindecision:decisioninfo/admindecision:caseinfo/ref:citations/ref:parallelcite</targetxml>.
                        The value of <targetxml>ref:parallelcite/@citetype</targetxml> should be set
                        to "court". WebTeam #302381</ph></p>
                <p>2014-07-28: <ph id="change_20140728_AS">Updated instruction and example for
                        grouping of citations under one <targetxml>ref:citations</targetxml>. R4.5
                        DB Item #1768.</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.courtcite.dita  -->
    <!--<xsl:message>CA04-Administrative_Decisions_case.courtcite.xsl requires manual development!</xsl:message> -->

    <xsl:template match="case:courtcite">

        <!--  Original Target XPath:  /admindecision:decisioninfo/admindecision:caseinfo/ref:citations/ref:parallelcite   -->
        <xsl:for-each select="child::ci:cite">

            <ref:parallelcite citetype="court">
                <lnci:cite>
                    <xsl:apply-templates select="@* | node()"/>
                </lnci:cite>
            </ref:parallelcite>

        </xsl:for-each>


    </xsl:template>





    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.filenum">
        <title>case:filenum <lnpid>id-CA04-13422</lnpid></title>
        <body>
            <section>
                <ul>
                    <li class="- topic/li ">
                        <sourcexml class="+ topic/keyword xml-d/sourcexml ">case:filenum</sourcexml>
                        becomes <targetxml class="+ topic/keyword xml-d/targetxml "
                            >admindecision:caseinfo/caseinfo:docketnum</targetxml>
                        <pre xml:space="preserve" class="- topic/pre ">
             
&lt;case:filenum&gt;Decision No. 2011-436; Application&lt;/case:filenum&gt;

<b class="+ topic/ph hi-d/b ">Becomes</b>
             
&lt;caseinfo:docketnum&gt;Decision No. 2011-436; Application&lt;/caseinfo:docketnum&gt;                
</pre>
                    </li>
                </ul>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.filenum.dita  -->
    <!--xsl:message>CA04-Administrative_Decisions_case.filenum.xsl requires manual development!</xsl:message> -->

    <xsl:template match="case:filenum">

        <!--  Original Target XPath:  admindecision:caseinfo/caseinfo:docketnum   -->

        <caseinfo:docketnum>
            <xsl:apply-templates select="@* | node()"/>
        </caseinfo:docketnum>


    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.courtinfo">
        <title>case:courtinfo <lnpid>id-CA04-13418</lnpid></title>
        <body>
            <section>
                <ul>
                    <li class="- topic/li ">
                        <sourcexml class="+ topic/keyword xml-d/sourcexml "
                            >case:info/case:courtinfo</sourcexml> becomes <targetxml
                            class="+ topic/keyword xml-d/targetxml "
                            >/admindecision:caseinfo/jurisinfo:courtinfo</targetxml>
                    </li>
                </ul>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.courtinfo.dita  -->
    <!--	<xsl:message>CA04-Administrative_Decisions_case.courtinfo.xsl requires manual development!</xsl:message> -->

    <xsl:template match="case:info/case:courtinfo[child::case:judges]" priority="25">
        <jurisinfo:courtinfo>
            <xsl:apply-templates select="abbrvname" mode="courtinfo"/>
            <xsl:apply-templates select="abbrvname, case:juris"/>
            <xsl:if test="not(child::abbrvname)">
                <xsl:apply-templates select="case:courtname"/>
            </xsl:if>
        </jurisinfo:courtinfo>
    </xsl:template>

    <xsl:template match="case:info/case:courtinfo">
        <xsl:apply-templates select="@* | node()"/>
    </xsl:template>


    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.juris">
        <title>case:juris <lnpid>id-CA04-13429</lnpid></title>
        <body>
            <section><sourcexml>case:juris</sourcexml> can hold a code representing a Province or
                Country. <sectiondiv> We will convert the following codes from old to new ISO: <ul
                        id="ul_and_cnl_kq">
                        <li>For Canada: if input document contains <sourcexml>CD</sourcexml> or
                                <sourcexml>Canada</sourcexml> within
                                <sourcexml>leg:juris</sourcexml>, then convert it to
                                <targetxml>CA</targetxml>.</li>
                        <li>For UK: if input document contains <sourcexml>UK</sourcexml> within
                                <sourcexml>case:juris</sourcexml>, then convert it to
                                <targetxml>CA</targetxml>.</li>
                        <li>For Newfoundland and Labrador: if input document contains
                                <sourcexml>NF</sourcexml> within <sourcexml>leg:juris</sourcexml>,
                            then convert it to <targetxml>NL</targetxml>.</li>
                        <li>For Quebec: if input document contains <sourcexml>PQ</sourcexml> within
                                <sourcexml>leg:juris</sourcexml>, then convert it to
                                <targetxml>QC</targetxml>.</li>
                    </ul>
                    <b>The translations should be</b>: <ul id="ul_lsd_cnl_kq">
                        <li><targetxml>jurisinfo:courtinfo/jurisinfo:jurisdiction/jurisinfo:system@normshortname/globalentity:entity/globalentity:entityReference@role="urn:contentType:geography",
                                @guid:guid</targetxml> and with
                                <targetxml>globalentity:content</targetxml> element. <note>Place the
                                content of <sourcexml>case:juris</sourcexml> in
                                    <targetxml>jurisinfo:system@normshortname</targetxml> .
                                    </note><note><targetxml>@guid:guid</targetxml> attribute value
                                will be taken from below mentioned table from <b>PGUID</b> column.
                                Country or Province code can also be taken from <b>COUNTRY &amp;
                                    PROVINCE CODES</b> column.</note></li>
                    </ul>
                </sectiondiv><p>
                    <ul id="ul_cn3_s3l_kq">
                        <li>
                            <table id="table_nv3_s3l_kq">
                                <title>The <b>province</b> codes with PGUID codes for
                                    Country:</title>
                                <tgroup cols="5">
                                    <tbody>
                                        <row>
                                            <entry><b>OFFICIAL NAME</b></entry>
                                            <entry><b>COUNTRY &amp; PROVINCE CODES</b></entry>
                                            <entry><b>COUNTRY/PROVINCE</b></entry>
                                            <entry><b>PGUID</b></entry>
                                            <entry><b>CODES</b></entry>
                                        </row>
                                        <row>
                                            <entry>Canada</entry>
                                            <entry>(CA)</entry>
                                            <entry>COUNTRY</entry>
                                            <entry>urn:entity:geob-101733280</entry>
                                            <entry>ISO-3166-1</entry>
                                        </row>
                                        <row>
                                            <entry>Alberta</entry>
                                            <entry>(AB)</entry>
                                            <entry>PROVINCE</entry>
                                            <entry>urn:entity:geob-101865413</entry>
                                            <entry>ISO-3166-2</entry>
                                        </row>
                                        <row>
                                            <entry>British Columbia</entry>
                                            <entry>(BC)</entry>
                                            <entry>PROVINCE</entry>
                                            <entry>urn:entity:geob-100301383</entry>
                                            <entry>ISO-3166-2</entry>
                                        </row>
                                        <row>
                                            <entry>Prince Edward Island</entry>
                                            <entry>(PE)</entry>
                                            <entry>PROVINCE</entry>
                                            <entry>urn:entity:geob-101864367</entry>
                                            <entry>ISO-3166-2</entry>
                                        </row>
                                        <row>
                                            <entry>Manitoba</entry>
                                            <entry>(MB)</entry>
                                            <entry>PROVINCE</entry>
                                            <entry>urn:entity:geob-101864769</entry>
                                            <entry>ISO-3166-2</entry>
                                        </row>
                                        <row>
                                            <entry>Province of Newfoundland &amp; Labrador</entry>
                                            <entry>(NL)</entry>
                                            <entry>PROVINCE </entry>
                                            <entry>urn:entity:geob-102223081</entry>
                                            <entry>ISO-3166-2</entry>
                                        </row>
                                        <row>
                                            <entry>Northwest Territories</entry>
                                            <entry>(NT)</entry>
                                            <entry>PROVINCE</entry>
                                            <entry>urn:entity:geob-101865328</entry>
                                            <entry>ISO-3166-2</entry>
                                        </row>
                                        <row>
                                            <entry>New Brunswick</entry>
                                            <entry>(NB)</entry>
                                            <entry>PROVINCE</entry>
                                            <entry>urn:entity:geob-101378115</entry>
                                            <entry>ISO-3166-2</entry>
                                        </row>
                                        <row>
                                            <entry>Nova Scotia</entry>
                                            <entry>(NS)</entry>
                                            <entry>PROVINCE</entry>
                                            <entry>urn:entity:geob-101507047</entry>
                                            <entry>ISO-3166-2</entry>
                                        </row>
                                        <row>
                                            <entry>Nunavut</entry>
                                            <entry>(NU)</entry>
                                            <entry>PROVINCE</entry>
                                            <entry>urn:entity:geob-101770571</entry>
                                            <entry>ISO-3166-2</entry>
                                        </row>
                                        <row>
                                            <entry>Ontario</entry>
                                            <entry>(ON)</entry>
                                            <entry>PROVINCE</entry>
                                            <entry>urn:entity:geob-101149718</entry>
                                            <entry>ISO-3166-2</entry>
                                        </row>
                                        <row>
                                            <entry>Quebec</entry>
                                            <entry>(QC)</entry>
                                            <entry>PROVINCE</entry>
                                            <entry>urn:entity:geob-100432051</entry>
                                            <entry>ISO-3166-2</entry>
                                        </row>
                                        <row>
                                            <entry>Saskatchewan</entry>
                                            <entry>(SK)</entry>
                                            <entry>PROVINCE</entry>
                                            <entry>urn:entity:geob-102094956</entry>
                                            <entry>ISO-3166-2</entry>
                                        </row>
                                        <row>
                                            <entry>Yukon Territory</entry>
                                            <entry>(YT)</entry>
                                            <entry>PROVINCE</entry>
                                            <entry>urn:entity:geob-102091695</entry>
                                            <entry>ISO-3166-2</entry>
                                        </row>
                                        <!--<row>
                                        <entry>United Kingdom</entry>
                                        <entry>(UK)</entry>
                                        <entry>COUNTRY</entry>
                                        <entry>urn:entity:geob-102315884</entry>
                                        <entry>ISO-3166-1</entry>
                                    </row>-->
                                    </tbody>
                                </tgroup>
                            </table>
                        </li>
                    </ul>
                </p>
            </section>
            <note>If <sourcexml>case:juris</sourcexml> has or don't have attribute
                    <sourcexml>@ln.user-displayed="false"</sourcexml> , then map it as usual.</note>
            <example>
                <title>Mapping of <sourcexml>case:juris</sourcexml> with province code</title>
                <codeblock> &lt;case:courtinfo&gt; &lt;case:juris
                    ln.user-displayed="false"&gt;PQ&lt;/case:juris&gt; &lt;/case:courtinfo&gt; </codeblock>
                <b>becomes</b>
                <codeblock> &lt;jurisinfo:courtinfo&gt; &lt;jurisinfo:jurisdiction&gt;
                    &lt;jurisinfo:system normshortname="QC"&gt; &lt;globalentity:entity&gt;
                    &lt;globalentity:content&gt;QC&lt;/globalentity:content&gt;
                    &lt;globalentity:entityReference role="urn:contentType:geography"
                    guid:guid="urn:entity:geob-100301383"/&gt; &lt;/globalentity:entity&gt;
                    &lt;/jurisinfo:system&gt; &lt;/jurisinfo:jurisdiction&gt;
                    &lt;/jurisinfo:courtinfo&gt; </codeblock>
            </example>
            <example>
                <title>Mapping of <sourcexml>case:juris</sourcexml> with country code "CD"</title>
                <codeblock> &lt;case:courtinfo&gt; &lt;case:juris
                    ln.user-displayed="false"&gt;CD&lt;/case:juris&gt; &lt;/case:courtinfo&gt; </codeblock>
                <b>becomes</b>
                <codeblock> &lt;jurisinfo:courtinfo&gt; &lt;jurisinfo:jurisdiction&gt;
                    &lt;jurisinfo:system normshortname="CA"&gt; &lt;globalentity:entity&gt;
                    &lt;globalentity:content&gt;CA&lt;/globalentity:content&gt;
                    &lt;globalentity:entityReference role="urn:contentType:geography"
                    guid:guid="urn:entity:geob-101733280"/&gt; &lt;/globalentity:entity&gt;
                    &lt;/jurisinfo:system&gt; &lt;/jurisinfo:jurisdiction&gt;
                    &lt;/jurisinfo:courtinfo&gt; </codeblock>
            </example>

            <!-- <note>For handling <b>@ln.user-displayed</b>
       attribute, refer the general markup <xref
           href="../../../common_newest/Rosetta_case.juris_ln.user-displayed.dita"
         >ln.user_displayed="false"</xref> section in the CI.</note>-->
            <section>
                <title> Changes </title>
                <p>2015-02-05: <ph id="change_20150205_SEP">Remove UK PGUID value from table (CA01,
                        CA02 (all streams), CA03 and CA04). R45 RFA #2133.</ph></p>
                <p>2015-02-02: <ph id="change_20150202_AS">Added instructions to apply CA in guid
                        for country code "UK". Db issue #407 </ph></p>
                <p>2014-12-15: <ph id="change_20141215_AS">Updated mapping. <b>Db R4.5 issue
                            #2047</b></ph></p>
                <p>2014-01-28: <ph id="change_20140128_AS">Updated "The province codes with PGUID
                        codes for Country" table when case:juris with country code "UK". </ph></p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.juris.dita  -->
    <!--<xsl:message>CA04-Administrative_Decisions_case.juris.xsl requires manual development!</xsl:message> -->
    <!-- need to apply concept for attribute value -->
    <xsl:template match="case:juris">
        <jurisinfo:jurisdiction>
            <jurisinfo:system>
                <xsl:attribute name="normshortname">
                    <xsl:value-of select="key('CodeByName', ., $var)/@value"/>
                </xsl:attribute>
                <globalentity:entity>
                    <globalentity:content>
                        <xsl:value-of select="key('CodeByName', ., $var)/@value"/>
                    </globalentity:content>
                    <globalentity:entityReference>
                        <xsl:attribute name="guid:guid">
                            <xsl:value-of select="key('kCodeByName', ., $vDpsiCodes)/@value"/>
                        </xsl:attribute>
                        <xsl:attribute name="role">
                            <xsl:text>urn:contentType:geography</xsl:text>
                        </xsl:attribute>
                    </globalentity:entityReference>
                </globalentity:entity>
            </jurisinfo:system>
        </jurisinfo:jurisdiction>
    </xsl:template>



    <xsl:variable name="var">
        <ext:codes>
            <ext:code key="CD" value="CA"/>
            <ext:code key="Canada" value="CA"/>
            <ext:code key="NF" value="NL"/>
            <ext:code key="PQ" value="QC"/>
            <ext:code key="UK" value="CA"/>
            <ext:code key="NS" value="NS"/>
            <ext:code key="ON" value="ON"/>
        </ext:codes>
    </xsl:variable>

    <xsl:key name="CodeByName" match="ext:code" use="string(@key)"/>


    <xsl:variable name="vDpsiCodes">
        <ext:codes>
            <ext:code key="CD" value="urn:entity:geob-101733280"/>
            <ext:code key="CA" value="urn:entity:geob-101733280"/>
            <ext:code key="AB" value="urn:entity:geob-101865413"/>
            <ext:code key="BC" value="urn:entity:geob-100301383"/>
            <ext:code key="PE" value="urn:entity:geob-101864367"/>
            <ext:code key="MB" value="urn:entity:geob-101864769"/>
            <ext:code key="NL" value="urn:entity:geob-102223081"/>
            <ext:code key="NT" value="urn:entity:geob-101865328"/>
            <ext:code key="NB" value="urn:entity:geob-101378115"/>
            <ext:code key="NS" value="urn:entity:geob-101507047"/>
            <ext:code key="NU" value="urn:entity:geob-101770571"/>
            <ext:code key="QN" value="urn:entity:geob-101149718"/>
            <ext:code key="QC" value="urn:entity:geob-100432051"/>
            <ext:code key="SK" value="urn:entity:geob-102094956"/>
            <ext:code key="YT" value="urn:entity:geob-102091695"/>
            <ext:code key="PQ" value="urn:entity:geob-100432051"/>
            <ext:code key="ON" value="urn:entity:geob-101149718"/>
        </ext:codes>
    </xsl:variable>

    <!--Key kCodeByName for match the code -->
    <xsl:key name="kCodeByName" match="ext:code" use="string(@key)"/>






    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.courtcode">
        <title>case:courtcode <lnpid>id-CA04-13417</lnpid></title>
        <body>
            <section>
                <ul>
                    <li class="- topic/li ">
                        <sourcexml class="+ topic/keyword xml-d/sourcexml "
                            >case:courtcode</sourcexml> becomes <targetxml
                            class="+ topic/keyword xml-d/targetxml "
                            >doc:legacy-metadata/meta/metaitem</targetxml> and attributes will be
                        populated as <targetxml class="+ topic/keyword xml-d/targetxml "
                            >@name="case:courtcode"</targetxml> and <targetxml
                            class="+ topic/keyword xml-d/targetxml ">@value</targetxml> will be
                        value of <sourcexml class="+ topic/keyword xml-d/sourcexml "
                            >case:courtcode</sourcexml>.<pre xml:space="preserve" class="- topic/pre ">

&lt;case:courtinfo&gt;
  &lt;case:courtcode&gt;CACT&lt;/case:courtcode&gt; 
&lt;/case:courtinfo&gt;

<b class="+ topic/ph hi-d/b ">Becomes</b>
            
&lt;doc:legacy-metadata metadatasource="lbu-meta"&gt;
  &lt;meta&gt;
    &lt;metaitem name="case:courtcode" value="CACT"&gt;  
  &lt;/meta&gt;
&lt;/doc:legacy-metadata&gt;
</pre>
                        <!--  <note>For handling <b>@ln.user-displayed</b> attribute, refer the general markup <xref
              href="../../common_newest/Rosetta_case.courtcode_ln.user-displayed.dita"
              >ln.user_displayed="false"</xref> section in the CI.</note> -->
                    </li>
                </ul>
            </section>
            <section>
                <title>Changes:</title>
                <p>2014-11-19: <ph id="change_20141119_AS">Updated the mapping for case:courtcode,
                        schema issue for jurisinfo:alternatecourtcode....Db issue #368 and
                    #367</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.courtcode.dita  -->
    <!--<xsl:message>CA04-Administrative_Decisions_case.courtcode.xsl requires manual development!</xsl:message>-->

    <xsl:template match="case:courtcode">
        <metaitem>
            <xsl:attribute name="name">
                <xsl:text>case:courtcode</xsl:text>
            </xsl:attribute>
            <xsl:attribute name="value">
                <xsl:value-of select="."/>
            </xsl:attribute>
        </metaitem>
    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.courtname">
        <title>case:courtname <lnpid>id-CA04-13419</lnpid></title>
        <body>
            <section>
                <ul>
                    <li class="- topic/li ">
                        <sourcexml class="+ topic/keyword xml-d/sourcexml "
                            >case:courtname</sourcexml> becomes <targetxml
                            class="+ topic/keyword xml-d/targetxml "
                            >jurisinfo:courtinfo/jurisinfo:courtname</targetxml>
                        <pre xml:space="preserve" class="- topic/pre ">

&lt;case:courtinfo&gt;
  &lt;case:courtname&gt;Alberta Environmental Appeal Board&lt;nl/&gt;
 Preliminary meeting by written submission&lt;/case:courtname&gt;  
&lt;/case:courtinfo&gt;

<b class="+ topic/ph hi-d/b ">Becomes</b>
            
&lt;jurisinfo:courtinfo&gt;
  &lt;jurisinfo:courtname&gt;Alberta Environmental Appeal Board&lt;proc:nl/&gt;
 Preliminary meeting by written submission&lt;/jurisinfo:courtname&gt;
&lt;/jurisinfo:courtinfo&gt;
           </pre>
                        <note>For handling <b>@ln.user-displayed</b> attribute, refer the general
                            markup <xref
                                href="../../common_newest/Rosetta_case.courtname_ln.user-displayed.dita"
                                >ln.user_displayed="false"</xref> section in the CI.</note>
                    </li>
                </ul>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.courtname.dita  -->
    <!--<xsl:message>CA04-Administrative_Decisions_case.courtname.xsl requires manual development!</xsl:message> -->

    <xsl:template match="case:courtname">
        <xsl:choose>
            <xsl:when test="preceding-sibling::abbrvname">
                <xsl:apply-templates select="@* | node()"/>
            </xsl:when>
            <xsl:otherwise>
                <jurisinfo:courtname>
                    <xsl:apply-templates select="@* | node()"/>
                </jurisinfo:courtname>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.judges">
        <title>case:judges <lnpid>id-CA04-13425</lnpid></title>
        <body>
            <section>
                <ul>
                    <li class="- topic/li ">
                        <sourcexml class="+ topic/keyword xml-d/sourcexml ">case:judges</sourcexml>
                        becomes <targetxml class="+ topic/keyword xml-d/targetxml "
                            >admindecision:panel/admindecision:adjudicators</targetxml>
                        <note class="- topic/note ">Capture PCData for judges markup as is in New
                            Lexis and always create <targetxml
                                class="+ topic/keyword xml-d/targetxml "
                                >person:adjudicator</targetxml> as an immediate child of <targetxml
                                class="+ topic/keyword xml-d/targetxml "
                                >admindecision:adjudicators</targetxml>.</note>
                        <pre xml:space="preserve" class="- topic/pre ">
&lt;case:judges&gt;
    Panel: Willie Grieve, Chair; Anne Michaud,&lt;nl/&gt;Commission Member; Tudor Beattie,&lt;nl/&gt;Q.C., Commission Member
&lt;/case:judges&gt;

<b class="+ topic/ph hi-d/b ">Becomes</b>

&lt;admindecision:panel&gt;
    &lt;admindecision:adjudicators&gt;
      &lt;person:adjudicator&gt;Panel: Willie Grieve, Chair; Anne Michaud, Commission Member; Tudor Beattie, Q.C., Commission Member&lt;/person:adjudicator&gt;
    &lt;/admindecision:adjudicators&gt;
&lt;/admindecision:panel&gt;    
                    </pre>
                        <note class="- topic/note ">Suppress <sourcexml
                                class="+ topic/keyword xml-d/sourcexml ">nl</sourcexml> from
                            converison and convert them into single space character in
                            target.</note>
                        <pre xml:space="preserve" class="- topic/pre ">
<b>Handling of case:judges/glp:note scenario</b>
&lt;case:judges&gt;
          &lt;glp:note&gt;
              &lt;p nl="0"&gt;
                  &lt;text&gt;[Quicklaw note: Original panel decision, released July&lt;nl/&gt;17, 2000, is available at [2000] I.D.A.C.D. No. 35.]&lt;/text&gt;
              &lt;/p&gt;
          &lt;/glp:note&gt;
&lt;/case:judges&gt;
  

<b class="+ topic/ph hi-d/b ">Becomes</b>

&lt;admindecision:panel&gt;
    &lt;admindecision:adjudicators&gt;
      &lt;note&gt;
         &lt;bodytext&gt;
              &lt;p&gt;
                  &lt;text&gt;[Quicklaw note: Original panel decision, released July&lt;proc:nl/&gt;17, 2000, is available at [2000] I.D.A.C.D. No. 35.]&lt;/text&gt;
              &lt;/p&gt;
           &lt;/bodytext&gt;   
          &lt;/note&gt;
    &lt;/admindecision:adjudicators&gt;
&lt;/admindecision:panel&gt; 
</pre>
                        <note>If <sourcexml>glp:note</sourcexml> within
                                <sourcexml>case:judges</sourcexml> has information "Panel Decision
                            on costs. The original decision is available&lt;nl/&gt;at [2000]
                            I.D.A.C.D. No. 26 in this database.]" then conversion needs to omit them
                            as this is a data error which LBU will fix.</note>
                    </li>
                </ul>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.judges.dita  -->
    <!--<xsl:message>CA04-Administrative_Decisions_case.judges.xsl requires manual development!</xsl:message> -->

    <xsl:template match="case:judges">
        <xsl:variable name="case" select="fnr"/>
        <xsl:choose>
            <xsl:when test="child::glp:note">
                <admindecision:panel>
                    <admindecision:adjudicators>
                        <note>
                            <bodytext>
                                <xsl:apply-templates select="@* | node()"/>
                            </bodytext>
                        </note>
                    </admindecision:adjudicators>
                </admindecision:panel>
            </xsl:when>
            <xsl:when test="child::fnr[@fnrtoken]">
                <admindecision:panel>
                    <admindecision:adjudicators>
                        <xsl:choose>
                            <xsl:when test="$case[contains(., '*')]">
                                <person:adjudicator>
                                    <xsl:value-of select="substring-before(., '*')"/>
                                </person:adjudicator>
                                <xsl:apply-templates select="child::fnr"/>
                                <person:adjudicator>
                                    <xsl:value-of select="substring-after(., '*')"/>
                                </person:adjudicator>
                            </xsl:when>
                            <xsl:otherwise>
                                <person:adjudicator>
                                    <xsl:value-of select="."/>
                                </person:adjudicator>
                                <xsl:apply-templates select="child::fnr"/>
                            </xsl:otherwise>
                        </xsl:choose>

                    </admindecision:adjudicators>
                </admindecision:panel>
            </xsl:when>
            <xsl:otherwise>
                <admindecision:panel>
                    <admindecision:adjudicators>
                        <person:adjudicator>
                            <xsl:apply-templates select="@* | node()"/>
                        </person:adjudicator>
                    </admindecision:adjudicators>
                </admindecision:panel>
            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>

    <!-- Awantika-2018-01-31- case:judges handle of nl. Webstar # 7104004 -->
    <xsl:template match="case:judges/nl">
        <xsl:choose>
            <xsl:when
                test="ends-with(preceding-sibling::text()[1], ' ') or starts-with(following-sibling::text()[1], ' ')"/>
            <xsl:otherwise>
                <xsl:text> </xsl:text>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <xsl:template
        match="case:judges[ancestor::case:info]/text()[following-sibling::*[1][name() = 'nl']]">
        <xsl:value-of select="normalize-space(.)"/>
    </xsl:template>


    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.length">
        <title>case:length <lnpid>id-CA04-13430</lnpid></title>
        <body>
            <section>
                <ul>
                    <li class="- topic/li ">
                        <sourcexml class="+ topic/keyword xml-d/sourcexml ">case:length</sourcexml>
                        becomes <targetxml class="+ topic/keyword xml-d/targetxml "
                            >/doc:docinfo/doc:doclength</targetxml>; the conversion also converts
                        the attributes <targetxml class="+ topic/keyword xml-d/targetxml "
                            >@num</targetxml> will contain the numeric value from source PCData,
                            <targetxml class="+ topic/keyword xml-d/targetxml "
                            >@source="conversion"</targetxml> and <targetxml
                            class="+ topic/keyword xml-d/targetxml ">@unit</targetxml> will contain
                        the textual value from source PCData.
                        <pre xml:space="preserve" class="- topic/pre ">

&lt;case:length&gt;(1232 paras.)&lt;/case:length&gt;

<b class="+ topic/ph hi-d/b ">Becomes</b>

&lt;doc:docinfo&gt; 
  &lt;doc:doclength num="1232" source="conversion" unit="Paras"/&gt;
&lt;/doc:docinfo&gt;
</pre>
                    </li>
                </ul>
            </section>
            <note>
                <p>Exception for Canada: Conversion should add period (.) when
                        <targetxml>@unit</targetxml> attribute is having values (paras, para,
                    paragr, pp and p), for more clarification refer below example.</p>
            </note>

            <pre>
&lt;case:length&gt;(1 para.)&lt;/case:length&gt;

<b>Becomes</b>

&lt;doc:doclength num="1" unit="para." source="conversion"/&gt;
</pre>

            <pre>
&lt;case:length&gt;(2 pages)&lt;/case:length&gt;

<b>Becomes</b>

&lt;doc:doclength num="2" unit="pages" source="conversion"/&gt;
        </pre>

            <pre>
&lt;case:length&gt;(158 pp.)&lt;/case:length&gt;

<b>Becomes</b>

&lt;doc:doclength num="158" unit="pp." source="conversion"/&gt;
        </pre>

            <pre>
&lt;case:length&gt;(8 pages) (36 paras.)&lt;/case:length&gt;

<b>Becomes</b>

&lt;doc:doclength num="8" unit="pages" source="conversion"/&gt;
&lt;doc:doclength num="36" unit="paras." source="conversion"/&gt;
</pre>

            <section>
                <title>Changes</title>
                <p>2014-04-22: <ph id="change_20140422_VA">Added list of abbreviated values for
                            <targetxml>@unit</targetxml> attribute, R4.5 Content Issue #:1402. This
                        change immediately applies to CA04-Admindoc.</ph></p>
                <p>2014-04-18: <ph id="change_20140418_VA">Added note and example for Canada content
                        to add period (.) in <targetxml>@unit</targetxml> attribute, R4.5 Content
                        Issue #:1402. This change immediately applies to CA04-Admindoc.</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.length.dita  -->
    <!--	<xsl:message>CA04-Administrative_Decisions_case.length.xsl requires manual development!</xsl:message>-->
    <!-- this will be in metadata -->
    <xsl:template match="case:length">
        <doc:doclength>
            <xsl:attribute name="num">
                <xsl:analyze-string select="." regex="\((\d*)\s*([a-zA-Z]*)">
                    <xsl:matching-substring>
                        <xsl:value-of select="regex-group(1)"/>
                    </xsl:matching-substring>
                </xsl:analyze-string>
            </xsl:attribute>
            <xsl:attribute name="unit">
                <xsl:analyze-string select="." regex="\((\d*)\s*([a-zA-Z]*)">
                    <xsl:matching-substring>
                        <xsl:value-of select="regex-group(2)"/>
                    </xsl:matching-substring>
                </xsl:analyze-string>
                <xsl:text>.</xsl:text>
            </xsl:attribute>
            <xsl:attribute name="source">
                <xsl:text>conversion</xsl:text>
            </xsl:attribute>
        </doc:doclength>
    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="Rosetta_catchwordgrp">
        <title>catchwordgrp <lnpid/></title>
        <body>
            <section>
                <p><sourcexml>catchwordgrp</sourcexml> is a container element that should be
                    omitted, but its content should be retained and converted as follows: <ul>
                        <li><sourcexml>catchwordgrp/heading</sourcexml> becomes
                                <targetxml>classify:classification/heading</targetxml>.</li>
                        <li><sourcexml>catchwordgrp/catchwords</sourcexml> becomes
                                <targetxml>classify:classification</targetxml> with the value of
                                <targetxml>classify:classification/@classscheme</targetxml> set to
                            "catchwords". Each instance of <sourcexml>catchwords</sourcexml> should
                            be converted to its own
                                <targetxml>classify:classification[@classscheme="catchwords"]</targetxml>
                            element. The children of <sourcexml>catchwords</sourcexml> are converted
                            as follows:<ul>
                                <li><sourcexml>catchwords/catchphrase</sourcexml> becomes
                                        <targetxml>classify:classification/classify:classitem/classify:classitem-identifier/classify:classname</targetxml>.</li>
                            </ul></li>
                    </ul></p>
                <!-- <note>Conversion should not create consecutive <targetxml>caseinfo:caseinfo</targetxml>
        elements. When 2 or more consecutive sibling source elements map to
          <targetxml>caseinfo:caseinfo</targetxml>, data should be merged to a single
          <targetxml>caseinfo:caseinfo</targetxml> element unless this would hamper content
        ordering.</note> -->
            </section>
            <example>
                <title>Example: CA content</title>
                <codeblock> &lt;catchwordgrp&gt; &lt;catchwords&gt; &lt;catchphrase&gt;Zoning
                    by-laws&lt;/catchphrase&gt; &lt;catchphrase&gt;Defendant's commercial greenhouse
                    not permitted under prior by-law and therefore not a continuing non-conforming
                    legal use&lt;/catchphrase&gt; &lt;catchphrase&gt;Municipality having right to
                    enforce by-law by injunction&lt;/catchphrase&gt; &lt;catchphrase&gt;Planning
                    Act, R.S.P.E.I. 1974, c. P-6, ss. 46(1)(e), (f), (g), 49, 52,
                    56&lt;/catchphrase&gt; &lt;catchphrase&gt;Municipalities Act, R.S.P.E.I. 1974,
                    c. M-15.1, s. 1(b).&lt;/catchphrase&gt; &lt;/catchwords&gt;
                    &lt;/catchwordgrp&gt; </codeblock>
                <b>becomes</b>
                <codeblock> &lt;classify:classification classscheme="catchwords"&gt;
                    &lt;classify:classitem&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classname&gt;Zoning by-laws&lt;/classify:classname&gt;
                    &lt;/classify:classitem-identifier&gt; &lt;/classify:classitem&gt;
                    &lt;classify:classitem&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classname&gt;Defendant's commercial greenhouse not permitted under
                    prior by-law and therefore not a continuing non-conforming legal
                    use&lt;/classify:classname&gt; &lt;/classify:classitem-identifier&gt;
                    &lt;/classify:classitem&gt; &lt;classify:classitem&gt;
                    &lt;classify:classitem-identifier&gt; &lt;classify:classname&gt;Municipality
                    having right to enforce by-law by injunction&lt;/classify:classname&gt;
                    &lt;/classify:classitem-identifier&gt; &lt;/classify:classitem&gt;
                    &lt;classify:classitem&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classname&gt;Planning Act, R.S.P.E.I. 1974, c. P-6, ss. 46(1)(e),
                    (f), (g), 49, 52, 56&lt;/classify:classname&gt;
                    &lt;/classify:classitem-identifier&gt; &lt;/classify:classitem&gt;
                    &lt;classify:classitem&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classname&gt;Municipalities Act, R.S.P.E.I. 1974, c. M-15.1, s.
                    1(b).&lt;/classify:classname&gt; &lt;/classify:classitem-identifier&gt;
                    &lt;/classify:classitem&gt; &lt;/classify:classification&gt; </codeblock>
            </example>
            <example>
                <title>Example: CA content <sourcexml>catchwordgrp</sourcexml> with child
                        <sourcexml>heading</sourcexml></title>
                <codeblock> &lt;catchwordgrp&gt; &lt;heading&gt; &lt;title&gt;Indexation
                    :&lt;/title&gt; &lt;/heading&gt; &lt;catchwords&gt;
                    &lt;catchphrase&gt;Assurance&lt;/catchphrase&gt; &lt;catchphrase&gt;Assurance
                    automobile&lt;/catchphrase&gt; &lt;catchphrase&gt;Régime d'indemnisation sans
                    égard à la responsabilité&lt;/catchphrase&gt; ... &lt;/catchwords&gt;
                    &lt;/catchwordgrp&gt; </codeblock>
                <b>becomes</b>
                <codeblock> &lt;classify:classification classscheme="catchwords"&gt; &lt;heading&gt;
                    &lt;title&gt;Indexation :&lt;/title&gt; &lt;/heading&gt;
                    &lt;classify:classitem&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classname&gt;Assurance&lt;/classify:classname&gt;
                    &lt;/classify:classitem-identifier&gt; &lt;/classify:classitem&gt;
                    &lt;classify:classitem&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classname&gt;Assurance automobile&lt;/classify:classname&gt;
                    &lt;/classify:classitem-identifier&gt; &lt;/classify:classitem&gt;
                    &lt;classify:classitem&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classname&gt;Régime d'indemnisation sans égard à la
                    responsabilité&lt;/classify:classname&gt; &lt;/classify:classitem-identifier&gt;
                    &lt;/classify:classitem&gt; ... &lt;/classify:classification&gt; </codeblock>
            </example>
            <example>
                <title>Example: AU content</title>
                <codeblock> &lt;catchwordgrp&gt; &lt;catchwords&gt; &lt;catchphrase&gt;Practice and
                    procedure&lt;/catchphrase&gt;
                    &lt;catchphrase&gt;Applications&lt;/catchphrase&gt; &lt;catchphrase&gt;Applicant
                    sought declaration that insurance agents were independent
                    contractors&lt;/catchphrase&gt; &lt;catchphrase&gt;Agents had already commenced
                    proceedings in the Chief Industrial Magistrates Court of NSW claiming
                    entitlements&lt;/catchphrase&gt; &lt;/catchwords&gt; &lt;/catchwordgrp&gt; </codeblock>
                <b>becomes</b>
                <codeblock> &lt;classify:classification classscheme="catchwords"&gt;
                    &lt;classify:classitem&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classname&gt;Practice and procedure&lt;/classify:classname&gt;
                    &lt;/classify:classitem-identifier&gt; &lt;/classify:classitem&gt;
                    &lt;classify:classitem&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classname&gt;Applications&lt;/classify:classname&gt;
                    &lt;/classify:classitem-identifier&gt; &lt;/classify:classitem&gt;
                    &lt;classify:classitem&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classname&gt;Applicant sought declaration that insurance agents
                    were independent contractors&lt;/classify:classname&gt;
                    &lt;/classify:classitem-identifier&gt; &lt;/classify:classitem&gt;
                    &lt;classify:classitem&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classname&gt;Agents had already commenced proceedings in the Chief
                    Industrial Magistrates Court of NSW claiming
                    entitlements&lt;/classify:classname&gt; &lt;/classify:classitem-identifier&gt;
                    &lt;/classify:classitem&gt; &lt;/classify:classification&gt; </codeblock>
            </example>
            <example>
                <title>Example: NZ content</title>
                <codeblock> &lt;catchwordgrp&gt; &lt;catchwords&gt; &lt;catchphrase&gt; &lt;emph
                    typestyle="it"&gt;Deceit&lt;/emph&gt; &lt;/catchphrase&gt; &lt;catchphrase&gt;
                    &lt;emph typestyle="it"&gt;Amendment of Declaration&lt;/emph&gt;
                    &lt;/catchphrase&gt; &lt;catchphrase&gt; &lt;emph
                    typestyle="it"&gt;Terms&lt;/emph&gt; &lt;/catchphrase&gt; &lt;catchphrase&gt;
                    &lt;emph typestyle="it"&gt;Reservation of leave&lt;/emph&gt;
                    &lt;/catchphrase&gt; &lt;catchphrase&gt; &lt;emph typestyle="it"&gt;New
                    Trial&lt;/emph&gt; &lt;/catchphrase&gt; &lt;catchphrase&gt; &lt;emph
                    typestyle="it"&gt;Two concurring verdicts&lt;/emph&gt; &lt;/catchphrase&gt;
                    &lt;/catchwords&gt; &lt;/catchwordgrp&gt; </codeblock>
                <b>becomes</b>
                <codeblock> &lt;classify:classification classscheme="catchwords"&gt;
                    &lt;classify:classitem&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classname&gt; &lt;emph typestyle="it"&gt;Deceit&lt;/emph&gt;
                    &lt;/classify:classname&gt; &lt;/classify:classitem-identifier&gt;
                    &lt;/classify:classitem&gt; &lt;classify:classitem&gt;
                    &lt;classify:classitem-identifier&gt; &lt;classify:classname&gt; &lt;emph
                    typestyle="it"&gt;Amendment of Declaration&lt;/emph&gt;
                    &lt;/classify:classname&gt; &lt;/classify:classitem-identifier&gt;
                    &lt;/classify:classitem&gt; &lt;classify:classitem&gt;
                    &lt;classify:classitem-identifier&gt; &lt;classify:classname&gt; &lt;emph
                    typestyle="it"&gt;Terms&lt;/emph&gt; &lt;/classify:classname&gt;
                    &lt;/classify:classitem-identifier&gt; &lt;/classify:classitem&gt;
                    &lt;classify:classitem&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classname&gt; &lt;emph typestyle="it"&gt;Reservation of
                    leave&lt;/emph&gt; &lt;/classify:classname&gt;
                    &lt;/classify:classitem-identifier&gt; &lt;/classify:classitem&gt;
                    &lt;classify:classitem&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classname&gt; &lt;emph typestyle="it"&gt;New Trial&lt;/emph&gt;
                    &lt;/classify:classname&gt; &lt;/classify:classitem-identifier&gt;
                    &lt;/classify:classitem&gt; &lt;classify:classitem&gt;
                    &lt;classify:classitem-identifier&gt; &lt;classify:classname&gt; &lt;emph
                    typestyle="it"&gt;Two concurring verdicts&lt;/emph&gt;
                    &lt;/classify:classname&gt; &lt;/classify:classitem-identifier&gt;
                    &lt;/classify:classitem&gt; &lt;/classify:classification&gt; </codeblock>
            </example>
            <example>
                <title>Example: UK content</title>
                <codeblock> &lt;catchwordgrp&gt; &lt;catchwords&gt; &lt;catchphrase&gt;Copyright
                    &amp;#x2013; Compilation &amp;#x2013; No evidence of any specific infringement
                    &amp;#x2013; Declaratory judgment &amp;#x2013; Possible infringement by
                    documents not yet in existence &amp;#x2013; RSC Ord XXV, r
                    5.&lt;/catchphrase&gt; &lt;/catchwords&gt; &lt;/catchwordgrp&gt; </codeblock>
                <b>becomes</b>
                <codeblock> &lt;classify:classification classscheme="catchwords"&gt;
                    &lt;classify:classitem&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classname&gt;Copyright &amp;#x2013; Compilation &amp;#x2013; No
                    evidence of any specific infringement &amp;#x2013; Declaratory judgment
                    &amp;#x2013; Possible infringement by documents not yet in existence
                    &amp;#x2013; RSC Ord XXV, r 5.&lt;/classify:classname&gt;
                    &lt;/classify:classitem-identifier&gt; &lt;/classify:classitem&gt;
                    &lt;/classify:classification&gt; </codeblock>
            </example>
            <note>If the punctuation marks occuring between <sourcexml>catchwords</sourcexml> and
                    <sourcexml>catchphrase</sourcexml> conversion should drop these punctuation in
                output this will be handle by stylesheet.</note>
            <note>If the punctuation marks occuring inside the <sourcexml>catchphrase</sourcexml>
                then, these will be retain in output.</note>
            <example>
                <title>Example: UK content, punctuation marks occuring between
                        <sourcexml>catchwords</sourcexml> and
                    <sourcexml>catchphrase</sourcexml></title>
                <codeblock> &lt;catchwordgrp&gt; &lt;catchwords&gt; (
                    &lt;catchphrase&gt;Comitology&lt;/catchphrase&gt; — &lt;catchphrase&gt;Council
                    Decision 1999/468/EC laying down the procedures for the exercise of implementing
                    powers conferred on the Commission&lt;/catchphrase&gt; —
                    &lt;catchphrase&gt;Criteria for choosing between the different procedures for
                    adopting implementing measures&lt;/catchphrase&gt; —
                    &lt;catchphrase&gt;Effects&lt;/catchphrase&gt; — &lt;catchphrase&gt;Obligation
                    to state reasons&lt;/catchphrase&gt; — &lt;catchphrase&gt;Annulment in part of
                    Regulation (EC) No 1655/2000 of the European Parliament and of the Council
                    concerning the Financial Instrument for the Environment
                    (LIFE)&lt;/catchphrase&gt; ) &lt;/catchwords&gt; &lt;/catchwordgrp&gt;
                        <b>becomes</b> &lt;classify:classification classscheme="catchwords"&gt;
                    &lt;classify:classitem&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classname&gt;Comitology&lt;/classify:classname&gt;
                    &lt;/classify:classitem-identifier&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classname&gt;Council Decision 1999/468/EC laying down the
                    procedures for the exercise of implementing powers conferred on the
                    Commission&lt;/classify:classname&gt; &lt;/classify:classitem-identifier&gt;
                    &lt;classify:classitem-identifier&gt; &lt;classify:classname&gt;Criteria for
                    choosing between the different procedures for adopting implementing
                    measures&lt;/classify:classname&gt; &lt;/classify:classitem-identifier&gt;
                    &lt;classify:classitem-identifier&gt;
                    &lt;classify:classname&gt;Effects&lt;/classify:classname&gt;
                    &lt;/classify:classitem-identifier&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classname&gt;Obligation to state reasons&lt;/classify:classname&gt;
                    &lt;/classify:classitem-identifier&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classname&gt;Annulment in part of Regulation (EC) No 1655/2000 of
                    the European Parliament and of the Council concerning the Financial Instrument
                    for the Environment (LIFE)&lt;/classify:classname&gt;
                    &lt;/classify:classitem-identifier&gt; &lt;/classify:classitem&gt;
                    &lt;/classify:classification&gt; </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2014-09-26: <ph id="change_20140926_AS">Updated instructions to map
                            <sourcexml>catchwordgrp</sourcexml> to
                            <targetxml>admindoc:head/classify:classification/heading</targetxml></ph></p>
                <p>2013-12-13: <ph id="change_2013_12_13_SSX">Added instruction to drop punctuation
                        occuring between catchwords and catchphrase Webteam# 247658</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\catchwordgrp.dita  -->
    <!--<xsl:message>CA04-Administrative_Decisions_catchwordgrp.xsl requires manual development!</xsl:message> -->

    <xsl:template match="catchwordgrp">

        <!--  Original Target XPath:  classify:classification/heading   -->

        <xsl:apply-templates select="@* | node()"/>


    </xsl:template>

    <xsl:template match="catchwords">
        <classify:classification classscheme="catchwords">
            <xsl:apply-templates select="*"/>
        </classify:classification>
    </xsl:template>

    <xsl:template match="catchphrase">
        <classify:classitem>
            <classify:classitem-identifier>
                <classify:classname>
                    <xsl:value-of select="."/>
                </classify:classname>
            </classify:classitem-identifier>
        </classify:classitem>
    </xsl:template>





    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.decisionsummary">
        <title>case:decisionsummary <lnpid>id-CA04-13421</lnpid></title>
        <body>
            <section>
                <ul>
                    <li class="- topic/li ">
                        <sourcexml class="+ topic/keyword xml-d/sourcexml "
                            >case:decisionsummary</sourcexml> becomes <targetxml
                            class="+ topic/keyword xml-d/targetxml "
                            >casesum:summaries/casesum:decisionsummary</targetxml>
                        <note class="- topic/note ">Every element occuring within <sourcexml
                                class="+ topic/keyword xml-d/sourcexml "
                                >case:decisionsummary</sourcexml> should be handled via <targetxml
                                class="+ topic/keyword xml-d/targetxml ">bodytext</targetxml> within
                                <targetxml class="+ topic/keyword xml-d/targetxml "
                                >casesum:decisionsummary</targetxml> except <sourcexml
                                class="+ topic/keyword xml-d/sourcexml ">heading</sourcexml>
                            element.</note>
                        <pre xml:space="preserve" class="- topic/pre ">

&lt;case:decisionsummary&gt;
    &lt;p&gt;
      &lt;text&gt;SUMMARY &lt;/text&gt;
    &lt;/p&gt;
    &lt;p&gt;
      &lt;text&gt;The Department of Environmental Protection assessed a preliminary penalty of $9,000.00 against the Appellant for contraventions of the pesticides regulation. Following a meeting with the Appellant, the Director assessed a final penalty of $6,000.00. The Appellant eventually admitted contravening the regulations but urged the Board to reduce the penalty based on his innocence and/or lack of knowledge, or notice or deficiencies in vendor education received from Department officials.&lt;/text&gt;      
    &lt;/p&gt;
    &lt;p&gt;
      &lt;text&gt;The Board confirms the decision of the Director of Pollution Control. &lt;/text&gt;
    &lt;/p&gt;
&lt;/case:decisionsummary&gt;

<b class="+ topic/ph hi-d/b ">Becomes</b>   

&lt;casesum:summaries&gt;
    &lt;casesum:decisionsummary&gt;
        &lt;p&gt;
          &lt;text&gt;SUMMARY &lt;/text&gt;
        &lt;/p&gt;
        &lt;p&gt;
          &lt;text&gt;The Department of Environmental Protection assessed a preliminary penalty of $9,000.00 against the Appellant for contraventions of the pesticides regulation. Following a meeting with the Appellant, the Director assessed a final penalty of $6,000.00. The Appellant eventually admitted contravening the regulations but urged the Board to reduce the penalty based on his innocence and/or lack of knowledge, or notice or deficiencies in vendor education received from Department officials. &lt;/text&gt;
        &lt;/p&gt;
        &lt;p&gt;
          &lt;text&gt;The Board confirms the decision of the Director of Pollution Control. &lt;/text&gt;
        &lt;/p&gt;
    &lt;/casesum:decisionsummary&gt;
&lt;/casesum:summaries&gt;
</pre>
                    </li>
                </ul>
            </section>
            <section>
                <p>When <sourcexml>case:decisionsummary/heading/title</sourcexml> begins with any of
                    the following text: <ul>
                        <li><sourcexml>"Court Summary:" (or the French version, "Résumé de la Cour
                                :")</sourcexml></li>
                        <li><sourcexml>Commission Summary:</sourcexml></li>
                        <li><sourcexml>Board Summary:</sourcexml></li>
                        <li><sourcexml>Tribunal Summary:</sourcexml></li>
                        <li><sourcexml>Executive Summary:</sourcexml></li>
                        <li><sourcexml>Commissioner Summary: </sourcexml></li>
                        <li><sourcexml>Résumé du tribunal :</sourcexml></li>
                        <li><sourcexml>Sommaire du tribunal :</sourcexml></li>
                    </ul> then use <targetxml>casesum:courtsummary</targetxml> instead of
                        <targetxml>casesum:decisionsummary</targetxml>. </p>
                <!--<p>Also, do the same when: <sourcexml>metaitem @name="SRCNAME" @value="SCJ "</sourcexml>
and, <sourcexml>casesum:decisionsummary/bodytext/p/text/emph</sourcexml> contains "Subsequent History:" ("Historique subs&#xe9;quent:" in French) or "Court Catchwords:" ("Indexation de la Cour:" in French).</p>-->
            </section>
            <note>
                <ul>
                    <li>If there is a scenario where
                            <sourcexml>case:decisionsummary/heading/title</sourcexml> begins with
                        any of the above given texts AND <sourcexml>p/text</sourcexml> containing a
                        sentence beginning with "HELD:" or the French language version "DISPOSITIF
                        :", in all caps, with or without a space character before the colon, or same
                        within emph tag (e.g. "<sourcexml>emph typestyle="bf"</sourcexml>"), then
                        for mapping use <targetxml>casesum:courtsummary</targetxml> instead of
                            <targetxml>casesum:decisionsummary</targetxml>.</li>
                    <li>If for above scenario <sourcexml>case:decisionsummary</sourcexml> contains
                            <sourcexml>figure</sourcexml> as its child then map it to
                            <targetxml>p/text/figure</targetxml>, For more clarification please
                        refer the example below. </li>
                    <li>If for above scenario <sourcexml>case:decisionsummary</sourcexml> contains
                            <sourcexml>l</sourcexml> as its child then map it to
                            <targetxml>p/list</targetxml>, For more clarification please refer the
                        example below. </li>
                </ul>
            </note>
            <pre>
<b>Source XML</b>
      
&lt;case:decisionsummary&gt;
    &lt;heading&gt;
        &lt;title&gt;Tribunal Summary:&lt;/title&gt;
    &lt;/heading&gt;
    &lt;p&gt;
        &lt;text&gt;This arbitration involves the rate of pay for working overtime on a Named Holiday, or for
            working on a Named Holiday which is a designated Day of Rest. The collective agreement
            provides that work on a Named Holiday will be paid at 1.5 times the Basic Rate of Pay (or 2.0
            times the Basic Rate of Pay for two "Super Stats") plus other time off. Overtime is paid at
            2.0 times the employee's Basic Rate of Pay. Work on a designated Day of Rest is also paid at
            2.0 times the Basic Rate of Pay. The Union's position was that an employee working overtime on
            a Named Holiday should be paid 2.5 times their Basic Rate of Pay (or 3.0 times if the Named
            Holiday is a Super Stat), calculated as follows: &lt;/text&gt;
    &lt;/p&gt;
    &lt;figure&gt;
        &lt;p&gt;
            &lt;text align="left"&gt;
                &lt;inlineobject filename="CA00000005824190_00034502-0001.jpg" type="image"
                    attachment="ln-server"/&gt;
            &lt;/text&gt;
        &lt;/p&gt;
    &lt;/figure&gt;
    &lt;p&gt;
        &lt;text&gt;
            &lt;glp:note&gt;
                &lt;p nl="0"&gt;
                    &lt;text&gt;[Editor's Note: Notes&lt;fnr fnrtoken="fnr-1" fntoken="fn-1"&gt;1&lt;/fnr&gt;;&lt;fnr
                        fnrtoken="fnr-2" fntoken="fn-2"&gt;2&lt;/fnr&gt; are included in the image above]&lt;/text&gt;
                &lt;/p&gt;
            &lt;/glp:note&gt;
        &lt;/text&gt;
    &lt;/p&gt;
    &lt;p&gt;
        &lt;text&gt;The Employer's position was that the rate of pay should be the highest rate of pay
            applicable to the circumstances--mainly, 2.0 times the Basic Rate of Pay. &lt;/text&gt;
    &lt;/p&gt;
    &lt;p&gt;
        &lt;text&gt;HELD: The Employer's interpretation of the collective agreement is correct. &lt;/text&gt;
    &lt;/p&gt;
&lt;/case:decisionsummary&gt;</pre>
            <pre><b>Target XML</b>
 
&lt;casesum:courtsummary&gt;
    &lt;heading&gt;
        &lt;title&gt;Tribunal Summary:&lt;/title&gt;
    &lt;/heading&gt;
    &lt;p&gt;
        &lt;text&gt;This arbitration involves the rate of pay for working overtime on a Named Holiday, or for
            working on a Named Holiday which is a designated Day of Rest. The collective agreement
            provides that work on a Named Holiday will be paid at 1.5 times the Basic Rate of Pay (or 2.0
            times the Basic Rate of Pay for two "Super Stats") plus other time off. Overtime is paid at
            2.0 times the employee's Basic Rate of Pay. Work on a designated Day of Rest is also paid at
            2.0 times the Basic Rate of Pay. The Union's position was that an employee working overtime on
            a Named Holiday should be paid 2.5 times their Basic Rate of Pay (or 3.0 times if the Named
            Holiday is a Super Stat), calculated as follows: &lt;/text&gt;
    &lt;/p&gt;
    &lt;p&gt;
        &lt;text&gt;
            &lt;figure&gt;
                &lt;ref:inlineobject&gt;
                    &lt;ref:locator&gt;
                        &lt;ref:locator-key&gt;
                            &lt;ref:key-name name="object-key"/&gt;
                            &lt;ref:key-value value="X-Y-CA00000005824190_00034502-0001"/&gt;   &lt;!-- X and Y are LNI and SMI values obtained from CSSM --&gt;
                        &lt;/ref:locator-key&gt;
                        &lt;ref:locator-params&gt;
                            &lt;proc:param name="componentseq" value="1"/&gt;
                            &lt;proc:param name="object-type" value="image"/&gt; &lt;!-- allowable values: “image?; (from .jpg, .gif, .png, .bmp)--&gt;
                            &lt;proc:param name="object-smi" value=""/&gt;    &lt;!-- This @value assignment is done by conversion program --&gt;
                        &lt;/ref:locator-params&gt;
                    &lt;/ref:locator&gt;
                &lt;/ref:inlineobject&gt;
            &lt;/figure&gt;
        &lt;/text&gt;
    &lt;/p&gt;
    &lt;p&gt;
        &lt;text&gt;
            &lt;inlinenote notetype="editor-note"&gt;
                [Editor's Note: Notes
                &lt;footnote-ref anchoridref="fnr-1"&gt;
                    &lt;ref:anchor id="fnr-1"/&gt;  
                    &lt;label&gt;1&lt;/label&gt;
                &lt;/footnote-ref&gt;
                &lt;footnote-ref anchoridref="fn-2"&gt;
                    &lt;ref:anchor id="fn-2"/&gt;   
                    &lt;label&gt;2&lt;/label&gt;
                &lt;/footnote-ref&gt;
                are included in the image above]
            &lt;/inlinenote&gt;
        &lt;/text&gt;
    &lt;/p&gt;
    &lt;p&gt;
        &lt;text&gt;The Employer's position was that the rate of pay should be the highest rate of pay
            applicable to the circumstances--mainly, 2.0 times the Basic Rate of Pay. &lt;/text&gt;
    &lt;/p&gt;
    &lt;p&gt;
        &lt;text&gt;HELD: The Employer's interpretation of the collective agreement is correct.&lt;/text&gt;
    &lt;/p&gt;
&lt;/casesum:courtsummary&gt;
</pre>

            <pre> <b>Example when <sourcexml>case:decisionsummary</sourcexml> has <sourcexml>l</sourcexml> as its child element.

</b><b>Source XML</b>
&lt;case:decisionsummary&gt;
    &lt;heading&gt;
        &lt;title&gt;Tribunal Summary:&lt;/title&gt;
    &lt;/heading&gt;
    &lt;p&gt;
        &lt;text&gt;
            &lt;emph typestyle="bf"&gt;Noteworthy Decision Summary&lt;/emph&gt;
        &lt;/text&gt;
    &lt;/p&gt;
    &lt;l virtual-nesting="3"&gt;
        &lt;li&gt;
            &lt;lilabel&gt;*&lt;/lilabel&gt;
            &lt;p&gt;
                &lt;text&gt;The panel in &lt;emph typestyle="it"&gt;WCAT Decision #2005-01984&lt;/emph&gt; determined
                    that the standard of review for jurisdictional issues at common law is
                    correctness and that paragraph 58(2)(c) of the &lt;emph typestyle="it"
                        &gt;Administrative Tribunals Act&lt;/emph&gt; (ATA), which calls for a correctness
                    standard, may reasonably be interpreted as applying to jurisdictional
                    issues.&lt;/text&gt;
            &lt;/p&gt;
        &lt;/li&gt;
    &lt;/l&gt;
&lt;/case:decisionsummary&gt;</pre>
            <pre><b>Target XML</b>
&lt;casesum:courtsummary&gt;
    &lt;heading&gt;
        &lt;title&gt;Tribunal Summary:&lt;/title&gt;
    &lt;/heading&gt;
    &lt;p&gt;
        &lt;text&gt;&lt;emph typestyle="bf"&gt;Noteworthy Decision Summary&lt;/emph&gt;&lt;/text&gt;
    &lt;/p&gt;
    &lt;p&gt;
      &lt;list&gt;
        &lt;listitem&gt;
            &lt;label&gt;*&lt;/label&gt;
            &lt;bodytext&gt;
                &lt;p&gt;
                    &lt;text&gt;The panel in &lt;emph typestyle="it"&gt;WCAT Decision #2005-01984&lt;/emph&gt; determined
                        that the standard of review for jurisdictional issues at common law is
                        correctness and that paragraph 58(2)(c) of the &lt;emph typestyle="it"
                            &gt;Administrative Tribunals Act&lt;/emph&gt; (ATA), which calls for a correctness
                        standard, may reasonably be interpreted as applying to jurisdictional
                        issues.&lt;/text&gt;
                &lt;/p&gt;
            &lt;/bodytext&gt;
        &lt;/listitem&gt;
      &lt;/list&gt;
    &lt;/p&gt;
&lt;/casesum:courtsummary&gt;</pre>
            <section>
                <p>For any <sourcexml>p/text</sourcexml> containing a sentence beginning with
                    "HELD:" or the French language version "DISPOSITIF :", in all caps, with or
                    without a space character before the colon, or same within emph tag (e.g.
                        "<sourcexml>emph typestyle="bf"</sourcexml>"), the sentence becomes
                        <targetxml>casesum:disposition/p/text</targetxml> beginning with "HELD:" or
                    French language equivalent. That is, isolate the holdings sentence based on
                    looking in <sourcexml>case:decisionsummary</sourcexml> for the sentence
                    beginning "HELD:" (or French language version "DISPOSITIF :") in all capital
                    letters and and placing the end tags after the next period or dash character
                    followed by space, followed by an upper-case letter, that completes the
                    sentence. (i.e. the mark-up would surround only one sentence.) The preceding and
                    following space dash dash space, if any, should be converted to period space.
                    See the two examples. </p>
                <title>Example 2</title>
                <codeblock> &lt;case:decisionsummary&gt; &lt;p&gt; &lt;text&gt;This was an appeal
                    from the denial of injunctive relief, and a cross-appeal from a declaration that
                    the defendant was violating the municipal by-law by operating a commercial
                    greenhouse in an area zoned for residential use. For the facts and the decision
                    appealed, see 88 DRS P27-019. &lt;/text&gt; &lt;/p&gt; &lt;p&gt;
                    &lt;text&gt;HELD: The appeal was allowed and the cross-appeal was dismissed. The
                    defendant claimed that his use of the land was a valid continuing non-conforming
                    use of the land. However, under the former by-law, the land was zoned for
                    residential use. Certain farming operations were expressly prohibited by the
                    by-law; greenhouse operation was not one of these. The defendant's claim that
                    this legitimized his use was rejected. The whole scheme of the by-law was to
                    limit this zone to residential use, and the by-law clearly did not contemplate
                    use for a greenhouse. The defendant's use had been illegal under the former
                    by-law, and therefore could not be protected as a continuing valid but
                    non-conforming use. Under s. 49 of the Planning Act, the municipality had the
                    same power to enforce a by-law as the Minister. This included, under s. 53 of
                    the Act, the right to injunctive relief. An injunction restraining the
                    defendant's continued use of the land as a commercial greenhouse operation was
                    granted. &lt;/text&gt; &lt;/p&gt; &lt;/case:decisionsummary&gt; </codeblock>
                <b>becomes</b>
                <codeblock> &lt;casesum:decisionsummary&gt; &lt;bodytext&gt; &lt;p&gt;
                    &lt;text&gt;This was an appeal from the denial of injunctive relief, and a
                    cross-appeal from a declaration that the defendant was violating the municipal
                    by-law by operating a commercial greenhouse in an area zoned for residential
                    use. For the facts and the decision appealed, see 88 DRS P27-019. &lt;/text&gt;
                    &lt;/p&gt; &lt;/bodytext&gt; &lt;casesum:disposition&gt; &lt;p&gt;
                    &lt;text&gt;HELD: The appeal was allowed and the cross-appeal was dismissed.
                    &lt;/text&gt; &lt;/p&gt; &lt;/casesum:disposition&gt; &lt;bodytext&gt; &lt;p&gt;
                    &lt;text&gt; The defendant claimed that his use of the land was a valid
                    continuing non-conforming use of the land. However, under the former by-law, the
                    land was zoned for residential use. Certain farming operations were expressly
                    prohibited by the by-law; greenhouse operation was not one of these. The
                    defendant's claim that this legitimized his use was rejected. The whole scheme
                    of the by-law was to limit this zone to residential use, and the by-law clearly
                    did not contemplate use for a greenhouse. The defendant's use had been illegal
                    under the former by-law, and therefore could not be protected as a continuing
                    valid but non-conforming use. Under s. 49 of the Planning Act, the municipality
                    had the same power to enforce a by-law as the Minister. This included, under s.
                    53 of the Act, the right to injunctive relief. An injunction restraining the
                    defendant's continued use of the land as a commercial greenhouse operation was
                    granted. &lt;/text&gt; &lt;/p&gt; &lt;/bodytext&gt;
                    &lt;/casesum:decisionsummary&gt; </codeblock>
            </section>
            <example>
                <title>French language example with space before colon, and preceding and follwing
                    dash dash converted to period space:</title>
                <codeblock> &lt;bodytext&gt; &lt;p&gt; &lt;text&gt;Demande d'injonction
                    interlocutoire -- Bérubé publie et distribue depuis 1973 un journal de quartier,
                    l'Information Centre-Ville -- Il tire son revenu de la publicité apparaissant
                    dans le journal -- Son fils était associé avec lui jusqu'à ce qu'il quitte le
                    journal et en publie un à son tour, l'Hebdo Centre-Ville (L'Hebdo) -- L'Hebdo
                    vise la même clientèle, le même secteur de la ville, sollicite les mêmes
                    commanditaires et met l'accent, dans sa présentation, sur l'expression
                    Centre-Ville, comme le fait l'Information Centre-Ville -- Bérubé demande qu'il
                    soit ordonné à son fils et son associé de cesser la distribution de l'Hebdo --
                    DISPOSITIF : Demande accueillie -- Même si la marque de commerce Centre-ville
                    n'est pas enregistrée, elle appartient à Bérubé depuis 1973 -- Le fils et son
                    associé ont concurrencé Bérubé d'une façon non permise par la Loi concernant les
                    marques de commerce -- La balance des inconvénients penche en faveur de Bérubé.
                    &lt;/text&gt; &lt;/p&gt; &lt;/bodytext&gt; </codeblock>
                <b>becomes</b>
                <codeblock> &lt;bodytext&gt; &lt;p&gt; &lt;text&gt;Demande d'injonction
                    interlocutoire -- Bérubé publie et distribue depuis 1973 un journal de quartier,
                    l'Information Centre-Ville -- Il tire son revenu de la publicité apparaissant
                    dans le journal -- Son fils était associé avec lui jusqu'à ce qu'il quitte le
                    journal et en publie un à son tour, l'Hebdo Centre-Ville (L'Hebdo) -- L'Hebdo
                    vise la même clientèle, le même secteur de la ville, sollicite les mêmes
                    commanditaires et met l'accent, dans sa présentation, sur l'expression
                    Centre-Ville, comme le fait l'Information Centre-Ville -- Bérubé demande qu'il
                    soit ordonné à son fils et son associé de cesser la distribution de
                    l'Hebdo.&lt;/text&gt; &lt;/p&gt; &lt;/bodytext&gt; &lt;casesum:disposition&gt;
                    &lt;p&gt; &lt;text&gt;DISPOSITIF : Demande accueillie. &lt;/text&gt; &lt;/p&gt;
                    &lt;/casesum:disposition&gt; &lt;bodytext&gt; &lt;p&gt; &lt;text&gt;Même si la
                    marque de commerce Centre-ville n'est pas enregistrée, elle appartient à Bérubé
                    depuis 1973 -- Le fils et son associé ont concurrencé Bérubé d'une façon non
                    permise par la Loi concernant les marques de commerce -- La balance des
                    inconvénients penche en faveur de Bérubé. &lt;/text&gt; &lt;/p&gt;
                    &lt;/bodytext&gt; </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2014-08-27: <ph id="change_20140827_AS">Updated instruction for
                        case:decisionsummary to place the period sign after completion of sentence
                        ... <b>P4 Issue #323</b></ph></p>
                <p>2014-08-08: <ph id="change_20140808_AS">Updated instruction for
                        case:decisionsummary having l as its child element... <b>P4 Issue
                        #314</b></ph></p>
                <p>2014-08-07: <ph id="change_20140807_AS">Updated instruction for
                        casesum:disposition - Space appearing before the "." .. <b>P4 Issue
                        #302</b></ph></p>
                <p>2014-07-28: <ph id="change_20140728_AS">Added instruction to handle "HELD:"
                        keyword in case:decisionsummary.. <b>R4.5 Issue #1584</b></ph></p>
                <p>2014-07-08: <ph id="change_20140708_AS">Added the additional phrases from the
                        attached Word document in addition to "Court Summary:"<b>R4.5 Issue
                            #1584</b></ph>.</p>
                <p>2014-06-10: <ph id="change_20140610_SEP">Loosened instruction to convert
                            <sourcexml>p/text</sourcexml> beginning with "HELD:" into
                            <targetxml>casesum:disposition/p/text</targetxml>. Allow dash to end
                        first sentence. Allow <sourcexml>emph</sourcexml> around HELD text. Allow
                        space before colon. Allow French language version. Convert preceding and
                        following space dash dash with a period. Add example.<b>R4.5 Issue
                        #1588</b></ph>.</p>
                <p>2014-04-24: <ph id="change_20140424_SEP">Updated instruction to convert
                            <sourcexml>p/text</sourcexml> beginning with "HELD:" into
                            <targetxml>casesum:disposition/p/text</targetxml><b>R4.5 Issue
                        #1355</b></ph>.</p>
                <p>2014-04-24: <ph id="change_20140424b_SEP">Provide a "Jump To Link" for Court
                        Summary by use of target <targetxml>casesum:courtsummary</targetxml> instead
                        of <targetxml>casesum:decisionsummary</targetxml><b>R4.5 Issue
                        #1355</b></ph>.</p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.decisionsummary.dita  -->
    <!--<xsl:message>CA04-Administrative_Decisions_case.decisionsummary.xsl requires manual development!</xsl:message>-->

    <xsl:template match="case:decisionsummary">
        <casesum:summaries>
            <xsl:choose>
                <xsl:when
                    test="starts-with(heading/title, 'Court Summary:') or starts-with(heading/title, 'Résumé de la Cour :') or starts-with(heading/title, 'Commission Summary:') or starts-with(heading/title, 'Board Summary:') or starts-with(heading/title, 'Tribunal Summary:') or starts-with(heading/title, 'Executive Summary:') or starts-with(heading/title, 'Commissioner Summary:') or starts-with(heading/title, 'Résumé du tribunal :') or starts-with(heading/title, 'Sommaire du tribunal :')">
                    <xsl:element name="casesum:courtsummary">
                        <xsl:apply-templates select="@* | node()"/>
                    </xsl:element>
                </xsl:when>
                <!--<xsl:when
                    test="heading/title[contains(., 'Subsequent History') or contains(., 'Historique subséquent') or contains(., 'Court Catchwords') or contains(., 'Indexation de la Cour')] or child::p[1]/text[1]/emph[1][contains(., 'Subsequent History') or contains(., 'Historique subséquent') or contains(., 'Court Catchwords') or contains(., 'Indexation de la Cour')]">
                    <xsl:element name="casesum:courtsummary">
                        <xsl:apply-templates select="@* | node()"/>
                    </xsl:element>
                </xsl:when>-->

                <xsl:otherwise>
                    <casesum:decisionsummary>
                        <xsl:apply-templates select="@*"/>
                        <xsl:apply-templates select="heading"/>
                        <!--<xsl:if test="p[text[not(starts-with(., 'HELD:') or starts-with(., 'DISPOSITIF :'))]] | p[text/emph[not(starts-with(., 'HELD:') or starts-with(., 'DISPOSITIF:'))]]">
                            <bodytext>                                   
                                <xsl:apply-templates select="p[text[not(starts-with(., 'HELD:') or starts-with(., 'DISPOSITIF :'))]] | p[text/emph[not(starts-with(., 'HELD:') or starts-with(., 'DISPOSITIF:'))]]"/> 
                            </bodytext>
                        </xsl:if>-->
                        <xsl:for-each select="p">
                            <xsl:choose>
                                <xsl:when
                                    test=".[child::*:text[starts-with(., 'HELD:') or starts-with(., 'DISPOSITIF :')]][parent::case:decisionsummary]">
                                    <casesum:disposition>
                                        <p>
                                            <text>
                                                <xsl:choose>
                                                  <xsl:when
                                                  test=".[child::text[starts-with(., 'Held:') or starts-with(., 'HELD:')]]">
                                                  <xsl:value-of
                                                  select="replace(substring-before(child::text[starts-with(., 'Held:') or starts-with(., 'HELD:')], '.'), '--', '-')"
                                                  />
                                                  </xsl:when>
                                                  <xsl:otherwise>
                                                  <xsl:value-of
                                                  select="replace(substring-before(.[child::text[starts-with(., 'DISPOSITIF : ') or starts-with(., 'Dispositif : ')]], '.'), '--', '-')"
                                                  />
                                                  </xsl:otherwise>
                                                </xsl:choose>
                                                <xsl:text>.</xsl:text>
                                            </text>
                                        </p>
                                    </casesum:disposition>
                                    <bodytext>
                                        <p>
                                            <text>
                                                <xsl:value-of
                                                  select="substring-after(.[text[starts-with(., 'HELD:') or starts-with(., 'Held:') or starts-with(., 'DISPOSITIF :') or starts-with(., 'Dispositif :')]], '.')"
                                                />
                                            </text>
                                        </p>
                                    </bodytext>
                                </xsl:when>
                                <xsl:when
                                    test=".[child::*:text/emph[starts-with(., 'HELD:') or starts-with(., 'Held:') or starts-with(., 'DISPOSITIF:') or starts-with(., 'Dispositif:')]]">
                                    <xsl:if
                                        test=".[child::*:text/emph[starts-with(., 'HELD:') or starts-with(., 'Held:') or starts-with(., 'DISPOSITIF:') or starts-with(., 'Dispositif:')][preceding-sibling::text()]]">
                                        <bodytext>
                                            <p>
                                                <text>
                                                  <xsl:if
                                                  test=".[child::*:text/emph[starts-with(., 'Held:')]]">
                                                  <xsl:value-of
                                                  select="replace(substring-before(.[child::*:text/emph[starts-with(., 'Held:')]], 'Held:'), '--', '-')"
                                                  />
                                                  </xsl:if>
                                                  <xsl:if
                                                  test=".[child::*:text/emph[starts-with(., 'HELD:')]]">
                                                  <xsl:value-of
                                                  select="replace(substring-before(.[child::*:text/emph[starts-with(., 'HELD:')]], 'HELD:'), '--', '-')"
                                                  />
                                                  </xsl:if>
                                                  <xsl:if
                                                  test=".[child::*:text/emph[starts-with(., 'Dispositif:')]]">
                                                  <xsl:value-of
                                                  select="replace(substring-before(.[child::*:text/emph[starts-with(., 'Dispositif:')]], 'Dispositif:'), '--', '-')"
                                                  />
                                                  </xsl:if>
                                                  <xsl:if
                                                  test=".[child::*:text/emph[starts-with(., 'DISPOSITIF:')]]">
                                                  <xsl:value-of
                                                  select="replace(substring-before(.[child::*:text/emph[starts-with(., 'DISPOSITIF:')]], 'DISPOSITIF:'), '--', '-')"
                                                  />
                                                  </xsl:if>
                                                </text>
                                            </p>
                                        </bodytext>
                                    </xsl:if>
                                    <casesum:disposition>
                                        <p>
                                            <text>
                                                <xsl:apply-templates
                                                  select="./text/emph[starts-with(., 'HELD:') or starts-with(., 'Held:') or starts-with(., 'DISPOSITIF :') or starts-with(., 'Dispositif :')]"/>
                                                <xsl:if test=".[text/emph[starts-with(., 'Held:')]]">
                                                  <!--<xsl:value-of select="substring-before(p/text/text()[preceding-sibling::*[1][self::emph[starts-with(.,'HELD:')]]],'.')"/>-->
                                                  <xsl:value-of
                                                  select="replace(substring-before(./text/text()[preceding-sibling::*[1][self::emph[starts-with(., 'Held:')]]], '.'), '--', '-')"/>
                                                  <xsl:text>.</xsl:text>
                                                </xsl:if>
                                                <xsl:if test=".[text/emph[starts-with(., 'HELD:')]]">
                                                  <!--<xsl:value-of select="substring-before(p/text/text()[preceding-sibling::*[1][self::emph[starts-with(.,'HELD:')]]],'.')"/>-->
                                                  <xsl:value-of
                                                  select="replace(substring-before(./text/text()[preceding-sibling::*[1][self::emph[starts-with(., 'HELD:')]]], '.'), '--', '-')"
                                                  />
                                                </xsl:if>
                                                <xsl:if
                                                  test=".[text/emph[starts-with(., 'Dispositif:')]]">
                                                  <!--<xsl:value-of select="substring-before(p/text/text()[preceding-sibling::*[1][self::emph[starts-with(.,'DISPOSITIF:')]]],'.')"/>-->
                                                  <xsl:value-of
                                                  select="replace(substring-before(./text/text()[preceding-sibling::*[1][self::emph[starts-with(., 'Dispositif:')]]], '.'), '--', '-')"
                                                  />
                                                </xsl:if>
                                                <xsl:if
                                                  test=".[text/emph[starts-with(., 'DISPOSITIF:')]]">
                                                  <!--<xsl:value-of select="substring-before(p/text/text()[preceding-sibling::*[1][self::emph[starts-with(.,'DISPOSITIF:')]]],'.')"/>-->
                                                  <xsl:value-of
                                                  select="replace(substring-before(./text/text()[preceding-sibling::*[1][self::emph[starts-with(., 'DISPOSITIF:')]]], '.'), '--', '-')"
                                                  />
                                                </xsl:if>
                                            </text>
                                        </p>
                                    </casesum:disposition>
                                    <bodytext>
                                        <p>
                                            <text>
                                                <xsl:if
                                                  test=".[text/emph[starts-with(., 'HELD:') or starts-with(., 'Held:')]]">
                                                  <!--<xsl:value-of select="replace(substring-after(./text/text()[preceding-sibling::*[1][self::emph[starts-with(. , 'Held:') or starts-with(. , 'HELD:')]]], '.'),'-\-','-')"/>-->
                                                  <!--<xsl:value-of select="substring-after(p/text/text()[preceding-sibling::*[1][self::emph[starts-with(. , 'HELD:')]]] , '.')"/>-->
                                                  <xsl:apply-templates
                                                  select="./text/child::node() except descendant::emph[starts-with(., 'Held:') or starts-with(., 'HELD:')]"
                                                  />
                                                </xsl:if>
                                                <xsl:if
                                                  test=".[text/emph[starts-with(., 'DISPOSITIF:')]]">
                                                  <xsl:value-of
                                                  select="replace(substring-after(./text/text()[preceding-sibling::*[1][self::emph[starts-with(., 'Dispositif:') or starts-with(., 'DISPOSITIF:')]]], '.'), '--', '-')"/>
                                                  <!--<xsl:value-of select="substring-after(p/text/text()[preceding-sibling::*[1][self::emph[starts-with(. , 'DISPOSITIF:')]]] , '.')"/>-->
                                                </xsl:if>
                                            </text>
                                        </p>
                                    </bodytext>
                                </xsl:when>
                                <xsl:otherwise>
                                    <bodytext>
                                        <p>
                                            <xsl:apply-templates select="child::text"/>

                                        </p>
                                    </bodytext>
                                </xsl:otherwise>
                            </xsl:choose>
                        </xsl:for-each>

                    </casesum:decisionsummary>
                </xsl:otherwise>
            </xsl:choose>
        </casesum:summaries>
    </xsl:template>



    <!-- <xsl:template match="figure[descendant::p and text and ancestor::case:decisionsummary]|text[parent::p and ancestor::figure and ancestor::case:decisionsummary]">
        <xsl:apply-templates select="node()"/>
    </xsl:template>-->

    <xsl:template match="case:decisionsummary/figure">
        <p>
            <text>
                <xsl:apply-templates/>
            </text>
        </p>
    </xsl:template>



    <xsl:template match="case:decisionsummary/l" priority="25">
        <p>
            <xsl:apply-templates select="node()"/>
        </p>
    </xsl:template>

    <xsl:template match="li[parent::l and ancestor::case:decisionsummary]">
        <list>
            <listitem>
                <xsl:apply-templates select="child::lilabel"/>
                <bodytext>
                    <xsl:apply-templates select="child::p"/>
                </bodytext>
            </listitem>
        </list>
    </xsl:template>

    <!--<xsl:template match="case:decisionsummary/p/text[matches(.,'^HELD:') or matches(.,'^DISPOSITIF :') or matches(.,'^DISPOSITIF:')][not(child::emph[matches(.,'^HELD:') or matches(.,'^DISPOSITIF :') or matches(.,'^DISPOSITIF:')])]" priority="25">
       
        <xsl:choose>
            <xsl:when test="normalize-space((substring-after(.,'.')))=''">
                <p>
                    <text>
                    <xsl:apply-templates select="@*|node()"/>  
                    </text>
                </p>
            </xsl:when>
            <xsl:otherwise>
                <casesum:disposition>
                    <p>
                        <text><xsl:value-of select="substring-before(.,'.')"/>
                            <xsl:text>.</xsl:text></text>
                    </p>
                </casesum:disposition>
                <bodytext>
                    <p>
                        <text>
                            <xsl:value-of select="substring-after(.,'.')"/>
                        </text>
                    </p>
                </bodytext>
            </xsl:otherwise>
        </xsl:choose>
        
    </xsl:template>-->

    <!--<xsl:template match="case:decisionsummary/p" priority="25">
        <xsl:variable name="text" select="text"/>      
        <xsl:choose><!-\-Praneet-\->
            <xsl:when test="text/emph[matches(text(),'^HELD:') or matches(text(),'^DISPOSITIF :') or matches(text(),'^DISPOSITIF:')]">
                <p>
                    <xsl:apply-templates select="node()"/>
                </p>
            </xsl:when>
            <xsl:when test="text[matches($text,'^HELD:') or matches($text,'^DISPOSITIF :') or matches($text,'^DISPOSITIF:')]">
                <xsl:apply-templates select="node()"/>
            </xsl:when>
            <xsl:otherwise>
                <p>
                    <xsl:apply-templates select="@*|node()"/>
                </p>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>-->
    <!--<xsl:template match="case:decisionsummary/p" priority="25">
        <xsl:variable name="text" select="text"/>      
        <xsl:choose><!-\-Praneet-\->
            <xsl:when test="text/emph[matches(upper-case(.),'^HELD:') or matches(upper-case(.),'^DISPOSITIF :') or matches(upper-case(.),'^DISPOSITIF:')]">
                <casesum:disposition>
                    <p>
                        <xsl:apply-templates select="node()"/>
                    </p>
                </casesum:disposition>
            </xsl:when>
            <xsl:when test="text[matches($text,'^HELD:') or matches($text,'^DISPOSITIF :') or matches($text,'^DISPOSITIF:')]">
                <xsl:apply-templates select="node()"/>
            </xsl:when>
            <xsl:otherwise>
                <p>
                    <xsl:apply-templates select="@*|node()"/>
                </p>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>-->


    <xsl:template match="*:emph/*:note">
        <xsl:element name="inlinenote">
            <xsl:attribute name="notetype" select="'editor-note'"/>
            <xsl:value-of select="."/>
        </xsl:element>
    </xsl:template>


    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.priorhist">
        <title>case:priorhist <lnpid>id-CA04-13432</lnpid></title>
        <body>
            <section>
                <ul>
                    <li class="- topic/li ">
                        <sourcexml class="+ topic/keyword xml-d/sourcexml "
                            >case:priorhist</sourcexml> becomes <targetxml
                            class="+ topic/keyword xml-d/targetxml "
                            >casehist:casehist/casehist:priorhist/casehist:summary</targetxml>
                        <pre xml:space="preserve" class="- topic/pre ">
&lt;case:priorhist&gt;
    &lt;p&gt;
        &lt;text&gt;
            &lt;glp:note&gt;
                &lt;p nl="0"&gt;
                    &lt;text&gt;
                    [Quicklaw note: Supplementary reasons for judgment were released October 3, 1997. See &lt;ci:cite&gt;
                            &lt;ci:case&gt;
                            &lt;ci:caseref ID="cref00001085" spanref="cspan00001085"&gt;
                                    &lt;ci:reporter value="AJ"/&gt;
                                    &lt;ci:edition&gt;
                                        &lt;ci:date year="1997"/&gt;
                                    &lt;/ci:edition&gt;
                                    &lt;ci:refnum num="961"/&gt;
                                &lt;/ci:caseref&gt;
                            &lt;/ci:case&gt;
                          &lt;ci:content&gt;
                             &lt;ci:span spanid="cspan00001085"&gt;[1997] A.J. No. 961&lt;/ci:span&gt;
                          &lt;/ci:content&gt;
                        &lt;/ci:cite&gt;.] 
                     &lt;/text&gt;
                &lt;/p&gt;
            &lt;/glp:note&gt;
        &lt;/text&gt;
    &lt;/p&gt;
&lt;/case:priorhist&gt;
             
<b class="+ topic/ph hi-d/b ">Becomes</b>           
                        
&lt;casehist:casehist&gt;
    &lt;casehist:priorhist&gt;
        &lt;casehist:summary&gt;
            &lt;p&gt;
                &lt;text&gt;
                    &lt;inlinenote&gt;                       
                          [Quicklaw note: Supplementary reasons for judgment were
                                released October 3, 1997. See &lt;lnci:cite&gt;
                                &lt;lnci:case&gt;
                                   &lt;lnci:caseref ID="cref00001085"&gt;
                                      &lt;lnci:reporter value="AJ"/&gt;
                                         &lt;lnci:edition&gt;
                                            &lt;lnci:date year="1997"/&gt;
                                          &lt;/lnci:edition&gt;
                                          &lt;lnci:refnum num="961"/&gt;
                                      &lt;/lnci:caseref&gt;
                                 &lt;/lnci:case&gt;
                                        &lt;lnci:content&gt;[1997] A.J. No. 961&lt;/lnci:content&gt;
                                    &lt;/lnci:cite&gt;.]                                
                    &lt;/inlinenote&gt;
                &lt;/text&gt;
            &lt;/p&gt;
        &lt;/casehist:summary&gt;
    &lt;/casehist:priorhist&gt;
&lt;/casehist:casehist&gt;

</pre>
                    </li>
                    <li> If <sourcexml class="+ topic/keyword xml-d/sourcexml "
                            >case:priorhist</sourcexml> is child of <sourcexml
                            class="+ topic/keyword xml-d/sourcexml "
                            >case:appendix/case:headnote</sourcexml> then it becomes <targetxml
                            class="+ topic/keyword xml-d/targetxml "
                            >admindecision:appendix/casehist:casehist</targetxml> and create
                            <targetxml class="+ topic/keyword xml-d/targetxml "
                            >casehist:priorhist/casehist:summary</targetxml> within <targetxml
                            class="+ topic/keyword xml-d/targetxml ">casehist:casehist</targetxml>
                        <pre xml:space="preserve" class="- topic/pre ">
&lt;case:appendix&gt;
    &lt;case:headnote&gt;
        &lt;case:priorhist&gt;
            &lt;p&gt;
                &lt;text&gt;APPENDIX "C"&lt;/text&gt;
            &lt;/p&gt;
            &lt;p&gt;
                &lt;text&gt;AUTHORITIES&lt;/text&gt;
            &lt;/p&gt;
            &lt;p&gt;
                &lt;text&gt;The Employer&lt;/text&gt;
            &lt;/p&gt;
            &lt;l virtual-nesting="2"&gt;
                &lt;li&gt;
                    &lt;lilabel&gt;1.&lt;/lilabel&gt;
                    &lt;p&gt;
                       &lt;text&gt;
                       Re Motor Transport Industrial Relations Bureau of Ontario and General
                       Truck Drivers' Union, Local 938,
                       &lt;ci:cite&gt;
                            &lt;ci:case&gt;
                                &lt;ci:caseinfo&gt;
                                 &lt;ci:decisiondate year="1973"/&gt;
                                &lt;/ci:caseinfo&gt;
                             &lt;ci:caseref ID="cref00015137" spanref="cspan00015137"&gt;
                                &lt;ci:reporter value="LAC2"/&gt;
                                &lt;ci:volume num="4"/&gt;
                                &lt;ci:page num="154"/&gt;
                             &lt;/ci:caseref&gt;
                             &lt;/ci:case&gt;
                             &lt;ci:content&gt;
                             (1973) 4 L.A.C. (2d) 154
                            &lt;/ci:content&gt;
                         &lt;/ci:cite&gt;.
                         &lt;/text&gt;
                    &lt;/p&gt;
                &lt;/li&gt;
            &lt;/l&gt;
        &lt;/case:priorhist&gt;
    &lt;/case:headnote&gt;
&lt;/case:appendix&gt;
</pre>
                        <b class="+ topic/ph hi-d/b ">Becomes</b>
                        <pre xml:space="preserve" class="- topic/pre ">
            &lt;admindecision:appendix&gt;
    &lt;casehist:casehist&gt;
        &lt;casehist:priorhist&gt;
            &lt;casehist:summary&gt;
                &lt;p&gt;
                    &lt;text&gt;APPENDIX "C"&lt;/text&gt;
                &lt;/p&gt;
                &lt;p&gt;
                    &lt;text&gt;AUTHORITIES&lt;/text&gt;
                &lt;/p&gt;
                &lt;p&gt;
                    &lt;text&gt;The Employer&lt;/text&gt;
                &lt;/p&gt;                
                    &lt;list&gt;
                        &lt;listitem&gt;
                            &lt;label&gt;1.&lt;/label&gt;
                            &lt;bodytext&gt;
                                &lt;p&gt;
                                   &lt;text&gt;
                                   Re Motor Transport Industrial Relations Bureau of Ontario and General
                                   Truck Drivers' Union, Local 938,
                                    &lt;lnci:cite&gt;
                                         &lt;lnci:case&gt;
                                             &lt;lnci:caseinfo&gt;
                                              &lt;lnci:decisiondate year="1973"/&gt;
                                             &lt;/lnci:caseinfo&gt;
                                          &lt;lnci:caseref ID="cref00015137"&gt;
                                             &lt;lnci:reporter value="LAC2"/&gt;
                                             &lt;lnci:volume num="4"/&gt;
                                             &lt;lnci:page num="154"/&gt;
                                          &lt;/lnci:caseref&gt;
                                          &lt;/lnci:case&gt;
                                          &lt;lnci:content&gt;(1973) 4 L.A.C. (2d) 154&lt;/lnci:content&gt;
                                    &lt;/lnci:cite&gt;.
                                 &lt;/text&gt;
                                &lt;/p&gt;
                            &lt;/bodytext&gt;
                        &lt;/listitem&gt;
                    &lt;/list&gt;                
            &lt;/casehist:summary&gt;
        &lt;/casehist:priorhist&gt;
    &lt;/casehist:casehist&gt;
&lt;/admindecision:appendix&gt;
            </pre>
                    </li>
                </ul>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.priorhist.dita  -->
    <!--<xsl:message>CA04-Administrative_Decisions_case.priorhist.xsl requires manual development!</xsl:message> -->

    <xsl:template match="case:priorhist">

        <xsl:choose>
            <xsl:when test="parent::case:headnote and ancestor::case:appendix">
                <!--<admindecision:appendix>-->
                <casehist:casehist>
                    <casehist:priorhist>
                        <casehist:summary>
                            <xsl:apply-templates select="@* | node()"/>
                        </casehist:summary>
                    </casehist:priorhist>
                </casehist:casehist>
                <!--</admindecision:appendix>-->
            </xsl:when>
            <xsl:otherwise>
                <casehist:casehist>
                    <casehist:priorhist>
                        <casehist:summary>
                            <xsl:apply-templates select="@* | node()"/>
                        </casehist:summary>
                    </casehist:priorhist>
                </casehist:casehist>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>





    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.references">
        <title>case:references <lnpid>id-CA04-13434</lnpid></title>
        <body>
            <section>
                <ul>
                    <li class="- topic/li ">
                        <sourcexml class="+ topic/keyword xml-d/sourcexml "
                            >case:references</sourcexml> becomes <targetxml
                            class="+ topic/keyword xml-d/targetxml ">ref:relatedrefs</targetxml>
                        <p>With the exception of <sourcexml>heading</sourcexml>, every child of
                                <sourcexml>case:references</sourcexml> should be mapped to
                                <targetxml>ref:relatedrefs/bodytext</targetxml>.</p>
                        <p/>
                        <p/>
                        <p><b>Please refer the below table for the following scenario:</b> If
                            initial contents of <sourcexml>case:references</sourcexml> equals first
                            column of table then (either within heading/title, text/emph
                            typestyle="bf", etc), add an attribute
                                <targetxml>@referencetype</targetxml> and set the value
                                <targetxml>@referencetype=</targetxml> second column of table. See
                            CA Example 3 and 4.</p>
                        <table>
                            <tgroup cols="2">
                                <thead>
                                    <row>
                                        <entry>Unique Values for search</entry>
                                        <entry>Replace attribute Value</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>Articles cited:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Authorities Cited:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Authorities cited:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Authorities Considered:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Authors and Works cited:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>AUTHORS AND WORKS JUDICIALLY NOTICED:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>AUTHORS AND WORKS NOTICED:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Authors and Works Noticed:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Authors Cited</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Authors cited</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Autorité citée :</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Autorités :</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Autorités citées :</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>CASE CITED:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Cases Cited</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>CASES CITED:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Cases Cited:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Cases cited:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Cases Considered:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>CASES JUDICIALLY CONSIDERED</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Cases Judicially Considered</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>CASES JUDICIALLY NOTICED:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>CASES NOTICED:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Cases Noticed:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Décision citée :</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Décisions citées :</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>DOCTRINE</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Doctrine</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Doctrine citée</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>JURISPRUDENCE</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Jurisprudence</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Jurisprudence citée</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Jurisprudence citée :</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Jurisprudence consultée :</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Législation citée :</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>Lois et règlements</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>Lois et règlements cités</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>MISCELLANEOUS WORKS CITED:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Statutes and Regulations Cited</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>STATUTES AND REGULATIONS CITED:</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>Statutes and Regulations cited:</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>Statutes and Regulations Judicially
                                            Considered</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>Statutes Cited:</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>Statutes cited:</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>STATUTES JUDICIALLY NOTICED:</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>STATUTES NOTICED:</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>Statutes Noticed:</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>Statutes, Regulations and Rule Cited:</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>Statutes, Regulations and Rules cited</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>STATUTES, REGULATIONS AND RULES CITED:</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>Statutes, Regulations and Rules Cited:</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>Authorities Cited</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Authors Cited</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Cases and texts cited</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>CASES CITED</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Cases Cited</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Cases cited</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Doctrine citée</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Jurisprudence</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Législation citée</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>Lois et règlements cités</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>MISCELLANEOUS WORKS CITED</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Statutes and Regulations Cited</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>Statutes cited</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>STATUTES, REGULATIONS AND RULES CITED</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>Statutes, Regulations and Rules Cited</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>Statutes, Regulations and Rules cited</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>Législation citée:</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>JURISPRUDENCE CITÉE :</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Affaire citée:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Affaires citées:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Affaires citées:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Authorities &amp; Texts:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Authorities</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Autorités citées *</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Autorités citées par l'appelante :</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Autorités citées par l'intimé :</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Autorités citées</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Case Authorities and Texts:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Cases considered:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Cases referred to:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Dictionnaire cité :</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Jurisprudence :</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Jurisprudence :</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>JURISPRUDENCE DÉPOSÉE PAR L'INTIMÉE</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Jurisprudence soumise</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Jurisprudence:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Législation citée:</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>Liste de jurisprudence</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Liste des jugements à l'appui:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>LISTE DES JUGEMENTS À L'APPUI</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Loi citée:</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>Lois citées:</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>Lois et règlements cités :</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>Par l'intimé :</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>Statutes considered:</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>Statutes Referred to:</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>Statutes referred to:</entry>
                                        <entry>legislation</entry>
                                    </row>
                                    <row>
                                        <entry>Tribunal decisions considered:</entry>
                                        <entry>consideredcases</entry>
                                    </row>
                                    <row>
                                        <entry>LEGISLATION:</entry>
                                        <entry>legislation</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                        <note class="- topic/note ">Remove colons (:) with or without space from
                                <sourcexml>case:references/title</sourcexml> in New Lexis Conversion
                                <targetxml>ref:relatedrefs/heading/title</targetxml> if appear after
                            the following- <ul>
                                <li>
                                    <sourcexml>Appearances:</sourcexml> to
                                        <targetxml>Appearances</targetxml></li>
                                <li><sourcexml>Counsel:</sourcexml> to
                                        <targetxml>Counsel</targetxml>
                                </li>
                                <li>
                                    <sourcexml>Comparutions :</sourcexml>
                                        to<targetxml>Comparutions</targetxml>
                                </li>
                                <li>
                                    <sourcexml>Comparutions:</sourcexml>
                                        to<targetxml>Comparutions</targetxml>
                                </li>
                                <li>
                                    <sourcexml>Avocats :</sourcexml>
                                        to<targetxml>Avocats</targetxml>
                                </li>
                                <li>
                                    <sourcexml>Avocats:</sourcexml>to <targetxml>Avocats</targetxml>
                                </li>
                                <li>
                                    <sourcexml>Ont comparu:</sourcexml> to<targetxml>Ont
                                        comparu</targetxml>
                                </li>
                                <li>
                                    <sourcexml>Ont comparu :</sourcexml>to <targetxml>Ont
                                        comparu</targetxml>
                                </li>
                                <li>
                                    <sourcexml>AVOCATS:</sourcexml> to<targetxml>AVOCATS</targetxml>
                                </li>
                                <li>
                                    <sourcexml>AVOCATS :</sourcexml>to
                                        <targetxml>AVOCATS</targetxml>
                                </li>
                                <li><sourcexml>Cases cited:</sourcexml> to <targetxml>Cases
                                        cited</targetxml></li>
                                <li><sourcexml>Cases Cited:</sourcexml> to <targetxml>Cases
                                        Cited</targetxml></li>
                                <li><sourcexml>Jurisprudence cite :</sourcexml> to
                                        <targetxml>Jurisprudence cite</targetxml></li>
                                <li><sourcexml>Statutes, Regulations and Rules Cited:</sourcexml> to
                                        <targetxml>Statutes, Regulations and Rules
                                    Cited</targetxml></li>
                                <li><sourcexml>Législation citée :</sourcexml> to
                                        <targetxml>Législation citée</targetxml></li>
                                <li><sourcexml>Authors and Texts Cited:</sourcexml> to
                                        <targetxml>Authors and Texts Cited</targetxml></li>
                                <li><sourcexml>Texts Cited:</sourcexml> to <targetxml>Texts
                                        Cited</targetxml></li>
                                <li><sourcexml>Causes citées et consultées :</sourcexml> to
                                        <targetxml>Causes citées et consultées</targetxml></li>
                                <li><sourcexml>Jurisprudence et doctrine citées et consultées
                                        :</sourcexml> to <targetxml>Jurisprudence et doctrine citées
                                        et consultées</targetxml></li>
                                <li><sourcexml>Doctrine et jurisprudence citées :</sourcexml> to
                                        <targetxml>Doctrine et jurisprudence citées</targetxml></li>
                                <li><sourcexml>Doctrine citée :</sourcexml> to <targetxml>Doctrine
                                        citée</targetxml></li>
                            </ul>
                        </note>
                        <pre xml:space="preserve" class="- topic/pre ">
   
&lt;case:references&gt;
  &lt;heading&gt;
    &lt;title&gt;Statutes, Regulations and Rules Cited:&lt;/title&gt;
  &lt;/heading&gt;
            &lt;p&gt;
              &lt;text&gt;Environmental Protection and Enhancement Act, S.A. 1992, c. E- 13.3, ss. 87(2), 87(5)(b).&lt;nl/&gt;
Natural Resources Conservation Board Act, S.A. 1990, c. N-5.5.&lt;nl/&gt;
Special Waste Management Corporation Act, S.A. 1982, c. S-21.5.&lt;/text&gt;
            &lt;/p&gt;
&lt;/case:references&gt;

<b class="+ topic/ph hi-d/b ">Becomes:</b>
          
&lt;ref:relatedrefs&gt;
&lt;heading&gt;
    &lt;title&gt;Statutes, Regulations and Rules Cited&lt;/title&gt;
  &lt;/heading&gt;
  &lt;bodytext&gt;
    &lt;p&gt;
      &lt;text&gt;
       Environmental Protection and Enhancement Act, S.A. 1992, c. E- 13.3, ss. 87(2), 87(5)(b).&lt;proc:nl/&gt;
Natural Resources Conservation Board Act, S.A. 1990, c. N-5.5.&lt;proc:nl/&gt;
Special Waste Management Corporation Act, S.A. 1982, c. S-21.5.
      &lt;/text&gt;
    &lt;/p&gt;
  &lt;/bodytext&gt;   
&lt;/ref:relatedrefs&gt;
          </pre>
                        <pre>
                 <b>Handling of Multiple <sourcexml>case:references</sourcexml></b>
&lt;case:references&gt;
    &lt;p&gt;&lt;text&gt;&lt;emph typestyle="bu"&gt;AUTORITÉS DE LA DEMANDERESSE&lt;/emph&gt;&lt;/text&gt;&lt;/p&gt;&lt;p&gt;&lt;text&gt;&lt;emph typestyle="it"&gt;Ontario (Human Rights Commission) v. Naraine&lt;/emph&gt;, (2001) 41 C.H.H.R. D/349 (ON C.A.).&lt;/text&gt;&lt;/p&gt;&lt;p&gt;&lt;text&gt;&lt;emph typestyle="it"&gt;Naraine&lt;/emph&gt; v. &lt;emph typestyle="it"&gt;Ford Motor Co. of Canada&lt;/emph&gt;, 27 C.H.R.R. D/230 (Ont. Bd. Inq.).&lt;/text&gt;&lt;/p&gt;&lt;p&gt;&lt;text&gt;&lt;emph typestyle="it"&gt;Ford Motor Co. Of Canada&lt;/emph&gt; v. &lt;emph typestyle="it"&gt;Ontario (Human Rights Comm.)&lt;/emph&gt; (1996), 28 C.H.H.R. D/267 (Ont. Bd. Inq.).&lt;/text&gt;&lt;/p&gt;
&lt;!-- ... --&gt;
&lt;/case:references&gt;
&lt;case:references&gt;
&lt;heading&gt;
    &lt;title&gt;&lt;emph typestyle="biu"&gt;Jurisprudence&lt;/emph&gt;&lt;/title&gt;
&lt;/heading&gt;
    &lt;p&gt;&lt;text&gt;&lt;/text&gt;&lt;/p&gt;&lt;p&gt;&lt;text&gt;&lt;emph typestyle="bu"&gt;Compétence &lt;/emph&gt;&lt;emph typestyle="biu"&gt;rationae materie&lt;/emph&gt;&lt;/text&gt;&lt;/p&gt;&lt;p&gt;&lt;text&gt;&lt;emph typestyle="it"&gt;Douglas/Kwantlen Faculty Assn.&lt;/emph&gt; c. &lt;emph typestyle="it"&gt;Douglas College&lt;/emph&gt;, &lt;ci:cite searchtype="SUMM-CASE-REF"&gt;&lt;ci:case&gt;&lt;ci:caseref ID="cref00013038" spanref="cspan00013038"&gt;&lt;ci:reporter value="SCR"/&gt;&lt;ci:volume num="3"/&gt;&lt;ci:edition&gt;&lt;ci:date year="1990"/&gt;&lt;/ci:edition&gt;&lt;ci:page num="570"/&gt;&lt;/ci:caseref&gt;&lt;/ci:case&gt;&lt;ci:content&gt;&lt;ci:span spanid="cspan00013038"&gt;[1990] 3 R.C.S. 570&lt;/ci:span&gt;&lt;/ci:content&gt;&lt;/ci:cite&gt;.&lt;/text&gt;&lt;/p&gt;
&lt;!-- ... --&gt;
&lt;/case:references&gt;

<b>Becomes:</b>
                 

  &lt;ref:relatedrefs&gt;
    &lt;bodytext&gt;
        &lt;p&gt;&lt;text&gt;&lt;emph typestyle="bu"&gt;AUTORITÉS DE LA DEMANDERESSE&lt;/emph&gt;&lt;/text&gt;&lt;/p&gt;&lt;p&gt;&lt;text&gt;&lt;emph typestyle="it"&gt;Ontario (Human Rights Commission) v. Naraine&lt;/emph&gt;, (2001) 41 C.H.H.R. D/349 (ON C.A.).&lt;/text&gt;&lt;/p&gt;&lt;p&gt;&lt;text&gt;&lt;emph typestyle="it"&gt;Naraine&lt;/emph&gt; v. &lt;emph typestyle="it"&gt;Ford Motor Co. of Canada&lt;/emph&gt;, 27 C.H.R.R. D/230 (Ont. Bd. Inq.).&lt;/text&gt;&lt;/p&gt;&lt;p&gt;&lt;text&gt;&lt;emph typestyle="it"&gt;Ford Motor Co. Of Canada&lt;/emph&gt; v. &lt;emph typestyle="it"&gt;Ontario (Human Rights Comm.)&lt;/emph&gt; (1996), 28 C.H.H.R. D/267 (Ont. Bd. Inq.).&lt;/text&gt;&lt;/p&gt;
        &lt;!-- ... --&gt;
    &lt;/bodytext&gt;
   &lt;/ref:relatedrefs&gt;
    &lt;ref:relatedrefs&gt;
        &lt;heading&gt;
            &lt;title&gt;&lt;emph typestyle="biu"&gt;Jurisprudence&lt;/emph&gt;&lt;/title&gt;
        &lt;/heading&gt;
        &lt;bodytext&gt;
            &lt;p&gt;&lt;text&gt;&lt;/text&gt;&lt;/p&gt;&lt;p&gt;&lt;text&gt;&lt;emph typestyle="bu"&gt;Compétence &lt;/emph&gt;&lt;emph typestyle="biu"&gt;rationae materie&lt;/emph&gt;&lt;/text&gt;&lt;/p&gt;&lt;p&gt;&lt;text&gt;&lt;emph typestyle="it"&gt;Douglas/Kwantlen Faculty Assn.&lt;/emph&gt; c. &lt;emph typestyle="it"&gt;Douglas College&lt;/emph&gt;, &lt;lnci:cite&gt;&lt;lnci:case&gt;&lt;lnci:caseref ID="cref00013038"&gt;&lt;lnci:reporter value="SCR"/&gt;&lt;lnci:volume num="3"/&gt;&lt;lnci:edition&gt;&lt;lnci:date year="1990"/&gt;&lt;/lnci:edition&gt;&lt;lnci:page num="570"/&gt;&lt;/lnci:caseref&gt;&lt;/lnci:case&gt;&lt;lnci:content&gt;[1990] 3 R.C.S. 570&lt;/lnci:content&gt;&lt;/lnci:cite&gt;.&lt;/text&gt;&lt;/p&gt;
            &lt;!-- ... --&gt;
        &lt;/bodytext&gt;
    &lt;/ref:relatedrefs&gt;

             </pre>
                    </li>

                    <li> If <sourcexml class="+ topic/keyword xml-d/sourcexml "
                            >case:references</sourcexml> is child of <sourcexml
                            class="+ topic/keyword xml-d/sourcexml "
                            >case:appendix/case:headnote</sourcexml> then it becomes <targetxml
                            class="+ topic/keyword xml-d/targetxml "
                            >admindecision:appendix/ref:relatedrefs</targetxml>
                        <pre xml:space="preserve" class="- topic/pre ">
&lt;case:appendix&gt;
    &lt;case:headnote&gt;
        &lt;case:references&gt;
            &lt;heading&gt;
                &lt;title&gt;List of Cases Cited:&lt;/title&gt;
            &lt;/heading&gt;
            &lt;p&gt;
                &lt;pnum count="70"&gt;70&lt;/pnum&gt;
                &lt;text/&gt;
            &lt;/p&gt;
            &lt;!-- .... --&gt;
        &lt;/case:references&gt;
    &lt;/case:headnote&gt;
&lt;/case:appendix&gt;              
            
            <b class="+ topic/ph hi-d/b ">Becomes:</b>            
            
 &lt;admindecision:appendix&gt;
    &lt;ref:relatedrefs&gt;
        &lt;heading&gt;
            &lt;title&gt;List of Cases Cited:&lt;/title&gt;
        &lt;/heading&gt; 
        &lt;p&gt;
          &lt;desig value="70"&gt;70&lt;/desig&gt;   
        &lt;/p&gt;    
        &lt;!-- .... --&gt;
    &lt;/ref:relatedrefs&gt;
&lt;/admindecision:appendix&gt;              
            </pre>
                    </li>
                </ul>
            </section>
            <example>
                <title>Example 4 - <targetxml>@referencetype="consideredcases"</targetxml></title>
                <codeblock> &lt;case:references&gt; &lt;heading&gt; &lt;title&gt;Cases Judicially
                    Considered&lt;/title&gt; &lt;/heading&gt; &lt;p&gt; ... &lt;/p&gt;
                    &lt;/case:references&gt; </codeblock>
                <b>becomes</b>
                <codeblock> &lt;ref:relatedrefs referencetype="consideredcases"&gt; &lt;heading&gt;
                    &lt;title&gt;Cases Judicially Considered&lt;/title&gt; &lt;/heading&gt;
                    &lt;bodytext&gt; &lt;p&gt; ... &lt;/p&gt; &lt;/bodytext&gt;
                    &lt;/ref:relatedrefs&gt; </codeblock>
            </example>
            <example>
                <title>Example 5 - <targetxml>@referencetype="legislation"</targetxml></title>
                <codeblock> &lt;case:references&gt; &lt;p&gt; &lt;text&gt; &lt;emph
                    typestyle="bf"&gt;Statutes and Regulations Judicially Considered&lt;/emph&gt;
                    &lt;/text&gt; &lt;/p&gt; &lt;p&gt; ... &lt;/p&gt; &lt;/case:references&gt; </codeblock>
                <b>becomes</b>
                <codeblock> &lt;ref:relatedrefs referencetype="legislation"&gt; &lt;bodytext&gt;
                    &lt;p&gt; &lt;text&gt; &lt;emph typestyle="bf"&gt;Statutes and Regulations
                    Judicially Considered&lt;/emph&gt; &lt;/text&gt; &lt;/p&gt; ...
                    &lt;/bodytext&gt; &lt;/ref:relatedrefs&gt; </codeblock>
            </example>

            <note>If <sourcexml>case:references</sourcexml> has no <sourcexml>text</sourcexml> in
                it, then in target blank <targetxml>bodytext</targetxml> will be created. As this
                will be the data error therefore, data will need to be corrected or a specific issue
                with how it is being presented will need to be raised. </note>
            <example>

                <codeblock> &lt;case:references&gt; &lt;heading&gt; &lt;title&gt;Statutes,
                    Regulations and Rules Cited:&lt;/title&gt; &lt;/heading&gt;
                    &lt;/case:references&gt; </codeblock>

                <b>Becomes</b>

                <codeblock> &lt;ref:relatedrefs&gt; &lt;heading&gt; &lt;title&gt;Statutes,
                    Regulations and Rules Cited:&lt;/title&gt; &lt;/heading&gt; &lt;bodytext/&gt;
                    &lt;!--Mandatory element according to the CI--&gt; &lt;/ref:relatedrefs&gt;
                </codeblock>
            </example>

            <section>
                <title>Changes</title>
                <p>2017-04-26: <ph id="change_20170426_SS">Replace the following terms from
                        "legislation" to "consideredcases" in CA04 CI. <b>[Webstar
                        #6862905]</b></ph></p>
                <p>2014-10-27: <ph id="change_20141027_AS">update the List of terms in CA04 CI with
                        the terms listed in the CA01 CI where the CI mentions
                        admindecision:representation and ref:relatedrefs <b>Db issue
                    #355</b></ph></p>
                <p>2014-09-04: <ph id="change_20140904_AS">Remove colon from case:references.
                        Applicable to CA01 and CA04... <b>Db issue #335</b></ph></p>
                <p>2014-07-28: <ph id="change_20140728_AS">Added LEGISLATION: to the table with
                        @referencetype value legislation. R4.5 DB Item #1278.</ph></p>
                <p>2014-06-25: <ph id="change_20140625_AS">Removed note to suppress pnum.Db Item
                        #233.</ph></p>
                <p>2014-06-23: <ph id="change_20140623_SEP">Attribute @referencetype all lower case
                        for "legislation" and "consideredcases". R4.5 DB Item #1278.</ph></p>
                <p>2014-06-04: <ph id="change_20140605_AS">Removed nested ref:relatedrefs.Db Item
                        #214.</ph></p>
                <p>2014-06-04: <ph id="change_20140604_AS">Updates Canada-only instruction and
                        examples for where <targetxml>@referencetype</targetxml> value generated
                        based on table value. R4.5 Item #1587.</ph></p>
                <p>2014-05-30: <ph id="change_20140530_AS">Instructions provided on how to handle
                        the mandatory sequence order<b>Db Item #203.</b></ph></p>
                <p>2014-04-29: <ph id="change_20140429_SEP">Modify instruction to better preserve
                        document order.<b>R4.5 Item #1368.</b></ph></p>
                <p>2014-04-24: <ph id="change_20140424_SEP">Add instruction and two examples for
                        where <targetxml>@referencetype</targetxml> becomes "consideredcases" or
                            "legislation".<b>R4.5 Item #1355.</b></ph></p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.references.dita  -->
    <!--<xsl:message>CA04-Administrative_Decisions_case.references.xsl requires manual development!</xsl:message>-->


    <!-- requires keying to generate attribute value -->
    <xsl:template match="case:references">
        <xsl:choose>
            <xsl:when test="child::heading">
                <!--RS [2017-12-01]: Added title inside the heading as per current xpaths in below template for generate the @referencetype-->
                <ref:relatedrefs>
                    <xsl:if
                        test="key('kCodeByName', child::heading/title, $relatedrefs)/@value != ''">
                        <xsl:attribute name="referencetype">
                            <xsl:value-of
                                select="key('kCodeByName', child::heading/title, $relatedrefs)/@value"
                            />
                        </xsl:attribute>
                    </xsl:if>
                    <xsl:apply-templates select="child::heading"/>
                    <bodytext>
                        <xsl:apply-templates select="@* | node() except heading"/>
                    </bodytext>
                </ref:relatedrefs>
            </xsl:when>
            <xsl:when test="parent::case:headnote and ancestor::case:appendix">
                <ref:relatedrefs>
                    <xsl:if test="key('kCodeByName', child::heading, $relatedrefs)/@value != ''">
                        <xsl:attribute name="referencetype">
                            <xsl:value-of
                                select="key('kCodeByName', child::heading, $relatedrefs)/@value"/>
                        </xsl:attribute>
                    </xsl:if>
                    <bodytext>
                        <xsl:apply-templates select="@* | node()"/>
                    </bodytext>
                </ref:relatedrefs>
            </xsl:when>
            <xsl:otherwise>
                <ref:relatedrefs>
                    <xsl:if test="key('kCodeByName', child::heading, $relatedrefs)/@value != ''">
                        <xsl:attribute name="referencetype">
                            <xsl:value-of
                                select="key('kCodeByName', child::heading, $relatedrefs)/@value"/>
                        </xsl:attribute>
                    </xsl:if>
                    <xsl:apply-templates select="child::heading"/>
                    <bodytext>
                        <xsl:apply-templates select="@* | node() except heading"/>
                    </bodytext>
                </ref:relatedrefs>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <xsl:variable name="relatedrefs">
        <dita:codes>
            <dita:code key="Articles cited:" value="consideredcases"/>
            <dita:code key="Authorities Cited:" value="consideredcases"/>
            <dita:code key="Authorities cited:" value="consideredcases"/>
            <dita:code key="Authorities Considered:" value="consideredcases"/>
            <dita:code key="Authors and Works cited:" value="consideredcases"/>
            <dita:code key="AUTHORS AND WORKS JUDICIALLY NOTICED:" value="consideredcases"/>
            <dita:code key="AUTHORS AND WORKS NOTICED:" value="consideredcases"/>
            <dita:code key="Authors and Works Noticed:" value="consideredcases"/>
            <dita:code key="Authors Cited" value="consideredcases"/>
            <dita:code key="Authors cited" value="consideredcases"/>
            <dita:code key="Autorité citée :" value="consideredcases"/>
            <dita:code key="Autorités :" value="consideredcases"/>
            <dita:code key="Autorités citées :" value="consideredcases"/>
            <dita:code key="CASE CITED:" value="consideredcases"/>
            <dita:code key="Cases Cited" value="consideredcases"/>
            <dita:code key="CASES CITED:" value="consideredcases"/>
            <dita:code key="Cases Cited:" value="consideredcases"/>
            <dita:code key="Cases cited:" value="consideredcases"/>
            <dita:code key="Cases Considered:" value="consideredcases"/>
            <dita:code key="CASES JUDICIALLY CONSIDERED" value="consideredcases"/>
            <dita:code key="Cases Judicially Considered" value="consideredcases"/>
            <dita:code key="CASES JUDICIALLY NOTICED:" value="consideredcases"/>
            <dita:code key="CASES NOTICED:" value="consideredcases"/>
            <dita:code key="Cases Noticed:" value="consideredcases"/>
            <dita:code key="Décision citée :" value="consideredcases"/>
            <dita:code key="Décisions citées :" value="consideredcases"/>
            <dita:code key="DOCTRINE" value="consideredcases"/>
            <dita:code key="Doctrine" value="consideredcases"/>
            <dita:code key="Doctrine citée" value="consideredcases"/>
            <dita:code key="JURISPRUDENCE" value="consideredcases"/>
            <dita:code key="Jurisprudence" value="consideredcases"/>
            <dita:code key="Jurisprudence citée" value="consideredcases"/>
            <dita:code key="Jurisprudence citée :" value="consideredcases"/>
            <dita:code key="Jurisprudence consultée :" value="consideredcases"/>
            <dita:code key="Législation citée :" value="legislation"/>
            <dita:code key="Lois et règlements" value="legislation"/>
            <dita:code key="Lois et règlements cités" value="legislation"/>
            <dita:code key="MISCELLANEOUS WORKS CITED:" value="consideredcases"/>
            <dita:code key="Statutes and Regulations Cited" value="legislation"/>
            <dita:code key="STATUTES AND REGULATIONS CITED:" value="legislation"/>
            <dita:code key="Statutes and Regulations cited:" value="legislation"/>
            <dita:code key="Statutes and Regulations Judicially Considered" value="legislation"/>
            <dita:code key="Statutes Cited:" value="legislation"/>
            <dita:code key="Statutes cited:" value="legislation"/>
            <dita:code key="STATUTES JUDICIALLY NOTICED:" value="legislation"/>
            <dita:code key="STATUTES NOTICED:" value="legislation"/>
            <dita:code key="Statutes Noticed:" value="legislation"/>
            <dita:code key="Statutes, Regulations and Rule Cited:" value="legislation"/>
            <dita:code key="Statutes, Regulations and Rules cited" value="legislation"/>
            <dita:code key="STATUTES, REGULATIONS AND RULES CITED:" value="legislation"/>
            <dita:code key="Statutes, Regulations and Rules Cited:" value="legislation"/>
            <dita:code key="Authorities Cited" value="consideredcases"/>
            <dita:code key="Authors Cited" value="consideredcases"/>
            <dita:code key="Cases and texts cited" value="consideredcases"/>
            <dita:code key="CASES CITED" value="consideredcases"/>
            <dita:code key="Cases Cited" value="consideredcases"/>
            <dita:code key="Cases cited" value="consideredcases"/>
            <dita:code key="Doctrine citée" value="consideredcases"/>
            <!--<dita:code key="Jurisprudence" value="consideredcases"/>-->
            <dita:code key="Législation citée" value="legislation"/>
            <dita:code key="Lois et règlements cités" value="legislation"/>
            <dita:code key="MISCELLANEOUS WORKS CITED" value="consideredcases"/>
            <dita:code key="Statutes and Regulations Cited" value="legislation"/>
            <dita:code key="Statutes cited" value="legislation"/>
            <dita:code key="STATUTES, REGULATIONS AND RULES CITED" value="legislation"/>
            <dita:code key="Statutes, Regulations and Rules Cited" value="legislation"/>
            <dita:code key="Statutes, Regulations and Rules cited" value="legislation"/>
            <dita:code key="Législation citée:" value="legislation"/>
            <dita:code key="JURISPRUDENCE CITÉE :" value="consideredcases"/>
            <dita:code key="Affaire citée:" value="consideredcases"/>
            <dita:code key="Affaires citées:" value="consideredcases"/>
            <dita:code key="Affaires citées:" value="consideredcases"/>
            <dita:code key="Authorities &amp; Texts:" value="consideredcases"/>
            <dita:code key="Authorities" value="consideredcases"/>
            <dita:code key="Autorités citées *" value="consideredcases"/>
            <dita:code key="Autorités citées par l'appelante :" value="consideredcases"/>
            <dita:code key="Autorités citées par l'intimé :" value="consideredcases"/>
            <dita:code key="Autorités citées" value="consideredcases"/>
            <dita:code key="Case Authorities and Texts:" value="consideredcases"/>
            <dita:code key="Cases considered:" value="consideredcases"/>
            <dita:code key="Cases referred to:" value="consideredcases"/>
            <dita:code key="Dictionnaire cité :" value="consideredcases"/>
            <!-- <dita:code key="Jurisprudence :" value="consideredcases"/>-->
            <dita:code key="Jurisprudence :" value="consideredcases"/>
            <dita:code key="JURISPRUDENCE DÉPOSÉE PAR L'INTIMÉE" value="consideredcases"/>
            <dita:code key="Jurisprudence soumise" value="consideredcases"/>
            <dita:code key="Jurisprudence:" value="consideredcases"/>
            <dita:code key="Législation citée:" value="legislation"/>
            <dita:code key="Liste de jurisprudence" value="consideredcases"/>
            <dita:code key="Liste des jugements à l'appui:" value="consideredcases"/>
            <dita:code key="LISTE DES JUGEMENTS À L'APPUI" value="consideredcases"/>
            <dita:code key="Loi citée:" value="legislation"/>
            <dita:code key="Lois citées:" value="legislation"/>
            <dita:code key="Lois et règlements cités :" value="legislation"/>
            <dita:code key="Par l'intimé :" value="consideredcases"/>
            <dita:code key="Statutes considered:" value="legislation"/>
            <dita:code key="Statutes Referred to:" value="legislation"/>
            <dita:code key="Statutes referred to:" value="legislation"/>
            <dita:code key="Tribunal decisions considered:" value="consideredcases"/>
            <dita:code key="LEGISLATION:" value="legislation"/>
        </dita:codes>
    </xsl:variable>

    <xsl:key name="kCodeByName" match="dita:code" use="string(@key)"/>





    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="CA05_alt_lang_link">
        <title><targetxml>ref:cite4thisresource</targetxml> with
                <targetxml>ref:parallelcite</targetxml> and
                <targetxml>doc:related-content</targetxml>
            <lnpid>id-CCCC-10497</lnpid></title>
        <body>
            <section>
                <title>Scenario 1 for CA01 and CA04</title>
                <p>If the <sourcexml>case:reportercite</sourcexml> falls within the group for which
                    an alternate language format was defined in the below table and
                        <sourcexml>case:parallelcite</sourcexml>, also exist in source data then
                    conversion should match the <sourcexml>case:reportercite</sourcexml> citation
                    value based on the below table with <sourcexml>case:parallelcite</sourcexml> and
                    if they match then generates alternate language markup
                        <targetxml>doc:metadata/doc:docinfo/doc:related-content/doc:related-content-grp</targetxml>
                    and if not match then <b>should not create alternate language markup</b>.</p>
                <p>If <sourcexml>case:reportercite</sourcexml> is present and
                        <sourcexml>case:parallelcite</sourcexml> is not present in the source data
                    then conversion <b>should not create alternate language markup</b>
                    <targetxml>doc:metadata/doc:docinfo/doc:related-content/doc:related-content-grp</targetxml>.</p>
                <p>Value of <targetxml>doc:related-content-grp/@content-type</targetxml> is
                        <b>"alternate-language-version"</b>.</p>
                <p>Value of <targetxml>ref:lnlink/@service</targetxml> is <b>"TRAVERSE"</b>.</p>
                <p>Value of <targetxml>ref:key-name/@name</targetxml> is <b>"normcite"</b></p>
                <p>Value of <targetxml>ref:key-value/@value</targetxml> is the value of
                        <targetxml>ref:parallelcite/lnci:cite/lnci:content</targetxml>.</p>
                <p>Value of <targetxml>ref:locator-params/@name</targetxml> is <b>"normprotocol"</b>
                    and <targetxml>ref:locator-params/@value</targetxml> is <b>CAEditorial</b>.</p>
                <p>Value of <targetxml>ref:locator-params/@name</targetxml> is <b>"countrycode"</b>
                    and <targetxml>ref:locator-params/@value</targetxml> is <b>CA</b>.</p>
                <p>Content of <targetxml>ref:marker</targetxml> is derived from <b>Alternate
                        Language</b> column in tables: <ul>
                        <li>If <b>"French"</b> then <targetxml>ref:marker</targetxml> content is:
                                <b>French Version</b>.</li>
                        <li>If <b>"English"</b> then <targetxml>ref:marker</targetxml> content is:
                                <b>English Version</b>.</li>
                    </ul></p>
                <p>Content of <targetxml>ref:locator-params[@name="targetdoclang"]</targetxml> is
                    derived from <b>Alternate Language</b> column in tables: <ul>
                        <li>If <b>"English"</b> then the value of
                                <targetxml>ref:locator-params/@name</targetxml> is
                                <b>"targetdoclang"</b> and
                                <targetxml>ref:locator-params/@value</targetxml> is
                            <b>en-CA</b>.</li>
                        <li>If <b>"French"</b> then the value of
                                <targetxml>ref:locator-params/@name</targetxml> is
                                <b>"targetdoclang"</b> and
                                <targetxml>ref:locator-params/@value</targetxml> is
                            <b>fr-CA</b>.</li>
                    </ul></p>
                <pre>
&lt;case:reportercite&gt;
    &lt;ci:cite type="cite4thisdoc"&gt;
        &lt;ci:case&gt;
            &lt;ci:caseref ID="cref00040967" spanref="cspan00040967"&gt;
                &lt;ci:reporter value="SCR"/&gt;
                &lt;ci:edition&gt;
                    &lt;ci:date year="1954"/&gt;
                &lt;/ci:edition&gt;
                &lt;ci:page num="82"/&gt;
            &lt;/ci:caseref&gt;
        &lt;/ci:case&gt;
        &lt;ci:content&gt;
            &lt;ci:span spanid="cspan00040967"&gt;[1954] S.C.R. 82&lt;/ci:span&gt;
        &lt;/ci:content&gt;
    &lt;/ci:cite&gt;
&lt;/case:reportercite&gt;

&lt;case:parallelcite&gt;
    &lt;ci:cite&gt;
        &lt;ci:case&gt;
            &lt;ci:caseref ID="cref00040968" spanref="cspan00040968"&gt;
                &lt;ci:reporter value="SCR"/&gt;
                &lt;ci:edition&gt;
                    &lt;ci:date year="1954"/&gt;
                &lt;/ci:edition&gt;
                &lt;ci:page num="82"/&gt;
            &lt;/ci:caseref&gt;
        &lt;/ci:case&gt;
        &lt;ci:content&gt;
            &lt;ci:span spanid="cspan00040968"&gt;[1954] R.C.S. 82&lt;/ci:span&gt;
        &lt;/ci:content&gt;
    &lt;/ci:cite&gt;
&lt;/case:parallelcite&gt;

<b>Becomes</b>

&lt;doc:metadata&gt;
    &lt;doc:docinfo&gt;
        &lt;doc:related-content&gt;
            &lt;doc:related-content-grp content-type="alternate-language-version"&gt;
                &lt;doc:related-content-item&gt;
                    &lt;doc:related-content-link&gt;
                        &lt;ref:lnlink service="TRAVERSE"&gt;
                            &lt;ref:marker&gt;French Version&lt;/ref:marker&gt;
                            &lt;ref:locator&gt;
                                &lt;ref:locator-key&gt;
                                    &lt;ref:key-name name="normcite"/&gt;
                                    &lt;ref:key-value value="[1954] R.C.S. 82"/&gt;
                                &lt;/ref:locator-key&gt;
                                &lt;ref:locator-params&gt;
                                    &lt;proc:param name="normprotocol" value="CAEditorial"/&gt;
                                    &lt;proc:param name="countrycode" value="CA"/&gt;
                                    &lt;proc:param name="targetdoclang" value="fr-CA"/&gt;
                                &lt;/ref:locator-params&gt;
                            &lt;/ref:locator&gt;
                        &lt;/ref:lnlink&gt;
                    &lt;/doc:related-content-link&gt;
                &lt;/doc:related-content-item&gt;
            &lt;/doc:related-content-grp&gt;
        &lt;/doc:related-content&gt;
    &lt;/doc:docinfo&gt;
&lt;/doc:metadata&gt;
</pre>
            </section>
            <section>
                <b>Scenario for CA02</b>
            </section>
            <section>If <sourcexml>note/@notetype="other"/remotelink</sourcexml> contains text
                        "<b><i>[version anglaise]</i></b>" or "<b><i>[French Version]</i></b>" only
                then, create alternate language markup.
                    <targetxml>doc:metadata/doc:docinfo/doc:related-content/doc:related-content-grp</targetxml>
            </section>
            <section>
                <p>Value of <targetxml>doc:related-content-grp/@content-type</targetxml> is
                        <b>"alternate-language-version"</b>.</p>
                <p>Value of <targetxml>ref:lnlink/@service</targetxml> is <b>"DOCUMENT"</b>.</p>
                <p>Create <targetxml>ref:marker</targetxml> to capture the PCDATA of
                        <sourcexml>remotelink</sourcexml>.</p>
                <p>Value of <targetxml>ref:key-name/@name</targetxml> is <b>"DOC-ID"</b></p>
                <p>Value of <targetxml>ref:key-value/@value</targetxml> is the value of
                        <sourcexml>@dpsi</sourcexml> followed by hyphen and concatenated with
                        <sourcexml>@refpt</sourcexml> or <sourcexml>@remotekey2</sourcexml>, which
                    ever is present (if both are present, use
                    <sourcexml>@remotekey2</sourcexml>)..</p>
                <p>Content of <targetxml>ref:locator-params[@name="targetdoclang"]</targetxml> is
                    derived from <sourcexml>note/@notetype="other"/remotelink</sourcexml>: <ul>
                        <li>If <b>"[version anglaise]"</b> then the value of
                                <targetxml>ref:locator-params/@name</targetxml> is
                                <b>"targetdoclang"</b> and
                                <targetxml>ref:locator-params/@value</targetxml> is
                            <b>"en-CA"</b>.</li>
                        <li>If <b>"[French Version]"</b> then the value of
                                <targetxml>ref:locator-params/@name</targetxml> is
                                <b>"targetdoclang"</b> and
                                <targetxml>ref:locator-params/@value</targetxml> is
                            <b>"fr-CA"</b>.</li>
                    </ul></p>
                <pre>
&lt;note notetype="other"&gt;
    &lt;remotelink dpsi="0F8E" remotekey1="DOC-ID" remotekey2="QSEN 1939"
        service="DOC-ID"&gt;[version anglaise]&lt;/remotelink&gt;
&lt;/note&gt;

<b>Becomes</b>

&lt;doc:metadata&gt;
    &lt;doc:docinfo&gt;
        &lt;doc:related-content&gt;
            &lt;doc:related-content-grp content-type="alternate-language-version"&gt;
                &lt;doc:related-content-item&gt;
                    &lt;doc:related-content-link&gt;
                        &lt;ref:lnlink service="DOCUMENT"&gt;
                            &lt;ref:marker&gt;[version anglaise]&lt;/ref:marker&gt;
                            &lt;ref:locator&gt;
                                &lt;ref:locator-key&gt;
                                    &lt;ref:key-name name="DOC-ID"/&gt;
                                    &lt;ref:key-value value="0F8E-QSEN 1939"/&gt;
                                &lt;/ref:locator-key&gt; 
                                &lt;ref:locator-params&gt;
                                    &lt;proc:param name="targetdoclang" value="en-CA"/&gt;
                                &lt;/ref:locator-params&gt;								
                            &lt;/ref:locator&gt;
                        &lt;/ref:lnlink&gt;
                    &lt;/doc:related-content-link&gt;
                &lt;/doc:related-content-item&gt;
            &lt;/doc:related-content-grp&gt;
        &lt;/doc:related-content&gt;
    &lt;/doc:docinfo&gt;
&lt;/doc:metadata&gt;               
            </pre>
            </section>
            <section>
                <title>Scenario 2 for CA05, CA06, CA07 and CA08</title>
                <p>If the <targetxml>ref:cite4thisresource/@citetype="reporter"</targetxml> falls
                    within the group for which an alternate language format was defined in the below
                    table then conversion should read the
                        <targetxml>ref:cite4thisresource/@citetype="reporter"/lnci:cite/lnci:content</targetxml>
                    citation value based on the below table and create
                        <targetxml>ref:parallelcite/@citetype="parallel"/lnci:cite/lnci:content</targetxml>
                    and
                        <targetxml>doc:metadata/doc:docinfo/doc:related-content/doc:related-content-grp</targetxml>.</p>
                <p>Value of <targetxml>doc:related-content-grp/@content-type</targetxml> is
                        <b>"alternate-language-version"</b>.</p>
                <p>Value of <targetxml>ref:lnlink/@service</targetxml> is <b>"TRAVERSE"</b>.</p>
                <p>Value of <targetxml>ref:key-name/@name</targetxml> is <b>"normcite"</b></p>
                <p>Value of <targetxml>ref:key-value/@value</targetxml> is the value of
                        <targetxml>ref:parallelcite/lnci:cite/lnci:content</targetxml>.</p>
                <p>Value of <targetxml>ref:locator-params/@name</targetxml> is <b>"normprotocol"</b>
                    and <targetxml>ref:locator-params/@value</targetxml> is <b>CAEditorial</b>.</p>
                <p>Value of <targetxml>ref:locator-params/@name</targetxml> is <b>"countrycode"</b>
                    and <targetxml>ref:locator-params/@value</targetxml> is <b>CA</b>.</p>
                <p>Content of <targetxml>ref:marker</targetxml> is derived from <b>Alternate
                        Language</b> column in tables: <ul>
                        <li>If <b>"French"</b> then <targetxml>ref:marker</targetxml> content is:
                                <b>French Version</b>.</li>
                        <li>If <b>"English"</b> then <targetxml>ref:marker</targetxml> content is:
                                <b>English Version</b>.</li>
                    </ul></p>
                <p>Content of <targetxml>ref:locator-params[@name="targetdoclang"]</targetxml> is
                    derived from <b>Alternate Language</b> column in tables: <ul>
                        <li>If <b>"English"</b> then the value of
                                <targetxml>ref:locator-params/@name</targetxml> is
                                <b>"targetdoclang"</b> and
                                <targetxml>ref:locator-params/@value</targetxml> is
                            <b>en-CA</b>.</li>
                        <li>If <b>"French"</b> then the value of
                                <targetxml>ref:locator-params/@name</targetxml> is
                                <b>"targetdoclang"</b> and
                                <targetxml>ref:locator-params/@value</targetxml> is
                            <b>fr-CA</b>.</li>
                    </ul></p>
                <note>
                    <p>Alternate citations which are blank corresponding to primary citation, then
                        no need to create alternate language citation and
                            <targetxml>doc:related-content</targetxml>. Citations are case-sensitive
                        and should be followed as per the table provided.</p>
                </note>
                <note>
                    <p>For CA05 only: Added new common table <b>"Terms conversion for CA05"</b> in
                        which terms translation are present and conversion should refer this table
                        while converting terms
                            <targetxml>ref:cite4thisresource/@citetype="reporter"/lnci:cite/lnci:content</targetxml>
                        from English to French and vice versa.</p>
                </note>
                <note>
                    <p>When primary citation and alternate citation is same then conversion should
                        check the document language from
                            <sourcexml>docinfo:doc-lang/@lang="fr"</sourcexml> element. If the
                        document language is <b>"fr"</b> then alternate citation language is
                            <b>english</b> and if document language is <b>"en"</b> then alternate
                        citation is language is <b>french</b>. </p>
                </note>
                <p><note><b>For CA05 and CA06</b></note> Above rule will not be applicable for
                    creating RHS link, if source documents have the following DPSI values.</p>
                <p>
                    <table>
                        <tgroup cols="3">
                            <thead>
                                <row>
                                    <entry>DPSI</entry>
                                    <entry>PCSI</entry>
                                    <entry>Publication Title for online directory</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>0U95</entry>
                                    <entry>422350</entry>
                                    <entry>Canadian Securities Law Reporter - 04 Statutes</entry>
                                </row>
                                <row>
                                    <entry>0U96</entry>
                                    <entry>422352</entry>
                                    <entry>Canadian Securities Law Reporter - 05 Regulations</entry>
                                </row>
                                <row>
                                    <entry>0U98</entry>
                                    <entry>422369</entry>
                                    <entry>"Canadian Securities Law Reporter - 06 CSA Regulatory
                                        Documents"</entry>
                                </row>
                                <row>
                                    <entry>0U9A</entry>
                                    <entry>422373</entry>
                                    <entry>Canadian Securities Law Reporter - 07 Former
                                        Statutes</entry>
                                </row>
                                <row>
                                    <entry>0U9B</entry>
                                    <entry>422375</entry>
                                    <entry>Canadian Securities Law Reporter - 08 Former
                                        Regulations</entry>
                                </row>
                                <row>
                                    <entry>0U9S</entry>
                                    <entry>422423</entry>
                                    <entry>Canadian Health Facilities Law Guide - 04
                                        Statutes</entry>
                                </row>
                                <row>
                                    <entry>0U9T</entry>
                                    <entry>422427</entry>
                                    <entry>Canadian Health Facilities Law Guide - 03
                                        Regulations</entry>
                                </row>
                                <row>
                                    <entry>0U9V</entry>
                                    <entry>422431</entry>
                                    <entry>Canadian Commercial Law Guide - 06 Statutes</entry>
                                </row>
                                <row>
                                    <entry>0U9W</entry>
                                    <entry>422433</entry>
                                    <entry>Canadian Commercial Law Guide - 04 Regulations</entry>
                                </row>
                                <row>
                                    <entry>0U9X</entry>
                                    <entry>422435</entry>
                                    <entry>Canadian Commercial Law Guide - 07 Former
                                        Statutes</entry>
                                </row>
                                <row>
                                    <entry>0U9Y</entry>
                                    <entry>422437</entry>
                                    <entry>Canadian Commercial Law Guide - 05 Former
                                        Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UA4</entry>
                                    <entry>422454</entry>
                                    <entry>Canadian Family Law Guide - 05 Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UA5</entry>
                                    <entry>422456</entry>
                                    <entry>Canadian Family Law Guide - 03 Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UA6</entry>
                                    <entry>422458</entry>
                                    <entry>Canadian Family Law Guide - 06 Former Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UA7</entry>
                                    <entry>422460</entry>
                                    <entry>Canadian Family Law Guide - 04 Former Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UAN</entry>
                                    <entry>422535</entry>
                                    <entry>Alberta Corporations Law Guide - 06 Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UAO</entry>
                                    <entry>422538</entry>
                                    <entry>Alberta Corporations Law Guide - 04 Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UAP</entry>
                                    <entry>422541</entry>
                                    <entry>Alberta Corporations Law Guide - 07 Former
                                        Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UAQ</entry>
                                    <entry>422543</entry>
                                    <entry>Alberta Corporations Law Guide - 05 Former
                                        Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UCM</entry>
                                    <entry>422792</entry>
                                    <entry>BC Real Estate Law Guide - 05 Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UCN</entry>
                                    <entry>422795</entry>
                                    <entry>BC Real Estate Law Guide - 03 Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UCO</entry>
                                    <entry>422797</entry>
                                    <entry>BC Real Estate Law Guide - 06 Former Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UCP</entry>
                                    <entry>422800</entry>
                                    <entry>BC Real Estate Law Guide - 04 Former Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UCV</entry>
                                    <entry>422815</entry>
                                    <entry>Canada Corporations Law - 06 Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UCW</entry>
                                    <entry>422817</entry>
                                    <entry>Canada Corporations Law - 04 Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UCX</entry>
                                    <entry>422819</entry>
                                    <entry>Canada Corporations Law - 07 Former Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UCY</entry>
                                    <entry>422821</entry>
                                    <entry>Canada Corporations Law - 05 Former Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UD9</entry>
                                    <entry>422867</entry>
                                    <entry>Canadian Estate Administration Guide - 06
                                        Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UDA</entry>
                                    <entry>422869</entry>
                                    <entry>Canadian Estate Administration Guide - 04
                                        Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UDB</entry>
                                    <entry>422871</entry>
                                    <entry>Canadian Estate Administration Guide - 07 Former
                                        Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UDC</entry>
                                    <entry>422876</entry>
                                    <entry>Canadian Estate Administration Guide - 05 Former
                                        Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UDF</entry>
                                    <entry>422883</entry>
                                    <entry>Employment Insurance - 03 Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UDG</entry>
                                    <entry>422885</entry>
                                    <entry>Employment Insurance - 02 Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UDL</entry>
                                    <entry>422896</entry>
                                    <entry>Corporate Secretary's Guide - 05 Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UDM</entry>
                                    <entry>422898</entry>
                                    <entry>Ontario Accident Benefit Cases - 05 Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UDN</entry>
                                    <entry>422900</entry>
                                    <entry>Ontario Accident Benefit Cases - 04 Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UDO</entry>
                                    <entry>422902</entry>
                                    <entry>Corporate Secretary's Guide - 04 Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UDT</entry>
                                    <entry>422912</entry>
                                    <entry>Employment Standards - 05 Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UDU</entry>
                                    <entry>422914</entry>
                                    <entry>Employment Standards - 03 Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UDV</entry>
                                    <entry>422916</entry>
                                    <entry>Employment Standards - 06 Former Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UEE</entry>
                                    <entry>422993</entry>
                                    <entry>Ontario Corporations Law - 05 Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UEF</entry>
                                    <entry>422995</entry>
                                    <entry>Ontario Corporations Law - 06 Former Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UEG</entry>
                                    <entry>422998</entry>
                                    <entry>Ontario Corporations Law - 04 Regulations  </entry>
                                </row>
                                <row>
                                    <entry>0UEJ</entry>
                                    <entry>423005</entry>
                                    <entry>Employment Standards - 04 Former Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UFB</entry>
                                    <entry>423071</entry>
                                    <entry>Human Rights/Equity Issues - 04 Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UFC</entry>
                                    <entry>423074</entry>
                                    <entry>Human Rights/Equity Issues - 02 Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UFD</entry>
                                    <entry>423080</entry>
                                    <entry>Human Rights/Equity Issues - 05 Former Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UFE</entry>
                                    <entry>423083</entry>
                                    <entry>Human Rights/Equity Issues - 03 Former
                                        Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UFT</entry>
                                    <entry>423231</entry>
                                    <entry>Employment Safety &amp; Health - 05 Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UFU</entry>
                                    <entry>423233</entry>
                                    <entry>Employment Safety &amp; Health - 04 Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UHJ</entry>
                                    <entry>423355</entry>
                                    <entry>Benefits and Pensions - 08 Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UHK</entry>
                                    <entry>423357</entry>
                                    <entry>Benefits and Pensions - 06 Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UHL</entry>
                                    <entry>423359</entry>
                                    <entry>Benefits and Pensions - 09 Former Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UHM</entry>
                                    <entry>423361</entry>
                                    <entry>Benefits and Pensions - 07 Former Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UI1</entry>
                                    <entry>423416</entry>
                                    <entry>Labour Relations - 06 Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UI2</entry>
                                    <entry>423418</entry>
                                    <entry>Labour Relations - 04 Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UI3</entry>
                                    <entry>423420</entry>
                                    <entry>Labour Relations - 07 Former Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UI4</entry>
                                    <entry>423422</entry>
                                    <entry>Labour Relations - 05 Former Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UJ2</entry>
                                    <entry>423520</entry>
                                    <entry>The Directors Manual - 03 Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UJ3</entry>
                                    <entry>423524</entry>
                                    <entry>The Directors Manual - 04 Former Statutes </entry>
                                </row>
                                <row>
                                    <entry>0UJ8</entry>
                                    <entry>423553</entry>
                                    <entry>Ontario Real Estate Law Guide - 06 Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UJ9</entry>
                                    <entry>423555</entry>
                                    <entry>Ontario Real Estate Law Guide - 07 Former
                                        Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UJA</entry>
                                    <entry>423557</entry>
                                    <entry>Ontario Real Estate Law Guide - 04 Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UJB</entry>
                                    <entry>423559</entry>
                                    <entry>Ontario Real Estate Law Guide - 05 Former
                                        Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UN0</entry>
                                    <entry>423954</entry>
                                    <entry>Charte canadienne des droits et libertés - 04
                                        Lois</entry>
                                </row>
                                <row>
                                    <entry>0UN5</entry>
                                    <entry>423964</entry>
                                    <entry>Droit immobilier québécois - 03 Lois</entry>
                                </row>
                                <row>
                                    <entry>0UN6</entry>
                                    <entry>423966</entry>
                                    <entry>Droit immobilier québécois - 04 Règlements</entry>
                                </row>
                                <row>
                                    <entry>0UNO</entry>
                                    <entry>424005</entry>
                                    <entry>Droit de la famille québécois - 03 Lois</entry>
                                </row>
                                <row>
                                    <entry>0UNP</entry>
                                    <entry>424008</entry>
                                    <entry>Droit de la famille québécois - 04 Règlements</entry>
                                </row>
                                <row>
                                    <entry>0UNZ</entry>
                                    <entry>424032</entry>
                                    <entry>Droits et libertés de la personne en milieu de travail -
                                        03 Lois</entry>
                                </row>
                                <row>
                                    <entry>0UOD</entry>
                                    <entry>424086</entry>
                                    <entry>La société par actions au Québec - 04 Lois</entry>
                                </row>
                                <row>
                                    <entry>0UOE</entry>
                                    <entry>424088</entry>
                                    <entry>La société par actions au Québec - 05 Règlements</entry>
                                </row>
                                <row>
                                    <entry>0UOJ</entry>
                                    <entry>424100</entry>
                                    <entry>Relations de travail - 03 Lois</entry>
                                </row>
                                <row>
                                    <entry>0UOK</entry>
                                    <entry>424103</entry>
                                    <entry>Relations de travail - 04 Règlements</entry>
                                </row>
                                <row>
                                    <entry>0UOS</entry>
                                    <entry>424128</entry>
                                    <entry>Santé et sécurité au travail - 03 Lois</entry>
                                </row>
                                <row>
                                    <entry>0UOT</entry>
                                    <entry>424130</entry>
                                    <entry>Santé et sécurité au travail - 04 Règlements</entry>
                                </row>
                                <row>
                                    <entry>0UOV</entry>
                                    <entry>424134</entry>
                                    <entry>Santé et sécurité au travail - 05 Archives -
                                        Règlements</entry>
                                </row>
                                <row>
                                    <entry>0UPV</entry>
                                    <entry>424244</entry>
                                    <entry>BC Corporations Law - 06 Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UPW</entry>
                                    <entry>424247</entry>
                                    <entry>BC Corporations Law - 04 Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UPX</entry>
                                    <entry>424250</entry>
                                    <entry>BC Corporations Law - 07 Former Statutes</entry>
                                </row>
                                <row>
                                    <entry>0UPY</entry>
                                    <entry>424253</entry>
                                    <entry>BC Corporations Law - 05 Former Regulations</entry>
                                </row>
                                <row>
                                    <entry>0US1</entry>
                                    <entry>424424</entry>
                                    <entry>Employment Safety &amp; Health - 06 Former
                                        Statutes</entry>
                                </row>
                                <row>
                                    <entry>0US6</entry>
                                    <entry>424440</entry>
                                    <entry>Code criminel et lois connexes annotés - 03 Lois</entry>
                                </row>
                                <row>
                                    <entry>0US7</entry>
                                    <entry>424443</entry>
                                    <entry>Code criminel et lois connexes annotés - 05
                                        Règlements</entry>
                                </row>
                                <row>
                                    <entry>0USA</entry>
                                    <entry>424449</entry>
                                    <entry>Code criminel et lois connexes annotés - 07 Règles de
                                        pratique</entry>
                                </row>
                                <row>
                                    <entry>0USC</entry>
                                    <entry>424454</entry>
                                    <entry>Code criminel et lois connexes annotés - 09 Archives -
                                        Lois</entry>
                                </row>
                                <row>
                                    <entry>0USD</entry>
                                    <entry>424456</entry>
                                    <entry>Code criminel et lois connexes annotés - 11 Archives -
                                        Règlements</entry>
                                </row>
                                <row>
                                    <entry>0USP</entry>
                                    <entry>424500</entry>
                                    <entry>Code criminel et lois connexes annotés - 12 Former
                                        Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UTB</entry>
                                    <entry>424562</entry>
                                    <entry>Régimes de retraite au Québec - 03 Lois</entry>
                                </row>
                                <row>
                                    <entry>0UTC</entry>
                                    <entry>424564</entry>
                                    <entry>Régimes de retraite au Québec - 04 Règlements</entry>
                                </row>
                                <row>
                                    <entry>0UVY</entry>
                                    <entry>424842</entry>
                                    <entry>Code criminel et lois connexes annotés - 04 Acts</entry>
                                </row>
                                <row>
                                    <entry>0UVZ</entry>
                                    <entry>424846</entry>
                                    <entry>Code criminel et lois connexes annotés - 06
                                        Regulations</entry>
                                </row>
                                <row>
                                    <entry>0UW1</entry>
                                    <entry>424849</entry>
                                    <entry>Code criminel et lois connexes annotés - 08 Codes of
                                        Practice</entry>
                                </row>
                                <row>
                                    <entry>0V1Y</entry>
                                    <entry>425433</entry>
                                    <entry>Canadian Stock Exchanges - 02 IIROC &amp; Universal
                                        Market Integrity Rules and Policies</entry>
                                </row>
                                <row>
                                    <entry>0V22</entry>
                                    <entry>425442</entry>
                                    <entry>Canadian Stock Exchanges - 04 MFDA By-laws, Rules and
                                        Policies</entry>
                                </row>
                                <row>
                                    <entry>0V24</entry>
                                    <entry>425448</entry>
                                    <entry>Canadian Stock Exchanges - 07 ICE Futures Canada Inc.
                                        Rules</entry>
                                </row>
                                <row>
                                    <entry>0V26</entry>
                                    <entry>425452</entry>
                                    <entry>Canadian Stock Exchanges - 09 NASDAQ Marketplace
                                        Rules</entry>
                                </row>
                                <row>
                                    <entry>0V28</entry>
                                    <entry>425455</entry>
                                    <entry>Canadian Stock Exchanges - 10 CNSX Rules, Policies and
                                        Notices</entry>
                                </row>
                                <row>
                                    <entry>0V2A</entry>
                                    <entry>425459</entry>
                                    <entry>Canadian Stock Exchanges - 12 TSX Rule Book and
                                        Policies</entry>
                                </row>
                                <row>
                                    <entry>0V2B</entry>
                                    <entry>425463</entry>
                                    <entry>"Canadian Stock Exchanges - 13 TSX Venture Exchange Rules
                                        and Policies"</entry>
                                </row>
                                <row>
                                    <entry>0V2F</entry>
                                    <entry>425474</entry>
                                    <entry>Canadian Stock Exchanges - 15 NEX Policies</entry>
                                </row>
                                <row>
                                    <entry>0V2I</entry>
                                    <entry>425481</entry>
                                    <entry>Canadian Stock Exchanges - 18 Montreal Stock Exchange
                                        Rules, Policies, Guidelines and Fees</entry>
                                </row>
                                <row>
                                    <entry>0VNX</entry>
                                    <entry>TBD</entry>
                                    <entry>Canadian Securities Law Reporter - 09 Securities
                                        Commissions (Codes of Practice)</entry>
                                </row>
                                <row>
                                    <entry>0VNX</entry>
                                    <entry>TBD</entry>
                                    <entry>Canadian Securities Law Reporter - 09 Securities
                                        Commissions (Treaties)</entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                </p>
                <pre>&lt;ref:cite4thisresource citetype="reporter"&gt;
    &lt;lnci:cite&gt;
        &lt;lnci:case&gt;
            &lt;lnci:caseref ID="cref00013178"&gt;
                &lt;lnci:reporter value="ACF"/&gt;
                &lt;lnci:edition&gt;
                    &lt;lnci:date year="1978"/&gt;
                &lt;/lnci:edition&gt;
                &lt;lnci:refnum num="1000"/&gt;
            &lt;/lnci:caseref&gt;
        &lt;/lnci:case&gt;
        &lt;lnci:content&gt;[1978] A.C.F. no 1000&lt;/lnci:content&gt;
    &lt;/lnci:cite&gt;
&lt;/ref:cite4thisresource&gt;

<b>Becomes</b>

&lt;ref:parallelcite citetype="parallel"&gt;
    &lt;lnci:cite&gt;
        &lt;lnci:content&gt;[1978] F.C.J. No. 1000&lt;/lnci:content&gt;
    &lt;/lnci:cite&gt;
&lt;/ref:parallelcite&gt;

<b>and</b>

&lt;doc:metadata&gt;
    &lt;doc:docinfo&gt;
        &lt;doc:related-content&gt;
            &lt;doc:related-content-grp content-type="alternate-language-version"&gt;
                &lt;doc:related-content-item&gt;
                    &lt;doc:related-content-link&gt;
                        &lt;ref:lnlink service="TRAVERSE"&gt;
                            &lt;ref:marker&gt;English Version&lt;/ref:marker&gt;
                            &lt;ref:locator&gt;
                                &lt;ref:locator-key&gt;
                                    &lt;ref:key-name name="normcite"/&gt;
                                    &lt;ref:key-value value="[1978] F.C.J. No. 1000"/&gt;
                                &lt;/ref:locator-key&gt;
                                &lt;ref:locator-params&gt;
                                    &lt;proc:param name="normprotocol" value="CAEditorial"/&gt;
                                    &lt;proc:param name="countrycode" value="CA"/&gt;
                                    &lt;proc:param name="targetdoclang" value="en-CA"/&gt;
                                &lt;/ref:locator-params&gt;
                            &lt;/ref:locator&gt;
                        &lt;/ref:lnlink&gt;
                    &lt;/doc:related-content-link&gt;
                &lt;/doc:related-content-item&gt;
            &lt;/doc:related-content-grp&gt;
        &lt;/doc:related-content&gt;
    &lt;/doc:docinfo&gt;
&lt;/doc:metadata&gt;
</pre>
                <p>Below Table is for <b>CA01</b></p>
                <table frame="all" pgwide="90">
                    <tgroup cols="6">
                        <thead>
                            <row>
                                <entry align="center">Primary Language</entry>
                                <entry align="center">Primary Ciatation</entry>
                                <entry align="center">Alternate Citation</entry>
                                <entry align="center">Alternate Language</entry>
                                <entry align="center">Primary Format</entry>
                                <entry align="center">Alternate Format</entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>French</entry>
                                <entry>A.C.F.</entry>
                                <entry>F.C.J.</entry>
                                <entry>English</entry>
                                <entry>[2014] A.C.F. no 503</entry>
                                <entry>[2014] F.C.J. No. 503</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>A.C.I.</entry>
                                <entry>T.C.J.</entry>
                                <entry>English</entry>
                                <entry>[2014] A.C.I. no 76</entry>
                                <entry>[2014] T.C.J. No. 76</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>A.C.S.</entry>
                                <entry>S.C.J.</entry>
                                <entry>English</entry>
                                <entry>[2014] A.C.S. no 40</entry>
                                <entry>[2014] S.C.J. No. 40</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>A.J.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] A.J. No. 543</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>B.C.J.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2012] B.C.J. 3012</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Y.J.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2010] Y.J. No. 193</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>A.C.A.C.</entry>
                                <entry>C.M.A.J.</entry>
                                <entry>English</entry>
                                <entry>[1986] A.C.A.C. no 1</entry>
                                <entry>[1986] C.M.A.J. No. 1</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>I.L.R.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1992] I.L.R. 1-2848; [2009] I.L.R. I-4809</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>C.M.A.J.</entry>
                                <entry>A.C.A.C.</entry>
                                <entry>French</entry>
                                <entry>[1995] C.M.A.J. No. 12</entry>
                                <entry>[1995] A.C.A.C. no 12</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>C.N.L.R.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1981] 2 C.N.L.R. 78</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>DTC</entry>
                                <entry/>
                                <entry/>
                                <entry>84 DTC 6395</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>Ex.C.R.</entry>
                                <entry> R.C. de l'É</entry>
                                <entry>French</entry>
                                <entry>[1965] 1 Ex.C.R. 403</entry>
                                <entry>[1965] 1 R.C. de l'É. 403</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>Ex.C.J.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>F.C.J.</entry>
                                <entry>A.C.F.</entry>
                                <entry>French</entry>
                                <entry>[2000] F.C.J. No. 1985</entry>
                                <entry>[2000] A.C.F. no 1985</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>F.C.R</entry>
                                <entry>R.C.F.</entry>
                                <entry>French</entry>
                                <entry>[2013] 4 F.C.R. 63</entry>
                                <entry>[2013] 4 R.C.F. 63</entry>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>F.C.</entry>
                                <entry>C.F.</entry>
                                <entry>French</entry>
                                <entry>[1992] 2 F.C. 401 </entry>
                                <entry>[1992] 2 C.F. 401 </entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>J.C.J.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry>[2003] J.C.J. No. 56</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>UKPC</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry>[2003] UKPC 56</entry>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>Q.J. </entry>
                                <entry>J.Q.</entry>
                                <entry>French</entry>
                                <entry>[2010] Q.J. No. 32170</entry>
                                <entry>[2013] J.Q. no 3697</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No. </entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>J.Q.</entry>
                                <entry>Q.J.</entry>
                                <entry>English</entry>
                                <entry>[2013] J.Q. no 3697</entry>
                                <entry>[2010] Q.J. No. 32170</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>M.J.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1998] M.J. No. 588</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>N.B.J.</entry>
                                <entry>A.N.-B.</entry>
                                <entry>French</entry>
                                <entry>[1984] N.B.J. No. 8</entry>
                                <entry>[2013] A.N.-B. no 22</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>A.N.-B.</entry>
                                <entry>N.B.J.</entry>
                                <entry>English</entry>
                                <entry>[2013] A.N.-B. no 22</entry>
                                <entry>[1984] N.B.J. No. 8</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>N.J.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1953] N.J. No. 4</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>N.S.J.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] N.S.J. No. 253</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Nu.J.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] Nu.J. No. 14</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>N.W.T.J.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2003] N.W.T.J. No. 22</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.J.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1997] O.J. No. 2445</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.R.</entry>
                                <entry/>
                                <entry/>
                                <entry>119 O.R. (3d) 370; [1970] 2 O.R. 589; [1960] O.R.
                                    125"</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>P.E.I.J.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] P.E.I. J. No. 21</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry> R.C. de l'É</entry>
                                <entry>Ex. C.R.</entry>
                                <entry>English</entry>
                                <entry>[1970] R.C. de l'É. 981; [1965] 1 R.C. de l'É. 263</entry>
                                <entry>[1970] Ex. C.R. 1006; [1965] 1 Ex.C.R. 376; [1969] 2 Ex.C.R.
                                    246; [1961] Ex.C.R. 1; 20 Ex.C.R. 86</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>Ex. C.J.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1970] Ex. C.J. No. 27; </entry>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>R.C.F.</entry>
                                <entry>F.C.R.</entry>
                                <entry>English</entry>
                                <entry>[2013] 4 R.C.F. 63</entry>
                                <entry>[2013] 4 F.C.R. 63</entry>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>C.F.</entry>
                                <entry>F.C.</entry>
                                <entry>English</entry>
                                <entry>[1992] 2 C.F. 401 </entry>
                                <entry>[1992] 2 F.C. 401 </entry>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>R.C.S.</entry>
                                <entry>S.C.R.</entry>
                                <entry>English</entry>
                                <entry>[1970] R.C.S. 2; [1998] 1 R.C.S. 756</entry>
                                <entry>[1970] S.C.R. 2; [1998] 1 S.C.R. 756</entry>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>S.C.C.A.</entry>
                                <entry>C.S.C.R.</entry>
                                <entry>French</entry>
                                <entry>[1995] S.C.C.A. No. 328</entry>
                                <entry>[2013] C.S.C.R. no 412 </entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>C.S.C.R.</entry>
                                <entry>S.C.C.A.</entry>
                                <entry>English</entry>
                                <entry>[2013] C.S.C.R. no 412 </entry>
                                <entry>[1995] S.C.C.A. No. 328</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>S.C.J.</entry>
                                <entry>A.C.S.</entry>
                                <entry>French</entry>
                                <entry>[1908] S.C.J. No. 24 </entry>
                                <entry>[2013] A.C.S. no 24</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>S.C.R.</entry>
                                <entry>R.C.S.</entry>
                                <entry>French</entry>
                                <entry>[1998] 1 S.C.R. 756; [1996] S.C.R. 196; (1920), 61 S.C.R.
                                    193</entry>
                                <entry>[1998] 1 R.C.S. 756; [1966] R.C.S. 196</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>S.J.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1986] S.J. No. 186 </entry>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>T.C.J.</entry>
                                <entry>A.C.I.</entry>
                                <entry>French</entry>
                                <entry>[2012] T.C.J. No. 330</entry>
                                <entry>[2012] A.C.I. no 330</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
                <p>Below Table is for <b>CA04</b>:</p>
                <table frame="all" pgwide="95">
                    <tgroup cols="6">
                        <thead>
                            <row>
                                <entry align="center">Primary Language</entry>
                                <entry align="center">Primary ciatation</entry>
                                <entry align="center">Alternate Citation</entry>
                                <entry align="center">Alternate Language</entry>
                                <entry align="center">Primary Format</entry>
                                <entry align="center">Alternate Format</entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry/>
                                <entry>A.E.A.B.D</entry>
                                <entry/>
                                <entry/>
                                <entry>[1997] A.E.A.B.D. No. 3</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>A.E.U.B.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2012] A.E.U.B.D. No. 198</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>LNAUC</entry>
                                <entry/>
                                <entry/>
                                <entry>2009 LNAUC 249</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>LNAERCB</entry>
                                <entry/>
                                <entry/>
                                <entry>2008 LNAERCB 59</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>A.G.A.A.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1998] A.G.A.A. No. 38</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>A.I.P.C.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1999] A.I.P.C.D. No. 42</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>A.L.R.B.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2009] A.L.R.B.D. No. 69</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>A.M.G.B.O.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1997] A.M.G.B.O. No. 97</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>A.M.S.A.T.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] A.M.S.A.T.D. No. 3</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>LNABASC</entry>
                                <entry/>
                                <entry/>
                                <entry>2012 LNABASC 7</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>B.C.C.A.A.A.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1998] B.C.C.A.A.A. No. 136</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>B.C.C.O.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2004] B.C.C.O. No. 1</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>B.C.E.A.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] B.C.E.A. No. 8</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>B.C.E.S.T.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] B.C.E.S.T.D. No. 35</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>B.C.H.R.T.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1999] B.C.H.R.T.D. No. 60</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>B.C.I.P.C.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] B.C.I.P.C.D. No. 7</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>B.C.L.R.B.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2005] B.C.L.R.B.D. No. 130</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>B.C.L.I.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1994] B.C.L.I. No. 15</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>B.C.R.B.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2008] B.C.R.B.D. No. 203</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>LNBCSC</entry>
                                <entry/>
                                <entry/>
                                <entry>1999 LNBCSC 1014</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>B.C.S.C.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2004] B.C.S.C.D. No. 950</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>LNBCWCA</entry>
                                <entry/>
                                <entry/>
                                <entry>2013 LNBCWCA 7</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>C.A.P.P.R.T.D.</entry>
                                <entry>D.T.C.R.P.A.P.</entry>
                                <entry>French</entry>
                                <entry>[1995] C.A.P.P.R.T.D. No. 3</entry>
                                <entry>[1995] D.T.C.R.P.A.P. no 3</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>C.A.R.T.D.</entry>
                                <entry>D.C.R.A.C.</entry>
                                <entry>French</entry>
                                <entry>[2007] C.A.R.T.D. No. 27</entry>
                                <entry>[2007] D.C.R.A.C. no 27</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.C.R.A.C.</entry>
                                <entry>C.A.R.T.D.</entry>
                                <entry>English</entry>
                                <entry>[2007] D.C.R.A.C. no 27</entry>
                                <entry>[2007] C.A.R.T.D. No. 27</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>C.A.T.D.</entry>
                                <entry>D.T.A.C.</entry>
                                <entry>French</entry>
                                <entry>[1989] C.A.T.D. No. 90</entry>
                                <entry>[1989] D.T.A.C. no 90</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.T.A.C.</entry>
                                <entry>C.A.T.D.</entry>
                                <entry>English</entry>
                                <entry>[1989] D.T.A.C. no 90</entry>
                                <entry>[1989] C.A.T.D. No. 90</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>C.T.A.T.D.</entry>
                                <entry>D.T.A.T.C.</entry>
                                <entry>French</entry>
                                <entry>[2011] C.T.A.T.D. No. 34</entry>
                                <entry>[2011] D.T.A.T.C. no 34</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.T.A.T.C.</entry>
                                <entry>C.T.A.T.D.</entry>
                                <entry>English</entry>
                                <entry>[2011] D.T.A.T.C. no 34</entry>
                                <entry>[2011] C.T.A.T.D. No. 34</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>C.B.D.</entry>
                                <entry>D.C.D.A.</entry>
                                <entry>French</entry>
                                <entry>[1998] C.B.D. No. 16</entry>
                                <entry>[1998] D.C.D.A. no 16</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.C.D.A.</entry>
                                <entry>C.B.D.</entry>
                                <entry>English</entry>
                                <entry>[1998] D.C.D.A. no 16</entry>
                                <entry>[1998] C.B.D. No. 16</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>C.B.S.C.D.</entry>
                                <entry>D.C.C.N.R.</entry>
                                <entry>French</entry>
                                <entry>[2009] C.B.S.C.D. No. 22</entry>
                                <entry>[2009] D.C.C.N.R. no 22</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.C.C.N.R.</entry>
                                <entry>C.B.S.C.D.</entry>
                                <entry>English</entry>
                                <entry>[2009] D.C.C.N.R. no 22</entry>
                                <entry>[2009] C.B.S.C.D. No. 22</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>LNCPAT</entry>
                                <entry>LNCBREV</entry>
                                <entry>French</entry>
                                <entry>2013 LNCPAT 18</entry>
                                <entry>2013 LNCBREV 18</entry>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>LNCBREV</entry>
                                <entry>LNCPAT</entry>
                                <entry>English</entry>
                                <entry>2013 LNCBREV 18</entry>
                                <entry>2013 LNCPAT 18</entry>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>S.C.C.P.V.P.C.</entry>
                                <entry>C.P.C.S.F.</entry>
                                <entry>English</entry>
                                <entry>[2004] S.C.C.P.V.P.C. no 44</entry>
                                <entry>[2007] C.P.C.S.F. No. 24</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>C.P.C.S.F.</entry>
                                <entry>S.C.C.P.V.P.C.</entry>
                                <entry>French</entry>
                                <entry>[2007] C.P.C.S.F. No. 24</entry>
                                <entry>[2004] S.C.C.P.V.P.C. no 44</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.T.C.C.</entry>
                                <entry>C.C.T.D.</entry>
                                <entry>English</entry>
                                <entry>[2013] D.T.C.C. no 9</entry>
                                <entry>[2013] C.C.T.D. No. 9</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>C.C.T.D.</entry>
                                <entry>D.T.C.C.</entry>
                                <entry>French</entry>
                                <entry>[2013] C.C.T.D. No. 9</entry>
                                <entry>[2013] D.T.C.C. no 9</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>LNCNEB</entry>
                                <entry>LNCONE</entry>
                                <entry>French</entry>
                                <entry>2013 LNCNEB 2</entry>
                                <entry>2013 LNCONE 2</entry>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>LNCONE</entry>
                                <entry>LNCNEB</entry>
                                <entry>English</entry>
                                <entry>2013 LNCONE 2</entry>
                                <entry>2013 LNCNEB 2</entry>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>C.H.R.D.</entry>
                                <entry>D.C.D.P.</entry>
                                <entry>French</entry>
                                <entry>[2003] C.H.R.D. No. 33</entry>
                                <entry>[2003] D.C.D.P. No 33</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.C.D.P.</entry>
                                <entry>C.H.R.D.</entry>
                                <entry>English</entry>
                                <entry>[2013] D.C.D.P. no 35</entry>
                                <entry>[2003] C.H.R.D. No. 33</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>LNCIRA</entry>
                                <entry/>
                                <entry/>
                                <entry>2008 LNCIRA 14</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>C.I.T.</entry>
                                <entry>T.C.I.</entry>
                                <entry>French</entry>
                                <entry>[1978] C.I.T. No. 16</entry>
                                <entry>[1986] T.C.I. no 29</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>T.C.I.</entry>
                                <entry>C.I.T.</entry>
                                <entry>English</entry>
                                <entry>[1986] T.C.I. no 29</entry>
                                <entry>[1978] C.I.T. No. 16</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>C.I.T.T.</entry>
                                <entry>T.C.C.E.</entry>
                                <entry>French</entry>
                                <entry>[2002] C.I.T.T. No. 109</entry>
                                <entry>[2002] T.C.C.E. No 109</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>T.C.C.E.</entry>
                                <entry>C.I.T.T.</entry>
                                <entry>English</entry>
                                <entry>[2002] T.C.C.E. No 109</entry>
                                <entry>[2002] C.I.T.T. No. 109</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>C.L.A.D.</entry>
                                <entry>D.A.T.C.</entry>
                                <entry>French</entry>
                                <entry>[1983] C.L.A.D. No. 49</entry>
                                <entry>[2011] D.A.T.C. no 318</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.A.T.C.</entry>
                                <entry>C.L.A.D.</entry>
                                <entry>English</entry>
                                <entry>[2011] D.A.T.C. no 318</entry>
                                <entry>[1983] C.L.A.D. No. 49</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>LNQCCLP</entry>
                                <entry/>
                                <entry/>
                                <entry>2004 LNQCCLP 6500</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.A.R.S.C.C.T.</entry>
                                <entry>C.L.C.R.S.O.D.</entry>
                                <entry>English</entry>
                                <entry>[2000] D.A.R.S.C.C.T. no 1</entry>
                                <entry>[2000] C.L.C.R.S.O.D. No. 1</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>C.L.C.R.S.O.D.</entry>
                                <entry>D.A.R.S.C.C.T.</entry>
                                <entry>French</entry>
                                <entry>[2000] C.L.C.R.S.O.D. No. 1</entry>
                                <entry>[2000] D.A.R.S.C.C.T. no 1</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>LNTSSTC</entry>
                                <entry>LNOHSTC</entry>
                                <entry>English</entry>
                                <entry>2013 LNTSSTC 40</entry>
                                <entry>2013 LNOHSTC 35</entry>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>LNOHSTC</entry>
                                <entry>LNTSSTC</entry>
                                <entry>French</entry>
                                <entry>2013 LNOHSTC 35</entry>
                                <entry>2013 LNTSSTC 40</entry>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>C.O.M.C.</entry>
                                <entry>T.M.O.B.</entry>
                                <entry>English</entry>
                                <entry>[2009] C.O.M.C. no 24</entry>
                                <entry>[2009] T.M.O.B. No 24</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>T.M.O.B</entry>
                                <entry>C.O.M.C.</entry>
                                <entry>French</entry>
                                <entry>[1986] T.M.O.B. No. 14</entry>
                                <entry>[1986] C.O.M.C. no 14</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>LNCCAP</entry>
                                <entry>LNCPEN</entry>
                                <entry>English</entry>
                                <entry>2012 LNCCAP 17</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>LNCPEN</entry>
                                <entry>LNCCAP</entry>
                                <entry>French</entry>
                                <entry>2005 LNCPEN 132</entry>
                                <entry>2012 LNCCAP 17</entry>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>LNCRTCB</entry>
                                <entry>LNCRTCR</entry>
                                <entry>French</entry>
                                <entry>2013 LNCRTCB 113</entry>
                                <entry>2013 LNCRTCR 113</entry>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>LNCRTCR</entry>
                                <entry>LNCRTCB</entry>
                                <entry>English</entry>
                                <entry>2013 LNCRTCR 113</entry>
                                <entry>2013 LNCRTCB 113</entry>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>LNCRTCF</entry>
                                <entry>LNCRTCE</entry>
                                <entry>English</entry>
                                <entry>2009 LNCRTCF 41</entry>
                                <entry>2007 LNCRTCE 100</entry>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>LNCRTCE</entry>
                                <entry>LNCRTCF</entry>
                                <entry>French</entry>
                                <entry>2007 LNCRTCE 100</entry>
                                <entry>2009 LNCRTCF 41</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>D.C.R.T.Q.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2002] D.C.R.T.Q. no 1</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>C.P.S.S.R.B.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2005] C.P.S.S.R.B. No. 1</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>C.P.S.L.R.B.</entry>
                                <entry>C.R.T.F.P.C.</entry>
                                <entry>French</entry>
                                <entry>[2008] C.P.S.L.R.B. No. 6</entry>
                                <entry>[2014] C.R.T.F.P.C. no 40</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>C.R.T.F.P.C.</entry>
                                <entry>C.P.S.L.R.B.</entry>
                                <entry>English</entry>
                                <entry>[2014] C.R.T.F.P.C. no 40</entry>
                                <entry>[2008] C.P.S.L.R.B. No. 6</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.A.A.C.C.T.</entry>
                                <entry>C.L.C.A.O.D.</entry>
                                <entry>English</entry>
                                <entry>[2001] D.A.A.C.C.T. no 12</entry>
                                <entry>[2002] C.L.C.A.O.D. No. 22</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>C.L.C.A.O.D.</entry>
                                <entry>D.A.A.C.C.T.</entry>
                                <entry>French</entry>
                                <entry>[2002] C.L.C.A.O.D. No. 22</entry>
                                <entry>[2001] D.A.A.C.C.T. no 12</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>P.R.B.D.</entry>
                                <entry>D.C.R.M.</entry>
                                <entry>French</entry>
                                <entry>[1994] P.R.B.D. No. 1</entry>
                                <entry>[1994] D.C.R.M. No. 1</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.C.R.M.</entry>
                                <entry>P.R.B.D.</entry>
                                <entry>English</entry>
                                <entry>[1994] D.C.R.M. No. 1</entry>
                                <entry>[1994] P.R.B.D. No. 1</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>C.I.R.B.D.</entry>
                                <entry>D.C.C.R.I.</entry>
                                <entry>French</entry>
                                <entry>[2004] C.I.R.B.D. No. 23</entry>
                                <entry>[2014] D.C.C.R.I. no 4</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.C.C.R.I.</entry>
                                <entry>C.I.R.B.D.</entry>
                                <entry>English</entry>
                                <entry>[2014] D.C.C.R.I. no 4</entry>
                                <entry>[2004] C.I.R.B.D. No. 23</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>C.L.R.B.D.</entry>
                                <entry>D.C.C.R.T.</entry>
                                <entry>French</entry>
                                <entry>[1996] C.L.R.B.D. No. 24</entry>
                                <entry>[1998] D.C.C.R.T. no 17</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.C.C.R.T.</entry>
                                <entry>C.L.R.B.D.</entry>
                                <entry>English</entry>
                                <entry>[1998] D.C.C.R.T. no 17</entry>
                                <entry>[1996] C.L.R.B.D. No. 24</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>I.A.D.D.</entry>
                                <entry>D.S.A.I.</entry>
                                <entry>French</entry>
                                <entry>[2013] I.A.D.D. No. 30</entry>
                                <entry>[2013] D.S.A.I. no 30</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.S.A.I.</entry>
                                <entry>I.A.D.D.</entry>
                                <entry>English</entry>
                                <entry>[2013] D.S.A.I. no 30</entry>
                                <entry>[2013] I.A.D.D. No. 30</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>I.A.B.D.</entry>
                                <entry>D.C.A.I.</entry>
                                <entry>French</entry>
                                <entry>[1987] I.A.B.D. No. 1</entry>
                                <entry>[1987] D.C.A.I. no 1</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.C.A.I.</entry>
                                <entry>I.A.B.D.</entry>
                                <entry>English</entry>
                                <entry>[1987] D.C.A.I. no 1</entry>
                                <entry>[1987] I.A.B.D. No. 1</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>R.P.D.D.</entry>
                                <entry>D.S.P.R.</entry>
                                <entry>French</entry>
                                <entry>[2013] R.P.D.D. No. 35</entry>
                                <entry>[2013] D.S.P.R. no 35</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.S.P.R.</entry>
                                <entry>R.P.D.D.</entry>
                                <entry>English</entry>
                                <entry>[2013] D.S.P.R. no 35</entry>
                                <entry>[2013] R.P.D.D. No. 35</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>C.R.D.D.</entry>
                                <entry>D.S.S.R.</entry>
                                <entry>French</entry>
                                <entry>[1989] C.R.D.D. No. 298</entry>
                                <entry>[1998] D.S.S.R. no 300</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.S.S.R.</entry>
                                <entry>C.R.D.D.</entry>
                                <entry>English</entry>
                                <entry>[1998] D.S.S.R. no 300</entry>
                                <entry>[1989] C.R.D.D. No. 298</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>F.T.A.D.</entry>
                                <entry>D.A.L.E.</entry>
                                <entry>French</entry>
                                <entry>[1994] F.T.A.D. No. 13</entry>
                                <entry>[1994] D.A.L.E. no 12</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.A.L.E.</entry>
                                <entry>F.T.A.D.</entry>
                                <entry>English</entry>
                                <entry>[1994] D.A.L.E. no 12</entry>
                                <entry>[1994] F.T.A.D. No. 13</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.S.I.</entry>
                                <entry>I.D.D.</entry>
                                <entry>English</entry>
                                <entry>[2013] D.S.I. no 6</entry>
                                <entry>[2013] I.D.D. No. 5</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>I.D.D.</entry>
                                <entry>D.S.I.</entry>
                                <entry>French</entry>
                                <entry>[2013] I.D.D. No. 5</entry>
                                <entry>[2013] D.S.I. no 6</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.S.Arb.I.</entry>
                                <entry>I.Adj.D.D.</entry>
                                <entry>English</entry>
                                <entry>[2002] D.S.Arb.I. no 1</entry>
                                <entry>[2002] I.Adj.D.D. No. 1</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>I.Adj.D.D.</entry>
                                <entry>D.S.Arb.I.</entry>
                                <entry>French</entry>
                                <entry>[2002] I.Adj.D.D. No. 1</entry>
                                <entry>[2002] D.S.Arb.I. no 1</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>LNICAO</entry>
                                <entry/>
                                <entry/>
                                <entry>2013 LNICAO 12</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>I.D.A.C.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1984] I.D.A.C.D. No. 4; [2007] I.D.A.C.D. No. 56</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>L.S.D.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1994] L.S.D.D. No. 222</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>M.A.I.C.A.C.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2010] M.A.I.C.A.C.D. No. 16</entry>
                                <entry>N/A</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>M.H.R.B.A.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2013] M.H.R.B.A.D. No. 105</entry>
                                <entry>N/A</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>LNMBCPS</entry>
                                <entry/>
                                <entry/>
                                <entry>2014 LNMBCPS 2</entry>
                                <entry>N/A</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>D.D.A.N.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1991] D.D.A.N. no 18</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>LNCMFDA</entry>
                                <entry/>
                                <entry/>
                                <entry>2005 LNCMFDA 3</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>M.G.A.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2012] M.G.A.D. No. 28</entry>
                                <entry>N/A</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>M.L.B.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] M.L.B.D. No. 10</entry>
                                <entry>N/A</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>M.M.B.O.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2006] M.M.B.O. No. 1</entry>
                                <entry>N/A</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>N.B.E.S.D.</entry>
                                <entry>D.N.E.N.-B.</entry>
                                <entry>French</entry>
                                <entry>[1989] N.B.E.S.D. No. 38</entry>
                                <entry>[1993] D.N.E.N.-B. no 8</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>N.B.L.E.B.D.</entry>
                                <entry>D.C.T.E.N.-B.</entry>
                                <entry>French</entry>
                                <entry>[1995] N.B.L.E.B.D. No. 2</entry>
                                <entry>[2014] D.C.T.E.N.-B. no 7</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.N.E.N.-B.</entry>
                                <entry>N.B.E.S.D.</entry>
                                <entry>English</entry>
                                <entry>[1993] D.N.E.N.-B. no 8</entry>
                                <entry>[1989] N.B.E.S.D. No. 38</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.C.T.E.N.-B.</entry>
                                <entry>N.B.L.E.B.D.</entry>
                                <entry>English</entry>
                                <entry>[2014] D.C.T.E.N.-B. no 7</entry>
                                <entry>[1995] N.B.L.E.B.D. No. 2</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>N.B.H.R.B.I.D.</entry>
                                <entry>D.C.E.D.P.N.-B.</entry>
                                <entry>French</entry>
                                <entry>[1974] N.B.H.R.B.I.D. No. 1</entry>
                                <entry>[1997] D.C.E.D.P.N.-B. no 2</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.C.E.D.P.N.-B.</entry>
                                <entry>N.B.H.R.B.I.D.</entry>
                                <entry>English</entry>
                                <entry>[1997] D.C.E.D.P.N.-B. no 2</entry>
                                <entry>[1974] N.B.H.R.B.I.D. No. 1</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>N.B.I.R.D.</entry>
                                <entry>D.R.I.N.-B.</entry>
                                <entry>French</entry>
                                <entry>[1988] N.B.I.R.D. No. 1</entry>
                                <entry>[1988] D.R.I.N.-B. No 1</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>N.B.L.E.B.D.</entry>
                                <entry>D.C.T.E.N.-B.</entry>
                                <entry>French</entry>
                                <entry>[1995] N.B.L.E.B.D. No. 2</entry>
                                <entry>[1999] D.C.T.E.N.-B. no 90</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.R.I.N.-B.</entry>
                                <entry>N.B.I.R.D.</entry>
                                <entry>English</entry>
                                <entry>[1988] D.R.I.N.-B. No 1/[1993] D.R.I.N.B. no 18</entry>
                                <entry>[1988] N.B.I.R.D. No. 1</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.C.T.E.N.-B.</entry>
                                <entry>N.B.L.E.B.D.</entry>
                                <entry>English</entry>
                                <entry>[1999] D.C.T.E.N.-B. no 90</entry>
                                <entry>[1995] N.B.L.E.B.D. No. 2</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>N.B.L.A.A.</entry>
                                <entry>D.A.T.N.-B.</entry>
                                <entry>French</entry>
                                <entry>[1999] N.B.L.A.A. No. 43</entry>
                                <entry>[2009] D.A.T.N.-B. no 14</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.A.T.N.-B.</entry>
                                <entry>N.B.L.A.A.</entry>
                                <entry>English</entry>
                                <entry>[2009] D.A.T.N.-B. no 14</entry>
                                <entry>[1999] N.B.L.A.A. No. 43</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>N.B.L.E.B.D.</entry>
                                <entry>D.C.T.E.N.-B.</entry>
                                <entry>French</entry>
                                <entry>[2010] N.B.L.E.B.D. No. 42</entry>
                                <entry>[2000] D.C.T.E.N.-B. no 58</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.C.T.E.N.-B.</entry>
                                <entry>N.B.L.E.B.D.</entry>
                                <entry>English</entry>
                                <entry>[2000] D.C.T.E.N.-B. no 58</entry>
                                <entry>[2010] N.B.L.E.B.D. No. 42</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>N.B.P.S.L.R.D.</entry>
                                <entry>D.R.T.S.P.N.-B.</entry>
                                <entry>French</entry>
                                <entry>[1975] N.B.P.S.L.R.D. No. 4</entry>
                                <entry>[1993] D.R.T.S.P.N.-B. no 1</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>N.H.R.B.I.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1988] N.H.R.B.I.D. No. 1</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>N.L.H.R.B.I.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2009] N.L.H.R.B.I.D. No. 5</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>N.L.L.A.A.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2011] N.L.L.A.A. No. 17,</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Nfld. L.A.A.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2000] Nfld. L.A.A. No. 1 (Js prior to 2002)</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>N.L.L.R.B.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2006] N.L.L.R.B.D. No. 13,</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Nfld. L.R.B.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2003] Nfld. L.R.B.D. No. 21 (Js prior to 2004)</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>N.S.H.R.B.I.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] N.S.H.R.B.I.D. No. 3</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>N.S.F.I.P.P.A.R.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] N.S.F.I.P.P.A.R. No. 2</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>N.S.L.A.A.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2013] N.S.L.A.A. No. 5</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>N.S.L.R.B.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2003] N.S.L.R.B.D. No. 2</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>N.S.U.R.B.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2009] N.S.U.R.B.D. No. 187</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>N.W.T.L.A.A.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2013] N.W.T.L.A.A. No. 3</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.R.T.S.P.N.-B.</entry>
                                <entry>N.B.P.S.L.R.D.</entry>
                                <entry>English</entry>
                                <entry>[1993] D.R.T.S.P.N.-B. no 1</entry>
                                <entry>[1975] N.B.P.S.L.R.D. No. 4</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>N.B.L.E.B.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2009] N.B.L.E.B.D. No. 49</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>LNIIROC</entry>
                                <entry>LNOCRCVM</entry>
                                <entry>French</entry>
                                <entry>2013 LNIIROC 49</entry>
                                <entry>2013 LNOCRCVM 49</entry>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>LNOCRCVM</entry>
                                <entry>LNIIROC</entry>
                                <entry>English</entry>
                                <entry>2013 LNOCRCVM 49</entry>
                                <entry>2013 LNIIROC 49</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.A.G.C.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2010] O.A.G.C.D. No. 257</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.A.R.B.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2013] O.A.R.B.D. No. 264</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.C.C.B.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2006] O.C.C.B.D. No. 142</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.C.P.S.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] O.C.P.S.D. No. 10</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.C.R.A.T.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2000] O.C.R.A.T.D. No. 64</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>LNONCTD</entry>
                                <entry>LNONECD</entry>
                                <entry>French</entry>
                                <entry>2014 LNONCTD 4</entry>
                                <entry>2014 LNONECD 4</entry>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>LNONECD</entry>
                                <entry>LNONCTD</entry>
                                <entry>English</entry>
                                <entry>2014 LNONECD 4</entry>
                                <entry>2014 LNONCTD 4</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.E.A.B.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2000] O.E.A.B. No. 67</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.E.R.T.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] O.E.R.T.D. No. 9</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>LNONOEB</entry>
                                <entry>LNONECD</entry>
                                <entry>French</entry>
                                <entry>1988 LNONOEB 1</entry>
                                <entry>1998 LNONECD 11</entry>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>LNONECD</entry>
                                <entry>LNONOEB</entry>
                                <entry>English</entry>
                                <entry>1998 LNONECD 11</entry>
                                <entry>1988 LNONOEB 1</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.E.S.A.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] O.E.S.A.D. No. 294</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.G.S.B.A.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] O.G.S.B.A. No. 66</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.H.R.T.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] O.H.R.T.D. No. 281</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.H.R.B.I.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2000] O.H.R.B.I.D. No. 14</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.F.S.C.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] O.F.S.C.D. No. 78</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.F.S.C.I.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2000] O.F.S.C.I.D. No. 213</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.I.C.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1998] O.I.C.D. No. 110</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.I.P.C.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2013] O.I.P.C. No. 292; [1988] O.I.P.C. No. 1</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.L.A.A.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] O.L.A.A. No. 146; [1948] O.L.A.A. No. 4</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.L.A.T.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2013] O.L.A.T.D. No. 298; [2000] O.L.A.T.D. No. 418</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>OLRB Rep.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1983] OLRB Rep. December 1982; [1985] OLRB Rep. May
                                    690</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.L.R.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2013] O.L.R.D. No. 4376</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.M.B.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] O.M.B.D. No. 353</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>D.C.A.M.O.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1995] D.C.A.M.O. no 2251</entry>
                                <entry>This is a source with a selection of French sources but they
                                    do not have "parallels"</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.O.H.S.A.D</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] O.O.H.S.A.D. No. 18</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.P.E.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] O.P.E.D. No. 13</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>D.É.S.O.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1989] D.É.S.O. No 3</entry>
                                <entry>There are a small smattering of French decisions</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.P.S.G.B.A.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] O.P.S.G.B.A. No. 3</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.R.B.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] O.R.B.D. No. 1128</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.R.C.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2014] O.R.C.D. No. 11</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.R.H.T.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2000] O.R.H.T.D. No. 207</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>LNONLTB</entry>
                                <entry/>
                                <entry/>
                                <entry>2012 LNONLTB 1907</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>LNONOSC</entry>
                                <entry/>
                                <entry/>
                                <entry>1985 LNONOSC 496</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.W.S.I.A.T.D</entry>
                                <entry/>
                                <entry/>
                                <entry>[2013] O.W.S.I.A.T.D. No. 1989</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>P.E.I.H.R.B.I.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1978] P.E.I.H.R.B.I.D. No. 1</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>P.E.I.H.R.P.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2000] P.E.I.H.R.P.D. No. 1</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>P.E.I.L.A.A.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1996] P.E.I.L.A.A. No. 2</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>P.E.I.L.R.B.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1989] P.E.I.L.R.B.D. No. 1</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>P.R.B.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1990] P.R.B.D. No. 8</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>LNCTDFP</entry>
                                <entry>LNCPSST</entry>
                                <entry>English</entry>
                                <entry>2010 LNCTDFP 6</entry>
                                <entry>2009 LNCPSST 33</entry>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>LNCPSST</entry>
                                <entry>LNCTDFP</entry>
                                <entry>French</entry>
                                <entry>2009 LNCPSST 33</entry>
                                <entry>2010 LNCTDFP 6</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>T.S.E.D.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1980] T.S.E.D.D. No. 17</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>LNSARTQ</entry>
                                <entry/>
                                <entry/>
                                <entry>2014 LNSARTQ 126</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>S.L.A.A.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1999] S.L.A.A. No. 2</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>S.L.R.B.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1987] S.L.R.B.D. No. 1</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>S.M.B.A.A.C.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1999] S.M.B.A.A.C.D. No. 347</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>D.T.C.R.P.A.P.</entry>
                                <entry>C.A.P.P.R.T.D.</entry>
                                <entry>English</entry>
                                <entry>[2012] D.T.C.R.P.A.P. no 1</entry>
                                <entry>[2012] C.A.P.P.R.T.D. No. 1</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>R.S.D.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2004] R.S.D.D. No. 6</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>C.I.T.T.</entry>
                                <entry>T.C.C.E.</entry>
                                <entry>French</entry>
                                <entry>[2011] C.I.T.T. No. 17</entry>
                                <entry>[2011] T.C.C.E. no 17</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>T.C.C.E.</entry>
                                <entry>C.I.T.T.</entry>
                                <entry>English</entry>
                                <entry>[2011] T.C.C.E. no 17</entry>
                                <entry>[2011] C.I.T.T. No. 17</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Q.H.R.T.J.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2012] Q.H.R.T.J. No. 5</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>J.T.D.P.Q.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2012] J.T.D.P.Q. no 5</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>D.T.P.Q.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1989] D.T.P.Q. no 2</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>LNQCTAQ</entry>
                                <entry/>
                                <entry/>
                                <entry>2004 LNQCTAQ 1998</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>LNQCTAQ</entry>
                                <entry/>
                                <entry/>
                                <entry>2004 LNQCTAQ 1999</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>LNQCTAQ</entry>
                                <entry/>
                                <entry/>
                                <entry>2006 LNQCTAQ 3795</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>LNQCTAQ</entry>
                                <entry/>
                                <entry/>
                                <entry>2010 LNQCTAQ 217</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>D.T.T.Q.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2004] D.T.T.Q. no 17</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Y.H.R.B.A.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[2010] Y.H.R.B.A.D. No. 1</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Y.L.A.A.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1995] Y.L.A.A. No. 1</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O.W.C.A.T.D.</entry>
                                <entry/>
                                <entry/>
                                <entry>[1988] O.W.C.A.T.D. No. 1046</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>R.A.D.D.</entry>
                                <entry>D.S.A.R.</entry>
                                <entry>French</entry>
                                <entry>[2014] R.A.D.D. No. 66</entry>
                                <entry>[2014] D.S.A.R. no 66</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>D.S.A.R.</entry>
                                <entry>R.A.D.D.</entry>
                                <entry/>
                                <entry>[2014] D.S.A.R. no 66</entry>
                                <entry>[2014] R.A.D.D. No. 66</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>T.B.R.</entry>
                                <entry/>
                                <entry/>
                                <entry>(1961), 2 T.B.R. 186</entry>
                                <entry/>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
                <p>Below Table is for <b>CA05</b></p>
                <table frame="all" pgwide="90">
                    <tgroup cols="6">
                        <thead>
                            <row>
                                <entry align="center">Primary Language</entry>
                                <entry align="center">Primary ciatation</entry>
                                <entry align="center">Alternate Citation</entry>
                                <entry align="center">Alternate Language</entry>
                                <entry align="center">Primary Format</entry>
                                <entry align="center">Alternate Format</entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry/>
                                <entry>SA; RSA</entry>
                                <entry/>
                                <entry/>
                                <entry>SA 2000, c. A-26.5; RSA 2000, c. A-1 </entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>S.B.C.; R.S.B.C.</entry>
                                <entry/>
                                <entry/>
                                <entry>S.B.C. 1997, c. 1; R.S.B.C. 1996, c. 1 </entry>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>S.C.</entry>
                                <entry>L.C.</entry>
                                <entry>French</entry>
                                <entry>S.C. 2012, c. 1</entry>
                                <entry>L.C. 2012, ch. 1</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>c.</entry>
                                <entry>ch.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>R.S.C.</entry>
                                <entry>L.R.C.</entry>
                                <entry>French</entry>
                                <entry>R.S.C. 1985, c. A-1; R.S.C. 1970, c. A-14</entry>
                                <entry>L.R.C. 1985, ch. A-1; S.R.C. 1970, ch. A-14 </entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>c.</entry>
                                <entry>ch.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>s.</entry>
                                <entry>art.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>L.C.</entry>
                                <entry>S.C.</entry>
                                <entry>English</entry>
                                <entry>L.C. 2012, ch. 1</entry>
                                <entry>S.C. 2012, c. 1</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>ch.</entry>
                                <entry>c.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>L.R.C.</entry>
                                <entry>R.S.C.</entry>
                                <entry>English</entry>
                                <entry>L.R.C. 1985, ch. A-1; S.R.C. 1970, ch. A-14; R.S.C. 1985, c.
                                    1 (5e suppl.), art. 69</entry>
                                <entry>R.S.C. 1985, c. A-1; R.S.C. 1970, c. A-14; L.R.C. 1985, c. 1
                                    (5e suppl.), s. 69</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>ch.</entry>
                                <entry>c.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>art.</entry>
                                <entry>s.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>C.C.S.M.; R.S.M.; S.M.</entry>
                                <entry/>
                                <entry/>
                                <entry>C.C.S.M., c. W210; R.S.M. 1987, c. W210; S.M. 2011, c. 26 </entry>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>R.S.N.B.</entry>
                                <entry>L.R.N.-B.</entry>
                                <entry>French</entry>
                                <entry>R.S.N.B. 2011, c. 100 </entry>
                                <entry>L.R.N.-B. 2011, ch. 100 </entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>c.</entry>
                                <entry>ch.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>S.N.B.</entry>
                                <entry>L.N.-B.</entry>
                                <entry>French</entry>
                                <entry>S.N.B. 2012, c. 19</entry>
                                <entry>L.N.-B. 2012, ch. 19</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>c.</entry>
                                <entry>ch.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>2012, c. 19</entry>
                                <entry>1981, ch. B-9.1</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>L.R.N.-B.</entry>
                                <entry>R.S.N.B.</entry>
                                <entry>English</entry>
                                <entry>L.R.N.-B. 2011, ch. 100 </entry>
                                <entry>R.S.N.B. 2011, c. 100 </entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>ch.</entry>
                                <entry>c.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>L.N.-B.</entry>
                                <entry>S.N.B.</entry>
                                <entry>English</entry>
                                <entry>L.N.-B. 1981, ch. B-9.1</entry>
                                <entry>S.N.B. 1981, c. B-9.1</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>1981</entry>
                                <entry>2012</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>ch.</entry>
                                <entry>c.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>B-9.1</entry>
                                <entry>19</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>RSNL; SNL</entry>
                                <entry/>
                                <entry/>
                                <entry>RSNL 1990, c. Y-1, s. 21; SNL 2016, c. A-1.02, s. 10</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>R.S.N.; S.N.</entry>
                                <entry/>
                                <entry/>
                                <entry>R.S.N. 1990, c. U-3; S.N. 1999, c. 1</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>R.S.N.W.T.; S.N.W.T.</entry>
                                <entry/>
                                <entry/>
                                <entry>R.S.N.W.T. 1988, c. E-10; S.N.W.T. 1994, c. 26</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>R.S.N.S.; S.N.S.</entry>
                                <entry/>
                                <entry/>
                                <entry>R.S.N.S. 1989, c. 351; S.N.S. 1995-96, c. 12</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>S.N.W.T. (NU); R.S.N.W.T. (NU); S.Nu.</entry>
                                <entry/>
                                <entry/>
                                <entry>S.N.W.T. 1994, c. 26 (NU); R.S.N.W.T. 1988, c. L-9 (NU);
                                    S.Nu. 2005, c. 2</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>R.S.O.; S.O.</entry>
                                <entry/>
                                <entry/>
                                <entry>R.S.O. 1990, c. A.2; S.O. 1996, c. 17</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>R.S.P.E.I.; S.P.E.I.</entry>
                                <entry/>
                                <entry/>
                                <entry>R.S.P.E.I. 1988, c. A-1; S.P.E.I. 2013, c. 39</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>CQLR</entry>
                                <entry>RLRQ</entry>
                                <entry>French</entry>
                                <entry>CQLR, c. A-2.1</entry>
                                <entry>RLRQ, c. A-2.1 </entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>c.</entry>
                                <entry>c.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>C.C.Q.</entry>
                                <entry>C.C.Q.</entry>
                                <entry>French</entry>
                                <entry>C.C.Q.-1992</entry>
                                <entry>C.C.Q.-1992</entry>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>S.Q.</entry>
                                <entry>L.Q.</entry>
                                <entry>French</entry>
                                <entry>S.Q. 2007, c. 11</entry>
                                <entry>L.Q. 2007, c. 38 </entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>c. 11</entry>
                                <entry>c. 38</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>R.S.Q.</entry>
                                <entry>L.R.Q.</entry>
                                <entry>French</entry>
                                <entry>R.S.Q,. c. M-1.2</entry>
                                <entry>L.R.Q., c. I-3 </entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>c. M-1.2</entry>
                                <entry>c. I-3 </entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>RLRQ</entry>
                                <entry>CQLR</entry>
                                <entry>English</entry>
                                <entry>RLRQ, c. A-2.1 </entry>
                                <entry>CQLR, c. A-2.1</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>c.</entry>
                                <entry>c.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>C.C.Q.</entry>
                                <entry>C.C.Q.</entry>
                                <entry>English</entry>
                                <entry>C.C.Q.-1992</entry>
                                <entry>C.C.Q.-1992</entry>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>L.Q.</entry>
                                <entry>S.Q.</entry>
                                <entry>English</entry>
                                <entry>L.Q. 2007, c. 38 </entry>
                                <entry>S.Q. 2007, c. 11</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>c. 38 </entry>
                                <entry>c. 11</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>L.R.Q.</entry>
                                <entry>R.S.Q.</entry>
                                <entry>English</entry>
                                <entry>L.R.Q., c. I-3 </entry>
                                <entry>R.S.Q,. c. M-1.2</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>c. I-3 </entry>
                                <entry>c. M-1.2</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>R.S.S.; S.S.</entry>
                                <entry/>
                                <entry/>
                                <entry>S.S. 2009, c. M-20.01; R.S.S. 1978, c. A-3</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>R.S.Y.; S.Y.</entry>
                                <entry/>
                                <entry/>
                                <entry>S.Y. 2013, c. 6; R.S.Y. 2002, c. 1 </entry>
                                <entry/>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
                <table>
                    <title>Terms Conversion for CA05</title>
                    <tgroup cols="2">
                        <thead>
                            <row>
                                <entry>English Terms</entry>
                                <entry>French Terms</entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>s.</entry>
                                <entry>art.</entry>
                            </row>
                            <row>
                                <entry>No.</entry>
                                <entry>no</entry>
                            </row>
                            <row>
                                <entry>c. </entry>
                                <entry>ch.</entry>
                            </row>
                            <row>
                                <entry>Appendix</entry>
                                <entry>appendice</entry>
                            </row>
                            <row>
                                <entry>Long Title</entry>
                                <entry>Titre intégral</entry>
                            </row>
                            <row>
                                <entry>Preamble</entry>
                                <entry>Préambule</entry>
                            </row>
                            <row>
                                <entry>Enactment Clause</entry>
                                <entry>Formule d'édiction</entry>
                            </row>
                            <row>
                                <entry>Schedule</entry>
                                <entry>annexe</entry>
                            </row>
                            <row>
                                <entry>(2nd Supp.)</entry>
                                <entry>(2e suppl.)</entry>
                            </row>
                            <row>
                                <entry>(4th Supp.)</entry>
                                <entry>(4e suppl.)</entry>
                            </row>
                            <row>
                                <entry>(3rd Supp.)</entry>
                                <entry>(3e suppl.)</entry>
                            </row>
                            <row>
                                <entry>(5th Supp.)</entry>
                                <entry>(5e suppl.)</entry>
                            </row>
                            <row>
                                <entry>TP</entry>
                                <entry>DT</entry>
                            </row>
                            <row>
                                <entry>RP</entry>
                                <entry>DC</entry>
                            </row>
                            <row>
                                <entry>Repeal Sch</entry>
                                <entry>ann abrogative</entry>
                            </row>
                            <row>
                                <entry>Repeal Schedules</entry>
                                <entry>Annexe abrogratives</entry>
                            </row>
                            <row>
                                <entry>Repealed</entry>
                                <entry>Abrogée</entry>
                            </row>
                            <row>
                                <entry>Form</entry>
                                <entry>formule</entry>
                            </row>
                            <row>
                                <entry>Part</entry>
                                <entry>Partie</entry>
                            </row>
                            <row>
                                <entry>Table of Contents</entry>
                                <entry>Table des matières</entry>
                            </row>
                            <row>
                                <entry>Introduction</entry>
                                <entry>Introduction</entry>
                            </row>
                            <row>
                                <entry>Index</entry>
                                <entry>Indice</entry>
                            </row>
                            <row>
                                <entry>Sch</entry>
                                <entry>Ann</entry>
                            </row>
                            <row>
                                <entry>SCH</entry>
                                <entry>ANN</entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
                <p>Below Table is for <b>CA06</b> and <b>CA07</b></p>
                <table frame="all" pgwide="95">
                    <tgroup cols="6">
                        <thead>
                            <row>
                                <entry align="center">Primary Language</entry>
                                <entry align="center">Primary ciatation</entry>
                                <entry align="center">Alternate Citation</entry>
                                <entry align="center">Alternate Language</entry>
                                <entry align="center">Primary Format</entry>
                                <entry align="center">Alternate Format</entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry/>
                                <entry>Alta. Reg.</entry>
                                <entry/>
                                <entry/>
                                <entry>Alta. Reg. 272/96</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>B.C. Reg</entry>
                                <entry/>
                                <entry/>
                                <entry>B.C. Reg. 337/95</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>SI</entry>
                                <entry>TR</entry>
                                <entry>French</entry>
                                <entry>SI/2011-30 </entry>
                                <entry>TR/2011-30, </entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>Preamble</entry>
                                <entry>Préambule</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Long Title</entry>
                                <entry>Titre intégral</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Short Title</entry>
                                <entry>Titre abrégé</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Enactment Clause</entry>
                                <entry>Formule d'édiction</entry>
                                <entry/>
                                <entry>SI/2004-134 Enactment Clause</entry>
                                <entry>TR/2004-134 Formule d'édiction</entry>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>C.R.C.</entry>
                                <entry>C.R.C.</entry>
                                <entry>French</entry>
                                <entry>C.R.C., c. 870</entry>
                                <entry> C.R.C., ch. 870</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>c.</entry>
                                <entry>ch.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Schedule</entry>
                                <entry>annexe</entry>
                                <entry/>
                                <entry>C.R.C., c. 285, Schedule I</entry>
                                <entry>C.R.C., c. 285, annexe I</entry>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>SOR</entry>
                                <entry>DORS</entry>
                                <entry>French</entry>
                                <entry>SOR/89-207</entry>
                                <entry>DORS/89-207</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>Sch.</entry>
                                <entry>Annexe</entry>
                                <entry>French</entry>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>TR</entry>
                                <entry>SI</entry>
                                <entry>English</entry>
                                <entry>TR/2011-30, </entry>
                                <entry>SI/2011-30 </entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>Préambule</entry>
                                <entry>Preamble</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Titre intégral</entry>
                                <entry>Long Title</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Titre abrégé</entry>
                                <entry>Short Title</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Formule d'édiction</entry>
                                <entry>Enactment Clause</entry>
                                <entry/>
                                <entry>TR/2004-134 Formule d'édiction</entry>
                                <entry>SI/2004-134 Enactment Clause</entry>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>C.R.C.</entry>
                                <entry>C.R.C.</entry>
                                <entry>English</entry>
                                <entry>C.R.C., ch. 870</entry>
                                <entry>C.R.C., c. 870 </entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>ch.</entry>
                                <entry>c.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>annexe</entry>
                                <entry>Schedule</entry>
                                <entry/>
                                <entry>C.R.C., c. 285, annexe I</entry>
                                <entry>C.R.C., c. 285, Schedule I</entry>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>DORS</entry>
                                <entry>SOR</entry>
                                <entry>English</entry>
                                <entry>DORS/89-207</entry>
                                <entry> SOR/89-207</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>Annexe</entry>
                                <entry>Sch.</entry>
                                <entry>English</entry>
                                <entry/>
                                <entry> </entry>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>Man. Reg. 19/99</entry>
                                <entry/>
                                <entry/>
                                <entry>Man. Reg. 19/99</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>N.B. Reg.</entry>
                                <entry>Règl. du N.-B.</entry>
                                <entry>French</entry>
                                <entry>N.B. Reg. 82-222</entry>
                                <entry>Règl. du N.-B. 82-222</entry>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>Règl. du N.-B.</entry>
                                <entry>N.B. Reg.</entry>
                                <entry>English</entry>
                                <entry>Règl. du N.-B. 82-222</entry>
                                <entry>N.B. Reg. 82-222</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>C.N.L.R.</entry>
                                <entry/>
                                <entry/>
                                <entry>C.N.L.R. 1139/96 </entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>N.L.R.</entry>
                                <entry/>
                                <entry/>
                                <entry> N.L.R. 11/07</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>R.R.N.W.T.</entry>
                                <entry/>
                                <entry/>
                                <entry>R.R.N.W.T. 1990, c. A-1</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>N.W.T. Reg.</entry>
                                <entry/>
                                <entry/>
                                <entry>N.W.T. Reg. 085-95</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>N.S. Reg.</entry>
                                <entry/>
                                <entry/>
                                <entry>N.S. Reg. 1/97</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>R.R.N.W.T. 1990</entry>
                                <entry/>
                                <entry/>
                                <entry>R.R.N.W.T. 1990, c. A-1, </entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Nu. Reg.</entry>
                                <entry/>
                                <entry/>
                                <entry>Nu. Reg. 085-95</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>R.R.O. 1990, Reg.</entry>
                                <entry/>
                                <entry/>
                                <entry>R.R.O. 1990, Reg. 17</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>O. Reg.</entry>
                                <entry/>
                                <entry/>
                                <entry>O. Reg. 191/11</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>P.E.I. Reg.</entry>
                                <entry/>
                                <entry/>
                                <entry>P.E.I. Reg. EC301/85</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>RSQ </entry>
                                <entry>LRQ</entry>
                                <entry>French</entry>
                                <entry>RSQ c.A-2.1 r1, </entry>
                                <entry>LRQ ch.A-2.1 r1, </entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>c.</entry>
                                <entry>ch.</entry>
                                <entry/>
                                <entry> </entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>r1</entry>
                                <entry>r1</entry>
                                <entry/>
                                <entry> </entry>
                                <entry> </entry>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>RSQ,CCQ,</entry>
                                <entry>LRQ,CCQ</entry>
                                <entry>French</entry>
                                <entry>RSQ,CCQ,R1 </entry>
                                <entry>LRQ,CCQ,R1 </entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>R</entry>
                                <entry>R</entry>
                                <entry/>
                                <entry> </entry>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>RSQ,CCR</entry>
                                <entry>LRQ,CCR</entry>
                                <entry>French</entry>
                                <entry>RSQ,CCR,R1 </entry>
                                <entry>LRQ,CCR,R1</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>R</entry>
                                <entry>R</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>CQLR</entry>
                                <entry>RLRQ</entry>
                                <entry>French</entry>
                                <entry>CQLR, c. A-2.1, r.1.1</entry>
                                <entry>RLRQ, c. A-2.1, r.1.1</entry>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>LRQ</entry>
                                <entry>RSQ </entry>
                                <entry>English</entry>
                                <entry>LRQ ch.A-2.1 r1, </entry>
                                <entry>RSQ c.A-2.1 r1, </entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>ch.</entry>
                                <entry>c. </entry>
                                <entry/>
                                <entry> </entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>r1</entry>
                                <entry>r1 </entry>
                                <entry/>
                                <entry> </entry>
                                <entry> </entry>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>LRQ,CCQ</entry>
                                <entry>RSQ,CCQ,</entry>
                                <entry>English</entry>
                                <entry>LRQ,CCQ,R1</entry>
                                <entry>RSQ,CCQ,R1</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>R</entry>
                                <entry>R</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>LRQ,CCR</entry>
                                <entry>RSQ,CCR</entry>
                                <entry>English</entry>
                                <entry>LRQ,CCR,R1 </entry>
                                <entry>RSQ,CCR,R1</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>R</entry>
                                <entry>R</entry>
                                <entry/>
                                <entry> </entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>S. Reg.</entry>
                                <entry/>
                                <entry/>
                                <entry>S. Reg. 78/66</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>R.R.S. c. S-15.1, Reg</entry>
                                <entry/>
                                <entry/>
                                <entry>R.R.S. c. S-15.1, Reg 2 </entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Sask. O.C.</entry>
                                <entry/>
                                <entry/>
                                <entry>Sask. O.C. 109/76</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Y.O.I.C. </entry>
                                <entry/>
                                <entry/>
                                <entry>Y.O.I.C. 2013/207</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Y.C.O.</entry>
                                <entry/>
                                <entry/>
                                <entry>Y.C.O. 2011/09 </entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Y.F.S.O.</entry>
                                <entry/>
                                <entry/>
                                <entry>Y.F.S.O. 2010/04</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Y.M.O.</entry>
                                <entry/>
                                <entry/>
                                <entry>Y.M.O. 2012/15</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Y.S.F.V.O.</entry>
                                <entry/>
                                <entry/>
                                <entry>Y.S.F.V.O. 2011/01</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Y.W.C.H.S.B.O.</entry>
                                <entry/>
                                <entry/>
                                <entry>Y.W.C.H.S.B.O. 2011/01</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Y.W.C.B.O.</entry>
                                <entry/>
                                <entry/>
                                <entry>Y.W.C.B.O. 1990/002</entry>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>RLRQ</entry>
                                <entry>CQLR</entry>
                                <entry>English</entry>
                                <entry>RLRQ, ch. A-6.002, r. 1</entry>
                                <entry>CQLR, c. A-6.002, r. 1</entry>
                            </row>



                        </tbody>
                    </tgroup>
                </table>
                <note>Below mentioned short term citations come any combinations with the mandatory
                    (primary or alternative citations already mentioned in above conversion table)
                    citations then short terms ciatation should be converetd according to below
                    table:</note>
                <table>
                    <title>Terms Conversion for CA06 and CA07</title>
                    <tgroup cols="2">
                        <thead>
                            <row>
                                <entry>English Terms</entry>
                                <entry>French Terms</entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>s.</entry>
                                <entry>art.</entry>
                            </row>
                            <row>
                                <entry>No.</entry>
                                <entry>no</entry>
                            </row>
                            <row>
                                <entry>c.</entry>
                                <entry>ch.</entry>
                            </row>
                            <row>
                                <entry>Appendix</entry>
                                <entry>appendice</entry>
                            </row>
                            <row>
                                <entry>Preamble</entry>
                                <entry>Préambule</entry>
                            </row>
                            <row>
                                <entry>Enactment Clause</entry>
                                <entry>Formule d'édiction</entry>
                            </row>
                            <row>
                                <entry>Schedule</entry>
                                <entry>annexe</entry>
                            </row>
                            <row>
                                <entry>Long Title</entry>
                                <entry>Titre intégral</entry>
                            </row>
                            <row>
                                <entry>(2nd Supp.)</entry>
                                <entry>(2e suppl.)</entry>
                            </row>
                            <row>
                                <entry>(3rd Supp.)</entry>
                                <entry>(3e suppl.)</entry>
                            </row>
                            <row>
                                <entry>(4th Supp.)</entry>
                                <entry>(4e suppl.)</entry>
                            </row>
                            <row>
                                <entry>(5th Supp.)</entry>
                                <entry>(5e suppl.)</entry>
                            </row>
                            <row>
                                <entry>TP</entry>
                                <entry>DT</entry>
                            </row>
                            <row>
                                <entry>RP</entry>
                                <entry>DC</entry>
                            </row>
                            <row>
                                <entry>Repeal Sch</entry>
                                <entry>ann abrogative</entry>
                            </row>
                            <row>
                                <entry>Repeal Schedules</entry>
                                <entry>Annexe abrogratives</entry>
                            </row>
                            <row>
                                <entry>Repealed</entry>
                                <entry>Abrogée</entry>
                            </row>
                            <row>
                                <entry>Form</entry>
                                <entry>formule</entry>
                            </row>
                            <row>
                                <entry>Part</entry>
                                <entry>Partie</entry>
                            </row>
                            <row>
                                <entry>Table of Contents</entry>
                                <entry>Table des matières</entry>
                            </row>
                            <row>
                                <entry>Introduction</entry>
                                <entry>Introduction</entry>
                            </row>
                            <row>
                                <entry>Index</entry>
                                <entry>Indice</entry>
                            </row>
                            <row>
                                <entry>Sch</entry>
                                <entry>Ann</entry>
                            </row>
                            <row>
                                <entry>SCH</entry>
                                <entry>ANN</entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
                <p>Below Table is for <b>CA08</b>:</p>
                <table frame="all" pgwide="95">
                    <tgroup cols="6">
                        <thead>
                            <row>
                                <entry align="center">Primary Language</entry>
                                <entry align="center">Primary ciatation</entry>
                                <entry align="center">Alternate Citation</entry>
                                <entry align="center">Alternate Language</entry>
                                <entry align="center">Primary Format</entry>
                                <entry align="center">Alternate Format</entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>English</entry>
                                <entry>R.S.C.</entry>
                                <entry>L.R.C.</entry>
                                <entry>French</entry>
                                <entry>R.S.C. 1985, App. II, No. 3 </entry>
                                <entry>L.R.C. 1985, appendice II, no 22</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>App. II</entry>
                                <entry>appendice II</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>No.</entry>
                                <entry>no</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>s. L</entry>
                                <entry>art. L</entry>
                                <entry/>
                                <entry>R.S.C. 1985, Appendix II, No. 4, s. L</entry>
                                <entry>L.R.C. 1985, appendice II, no 4, art. L</entry>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>George III </entry>
                                <entry>George III </entry>
                                <entry>French</entry>
                                <entry>31 George III, c. 31 (U.K.)</entry>
                                <entry>14 George III, ch. 83 (R.-U.)</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>c.</entry>
                                <entry>ch.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>(U.K.)</entry>
                                <entry>(R.-U.)</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>Victoria</entry>
                                <entry>Victoria</entry>
                                <entry>French</entry>
                                <entry>3-4 Victoria, c. 35 (U.K.)</entry>
                                <entry>3-4 Victoria, ch. 35 (R.-U.)</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>c.</entry>
                                <entry>ch.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>(U.K.)</entry>
                                <entry>(R.-U.)</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>Elizabeth II</entry>
                                <entry>Elizabeth II</entry>
                                <entry>French</entry>
                                <entry>23-24 Elizabeth II, c. 28 (Canada)</entry>
                                <entry>23 Elizabeth II, ch. 13 (Canada)</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>c.</entry>
                                <entry>ch.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>(Canada)</entry>
                                <entry>(Canada)</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>George VI</entry>
                                <entry>George VI</entry>
                                <entry>French</entry>
                                <entry>13 George VI, c. 81 (U.K.)</entry>
                                <entry>14 George VI, ch. 6 (R.-U.)</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>c.</entry>
                                <entry>ch.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>(U.K.)</entry>
                                <entry>(R.-U.)</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>George V</entry>
                                <entry>George V</entry>
                                <entry>French</entry>
                                <entry>22 George V, c. 4 (U.K.)</entry>
                                <entry>22 George V, ch. 4 (R.-U.)</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>c.</entry>
                                <entry>ch.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>(U.K.)</entry>
                                <entry>(R.-U.)</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>English</entry>
                                <entry>Edward VII</entry>
                                <entry>Edward VII</entry>
                                <entry>French</entry>
                                <entry>7 Edward VII, c. 11 (U.K.)</entry>
                                <entry>7 Edouard VII, ch. 11 (R.-U.)</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>c.</entry>
                                <entry>ch.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>(U.K.)</entry>
                                <entry>(R.-U.)</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>L.R.C.</entry>
                                <entry>R.S.C.</entry>
                                <entry>English</entry>
                                <entry>L.R.C. 1985, appendice II, no 22</entry>
                                <entry>R.S.C. 1985, Appendix II, No. 3 </entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>appendice II</entry>
                                <entry>Appendix II</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>George III </entry>
                                <entry>George III </entry>
                                <entry>English</entry>
                                <entry>14 George III, ch. 83 (R.-U.)</entry>
                                <entry>31 George III, c. 31 (U.K.)</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>ch.</entry>
                                <entry>c.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>Victoria </entry>
                                <entry>Victoria </entry>
                                <entry>English</entry>
                                <entry>3-4 Victoria, ch. 35 (R.-U.)</entry>
                                <entry>3-4 Victoria, c. 35 (U.K.)</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>ch.</entry>
                                <entry>c.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>(R.-U.)</entry>
                                <entry>(U.K.)</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>Elizabeth II </entry>
                                <entry>Elizabeth II </entry>
                                <entry>English</entry>
                                <entry>23 Elizabeth II, ch. 13 (Canada)</entry>
                                <entry>23-24 Elizabeth II, c. 28 (Canada)</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>ch.</entry>
                                <entry>c.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>(Canada)</entry>
                                <entry>(Canada)</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>George VI</entry>
                                <entry>George VI</entry>
                                <entry>English</entry>
                                <entry>14 George VI, ch. 6 (R.-U.)</entry>
                                <entry>13 George VI, c. 81 (U.K.)</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>ch.</entry>
                                <entry>c.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>(R.-U.)</entry>
                                <entry>(U.K.)</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>George V</entry>
                                <entry>George V</entry>
                                <entry>English</entry>
                                <entry>22 George V, ch. 4 (R.-U.)</entry>
                                <entry>22 George V, c. 4 (U.K.)</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>ch.</entry>
                                <entry>c.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>(R.-U.)</entry>
                                <entry>(U.K.)</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>Edouard VII</entry>
                                <entry>Edward VII</entry>
                                <entry>English</entry>
                                <entry>7 Edouard VII, ch. 11 (R.-U.)</entry>
                                <entry>7 Edward VII, c. 11 (U.K.)</entry>
                            </row>
                            <row>
                                <entry/>
                                <entry>ch.</entry>
                                <entry>c.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>(R.-U.)</entry>
                                <entry>(U.K.)</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry>French</entry>
                                <entry>art.</entry>
                                <entry>s.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>no</entry>
                                <entry>No.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>ch.</entry>
                                <entry>c.</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>appendice</entry>
                                <entry>Appendix</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Titre intégral</entry>
                                <entry>Long Title</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Préambule</entry>
                                <entry>Preamble</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Formule d'édiction</entry>
                                <entry>Enactment Clause</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>annexe</entry>
                                <entry>Schedule</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>(2e suppl.)</entry>
                                <entry>(2nd Supp.)</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>(3e suppl.)</entry>
                                <entry>(3rd Supp.)</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>(4e suppl.)</entry>
                                <entry>(4th Supp.)</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>(5e suppl.)</entry>
                                <entry>(5th Supp.)</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>DT</entry>
                                <entry>TD</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>DC</entry>
                                <entry>RP</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>ann abrogative</entry>
                                <entry>Repeal Sch</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Annexe abrogratives</entry>
                                <entry>Repeal Schedules</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Abrogée</entry>
                                <entry>Repealed</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>formule</entry>
                                <entry>Form</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Partie</entry>
                                <entry>Part</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                            <row>
                                <entry/>
                                <entry>Table des matières</entry>
                                <entry>Table of Contents</entry>
                                <entry/>
                                <entry/>
                                <entry/>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
            </section>
            <section>
                <title>Changes</title>
                <p>2017-04-06: <ph id="change_20170406_RS">updated Alternate Format (L.N.-B. 1981,
                        ch. B-9.1 changed to L.N.-B. 2012, ch. 19 and S.N.B. 2012, c. 19 changed to
                        S.N.B. 1981, c. B-9.1) for corresponding of Primary Format (S.N.B. 2012, c.
                        19 and L.N.-B. 1981, ch. B-9.1) for CA05. [Webstar #6834330]</ph>
                </p>
                <p>2017-03-29: <ph id="change_20170329_SS">Updated references in the table of
                        L.R.N.B. to L.R.N.-B. and L.N.B. to L.N.-B. for CA05.</ph> [Webstar
                    #6834330]</p>
                <p>2017-03-15: <ph id="change_20170315_SS"><b>For CA05</b> alternate language
                        abbreviation for changed from R.S.N.L; S.N.L. to RSNL; SNL (removed
                        periods). Webstar #6750120</ph></p>
                <p>2017-02-06: <ph id="change_20170206_RS">Added some French to English terms for
                        translation of the citation inside the table for CA06 and CA07 i.e. <b>ch.
                            A-6.002, r. 1</b></ph></p>
                <p>2016-11-10: <ph id="change_20161110_AS"><b>For CA05</b>alternate language
                        abbreviation for R.S.C 1970 changed to S.R.C. Webstar #6714384</ph></p>
                <p>2016-07-07: <ph id="change_20160707_AS"><b>For CA05 and CA06</b>- Block RHS link
                        to alternate version for given DPSI values</ph></p>
                <p>2015-02-23: <ph id="change_20150223_SEP">Updated Scenario for CA02, when
                            <b>"DOC-ID"</b> used with <b>"DOCUMENT"</b> service,
                            <targetxml>proc:param/@name="targetdoclang"</targetxml> should be
                        included. RFA# 2201, Applicable on CA02.</ph></p>
                <p>2015-02-19: <ph id="change_20150219_SEP">Updated Scenario for CA02,
                            <b>"DOC-ID"</b> should be used with <b>"DOCUMENT"</b> service. RFA#
                        1873, Applicable on CA02.</ph></p>
                <p>2015-02-13: <ph id="change_20150213_PS">Updated citation <b>R.S.N.B.</b>, added
                        period in the last. RFA# 200, Applicable on CA05.</ph></p>
                <p>2015-01-26: <ph id="change_20150126_SEP">Update proc:param name="normprotocol"
                        from value="jcite" to value="CAEditorial"; for CA01, CA02, CA04, CA05, CA06,
                        CA07 and CA08. R4.5 RFA #1873.</ph></p>
                <p>2014-12-19: <ph id="change_20141219_PS">Updated citation from <b>[2000] A.C.F.
                            No. 1985</b> to <b>[2000] A.C.F. no 1985</b>, for CA01.</ph></p>
                <p>2014-12-16: <ph id="change_20141216_SS">Added note for conversion of short term
                        citations and it's come any combinations with the mandatory (primary or
                        alternative citation) citations then short terms ciatation should be
                        converetd according to short table. Applicable on CA06-CA07.</ph></p>
                <p>2014-12-16: <ph id="change_20141216_PS">Added note to identify primary and
                        alternate language when primary and alternate citation are same. Applicable
                        on CA05-CA08.</ph></p>
                <p>2014-11-18: <ph id="change_20141118_AS">For CA02- Updated instructions for
                        "proc:param name="targetdoclang" value="" for both English and French. P4,
                        Db issue #365</ph></p>
                <p>2014-11-11: <ph id="change_20141111_PS">Added note and table <b>"Terms conversion
                            for CA05"</b> for terms translation, Applicable on CA05.</ph></p>
                <p>2014-11-06: <ph id="change_20141106_SSX">Added some english to french terms for
                        translation of the citation and also update <b>c. to ch. </b> in <b>CA06 and
                            CA07 table</b></ph></p>
                <p>2014-10-20: <ph id="change_20141020_SS">Updated the old citation inside the table
                        for <b>CA08</b> stream i.e. <b>appendice II</b> to <b>Appendix
                    II</b>.</ph></p>
                <p>2014-10-20: <ph id="change_20141020_AS">Updated instruction to remove english
                        version and add french version. P4 Db issue #324</ph></p>
                <p>2014-10-01: <ph id="change_20141001_SS">Added the new citation inside the table
                        for <b>CA08</b> stream i.e. <b>Annexe abrogratives</b> to <b>Repeal
                            Schedules</b>.</ph></p>
                <p>2014-10-01: <ph id="change_20141001_PS">Updated CA05 table for <b>"s."</b> to
                            <b>"art."</b> and <b>"art."</b> to <b>"s."</b> for citation
                            <b>"L.R.C."</b> and <b>"R.S.C."</b>. Also updated the citation
                            <b>"L.N.B."</b> to generate <b>ch.</b> to <b>c.</b>. Applicable on
                        CA05.</ph></p>
                <p>2014-09-23: <ph id="change_201409_23_SSX">Added English <sourcexml>Enactment
                            Clause</sourcexml> To <targetxml>Formule d'édiction </targetxml>,
                            <sourcexml>Long Title</sourcexml> To <targetxml>Titre
                            intégral</targetxml>, <sourcexml>Short Title</sourcexml> To
                            <targetxml>Titre abrégé</targetxml>,<sourcexml>Preamble</sourcexml> To
                            <targetxml>Préambule </targetxml> and vice versa in CA06-CA07
                    Table</ph></p>
                <p>2014-09-03: <ph id="change_20140903_SEP">Added instructions for proc:param
                        name="targetdoclang". <b>R4.5 #1873.</b></ph></p>
                <p>2014-08-27: <ph id="change_20140827_AS">Added the new rule for CA02 content
                        streams for alternate language. <b>P4 issue #324.</b></ph></p>
                <p>2014-08-25: <ph id="change_20140825_SS">Added the new citation inside the table
                        for CA08 i.e. <b>R.S.C. 1985, Appendix II, No. 4, s. L</b>.</ph></p>
                <p>2014-08-25: <ph id="change_20140825_PS">Added <b>Schedule</b> to <b>Annexe</b>
                        and vice a versa in C.R.C citation, Applicable for CA06 and CA07.</ph></p>
                <p>2014-08-21: <ph id="change_20140821_AS">Updated C.O.M.C. with "no" and T.M.O.B.
                        "No." for CA04- Db issue #326</ph></p>
                <p>2014-08-11: <ph id="change_20140811_AS">Added alternate citation for
                        corresponding primary LNCRTCF and LNCRTCE citation as provided in alternate
                        and primary format for CA04- Db issue #321</ph></p>
                <p>2014-08-11: <ph id="change_20140811_PS">Updated references in the table of
                        L.R.N.-B. to L.R.N.B. and L.N.-B. to L.N.B. for CA05.</ph></p>
                <p>2014-08-01: <ph id="change_201408-01_AS">Updated Primary and Alternate Languages
                        for C.B.D,D.B.D.A,LNCRTCE and 2009 LNCRTCF 41... Db issue P4.313</ph></p>
                <p>2014-07-28: <ph id="change_20140728_SS">Added the new citation inside the table
                        for CA06 and CA07 i.e. <b>CQLR, c. A-2.1, r.1.1 </b>.</ph></p>
                <p>2014-07-24: <ph id="change_20140724_PS">Added new rule for conversion of CA01,
                        CA02, CA04 and updated instruction for CA05-CA08.</ph></p>
                <p>2014-07-21: <ph id="change_20140721_PS">Updated CA01 citation <b>[1986] A.C.A.C.
                            no 1</b> and snippet.</ph></p>
                <p>2014-07-09: <ph id="change_20140709_AS">Added primary and alternate language for
                        CA04- Db issue #250</ph></p>
                <p>2014-07-07: <ph id="change_20140707_SSX">Added R and Sch alternatives in CA06 and
                        CA07 table</ph></p>
                <p>2014-06-27: <ph id="change_20140627_AS">Added table for CA04....Db issue
                        #1552</ph></p>
                <p>2014-06-25: <ph id="change_20140625">Added instruction for
                            <targetxml>ref:marker</targetxml> and updated table for
                        <b>CA01-CA02</b>, <b>CA05-CA07</b>.</ph></p>
                <p>2014-06-20 : <ph id="change_20140620_CSN">Changed
                            <targetxml>ref:parallelcite@citetype</targetxml> to <b>"parallel"</b>
                        from <b>"FrenchVersion"</b> or <b>"EnglishVersion"</b> to be consistent with
                            <targetxml>ref:parallelcite@citetype</targetxml> evreywhere
                    else.</ph></p>
                <p>2014-06-17: <ph id="change_20140617_PS">Created.</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita  -->


    <!-- Vikas Rohilla : Created the Tempalte for case:reportercite -->
    <xsl:template match="case:reportercite" mode="docrelated-content">
        <xsl:variable name="reportercite">
            <xsl:value-of select="ci:cite/ci:content"/>
        </xsl:variable>
        <xsl:variable name="alternate-cite">
            <xsl:for-each select="$docRelatedContent-TableCA01/ext:references/ext:reference">
                <xsl:variable name="primary-cite" select="@primary-citation"/>
                <xsl:if test="contains($reportercite, $primary-cite)">
                    <xsl:value-of select="@alternate-citation"/>
                </xsl:if>
            </xsl:for-each>
        </xsl:variable>
        <xsl:if
            test="count(../case:parallelcite[descendant::ci:content[contains(., $alternate-cite)]]) > 0 and $alternate-cite != ''">
            <doc:related-content>
                <doc:related-content-grp content-type="alternate-language-version">
                    <doc:related-content-item>
                        <doc:related-content-link>
                            <ref:lnlink service="TRAVERSE">
                                <ref:marker>
                                    <xsl:choose>
                                        <xsl:when
                                            test="/CASEDOC/docinfo/docinfo:doc-lang/@lang = 'fr'">
                                            <xsl:text>English Version</xsl:text>
                                        </xsl:when>
                                        <xsl:when
                                            test="/CASEDOC/docinfo/docinfo:doc-lang/@lang = 'en'">
                                            <xsl:text>French Version</xsl:text>
                                        </xsl:when>
                                    </xsl:choose>
                                </ref:marker>
                                <ref:locator>
                                    <ref:locator-key>
                                        <ref:key-name name="normcite"/>
                                        <ref:key-value>
                                            <xsl:attribute name="value">
                                                <xsl:value-of
                                                  select="../case:parallelcite[ci:cite/ci:content[contains(., $alternate-cite)]]"
                                                />
                                            </xsl:attribute>
                                        </ref:key-value>
                                    </ref:locator-key>
                                    <ref:locator-params>
                                        <proc:param name="normprotocol" value="CAEditorial"/>
                                        <proc:param name="countrycode">
                                            <xsl:attribute name="value">
                                                <xsl:value-of
                                                  select="/CASEDOC/docinfo/docinfo:doc-country/@iso-cc"
                                                />
                                            </xsl:attribute>
                                        </proc:param>
                                        <proc:param>
                                            <xsl:attribute name="name">targetdoclang</xsl:attribute>
                                            <xsl:attribute name="value">
                                                <!-- <xsl:value-of select="concat(/CASEDOC/docinfo/docinfo:doc-lang/@lang,'-',/CASEDOC/docinfo/docinfo:doc-country/@iso-cc)"/>-->
                                                <xsl:choose>
                                                  <xsl:when
                                                  test="/CASEDOC/docinfo/docinfo:doc-lang/@lang = 'fr'">
                                                  <xsl:text>en-CA</xsl:text>
                                                  </xsl:when>
                                                  <xsl:when
                                                  test="/CASEDOC/docinfo/docinfo:doc-lang/@lang = 'en'">
                                                  <xsl:text>fr-CA</xsl:text>
                                                  </xsl:when>
                                                </xsl:choose>
                                            </xsl:attribute>
                                        </proc:param>
                                    </ref:locator-params>
                                </ref:locator>
                            </ref:lnlink>
                        </doc:related-content-link>
                    </doc:related-content-item>
                </doc:related-content-grp>
            </doc:related-content>
        </xsl:if>
    </xsl:template>




    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="admindoc_Body">
        <title>Body <lnpid>id-CA04-13410</lnpid></title>

        <body>
            <p><sourcexml>case:body</sourcexml> becomes <targetxml>admindoc:body</targetxml></p>

            <p><targetxml>admindecision:representation</targetxml> and
                    <targetxml>admindecision:opinions</targetxml> are created as children of
                    <targetxml>admindoc:body</targetxml>.</p>
        </body>

    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\Admindoc_Body.dita  -->
    <!--<xsl:message>Admindoc_Body.xsl requires manual development!</xsl:message>-->

    <xsl:template match="case:body">

        <!--  Original Target XPath:  admindoc:body   -->
        <admindoc:body>
            <xsl:apply-templates select="@* | node()"/>
        </admindoc:body>

    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.content">
        <title>case:content <lnpid>id-CA04-13415</lnpid></title>
        <body>
            <section>
                <ul>
                    <li class="- topic/li ">
                        <note class="- topic/note ">This is a container element that does not need
                            to be carried forward in the conversion. However, all content must be
                            converted such that the order of elements is maintained whenever
                            possible. Please see the <xref
                                href="../../common_newest/Rosetta_Elements-LxAdv-Maintain_Sequential_Order.dita"
                                class="- topic/xref ">Maintain the Order of Elements Whenever
                                Possible</xref> section for more information.</note>
                        <sourcexml class="+ topic/keyword xml-d/sourcexml ">case:content</sourcexml>
                    </li>
                </ul>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.content.dita  -->
    <!--<xsl:message>CA04-Administrative_Decisions_case.content.xsl requires manual development!</xsl:message>-->

    <xsl:template match="case:content">

        <!--  Original Target XPath:     -->
        <!--  Could not determine target element or attribute name:  <>  -->
        <xsl:apply-templates select="@* | node()"/>
        <!--  Could not determine target element or attribute name:  </>  -->

    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.constituents">
        <title>case:constituents <lnpid>id-CA04-13414</lnpid></title>
        <body>
            <section>
                <ul>
                    <li class="- topic/li ">
                        <sourcexml class="+ topic/keyword xml-d/sourcexml "
                            >case:constituents</sourcexml> becomes <targetxml
                            class="+ topic/keyword xml-d/targetxml "
                            >admindecision:representation</targetxml> and create <targetxml
                            class="+ topic/keyword xml-d/targetxml "
                            >admindecision:counsel/bodytext</targetxml> within <targetxml
                            class="+ topic/keyword xml-d/targetxml "
                            >admindecision:representation</targetxml> for handling child elements of
                            <sourcexml class="+ topic/keyword xml-d/sourcexml "
                            >case:constituents</sourcexml>
                        <note class="- topic/note ">Conversion should create <targetxml
                                class="+ topic/keyword xml-d/targetxml "
                                >admindecision:representation</targetxml> as the first child within
                                <targetxml class="+ topic/keyword xml-d/targetxml "
                                >admindoc:body</targetxml> in order to maintain element
                            ordering.</note>
                        <note class="- topic/note ">Remove colons (:) with or without space from
                                <sourcexml>case:constituents/title</sourcexml> in New Lexis
                            Conversion
                                <targetxml>admindecision:representation/admindecision:counsel/bodytext/pgrp/heading/title</targetxml>
                            if appear after the following- <ul>
                                <li>
                                    <sourcexml>Appearances:</sourcexml> to
                                        <targetxml>Appearances</targetxml></li>
                                <li><sourcexml>Counsel:</sourcexml> to
                                        <targetxml>Counsel</targetxml>
                                </li>
                                <li>
                                    <sourcexml>Comparutions :</sourcexml>
                                        to<targetxml>Comparutions</targetxml>
                                </li>
                                <li>
                                    <sourcexml>Comparutions:</sourcexml>
                                        to<targetxml>Comparutions</targetxml>
                                </li>
                                <li>
                                    <sourcexml>Avocats :</sourcexml>
                                        to<targetxml>Avocats</targetxml>
                                </li>
                                <li>
                                    <sourcexml>Avocats:</sourcexml>to <targetxml>Avocats</targetxml>
                                </li>
                                <li>
                                    <sourcexml>Ont comparu:</sourcexml> to<targetxml>Ont
                                        comparu</targetxml>
                                </li>
                                <li>
                                    <sourcexml>Ont comparu :</sourcexml>to <targetxml>Ont
                                        comparu</targetxml>
                                </li>
                                <li>
                                    <sourcexml>AVOCATS:</sourcexml> to<targetxml>AVOCATS</targetxml>
                                </li>
                                <li>
                                    <sourcexml>AVOCATS :</sourcexml>to
                                        <targetxml>AVOCATS</targetxml>
                                </li>
                                <li><sourcexml>Cases cited:</sourcexml> to <targetxml>Cases
                                        cited</targetxml></li>
                                <li><sourcexml>Cases Cited:</sourcexml> to <targetxml>Cases
                                        Cited</targetxml></li>
                                <li><sourcexml>Jurisprudence cite :</sourcexml> to
                                        <targetxml>Jurisprudence cite</targetxml></li>
                                <li><sourcexml>Statutes, Regulations and Rules Cited:</sourcexml> to
                                        <targetxml>Statutes, Regulations and Rules
                                    Cited</targetxml></li>
                                <li><sourcexml>Législation citée :</sourcexml> to
                                        <targetxml>Législation citée</targetxml></li>
                                <li><sourcexml>Authors and Texts Cited:</sourcexml> to
                                        <targetxml>Authors and Texts Cited</targetxml></li>
                                <li><sourcexml>Texts Cited:</sourcexml> to <targetxml>Texts
                                        Cited</targetxml></li>
                                <li><sourcexml>Causes citées et consultées :</sourcexml> to
                                        <targetxml>Causes citées et consultées</targetxml></li>
                                <li><sourcexml>Jurisprudence et doctrine citées et consultées
                                        :</sourcexml> to <targetxml>Jurisprudence et doctrine citées
                                        et consultées</targetxml></li>
                                <li><sourcexml>Doctrine et jurisprudence citées :</sourcexml> to
                                        <targetxml>Doctrine et jurisprudence citées</targetxml></li>
                                <li><sourcexml>Doctrine citée :</sourcexml> to <targetxml>Doctrine
                                        citée</targetxml></li>
                            </ul>
                        </note>
                        <pre xml:space="preserve" class="- topic/pre ">
&lt;case:constituents&gt;
    &lt;pgrp&gt;
        &lt;heading&gt;
            &lt;title&gt;Appearances:&lt;/title&gt;
        &lt;/heading&gt;
        &lt;p&gt;
            &lt;text&gt;Peter Csiszar, for the employer.&lt;nl/&gt; Clea Parfitt, for the union.&lt;/text&gt;
        &lt;/p&gt;
    &lt;/pgrp&gt;
&lt;/case:constituents&gt;
                   
             
<b class="+ topic/ph hi-d/b ">Becomes</b>

&lt;admindecision:representation&gt;
    &lt;admindecision:counsel&gt;
        &lt;bodytext&gt;
            &lt;pgrp&gt;
                &lt;heading&gt;
                    &lt;title&gt;Appearances&lt;/title&gt;
                &lt;/heading&gt;
                &lt;p&gt;
                    &lt;text&gt;Peter Csiszar, for the employer.&lt;proc:nl/&gt; Clea Parfitt, for the
                        union.&lt;/text&gt;
                &lt;/p&gt;
            &lt;/pgrp&gt;
        &lt;/bodytext&gt;
    &lt;/admindecision:counsel&gt;
&lt;/admindecision:representation&gt;

</pre>
                    </li>

                    <li> If <sourcexml class="+ topic/keyword xml-d/sourcexml "
                            >case:constituents</sourcexml> is child of <sourcexml
                            class="+ topic/keyword xml-d/sourcexml "
                            >case:appendix/case:headnote/case:info</sourcexml> then it becomes
                            <targetxml class="+ topic/keyword xml-d/targetxml "
                            >admindecision:appendix/admindecision:representation</targetxml> and
                        create <targetxml class="+ topic/keyword xml-d/targetxml "
                            >admindecision:counsel/bodytext</targetxml> within <targetxml
                            class="+ topic/keyword xml-d/targetxml "
                            >admindecision:representation</targetxml>
                        <pre xml:space="preserve" class="- topic/pre ">
&lt;case:appendix&gt;
    &lt;case:headnote&gt;
        &lt;case:info&gt;
            &lt;case:constituents&gt;
                &lt;pgrp&gt;
                    &lt;heading&gt;
                        &lt;title&gt;Appearances:&lt;/title&gt;
                    &lt;/heading&gt;
                    &lt;p&gt;
                       &lt;text&gt;
                       For Appellants&lt;nl/&gt;
                       Mr. R.A. Gillespie&lt;nl/&gt; 
                       Mr. L. Gross represented by Mrs. K. Young&lt;nl/&gt; 
                       Ms. N. Hayward represented by Mrs. K. Young&lt;nl/&gt;
                       Mr. P. O'Brien represented by Mrs. K. Young&lt;nl/&gt; 
                       Ms. P. Parsons represented by Mrs. K. Young&lt;nl/&gt; 
                       Ms. M. Beard represented by Mrs. K.Young&lt;nl/&gt; 
                       Ms. L. Floyd represented by Mrs. K. Young&lt;nl/&gt; 
                       Ms. L. Graves represented by Mrs. K. Young&lt;nl/&gt; 
                       Mr. T. Young represented by Mrs. K.Young&lt;nl/&gt; 
                       Ms. C. Young represented by Mrs. K. Young&lt;nl/&gt; 
                       Mrs. J. MacKenzie&lt;nl/&gt;
                            &lt;!-- .... --&gt;
                        &lt;/text&gt;
                    &lt;/p&gt;
                &lt;/pgrp&gt;
            &lt;/case:constituents&gt;
        &lt;/case:info&gt;
    &lt;/case:headnote&gt;
&lt;/case:appendix&gt;


<b class="+ topic/ph hi-d/b ">Becomes</b>  
                        
&lt;admindecision:appendix&gt;
&lt;admindecision:representation&gt;
    &lt;admindecision:counsel&gt;
        &lt;bodytext&gt;
            &lt;pgrp&gt;
                &lt;heading&gt;&lt;title&gt;Appearances&lt;/title&gt;&lt;/heading&gt;
                &lt;p&gt;
                    &lt;text&gt;
                    For Appellants&lt;proc:nl/&gt;
                    Mr. R.A. Gillespie&lt;proc:nl/&gt;
                    Mr. L. Gross represented by Mrs. K. Young&lt;proc:nl/&gt;
                    Ms. N. Hayward represented by Mrs. K. Young&lt;proc:nl/&gt;
                    Mr. P. O'Brien represented by Mrs. K. Young&lt;proc:nl/&gt;
                    Ms. P. Parsons represented by Mrs. K. Young&lt;proc:nl/&gt;
                    Ms. M. Beard represented by Mrs. K. Young&lt;proc:nl/&gt;
                    Ms. L. Floyd represented by Mrs. K. Young&lt;proc:nl/&gt;
                    Ms. L. Graves represented by Mrs. K. Young&lt;proc:nl/&gt;
                    Mr. T. Young represented by Mrs. K. Young&lt;proc:nl/&gt;
                    Ms. C. Young represented by Mrs. K. Young&lt;proc:nl/&gt;
                    Mrs. J. MacKenzie&lt;proc:nl/&gt;
                        &lt;!-- .... --&gt;
                    &lt;/text&gt;
                &lt;/p&gt;
            &lt;/pgrp&gt;
        &lt;/bodytext&gt;
    &lt;/admindecision:counsel&gt;
  &lt;/admindecision:representation&gt;
&lt;/admindecision:appendix&gt;
    </pre>
                    </li>
                </ul>
            </section>
            <section>
                <title>Changes</title>
                <p>2014-10-27: <ph id="change_20141027_AS">update the List of terms in CA04 CI with
                        the terms listed in the CA01 CI where the CI mentions
                        admindecision:representation and ref:relatedrefs <b>Db issue
                    #355</b></ph></p>
                <p>2014-06-19: <ph id="change_20140619_AS">Remove colon from case:constituents title
                        Appearances:... Db issue #1649</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.constituents.dita  -->
    <!--<xsl:message>CA04-Administrative_Decisions_case.constituents.xsl requires manual development!</xsl:message> -->

    <xsl:template match="case:constituents">
        <!--<xsl:choose>
	        <xsl:when test="ancestor::case:appendix/case:headnote/case:info">
	            <admindecision:appendix>
	                <admindecision:representation>
	                    <admindecision:counsel>
	                        <bodytext>
	                            <xsl:apply-templates select="@* | node()"/>
	                        </bodytext>
	                    </admindecision:counsel>
	                </admindecision:representation>
	            </admindecision:appendix>
	        </xsl:when>
	        <xsl:otherwise>-->
        <!--RS[2017-12-01]: Edit the template for adding element admindecision:representation/bodytext when input have case:constituents element as a child  of case:appendix/case:headnote/case:info-->
        <admindecision:representation>
            <admindecision:counsel>
                <bodytext>
                    <xsl:apply-templates select="@* | node()"/>
                </bodytext>
            </admindecision:counsel>
        </admindecision:representation>
        <!--</xsl:otherwise>
	    </xsl:choose>
-->
    </xsl:template>

    <xsl:template match="title[ancestor::case:constituents]" priority="25">
        <xsl:choose>
            <xsl:when test="replace(., ' ', '') = $titlecase">
                <title>
                    <xsl:value-of select="normalize-space(replace(., ':', ''))"/>
                </title>
            </xsl:when>
            <xsl:otherwise>
                <title>
                    <xsl:value-of select="."/>
                </title>
            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>

    <xsl:variable name="titlecase"
        select="
            'Appearances:',
            'Counsel:',
            'Comparutions:',
            'Comparutions:',
            'Avocats:',
            'Avocats:',
            'Ontcomparu:',
            'Ontcomparu:',
            'AVOCATS:',
            'AVOCATS:',
            'Casescited:',
            'CasesCited:',
            'Jurisprudencecite:',
            'Statutes,RegulationsandRulesCited:',
            'Législationcitée:',
            'AuthorsandTextsCited:',
            'TextsCited:',
            'Causescitéesetconsultées:',
            'Jurisprudenceetdoctrinecitéesetconsultées:',
            'Doctrineetjurisprudencecitées:',
            'Doctrinecitée:'"/>


    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.judgments">
        <title>case:judgments <lnpid>id-CA04-13428</lnpid></title>
        <body>
            <section>
                <ul>
                    <li class="- topic/li ">
                        <sourcexml class="+ topic/keyword xml-d/sourcexml "
                            >case:judgments</sourcexml> becomes <targetxml
                            class="+ topic/keyword xml-d/targetxml "
                            >admindecision:opinions</targetxml>
                    </li>
                </ul>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.judgments.dita  -->
    <!--<xsl:message>CA04-Administrative_Decisions_case.judgments.xsl requires manual development!</xsl:message>-->

    <xsl:template match="case:judgments">

        <!--  Original Target XPath:  admindecision:opinions   -->
        <admindecision:opinions>
            <xsl:apply-templates select="@* | node()"/>
        </admindecision:opinions>

    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.judgment">
        <title>case:judgment <lnpid>id-CA04-13426</lnpid></title>
        <body>
            <section>
                <ul>
                    <li class="- topic/li ">
                        <sourcexml class="+ topic/keyword xml-d/sourcexml "
                            >case:judgment</sourcexml> becomes <targetxml
                            class="+ topic/keyword xml-d/targetxml "
                            >admindecision:opinion</targetxml>
                        <pre xml:space="preserve" class="- topic/pre "> 

&lt;case:judgment&gt;
    &lt;case:judgmentbody&gt;
       &lt;p&gt;
        &lt;text align="center"&gt;DECISION&lt;/text&gt;
       &lt;/p&gt;
    &lt;p&gt;
    &lt;text&gt;OVERVIEW&lt;/text&gt;
    &lt;/p&gt;
&lt;p&gt;
    &lt;pnum count="1"&gt;1&lt;/pnum&gt;
    &lt;text&gt;This is an application for reconsideration by the employee, Gary Gurnsey, under Section 116 of the Employment Standards Act (the "Act") of a decision of the Employment Standards Tribunal on February 12, 1999.&lt;/text&gt;
&lt;/p&gt;
    &lt;/case:judgmentbody&gt;
&lt;/case:judgment&gt;

<b class="+ topic/ph hi-d/b ">Becomes</b>

&lt;admindecision:opinion&gt;    
    &lt;bodytext&gt;
       &lt;p align="center"&gt;
        &lt;text&gt;DECISION&lt;/text&gt;
       &lt;/p&gt;
    &lt;p&gt;
    &lt;text&gt;OVERVIEW&lt;/text&gt;
    &lt;/p&gt;
&lt;p&gt;
    &lt;desig value="1"&gt;1&lt;/desig&gt;
    &lt;text&gt;This is an application for reconsideration by the employee, Gary Gurnsey, under Section 116 of the Employment Standards Act (the "Act") of a decision of the Employment Standards Tribunal on February 12, 1999.&lt;/text&gt;
&lt;/p&gt;
    &lt;/bodytext&gt;
&lt;/admindecision:opinion&gt;
</pre>
                    </li>
                </ul>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.judgment.dita  -->
    <!--<xsl:message>CA04-Administrative_Decisions_case.judgment.xsl requires manual development!</xsl:message> -->

    <xsl:template match="case:judgment">

        <!--  Original Target XPath:  admindecision:opinion   -->
        <admindecision:opinion>
            <xsl:apply-templates select="@* | node()"/>
        </admindecision:opinion>

    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.judgmentbody">
        <title>case:judgmentbody <lnpid>id-CA04-13427</lnpid></title>
        <body>
            <section>
                <ul>
                    <li class="- topic/li ">
                        <p><sourcexml>case:judgmentbody</sourcexml> becomes
                                <targetxml>admindecision:opinion/bodytext</targetxml>.</p>
                        <p><sourcexml>case:judgmentbody</sourcexml> text, depending on the context,
                            can become
                                <targetxml>admindecision:opinion/admindecision:opinionby/person:adjudicator</targetxml>.
                            When either <sourcexml>p/pnum</sourcexml> or
                                <sourcexml>p[@indent="1st-line"]</sourcexml> or <sourcexml>p[being
                                the first child of case:judgmentbody]</sourcexml> occurs within
                                <sourcexml>case:judgmentbody</sourcexml>, search 75 characters to
                            see if colon double dash ":--" or colon emdash ":&#8212;" occurs within
                            the first 75 characters. If so, this indicates a judges opinion which
                            becomes
                                <targetxml>admindecision:opinionby/person:adjudicator</targetxml>.
                            The text before the colon double dash ":--" or colon emdash ":&#8212;"
                            becomes the contents of
                                <targetxml>admindecision:opinionby/person:adjudicator</targetxml>.
                            An exception to this rule is if the text starts with square brackets
                            around a number. In this case, leave the square brackets and number in
                            the text. The colon and the double dash (or &#8212;) are stripped. The
                            text following the colon double dash ":--" or colon emdash ":&#8212;"
                            becomes <targetxml>bodytext/p/text</targetxml>. Close the current
                                <targetxml>bodytext</targetxml> element in order to create the
                                <targetxml>admindecision:opinionby</targetxml> and then reopen it.
                                <note> Remove the leading spaces from the first
                                    <targetxml>text</targetxml> after
                                    <targetxml>admindecision:opinionby</targetxml>. </note><note>If
                                judge's name appears within emphasis tag, the same rules would apply
                                as if the <sourcexml>emph</sourcexml> tag were not present in
                                source. The emph tag is effectively pass through while placing its
                                contents into
                                    <targetxml>admindecision:opinionby/person:adjudicator</targetxml>.
                                </note><note>If <sourcexml>l</sourcexml> is the child of
                                    <sourcexml>case:judgmentbody</sourcexml> then conversion should
                                suppress <sourcexml>l, li</sourcexml> and
                                    <sourcexml>lilabel</sourcexml> and follow the above instruction
                                for generation of
                                    <targetxml>admindecision:opinionby/person:adjudicator</targetxml>
                                from <sourcexml>p/pnum</sourcexml> or
                                    <sourcexml>p[@indent="1st-line"]</sourcexml> or
                                    <sourcexml>p[being the first child of
                                    case:judgmentbody]</sourcexml>. See Example 6.</note><note>If
                                more than one of these constructs occurs within
                                    <sourcexml>case:judgmentbody</sourcexml>, it is important to
                                note that these become two separate
                                    <targetxml>admindecision:opinion</targetxml> elements, not two
                                    <targetxml>admindecision:opinion/admindecision:opinionby</targetxml>
                                within the same <targetxml>admindecision:opinion</targetxml>. See
                                example.</note>
                        </p>
                    </li>
                    <li class="- topic/li ">
                        <pre xml:space="preserve" class="- topic/pre ">

&lt;case:judgment&gt;
    &lt;case:judgmentbody&gt;
       &lt;p&gt;
        &lt;text align="center"&gt;DECISION&lt;/text&gt;
       &lt;/p&gt;
    &lt;p&gt;
    &lt;text&gt;OVERVIEW&lt;/text&gt;
    &lt;/p&gt;
&lt;p&gt;
    &lt;pnum count="1"&gt;1&lt;/pnum&gt;
    &lt;text&gt;This is an application for reconsideration by the employee, Gary Gurnsey, under Section 116 of the Employment Standards Act (the "Act") of a decision of the Employment Standards Tribunal on February 12, 1999.&lt;/text&gt;
&lt;/p&gt;
    &lt;/case:judgmentbody&gt;
&lt;/case:judgment&gt;

<b class="+ topic/ph hi-d/b ">Becomes</b>

&lt;admindecision:opinion&gt;    
    &lt;bodytext&gt;
       &lt;p align="center"&gt;
        &lt;text&gt;DECISION&lt;/text&gt;
       &lt;/p&gt;
    &lt;p&gt;
    &lt;text&gt;OVERVIEW&lt;/text&gt;
    &lt;/p&gt;
&lt;p&gt;
    &lt;desig value="1"&gt;1&lt;/desig&gt;
    &lt;text&gt;This is an application for reconsideration by the employee, Gary Gurnsey, under Section 116 of the Employment Standards Act (the "Act") of a decision of the Employment Standards Tribunal on February 12, 1999.&lt;/text&gt;
&lt;/p&gt;
    &lt;/bodytext&gt;
&lt;/admindecision:opinion&gt;
</pre>
                    </li>
                </ul>
            </section>
            <example>Example 2<codeblock> &lt;case:judgmentbody&gt; ... &lt;p i="5"
                    indent="1st-line"&gt; &lt;text&gt;The reasons of L Heureux-Dub, Bastarache and
                    Binnie JJ. were delivered by&lt;/text&gt; &lt;/p&gt; &lt;p&gt; &lt;pnum
                    count="3"&gt;3&lt;/pnum&gt; &lt;text&gt;BASTARACHE J. (dissenting):-- This
                    appeal concerns the application of the sale of business provision, s. 64, of the
                    Ontario Labour Relations Act, R.S.O. 1990, c. L.2. The issue raised is whether
                    the interpretation of this successorship provision by the Ontario Labour
                    Relations Board ([1994] O.L.R.B. Rep. 1296) was patently unreasonable in the
                    circumstances of this case. A ... &lt;/text&gt; &lt;/p&gt;
                    &lt;/case:judgmentbody&gt; </codeblock>
                <b>Becomes</b>
                <codeblock> &lt;admindecision:opinion&gt; &lt;bodytext&gt; ... &lt;p
                    indent="1st-line"&gt; &lt;text&gt;The reasons of L Heureux-Dub, Bastarache and
                    Binnie JJ. were delivered by&lt;/text&gt; &lt;/p&gt; &lt;/bodytext&gt;
                    &lt;admindecision:opinionby&gt; &lt;person:adjudicator&gt;BASTARACHE J.
                    (dissenting)&lt;/person:adjudicator&gt; &lt;/admindecision:opinionby&gt;
                    &lt;bodytext&gt; &lt;p&gt; &lt;desig value="3"&gt;3&lt;/desig&gt;
                    &lt;text&gt;This appeal concerns the application of the sale of business
                    provision, s. 64, of the Ontario Labour Relations Act, R.S.O. 1990, c. L.2. The
                    issue raised is whether the interpretation of this successorship provision by
                    the Ontario Labour Relations Board ([1994] O.L.R.B. Rep. 1296) was patently
                    unreasonable in the circumstances of this case. A ... &lt;/text&gt; &lt;/p&gt;
                    &lt;/bodytext&gt; &lt;/admindecision:opinion&gt; </codeblock>
            </example>

            <example> Example 3 <codeblock> &lt;case:judgmentbody&gt; &lt;p&gt; &lt;pnum
                    count="1"&gt;1&lt;/pnum&gt; &lt;text&gt;July 20, 1892. &lt;emph
                    typestyle="bf"&gt;MCCREIGHT J.&lt;/emph&gt;:&amp;#x2014; In this case a summons
                    was served on the Vancouver City Council to show cause why George Bowack should
                    not be discharged from the quarantine hospital in Vancouver, where he had, by
                    direction of the authorities in Vancouver, been detained against his will, was
                    argued before me at length yesterday and to-day, and speedy decision, in view of
                    his being in custody, is obviously desirable.&lt;/text&gt; &lt;/p&gt;
                    &lt;/case:judgmentbody&gt; </codeblock>
                <b>Becomes</b>
                <codeblock> &lt;admindecision:opinion&gt; &lt;admindecision:opinionby&gt;
                    &lt;person:adjudicator&gt;MCCREIGHT J.&lt;/person:adjudicator&gt;
                    &lt;/admindecision:opinionby&gt; &lt;bodytext&gt; &lt;p&gt; &lt;desig
                    value="1"&gt;1&lt;/desig&gt; &lt;text&gt;July 20, 1892. In this case a summons
                    was served on the Vancouver City Council to show cause why George Bowack should
                    not be discharged from the quarantine hospital in Vancouver, where he had, by
                    direction of the authorities in Vancouver, been detained against his will, was
                    argued before me at length yesterday and to-day, and speedy decision, in view of
                    his being in custody, is obviously desirable.&lt;/text&gt; &lt;/p&gt;
                    &lt;/bodytext&gt; &lt;/admindecision:opinion&gt; </codeblock>
            </example>
            <example>
                <title>Example 4 - Multiple <targetxml>admindecision:opinion</targetxml></title>
                <codeblock> &lt;case:judgmentbody&gt; &lt;p&gt; &lt;pnum count="1"&gt;1&lt;/pnum&gt;
                    &lt;text&gt;&lt;emph typestyle="bf"&gt;McLACHLIN C.J.&lt;/emph&gt;:&amp;#x2014;
                    I would dismiss the appeal with costs to the respondent National Automobile,
                    Aerospace and Agricultural Implement Workers Union of Canada (CAW-Canada),
                    substantially for the reasons of Goudge J.A. in the Ontario Court of
                    Appeal.&lt;/text&gt; &lt;/p&gt; &lt;p&gt; &lt;pnum count="3"&gt;3&lt;/pnum&gt;
                    &lt;text&gt;BASTARACHE J. (dissenting):-- This appeal concerns the application
                    of the sale of business provision, s. 64, of the Ontario Labour Relations Act,
                    R.S.O. 1990, c. L.2. The issue raised is whether the interpretation of this
                    successorship provision by the Ontario Labour Relations Board ([1994] O.L.R.B.
                    Rep. 1296) was patently unreasonable in the circumstances of this case. A
                    unanimous bench of the Divisional Court found that it was not. For the reasons
                    hereafter, I find that the Board's decision was patently
                    unreasonable.&lt;/text&gt; &lt;/p&gt; &lt;/case:judgmentbody&gt; </codeblock>
                <b>Becomes</b>
                <codeblock> &lt;admindecision:opinion&gt; &lt;admindecision:opinionby&gt;
                    &lt;person:adjudicator&gt;McLACHLIN C.J.&lt;/person:adjudicator&gt;
                    &lt;/admindecision:opinionby&gt; &lt;bodytext&gt; &lt;p&gt; &lt;desig
                    value="1"&gt;1&lt;/desig&gt; &lt;text&gt;I would dismiss the appeal with costs
                    to the respondent National Automobile, Aerospace and Agricultural Implement
                    Workers Union of Canada (CAW-Canada), substantially for the reasons of Goudge
                    J.A. in the Ontario Court of Appeal.&lt;/text&gt; &lt;/p&gt; &lt;/bodytext&gt;
                    &lt;/admindecision:opinion&gt; &lt;admindecision:opinion&gt;
                    &lt;admindecision:opinionby&gt; &lt;person:adjudicator&gt;BASTARACHE J.
                    (dissenting)&lt;/person:adjudicator&gt; &lt;/admindecision:opinionby&gt;
                    &lt;bodytext&gt; &lt;p&gt; &lt;desig value="1"&gt;1&lt;/desig&gt;
                    &lt;text&gt;This appeal concerns the application of the sale of business
                    provision, s. 64, of the Ontario Labour Relations Act, R.S.O. 1990, c. L.2. The
                    issue raised is whether the interpretation of this successorship provision by
                    the Ontario Labour Relations Board ([1994] O.L.R.B. Rep. 1296) was patently
                    unreasonable in the circumstances of this case. A unanimous bench of the
                    Divisional Court found that it was not. For the reasons hereafter, I find that
                    the Board's decision was patently unreasonable.&lt;/text&gt; &lt;/p&gt;
                    &lt;/bodytext&gt; &lt;/admindecision:opinion&gt; </codeblock>
            </example>
            <example>
                <title>Example 5</title>
                <codeblock>
                    <![CDATA[
<case:judgmentbody>
    <p>
        <pnum count="70">70</pnum>
        <text>McLACHLIN C.J. and KARAKATSANIS, WAGNER and GASCON JJ. :-- We
            agree with Justice Abella that, under the current framework, the
            standard of review is reasonableness. We also agree with her
            disposition of the appeal on the merits and with her analysis of the
            two conflicting interpretations of the Unjust Dismissal provisions
            of the <emph typestyle="it">Canada Labour Code</emph>, R.S.C. 1985,
            c. L-2, proposed to the Court. Adjudicator Schiff's decision was
            reasonable, and it should be restored. We appreciate Justice
            Abella's efforts to stimulate a discussion on how to clarify or
            simplify our standard of review jurisprudence to better promote
            certainty and predictability. However, as it is unnecessary to do so
            in order to resolve this case, we are not prepared to endorse any
            particular proposal to redraw our current standard of review
            framework at this time.</text>
    </p>
</case:judgmentbody> 
              ]]>
                </codeblock>
                <b>Becomes</b>
                <codeblock>
                    <![CDATA[
<courtcase:opinion>
    <courtcase:opinionby>
        <person:judge>McLACHLIN C.J. and KARAKATSANIS, WAGNER and GASCON JJ.</person:judge>
    </courtcase:opinionby>
    <bodytext>
        <p>
            <desig value="70">70</desig>
            <text>We
                agree with Justice Abella that, under the current framework, the
                standard of review is reasonableness. We also agree with her
                disposition of the appeal on the merits and with her analysis of the
                two conflicting interpretations of the Unjust Dismissal provisions
                of the <emph typestyle="it">Canada Labour Code</emph>, R.S.C. 1985,
                c. L-2, proposed to the Court. Adjudicator Schiff's decision was
                reasonable, and it should be restored. We appreciate Justice
                Abella's efforts to stimulate a discussion on how to clarify or
                simplify our standard of review jurisprudence to better promote
                certainty and predictability. However, as it is unnecessary to do so
                in order to resolve this case, we are not prepared to endorse any
                particular proposal to redraw our current standard of review
                framework at this time.</text>
        </p>
    </bodytext>
</courtcase:opinion>
              ]]>
                </codeblock>
            </example>

            <example>
                <title>Example 6</title>
                <codeblock>
                    <![CDATA[
<case:judgmentbody>
    <p indent="1st-line"><text>The decision of the Board was rendered by Kenneth G. Love, Q.C. (Chair), concurred in by Greg Trew (Member). Donna Ottenson, (Member) rendered separate dissenting reasons.</text></p>
    <p align="center"><text><emph typestyle="bf">REASONS FOR DECISION</emph></text></p>
    <p><l><li><lilabel/><p><text>KENNETH G. LOVE, Q.C. (CHAIR):--</text></p></lilabel></li></l></p>
</case:judgmentbody>
              ]]>
                </codeblock>
                <b>Becomes</b>
                <codeblock>
                    <![CDATA[
<admindecision:opinions>
    <admindecision:opinion>
        <bodytext>
            <p indent="1st-line"><text>The decision of the Board was rendered by Kenneth G. Love, Q.C. (Chair), concurred in by Greg Trew (Member). Donna Ottenson, (Member) rendered separate dissenting reasons.</text></p>
            <p align="center"><text><emph typestyle="bf">REASONS FOR DECISION</emph></text></p>
        </bodytext>
        <admindecision:opinionby>
            <person:adjudicator>KENNETH G. LOVE, Q.C. (CHAIR)</person:adjudicator>
        </admindecision:opinionby>
    </admindecision:opinion>
</admindecision:opinions>
              ]]>
                </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2017-04-28 <ph id="change_20170428_SS">Updated the target <u>Example-6</u> for
                        text reatined in general position according to the source. [Webstar
                            #<b>6862735</b>]</ph></p>
                <p>2017-04-26 <ph id="change_20170426_SS">AAdded note and example when
                            <sourcexml>case:judgmentbody</sourcexml> contains judge name in
                            <sourcexml>l</sourcexml> element, Applicable on CA04. [Webstar
                            #<b>6862735</b>]</ph></p>
                <p>2017-03-14 <ph id="change_20170314_SS">Update case:judgmentbody text can become
                        courtcase:opinionby text to increase the PC character data limit from 50 to
                        75 and refer example 5. [<b>Webstar # 6822593</b>]</ph></p>
                <p>2014-08-11 <ph id="change_20140811_AS">Remove leading spaces from
                        admindecision:opinionby. <b>P4 item# 300</b></ph></p>
                <p>2014-06-18 <ph id="change_20140618_SEP">Add note and example about creating
                        multiple <targetxml>admindecision:opinion</targetxml>. <b>Phase 4B item#
                            232</b></ph></p>
                <p>2014-06-05 <ph id="change_20140605_AS">Discerning Opinion By from Text. <b>R4.5
                            item# 1592</b></ph></p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.judgmentbody.dita  -->
    <!--<xsl:message>CA04-Administrative_Decisions_case.judgmentbody.xsl requires manual development!</xsl:message>-->
    <!--
	<xsl:template match="case:judgmentbody">
	    <xsl:variable name="textval" select="p[1]/text[1]"/>
	    <xsl:message><xsl:value-of select="$textval"/></xsl:message>
	    <xsl:choose>
	        <xsl:when test="$textval[contains(.,':-\-') or contains(.,':—')]">
	            
	                <admindecision:opinionby>
	                    <person:adjudicator>
	                        <xsl:value-of select="substring-before($textval,':-\-')"/>
	                        <xsl:value-of select="substring-before($textval,':—')"/>
	                    </person:adjudicator>
	                </admindecision:opinionby>
	                <bodytext>
	                    <xsl:apply-templates select="@*|node()"/>
	                </bodytext>
	       
	        </xsl:when>
	        <xsl:otherwise>
	            
	                <bodytext>
	                    <xsl:apply-templates select="@* | node()"/>
	                </bodytext>
	            
	        </xsl:otherwise>
	   </xsl:choose>
	    
	    
	</xsl:template>-->

    <xsl:template match="case:judgmentbody">
        <bodytext>
            <xsl:apply-templates select="@* | node()"/>
        </bodytext>
    </xsl:template>

    <xsl:template
        match="p[descendant::text[contains(substring(., 1, 75), ':--') or contains(substring(., 1, 75), ':—')]][not(ancestor::l)][parent::case:judgmentbody]"
        priority="25">
        <xsl:text disable-output-escaping="yes">&lt;/bodytext&gt;</xsl:text>
        <admindecision:opinionby>
            <person:adjudicator>
                <xsl:value-of select="substring-before(text, ':--')"/>
            </person:adjudicator>
        </admindecision:opinionby>
        <xsl:text disable-output-escaping="yes">&lt;bodytext&gt;</xsl:text>
        <xsl:element name="p">
            <xsl:apply-templates select="node()"/>
        </xsl:element>
    </xsl:template>

    <xsl:template
        match="text/text()[contains(substring(., 1, 75), ':--') or contains(substring(., 1, 75), ':—')][not(ancestor::l)][ancestor::case:judgmentbody]"
        priority="25">

        <xsl:value-of select="substring-after(., ':--')"/>


    </xsl:template>




    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.appendix">
        <title>case:appendix <lnpid>id-CA04-13412</lnpid></title>
        <body>
            <section>
                <p><sourcexml>case:appendix</sourcexml> becomes
                        <targetxml>admindecision:attachments/admindecision:appendix</targetxml>. <ul>
                        <li>If <sourcexml>p</sourcexml> is direct child of
                                <sourcexml>case:appendix</sourcexml> then conversion need create a
                            wrapper <targetxml>admindecision:opinion/bodytext</targetxml> after
                            closing
                                <targetxml>admindecision:attachments/admindecision:appendix</targetxml>
                            and <sourcexml>p</sourcexml> maps to <targetxml>p</targetxml>.
                            <pre>
                  
                  &lt;case:appendix&gt;
                   &lt;case:headnote&gt;
                    &lt;case:info&gt;
                     &lt;case:constituents&gt;
                      &lt;!-- ETC. --&gt;
                     &lt;/case:constituents&gt;
                    &lt;/case:info&gt;
                   &lt;/case:headnote&gt;
                   &lt;p&gt;&lt;text&gt;cp/d/qlhbb&lt;/text&gt;&lt;/p&gt;
                  &lt;/case:appendix&gt;
                  
                  <b>Becomes</b>
                  
                  &lt;admindecision:appendix&gt;
                   &lt;admindecision:representation&gt;
                    &lt;admindecision:counsel&gt;
                     &lt;bodytext&gt;
                      &lt;!-- ETC. --&gt;
                     &lt;/bodytext&gt;
                    &lt;/admindecision:counsel&gt;
                   &lt;/admindecision:representation&gt;
                  &lt;/admindecision:appendix&gt;
                  &lt;admindecision:opinion&gt;
                   &lt;bodytext&gt;
                    &lt;p&gt;&lt;text&gt;cp/d/qlhbb&lt;/text&gt;&lt;/p&gt;
                   &lt;/bodytext&gt;
                  &lt;/admindecision:opinion&gt;
                  
               </pre>
                        </li>
                    </ul>
                </p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.appendix.dita  -->
    <!--<xsl:message>CA04-Administrative_Decisions_case.appendix.xsl requires manual development!</xsl:message>-->

    <xsl:template match="case:appendix">

        <!--  Original Target XPath:  admindecision:attachments/admindecision:appendix   -->
        <admindecision:attachments>
            <admindecision:appendix>
                <xsl:apply-templates select="@* | node() except p"/>
            </admindecision:appendix>
        </admindecision:attachments>
        <xsl:if test="child::p">
            <admindecision:opinion>
                <bodytext>
                    <xsl:apply-templates select="child::p"/>
                </bodytext>
            </admindecision:opinion>
        </xsl:if>
    </xsl:template>


    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_desig_desiglabel-to-LexisAdvance_desig">
        <title><sourcexml>desig</sourcexml> to <targetxml>desig/ref:para</targetxml>
            <lnpid>id-CCCC-10501</lnpid></title>
        <body>
            <section>
                <title>Applicable only on AU01, AU13, NZ03, CA01, CA04 and CA10.</title>
                <p>When source document is having <sourcexml>desig</sourcexml> then
                        <sourcexml>desig</sourcexml> becomes
                    <targetxml>desig/ref:para</targetxml>.</p>
                <p>Value of <sourcexml>desig@value</sourcexml> becomes both
                        <targetxml>desig@value</targetxml> and
                        <targetxml>desig/ref:para@num</targetxml>.</p>
                <p>Value of <targetxml>ref:para/@para-scheme</targetxml> is
                        <sourcexml>ci:reporter</sourcexml> value from (<b><i>first</i></b>)
                        <sourcexml>ci:cite/[@type=?cite4thisdoc?]/ci:case/ci:caseref/ci:reporter</sourcexml>.</p>
                <p><targetxml>ref:para/@para-scheme-type="reporter-abbrev"</targetxml> is hardcoded
                    value.</p>
                <pre>
&lt;p&gt;
    &lt;desig value="5"&gt;5&lt;/desig&gt;
    &lt;text&gt;...&lt;/text&gt;
&lt;/p&gt;

<b>and</b>

&lt;case:reportercite&gt;
    &lt;ci:cite type="cite4thisdoc"&gt;
        &lt;ci:case&gt;
            &lt;ci:caseinfo&gt;
                &lt;ci:decisiondate year="1974" /&gt;
            &lt;/ci:caseinfo&gt;
            &lt;ci:caseref&gt;
                &lt;ci:reporter value="IPR" /&gt;
                &lt;ci:volume num="1a"&gt;&lt;/ci:volume&gt;
                &lt;ci:edition&gt;
                    &lt;ci:date year="1974" /&gt;
                &lt;/ci:edition&gt;
                &lt;ci:page num="511" /&gt;
            &lt;/ci:caseref&gt;
        &lt;/ci:case&gt;
        &lt;ci:content&gt;
            &lt;citefragment searchtype="CASE-CITE-REF"&gt;(1974) 1a IPR 511&lt;/citefragment&gt;
        &lt;/ci:content&gt;
    &lt;/ci:cite&gt;
&lt;/case:reportercite&gt;

<b>Becomes</b>

&lt;p&gt;
    &lt;desig value="5"&gt;&lt;ref:para num="5" para-scheme="IPR" para-scheme-type="reporter-abbrev"&gt;5&lt;/ref:para&gt;&lt;/desig&gt;
    &lt;text&gt;...&lt;/text&gt;
&lt;/p&gt;
</pre>
            </section>

            <section>
                <title>Changes</title>
                <p>2014-09-03: <ph id="change_20170426_SS">The same rule is applicable on
                    CA10.</ph></p>
                <p>2014-09-03: <ph id="change_20140903_PS">The same rule is applicable on CA01 and
                        CA04.</ph></p>
                <p>2014-08-29: <ph id="change_20140829_SS">Updated instruction and example for
                        handling <targetxml>desig/@value</targetxml> and it's mapped with
                            <targetxml>desig@value/ref:para@num</targetxml> (means
                            <targetxml>ref:para</targetxml> should be placed inside of
                            <targetxml>desig</targetxml> markup).</ph></p>
                <p>2014-08-04: <ph id="change_20140804_PS">Updated instruction for
                            <targetxml>@para-scheme</targetxml> and
                            <targetxml>@para-scheme-type</targetxml> attribute.</ph></p>
                <p>2014-08-01: <ph id="change_20140801_PS">Created, this immediately applies to
                        AU01, AU13 and NZ03.</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_desig-LxAdv-desig_ref.para.dita  -->


    <xsl:template match="desig">

        <!--  Original Target XPath:  desig/ref:para   -->
        <xsl:choose>
            <xsl:when test="$streamID = ('AU01', 'NZ03', 'CA01', 'CA04')">

                <desig>
                    <xsl:attribute name="value">
                        <xsl:value-of select="@value"/>
                    </xsl:attribute>
                    <ref:para>
                        <xsl:attribute name="num">
                            <xsl:value-of select="@value"/>
                        </xsl:attribute>
                        <xsl:attribute name="para-scheme">
                            <xsl:value-of
                                select="(//ci:cite/ci:case/ci:caseref/ci:reporter/@value)[1]"/>
                        </xsl:attribute>
                        <xsl:attribute name="para-scheme-type">
                            <xsl:text>reporter-abbrev</xsl:text>
                        </xsl:attribute>
                        <xsl:apply-templates select="@* | node()"/>
                    </ref:para>
                    <!-- Awantika: Duplicate ref:para if case:courtcite/ci:cite/@type="cite4thisdoc" in AU01 -->
                    <xsl:if
                        test="$streamID = 'AU01' and //case:courtcite[ci:cite[@type = 'cite4thisdoc']]">
                        <ref:para>
                            <xsl:attribute name="num">
                                <xsl:value-of select="@value"/>
                            </xsl:attribute>
                            <xsl:attribute name="para-scheme">
                                <xsl:value-of select="(//ci:au/@courtcode)[1]"/>
                            </xsl:attribute>
                            <xsl:attribute name="para-scheme-type">
                                <xsl:text>reporter-abbrev</xsl:text>
                            </xsl:attribute>
                        </ref:para>
                    </xsl:if>
                </desig>

            </xsl:when>
            <xsl:when test="$streamID = ('AU13', 'HK09')">
                <xsl:choose>
                    <xsl:when test="parent::heading[parent::case:body]">
                        <desig>
                            <xsl:value-of select="."/>
                        </desig>
                    </xsl:when>
                    <xsl:otherwise>
                        <desig>
                            <xsl:attribute name="value">
                                <xsl:value-of select="@value"/>
                            </xsl:attribute>
                            <ref:para>
                                <xsl:attribute name="num">
                                    <xsl:value-of select="@value"/>
                                </xsl:attribute>
                                <xsl:attribute name="para-scheme">
                                    <xsl:value-of
                                        select="(//ci:cite/ci:case/ci:caseref/ci:reporter/@value)[1]"
                                    />
                                </xsl:attribute>
                                <xsl:attribute name="para-scheme-type">
                                    <xsl:text>reporter-abbrev</xsl:text>
                                </xsl:attribute>
                                <xsl:apply-templates select="@* | node()"/>
                            </ref:para>
                        </desig>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:when>
        </xsl:choose>




    </xsl:template>





    <xd:doc scope="stylesheet">
        <xd:desc>
            <xd:p><xd:b>Created on:</xd:b> May 10, 2017</xd:p>
            <xd:p><xd:b>Author:</xd:b> kuma136</xd:p>
            <xd:p/>
        </xd:desc>
    </xd:doc>

    <xsl:variable name="docRelatedContent-TableCA04">
        <references>
            <reference primary-language="English" alternate-language="French"
                primary-citation="C.A.P.P.R.T.D." alternate-citation="D.T.C.R.P.A.P."/>
            <reference primary-language="English" alternate-language="French"
                primary-citation="No.C.A.R.T.D." alternate-citation="noD.C.R.A.C."/>
            <reference primary-language="French" alternate-language="English"
                primary-citation="D.C.R.A.C." alternate-citation="C.A.R.T.D."/>
            <reference primary-language="English" alternate-language="French"
                primary-citation="noC.A.T.D" alternate-citation="No.D.T.A.C"/>
            <!-- <reference primary-language="" alternate-language="" primary-citation="" alternate-citation=""/>
            <reference primary-language="" alternate-language="" primary-citation="" alternate-citation=""/>
            <reference primary-language="" alternate-language="" primary-citation="" alternate-citation=""/>
            <reference primary-language="" alternate-language="" primary-citation="" alternate-citation=""/>
            <reference primary-language="" alternate-language="" primary-citation="" alternate-citation=""/>
            <reference primary-language="" alternate-language="" primary-citation="" alternate-citation=""/>
            <reference primary-language="" alternate-language="" primary-citation="" alternate-citation=""/>
            <reference primary-language="" alternate-language="" primary-citation="" alternate-citation=""/>
            <reference primary-language="" alternate-language="" primary-citation="" alternate-citation=""/>
            <reference primary-language="" alternate-language="" primary-citation="" alternate-citation=""/>
            <reference primary-language="" alternate-language="" primary-citation="" alternate-citation=""/>
            <reference primary-language="" alternate-language="" primary-citation="" alternate-citation=""/>-->
        </references>
    </xsl:variable>

    <xsl:key name="KRefrencebyName" match="reference" use="string(@primary-citation)"/>



    <!-- *****************************************************************************
	this template uses a global $dpsi parameter that should be placed in the 
	stream driver file as:
	
		<xsl:param name="dpsi" as="xs:string" select=" 'From LBU Manifest File' "/>
	
    this parameter can be used in any module in your stream.  Do not add 
    it as a variable or parameter in this file to avoid conflicts.
	*******************************************************************************	
	
	-->
    <!--<xsl:variable name="dpsi"/>-->

    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_docinfo-to-LexisAdvance_doc.metadata_doc.docinfo">
        <title><sourcexml>docinfo</sourcexml> to <targetxml>doc:metadata/doc:docinfo</targetxml>
            <lnpid>id-CCCC-10282</lnpid></title>
        <body>
            <section>
                <title>Instructions <i>[common element]</i></title>
                <p>
                    <ul>
                        <li><sourcexml>docinfo</sourcexml> becomes
                                <targetxml>doc:metadata/doc:docinfo</targetxml>.
                                <sourcexml>docinfo:dpsi[@id-string]</sourcexml>,
                                <sourcexml>docinfo[@browseprev]</sourcexml>,
                                <sourcexml>docinfo[@browsenext]</sourcexml>,
                                <sourcexml>docinfo[@partitionnum]</sourcexml>,
                                <sourcexml>docinfo[@majorrevision]</sourcexml>, and
                                <sourcexml>docinfo[@excludefromalerts]</sourcexml> become
                                <targetxml>doc:metadata/doc:docinfo/doc:legacy-metadata</targetxml>
                            with attribute
                                <targetxml>doc:legacy-metadata[@metadatasource="lbu-meta"]</targetxml>
                            with child elements: <ul>
                                <li>Create <targetxml>meta</targetxml> and
                                        <targetxml>metaitem</targetxml> with attributes
                                        <targetxml>@name</targetxml> and
                                        <targetxml>@value</targetxml>. </li>
                                <li>If document also contains an element
                                        <sourcexml>docinfo:lbu-meta</sourcexml> with child elements
                                    that are not explicitly dropped, include each metaitem after all
                                    of the <sourcexml>docinfo</sourcexml> attributes are placed
                                    here. See Example <sourcexml>docinfo</sourcexml> and
                                        <sourcexml>docinfo:lbu-meta</sourcexml> below. </li>
                            </ul>
                        </li>
                    </ul>
                </p>
            </section>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;docinfo partitionnum="2"&gt; &lt;docinfo:dpsi id-string="006F"&gt;
                    ................. ................. &lt;/docinfo&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;doc:metadata&gt; &lt;doc:docinfo doc-content-country="AU"&gt;
                    &lt;dc:metadata&gt; ...... ...... &lt;/dc:metadata&gt; &lt;doc:legacy-metadata
                    metadatasource="lbu-meta"&gt; &lt;meta&gt; &lt;metaitem name="partitionnum"
                    value="2"/&gt; &lt;metaitem name="dpsi" value="006F"/&gt; &lt;/meta&gt;
                    &lt;/doc:legacy-metadata&gt; &lt;/doc:docinfo&gt; &lt;/doc:metadata&gt;
                </codeblock>
            </example>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;docinfo browseprev="true" browsenext="true" majorrevision="false"
                    excludefromalerts="true"&gt; ................. .................
                    &lt;/docinfo&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;doc:metadata&gt; &lt;doc:docinfo doc-content-country="AU"&gt;
                    &lt;dc:metadata&gt; ...... ...... &lt;/dc:metadata&gt; &lt;doc:legacy-metadata
                    metadatasource="lbu-meta"&gt; &lt;meta&gt; &lt;metaitem name="browseprev"
                    value="true"/&gt; &lt;metaitem name="browsenext" value="true"/&gt; &lt;metaitem
                    name="majorrevision" value="false"/&gt; &lt;metaitem name="excludefromalerts"
                    value="true"/&gt; &lt;/meta&gt; &lt;/doc:legacy-metadata&gt;
                    &lt;/doc:docinfo&gt; &lt;/doc:metadata&gt; </codeblock>
            </example>
            <example>
                <title>Source XML</title>
                <codeblock> &lt;docinfo partitionnum="1"&gt; ................. .................
                    &lt;/docinfo&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;doc:metadata&gt; &lt;doc:docinfo doc-content-country="CA"&gt;
                    &lt;dc:metadata&gt; ...... ...... &lt;/dc:metadata&gt; &lt;doc:legacy-metadata
                    metadatasource="lbu-meta"&gt; &lt;meta&gt; &lt;metaitem name="partitionnum"
                    value="1"/&gt; &lt;/meta&gt; &lt;/doc:legacy-metadata&gt; &lt;/doc:docinfo&gt;
                    &lt;/doc:metadata&gt; </codeblock>
            </example>

            <example>
                <title>Example docinfo and docinfo:lbu-meta - Target</title>
                <codeblock> &lt;doc:legacy-metadata metadatasource="lbu-meta"&gt; &lt;meta&gt;
                    &lt;metaitem name="browsenext" value="false"/&gt; &lt;metaitem name="browseprev"
                    value="false"/&gt; &lt;metaitem name="majorrevision" value="false"/&gt;
                    &lt;metaitem name="excludefromalerts" value="true"/&gt; &lt;metaitem
                    name="partitionnum" value="COMM1"/&gt; &lt;metaitem name="lbu-sourcename"
                    value="Business Law Emerging Issues"/&gt; &lt;metaitem name="document-type"
                    value="Emerging Issue"/&gt; &lt;metaitem name="filename"
                    value="BusLaw_EI_1850.xml"/&gt; &lt;/meta&gt; &lt;/doc:legacy-metadata&gt;
                </codeblock>
            </example>


            <section>
                <title>Create Required <targetxml>dc:metadata</targetxml> Element</title>
                <p>The element <targetxml>dc:metadata</targetxml> is the first required child
                    element of <targetxml>doc:metadata/doc:docinfo</targetxml>. As such,
                        <targetxml>dc:metadata</targetxml> should be created immediately after
                    creating <targetxml>doc:metadata/doc:docinfo</targetxml>.</p>
                <p>
                    <note>
                        <p>In addition, as part of workflow processing , ICCE will provide LNI
                            values for each document. This PCDATA value will be mapped to the
                            following:</p>
                        <ul>
                            <li>
                                <targetxml>dc:identifier[@lnmeta:identifier-scheme="LNI"]</targetxml>
                            </li>
                            <li>
                                <targetxml>dc:identifier[@lnmeta:identifier-scheme="PGUID"]</targetxml>
                            </li>
                        </ul>
                        <p>The LNI value for
                                <targetxml>dc:identifier[@lnmeta:identifier-scheme="PGUID"]</targetxml>will
                            include the "urn:contentItem" namespace prefix.</p>
                    </note>
                </p>
                <ul>
                    <li>
                        <p>Create
                            <targetxml>dc:date[@lnmeta:datetype="conversion-date"]</targetxml>. This
                            element will contain the date the output file was created during
                            conversion. </p>
                        <note>The format of the content of all <targetxml>dc:date</targetxml>
                            elements must be in 'YYYY-MM-DD'.</note>
                    </li>
                </ul>
            </section>
            <example>
                <title>LNI Values from ICCE</title>
                <codeblock> &lt;dc:identifier
                    lnmeta:identifier-scheme="LNI"&gt;5617-TBH1-67MJ-64K7-00000-00&lt;/dc:identifier&gt;
                    &lt;dc:identifier
                    lnmeta:identifier-scheme="PGUID"&gt;urn:contentItem:5617-TBH1-67MJ-64K7-00000-00&lt;/dc:identifier&gt;
                </codeblock>
            </example>
            <example>
                <title>dc:date[@lnmeta:datetype="conversion-date"]</title>
                <codeblock> &lt;dc:metadata&gt; ... &lt;dc:date
                    lnmeta:datetype="conversion-date"&gt;2013-08-07&lt;/dc:date&gt; ...
                    &lt;/dc:metadata&gt; </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2017-03-15: <ph id="change_20170315_SBy">Added
                            <targetxml>dc:identifier[@lnmeta:identifier-scheme = "LNI"]</targetxml>
                        and <targetxml>dc:identifier[@lnmeta:identifier-scheme =
                            "PGUID"]</targetxml> to XSLT</ph>.</p>
                <p>2015-04-14: <ph id="change_20150414_SA">Remove bullet icon in sub nested list for
                        handling Indentation isssue.</ph></p>
                <p>2013-08-09: <ph id="change_20130809_raj">Added instruction for creating
                            <targetxml>dc:date[@lnmeta:datetype="conversion-date"]</targetxml>.
                        Previously, "conversion-date" was created only if "load-date" was not
                        present. Going forward, conversion should always create "conversion-date".
                        This is not a retroactive change. It should be applied only to streams
                        developed after Aug. 9 2013.</ph></p>
                <p>2013-07-18: <ph id="change_20130718_jm">Added
                            <sourcexml>@excludefromalerts</sourcexml> as one of the
                            <sourcexml>docinfo</sourcexml> attributes to carry through</ph>. Also
                    added <sourcexml>@majorrevision</sourcexml> to the narrative; already present in
                    a target sample.</p>
                <p>2013-05-16: <ph id="change_20130516_WL">Fixed typo updating <b>urn:contentitem to
                            urn:contentItem</b></ph></p>
                <p>2013-04-08: Removed instructions for 3.5 conversion as no longer applicable and
                    to avoid confusion.</p>
                <p>2012-11-28: Added instructions for 3.5 conversion and 4.0 conversion.</p>
                <p>2012-10-05: Added instructions for consolidation of attributes from docinfo and
                    content from lbu-meta from source into a single doc:legacy-metadata
                    grouping.</p>
                <p>2012-09-06: Created. </p>
            </section>
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_docinfo-LxAdv-doc.metadata_doc.docinfo.dita  -->

    <!-- CSN: Created docinfo and children from base.xsl -->
    <!-- this template processes all the content that goes into doc:docinfo. -->



    <xsl:template match="docinfo">

        <doc:docinfo
            xmlns:lnmeta="http://www.lexisnexis.com/xmlschemas/content/shared/lexisnexis-metadata/1/">
            <!--   add attribute doc-content-country   -->
            <!--Satbir: Added hardcore value inside attribute @doc-country-code only for HK-->
            <xsl:choose>
                <xsl:when test="starts-with($streamID, 'HK')">
                    <xsl:attribute name="doc-content-country" select="'HK'"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:call-template name="doc_content_country"/>
                </xsl:otherwise>
            </xsl:choose>


            <dc:metadata>

                <dc:identifier lnmeta:identifier-scheme="LNI"
                    >0000-0000-0000-0000-00000-00</dc:identifier>
                <dc:identifier lnmeta:identifier-scheme="PGUID"
                    >urn:contentItem:0000-0000-0000-0000-00000-00</dc:identifier>

                <xsl:apply-templates select="docinfo:load-date"/>

                <dc:date lnmeta:datetype="conversion-date">
                    <xsl:value-of select="format-date(current-date(), '[Y0001]-[M01]-[D01]')"/>
                </dc:date>
                <xsl:apply-templates select="/COMMENTARYDOC/comm:info/pubdate" mode="dc.metadata"/>
                <!-- PLEASE DO NOT REMOVE UK-SPECIFIC CONDITIONS  -->
                <xsl:if test="starts-with($streamID, 'UK')">
                    <xsl:apply-templates
                        select="docinfo:custom-metafields/docinfo:custom-metafield[@name = ('editorialPublishedDate', 'createdDate', 'updatedDate')]"
                    />
                </xsl:if>

                <!-- 20170623:  MCJ:  Removed AU06 from this list in preference to using modules/docinfo/Rosetta_docinfo.doc-id-LxAdv-dcidentifier_lnmetaidentifier-scheme.xsl. -->
                <!--  WPK 2017-11-06.  Due to webstar, all of the following streams must now use modules\docinfo\Rosetta_docinfo.doc-id-LxAdv-dcidentifier_lnmetaidentifier-scheme.xsl
				http://webstar.reedelsevier.com/WebStarWebApp/incident/viewIncident.do?incTktNum=7041473
				Also, streams need to remove any stream empty template that would conflict, i.e. <xsl:template match=?docinfo:doc=id?/>.  
				<xsl:if test="$streamID = ('AU10', 'AU13', 'AU16', 'AU17', 'AU19-CA', 'NZ14', 'NZ02', 'AU09', 'NZ10','HK09','AU19_CC')">
					<xsl:if test="docinfo:doc-id">
						<dc:identifier lnmeta:identifier-scheme="DOC-ID">
							<xsl:value-of select="docinfo:doc-id"/>
						</dc:identifier>
					</xsl:if>
				</xsl:if>
				
				<xsl:if test="$streamID=('NZ07-DN', 'NZ07DC','AU14','NZ08')">
					<xsl:if test="docinfo:doc-id">
						<dc:identifier lnmeta:identifier-scheme="DOC-ID">
							<xsl:value-of select="docinfo:dpsi/@id-string"/>
							<xsl:text>-</xsl:text>
							<xsl:value-of select="docinfo:doc-id"/>
						</dc:identifier>
					</xsl:if>
				</xsl:if>
				-->

                <!-- Sudhanshu Srivastava: Added condition for CA03 to convert leg:officialname,leg:num to dc:title -->
                <xsl:if test="$streamID = 'CA03'">
                    <xsl:choose>
                        <xsl:when
                            test="following-sibling::source_cttr:body/leg:info/leg:officialname">
                            <xsl:apply-templates
                                select="following-sibling::source_cttr:body/leg:info/leg:officialname"
                            />
                        </xsl:when>
                        <xsl:otherwise>
                            <xsl:apply-templates
                                select="following-sibling::source_cttr:body/case:headnote/case:info/case:casename"
                                mode="dc.title"/>
                        </xsl:otherwise>
                    </xsl:choose>

                </xsl:if>

                <xsl:apply-templates select="docinfo:doc-heading | docinfo:doc-id"/>


                <!-- JD: 2017-10-10: VSTS Bug 352379: use docinfo:doc-heading for dc:title for UK01 -->
                <!-- CN: 2017-10-13: VSTS Bug 352379: use docinfo:doc-heading for dc:title added UK02 and UK04 -->
                <xsl:if test="$streamID = ('UK01', 'UK02', 'UK04')">
                    <dc:title>
                        <xsl:value-of select="/CASEDOC/docinfo/docinfo:doc-heading"/>
                    </dc:title>
                </xsl:if>

                <!-- JD: UK01-UK04: case:casename to dc:title (id-CCCC-10531) -->
                <!--
				<xsl:if test="$streamID = ('UK02','UK04')">
				  <dc:title>
  				  <xsl:value-of select="concat(/CASEDOC/case:body/case:headnote/case:info/case:casename, ' ',/CASEDOC/case:body/case:headnote/case:info/case:reportercite/ci:cite[@type='cite4thisdoc']/ci:content)"/>
				  </dc:title>
				</xsl:if>
				-->
                <!-- CN: 2017-10-13: VSTS Bug 352379: use docinfo:doc-heading for dc:title for UK03 -->
                <xsl:if test="$streamID = 'UK03'">
                    <dc:title>
                        <xsl:value-of select="/DIGESTDOC/docinfo/docinfo:doc-heading"/>
                    </dc:title>
                </xsl:if>

                <!-- same as above, but different mode name -->
                <!--<xsl:if test="$streamID = ('UK04')">
					<xsl:apply-templates select="/CASEDOC/case:body/case:headnote/case:info/case:casename[$streamID='UK04']" mode="title"/>
				</xsl:if>-->

                <!-- JD: UK05: case:casename to dc:title (id-UK05-27824) -->
                <xsl:if test="$streamID = 'UK05'">
                    <xsl:apply-templates
                        select="/CITATORDOC/source_cttr:body/case:headnote/case:info/case:casename | /CITATORDOC/source_cttr:body/case2:headnote/case2:info/case2:casename"
                        mode="dc.metadata"/>
                </xsl:if>
                <xsl:apply-templates select="docinfo:authorattribution"/>
                <!--  @@@ TODO:  update DITA to match this code!!!  -->
                <!-- Awantika: Removed /CASEDOC/case:body/case:headnote/case:info/case:courtinfo/case:juris from apply templates as this was creating unnecessary content(hkhk) mapping needs to be converted to <dc:coverage> in HK03 -->
                <xsl:choose>
                    <xsl:when test="starts-with($streamID, 'CA08')">
                        <xsl:apply-templates
                            select="
                                /CASEDOC/case:body/case:headnote/case:info/case:courtinfo/case:juris |
                                /CITATORDOC/source_cttr:body/case:headnote/case:info/case:courtinfo/case:juris"
                            mode="metadata"/>
                    </xsl:when>
                    <xsl:when
                        test="$streamID = ('CA01', 'CA03', 'CA02CC', 'CA02DC', 'CA06', 'CA05', 'CA04', 'CA07', 'UK03', 'UK07', 'UK06', 'NZ07DN', 'NZ13')"/>
                    <xsl:when test="$streamID = 'AU12'">
                        <xsl:apply-templates
                            select="/DIGESTDOC/dig:body/dig:info/leg:info/leg:juris" mode="metadata"
                        />
                    </xsl:when>
                    <xsl:when test="$streamID = 'NZ10'">
                        <xsl:apply-templates select="/LEGDOC/leg:body/leg:info/leg:juris"
                            mode="metadata"/>
                    </xsl:when>
                    <xsl:when test="$streamID = 'CA19'">
                        <xsl:apply-templates
                            select="/CASEDOC/case:body/case:headnote/case:info/case:courtinfo/case:juris"
                            mode="metadata"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <!--*********************
							Paul:  for AU08 this otherwise clause is applicable as is unedited.
							It creates dc:coverage/location:state because I have a stream specific "metadata" mode template for leg:juris.
							I've changed nothing here.  just noting that i'm leveraging this for AU08 court orders too.
							***************************-->
                        <!-- Awantika: added xpath /CITATORDOC/source_cttr:body/leg:info/leg:juris for AU20 -->
                        <!--Satbir: Added Xpath "/DIGESTDOC/dig:body/dig:info/case:info/case:courtinfo/case:juris" for NZ07DC-->
                        <!--Satbir: Mentioned first position for jursi handling "case:courtinfo[1]/case:juris" because juris comes twicely-->
                        <!-- Awantika:2017-10-17- Added not(streamID='AU01') to /CASEDOC/case:body/case:headnote/case:info/case:courtinfo[1]/case:juris as this was creating data outside identifier. -->
                        <!-- Awantika:2017-10-31- Removed not(streamID='AU01') to /CASEDOC/case:body/case:headnote/case:info/case:courtinfo[1]/case:juris data given was for NZ so changed back for AU01 -->
                        <xsl:apply-templates
                            select="
                                /CASEDOC/case:body/case:headnote/case:info/case:courtinfo[1]/case:juris |
                                /LEGDOC/leg:body/leg:info/leg:juris | /CITATORDOC/source_cttr:body/leg:info/leg:juris |
                                /CITATORDOC/source_cttr:body/case:headnote/case:info/case:courtinfo/case:juris |
                                /CITATORDOC/source_cttr:body/case2:headnote/case2:info/case2:courtinfo/case2:juris | /DIGESTDOC/dig:body/dig:info/case:info/case:courtinfo/case:juris"
                            mode="metadata"/>
                    </xsl:otherwise>
                </xsl:choose>

                <!-- Awantika: case:juris will also be converted to <dc:coverage> in HK03  -->
                <!--<xsl:if test="/CASEDOC/case:body/case:headnote/case:info/case:courtinfo/case:juris and $streamID = 'HK03'">
					<dc:coverage>
						<location:country>
							<xsl:attribute name="codescheme">
								<xsl:text>ISO-3166-1</xsl:text>
							</xsl:attribute>
							<xsl:attribute name="countrycode">
								<xsl:text>HK</xsl:text>
							</xsl:attribute>
						</location:country>
					</dc:coverage>
				</xsl:if>-->
                <xsl:apply-templates select="/COMMENTARYDOC/comm:info[$streamID = 'USLPA']"
                    mode="person_contributor"/>

                <xsl:if test="$streamID = ('UK06', 'UK07')">
                    <dc:coverage>
                        <location:country>
                            <xsl:attribute name="codescheme">
                                <xsl:text>ISO-3166-1</xsl:text>
                            </xsl:attribute>
                            <xsl:attribute name="countrycode">
                                <xsl:text>GB</xsl:text>
                            </xsl:attribute>
                        </location:country>
                    </dc:coverage>
                </xsl:if>

            </dc:metadata>

            <xsl:apply-templates
                select="docinfo:versioninfo[@hasotherversions = 'true'][$streamID = 'CA05']"
                mode="doc_version"/>

            <xsl:apply-templates
                select="/LEGDOC/docinfo/docinfo:custom-metafields/docinfo:custom-metafield[@name = 'actFirstDoc'][contains(upper-case(.), 'TRUE')][$streamID = 'CA05']"
                mode="firstActDoc"/>

            <xsl:apply-templates
                select="/COMMENTARYDOC/comm:info/classification[$streamID = 'USLPA']"
                mode="metadata_classification"/>

            <xsl:apply-templates select="docinfo:custom-metafields[$streamID = 'USLPA']"
                mode="metadata_custom"/>

            <!-- Sudhanshu Srivastava:
			     Created on - 28-06-2017.
			     Comments : The below condition will create classify:classification inside doc:docinfo based on if input source having (docinfo:custom-metafield name="is-first-document-in-enactment") or (docinfo:custom-metafield name="is-last-document-in-enactment").
			-->
            <xsl:if
                test="($streamID = ('UK06', 'UK07')) and (docinfo:custom-metafields/docinfo:custom-metafield[@name = 'is-first-document-in-enactment'] or docinfo:custom-metafields/docinfo:custom-metafield[@name = 'is-last-document-in-enactment'])">
                <classify:classification classscheme="actDocumentOrder">
                    <xsl:apply-templates
                        select="docinfo:custom-metafields/docinfo:custom-metafield[@name = 'is-first-document-in-enactment']"
                        mode="isfirstdocumentinenactment"/>
                    <xsl:apply-templates
                        select="docinfo:custom-metafields/docinfo:custom-metafield[@name = 'is-last-document-in-enactment']"
                        mode="islastdocumentinenactment"/>
                </classify:classification>
            </xsl:if>

            <!-- MDS - 2017-06-27 - For NZ07DN -->
            <xsl:if test="$streamID = 'NZ07-DN'">
                <xsl:apply-templates
                    select="/DIGESTDOC/dig:body/dig:info/jrnl:articleinfo/pubnote[remotelink]"/>
            </xsl:if>

            <!-- process that belong in doc:docinfo -->
            <!--  @@@ TODO:  update DITA to match this code!!!  -->
            <!-- Sudhanshu Srivastava: in CA13 stream , i have no need to transform here 'docinfo:hier', so i am making changes for sequencing of 
			docinfo:heir-->
            <xsl:if test="not($streamID = 'CA13')">
                <xsl:apply-templates select="docinfo:hier"/>
            </xsl:if>
            <!-- Priya Kaushal : Added below for the stream UK15 -->
            <xsl:apply-templates select="classification[$streamID = 'UK15']"/>
            <!--	<xsl:if test = "$streamID='UK15'">
				<xsl:if test="./classification">
					<classify:classification>
						<xsl:attribute name="classscheme">
							<xsl:value-of select="./classification/@classscheme"/>
						</xsl:attribute>
						<xsl:for-each select="./classification/classitem">
							<classify:classitem>
								<xsl:attribute name="classscheme">
									<xsl:value-of select="./classification/classitem/@classscheme"/>
								</xsl:attribute>
								<meta>
									<metaitem name="appliedby" value="human"/>
								</meta>
								<topic:topicReference xmlns:topic="urn:x-lexisnexis:content:topic:global:1"
									xmlns:guid="urn:x-lexisnexis:content:guid:global:1">
									<xsl:attribute name="guid:guid">
									<xsl:value-of select="./classitem-identifier/classcode/@normval"/>
								</xsl:attribute>
								</topic:topicReference>
							</classify:classitem>
						</xsl:for-each>
						
						</classify:classification>	
				</xsl:if>				
			</xsl:if>
			-->
            <xsl:apply-templates select="//case:reportercite[$streamID = ('CA01', 'CA04')]"
                mode="docrelated-content"/>

            <!-- Vikas Rohilla : Added for the stream CA01 -->
            <xsl:apply-templates
                select="//refnum[@refnumtype = 'UCN'][$streamID = ('CA01', 'CA02CC', 'CA02DC', 'CA19', 'CA02DS', 'CA04')]"
                mode="docinfoMember"/>
            <xsl:apply-templates select="docinfo:doc-id[$streamID = 'CA03']" mode="membership"/>
            <xsl:apply-templates select="docinfo:bookseqnum"/>
            <xsl:apply-templates select="docinfo:alt-renditions"/>
            <!-- Awantika: Added for UK11 -->
            <xsl:choose>
                <xsl:when test="$streamID = 'UK11DA'">
                    <xsl:apply-templates
                        select="following-sibling::dig:body/dig:info/dig:subject[@display-name = 'Jurisdiction']"
                    />
                </xsl:when>
                <xsl:otherwise>
                    <xsl:apply-templates select="//dig:body/dig:info/dig:subject"/>
                </xsl:otherwise>
            </xsl:choose>


            <xsl:call-template name="legacy-metadata"/>
            <!-- Sudhanshu Srivastava : transforming 'docinfo:hier' here for making sequence correct for CA13 stream. -->
            <xsl:if test="$streamID = 'CA13'">
                <xsl:apply-templates select="docinfo:hier"/>
            </xsl:if>
            <xsl:if
                test="$streamID = 'CA03' and following-sibling::source_cttr:body/leg:info/leg:relatedleg">
                <xsl:apply-templates
                    select="following-sibling::source_cttr:body/leg:info/leg:relatedleg"
                    mode="relatedcon"/>
            </xsl:if>
            <xsl:apply-templates select="docinfo:topiccodes"/>
            <xsl:apply-templates select="//case:headnote/case:length"/>
            <xsl:apply-templates select="docinfo:assoc-links"/>

            <!-- Sudhanshu added an applied template for  -->

            <xsl:apply-templates select="docinfo:changemanagementcode"/>


            <!-- process all docinfo:selector elements in the same wrapper -->
            <xsl:if test="docinfo:selector">
                <classify:classification classscheme="selector">
                    <xsl:apply-templates select="docinfo:selector"/>
                </classify:classification>
            </xsl:if>
            <!-- CSN - 2017/09/26 - added parenthesis so this classification does not show up in every stream -->
            <xsl:if
                test="$streamID = 'AU18' and (parent::LEGDOC[@legtype = 'misc-inst'] or contains(child::docinfo:selector/text(), 'misc-inst'))">
                <classify:classification classscheme="au.admindoctype">
                    <classify:classitem>
                        <classify:classitem-identifier>
                            <classify:classname>
                                <xsl:text>miscellaneous-instrument</xsl:text>
                            </classify:classname>
                        </classify:classitem-identifier>
                    </classify:classitem>
                </classify:classification>
            </xsl:if>
            <!-- CSN 2017-11-15 Added UK18 to accomodate docinfo/classification needed for Quantum Stub documents. VSTS Bug 402801. -->
            <xsl:apply-templates select="classification[$streamID = ('UK13', 'UK18')]"/>
            <xsl:apply-templates select="docinfo:topiccodes[$streamID = 'NZ10']"/>
            <xsl:apply-templates select="/LEGDOC/@legtype[$streamID = 'NZ12']" mode="NZClassify"/>
            <xsl:if
                test="/COMMENTARYDOC/docinfo/docinfo:lbu-meta/docinfo:metaitem[@name = 'PA-PGUID' or @name = 'TOPIC-PGUID' or @name = 'SUB-TOPIC-PGUID']">
                <classify:classification-grp classscheme="ln.indexing-terms">
                    <classify:classification classscheme="ln.legal">
                        <xsl:apply-templates
                            select="/COMMENTARYDOC/docinfo/docinfo:lbu-meta/docinfo:metaitem[@name = 'PA-PGUID' or @name = 'TOPIC-PGUID' or @name = 'SUB-TOPIC-PGUID']"
                            mode="classify"/>
                    </classify:classification>
                </classify:classification-grp>
            </xsl:if>
            <!-- PLEASE DO NOT REMOVE UK-SPECIFIC CONDITIONS  -->
            <xsl:if
                test="starts-with($streamID, 'UK') and (@majorrevision or @excludefromalerts or docinfo:custom-metafields/docinfo:custom-metafield[@name = ('important', 'highlightFrequency', 'inEditorialReview', 'resultType', 'word-toc', 'isDocBuilderAvailable', 'isCorePrecedent')])">
                <xsl:apply-templates select="." mode="UKClassify"/>
            </xsl:if>
            <xsl:if test="//page">
                <xsl:variable name="pageList" select="//page"/>
                <doc:pagination>
                    <xsl:for-each-group select="$pageList" group-by="@reporter">
                        <doc:pagination-scheme>
                            <xsl:if test="@reporter != ''">
                                <xsl:attribute name="page-scheme">
                                    <xsl:value-of select="translate(@reporter, ' ', '_')"/>
                                </xsl:attribute>
                            </xsl:if>
                            <xsl:attribute name="page-scheme-type"
                                >reporter-abbreviation</xsl:attribute>
                        </doc:pagination-scheme>
                    </xsl:for-each-group>
                </doc:pagination>
            </xsl:if>

            <xsl:apply-templates select="/LEGDOC/@legtype[$streamID = ('AU19LA', 'AU15')]"
                mode="AUClassify"/>

            <xsl:apply-templates select="docinfo:currencystatement"/>
            <xsl:apply-templates select="docinfo:keywords[$streamID = 'UK15_DS']"/>
            <!--pawan: added to create  classify:classification[@classscheme="keywords"] from docinfo:keywords-->
            <xsl:apply-templates select="docinfo:lbu-indexing-terms"/>
            <xsl:apply-templates select="docinfo:lbu-subj"/>
            <xsl:apply-templates select="docinfo:lbu-juris"/>
            <xsl:apply-templates select="docinfo:overview"/>
            <xsl:apply-templates select="docinfo:versioninfo[$streamID != 'CA05']"/>
            <!-- Vikas Rohilla : Apply template for the streamID UK11DA					-->
            <!-- Awantika: Apply template for UK11DN -->
            <xsl:apply-templates select="classification[$streamID = ('UK11DA', 'UK11DN', 'UK03')]"/>
            <!-- Vikas Rohilla : Updated the template for the highlight becomes doc:overview -->
            <xsl:apply-templates
                select="//dig:info/highlight[not(preceding-sibling::highlight)][$streamID = 'CA14']"
                mode="doc-overview"/>
            <xsl:apply-templates
                select="//row/entry[@colname = 'col1'][matches(., 'SUBJECTS/SUJETS:') or matches(., 'Subjects\\Sujets:')][$streamID = 'CA11']"
                mode="highlights"/>
            <xsl:apply-templates
                select="docinfo:custom-metafields/docinfo:custom-metafield[@name = 'actFirstDoc'][contains(., 'true')][($streamID = 'CA06') or ($streamID = 'CA07') or ($streamID = 'CA08')]"
                mode="classify"/>
            <xsl:apply-templates
                select="docinfo:custom-metafields/docinfo:custom-metafield[@name = 'act-id' or @searchtype = 'act-id'][($streamID = 'CA08') or ($streamID = 'CA07')]"
                mode="doc_membership"/>
            <xsl:apply-templates
                select="docinfo:versioninfo/docinfo:versionbranch[$streamID = ('CA05', 'CA06', 'CA08')]"
                mode="member"/>
            <xsl:apply-templates
                select="docinfo:custom-metafields/docinfo:custom-metafield[@name = 'act-id'][$streamID = ('CA06')]"
                mode="membership"/>
            <xsl:apply-templates select="following::ci:content[$streamID = ('CA06', 'CA07')]"
                mode="doc-related"/>
            <xsl:apply-templates
                select="following::leg:num[not(starts-with(., 'solsak'))][$streamID = ('CA08')]"
                mode="doc_related_content-alt-lang"/>

            <xsl:apply-templates select="following::leg:num[1][$streamID = ('CA05', 'CA07')]"
                mode="doc-related-content-alt-lang"/>

            <xsl:apply-templates
                select="following::leg:officialnum[1][not(child::ci:cite)][not(preceding-sibling::leg:num[child::ci:cite])][$streamID = ('CA06')]"
                mode="doc_related_content_officialnum"/>

            <xsl:apply-templates
                select="/LEGDOC/leg:body[child::leg:level][$streamID = ('CA06', 'CA07', 'CA08')]"
                mode="metadata"/>
            <xsl:apply-templates select="/LEGDOC/leg:body[$streamID = ('CA05')]"
                mode="doc_overview_bills"/>
            <xsl:apply-templates select="/COMMENTARYDOC/comm:body[$streamID = 'CA10']"
                mode="overviewmeta"/>
            <xsl:apply-templates select="/COMMENTARYDOC/comm:body[$streamID = 'CA09']"
                mode="doc_overview"/>
            <xsl:apply-templates
                select="/COMMENTARYDOC/docinfo/relationshipmetadata[$streamID = 'UK14']"/>
            <xsl:apply-templates
                select="//note[@notetype = 'other']/remotelink[contains(., '[version anglaise]') or contains(., '[French Version]')][$streamID = 'CA02DS']"
                mode="doc-related_content"/>
            <xsl:apply-templates select="//jrnl:body[$streamID = 'CA15']" mode="doc_overview"/>
            <!-- Awantika: Applied template for note scnario in AU20 -->
            <xsl:apply-templates
                select="//CITATORDOC/source_cttr:body/leg:info/note[@notetype = 'xref' and (@id = 'SCAP4' or 'SCAI4')]"/>
            <xsl:apply-templates select="docinfo:leginclude[$streamID = ('UK06', 'UK07')]"/>
        </doc:docinfo>

    </xsl:template>

    <xsl:template name="legacy-metadata">

        <!-- don't create doc:legacy-metadata unless at least one of the following is present -->
        <xsl:if
            test="docinfo:dpsi | /CITATORDOC/@citatordoctype | /CITATORDOC/@fullcourt | /CITATORDOC/@notannotated | /CITATORDOC/@shortannot | /CITATORDOC/@unreported | @browseprev | @browsenext | @partitionnum | @majorrevision | @excludefromalerts | @excludefromtoc | @id-string | docinfo:custom-metafields | //leg:info/leg:hier | docinfo:lbu-meta | docinfo:subtype | perjudge">

            <doc:legacy-metadata metadatasource="lbu-meta">

                <meta xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <xsl:for-each select="/*[1]/docinfo[1]/@excludefromtoc">
                        <metaitem>
                            <xsl:attribute name="name">
                                <xsl:text>excludefromtoc</xsl:text>
                            </xsl:attribute>
                            <xsl:attribute name="value">
                                <xsl:value-of select="."/>
                            </xsl:attribute>
                        </metaitem>
                    </xsl:for-each>
                    <xsl:choose>
                        <!--			Vikas Rohilla : updated the and condition			-->
                        <xsl:when
                            test="docinfo:dpsi[@id-string] and not(./docinfo:lbu-meta/docinfo:metaitem[upper-case(@name) = 'DPSI'])">
                            <xsl:apply-templates select="docinfo:dpsi"/>
                        </xsl:when>
                        <xsl:otherwise>
                            <xsl:call-template name="findDPSI"/>
                        </xsl:otherwise>
                    </xsl:choose>
                    <!-- Awantika: metaitem mapping for case:courtcode in HK03. SP: also using this for CA19. Sudhanshu : Added  -->
                    <!-- Ravikant: 2018-03-09 Added the streamID MY01 for case:courtcode, metaitem mapping in MY01. -->
                    <xsl:if
                        test="//case:courtcode[$streamID = ('HK03', 'CA19', 'CA02CC', 'CA01', 'NZ03', 'AU13', 'UK01', 'UK03', 'NZ07-DN', 'NZ07DC', 'AU07', 'NZ17CC', 'AU09', 'HK09', 'MY01')]">
                        <metaitem>
                            <xsl:attribute name="name">
                                <xsl:text>case:courtcode</xsl:text>
                            </xsl:attribute>
                            <xsl:attribute name="value">
                                <xsl:value-of select="//case:courtcode/text()"/>
                            </xsl:attribute>
                        </metaitem>
                        <!-- Awantika: instruction ends -->
                    </xsl:if>
                    <!-- 2018-03-16: Ravikant: metaitem mapping for case:courtcode in CA03-->
                    <xsl:if
                        test="//case:headnote/case:info/case:courtinfo/case:courtcode[$streamID = 'CA03']">
                        <metaitem>
                            <xsl:attribute name="name">
                                <xsl:text>case:courtcode</xsl:text>
                            </xsl:attribute>
                            <xsl:attribute name="value">
                                <xsl:value-of
                                    select="//case:headnote/case:info/case:courtinfo/case:courtcode/text()"
                                />
                            </xsl:attribute>
                        </metaitem>

                    </xsl:if>
                    <!-- Ravikant: instruction ends -->

                    <!-- Awantika: Added metaitem for UK11DN for alert:alertReference and topic:topicReference-->
                    <!-- BRT 10/3/17: commented this out in favor of the code on line 680 -->
                    <!--xsl:if test="/DIGESTDOC/docinfo/classification[child::classitem[@classscheme='alert:alertReference']/classitem-identifier/classname['ModuleID']][$streamID = ('UK11DN','UK03','UK11DA')]">
						<metaitem>
							<xsl:attribute name="name">
								<xsl:text>MODULE-CURRENTNESS-ALERT</xsl:text>
							</xsl:attribute>
							<xsl:attribute name="value">
								<xsl:value-of select="/DIGESTDOC/docinfo/classification/classitem[@classscheme='alert:alertReference']/classitem-identifier[child::classname['ModuleID']]/classcode/@normval"/>
							</xsl:attribute>
						</metaitem>
					</xsl:if-->
                    <!-- BRT 10/3/17 commented out, use alert code as model for @classscheme='topic:topicReference' further down -->
                    <!--xsl:if test="/DIGESTDOC/docinfo/classification[child::classitem[@classscheme='topic:topicReference']/classitem-identifier/classname['ModuleID']][$streamID = 'UK11DN']">
						<metaitem>
							<xsl:attribute name="name">
								<xsl:text>MODULE-PGUID</xsl:text>
							</xsl:attribute>
							<xsl:attribute name="value">
								<xsl:value-of select="/DIGESTDOC/docinfo/classification/classitem[@classscheme='topic:topicReference']/classitem-identifier[child::classname['ModuleID']]/classcode/@normval"/>
							</xsl:attribute>
						</metaitem>
					</xsl:if-->
                    <!-- JD: 20170526: added for UK05
					"PLEASE NOTE that the element doc:legacy-metadata needs to be created only for case:courtcode occurring within
					case:headnote/case:info/case:courtinfo. There is NO NEED to create doc:legacy-metadata for all other occurrences, eg.,
					cttr:annot/case:info/case:courtinfo."
					-->
                    <xsl:if
                        test="/CITATORDOC/source_cttr:body/case:headnote/case:info/case:courtinfo/case:courtcode[$streamID = 'UK05']">
                        <metaitem>
                            <xsl:attribute name="name">
                                <xsl:text>case:courtcode</xsl:text>
                            </xsl:attribute>
                            <xsl:attribute name="value">
                                <xsl:value-of
                                    select="/CITATORDOC/source_cttr:body/case:headnote/case:info/case:courtinfo/case:courtcode/text()"
                                />
                            </xsl:attribute>
                        </metaitem>
                    </xsl:if>
                    <xsl:apply-templates
                        select="//case:info/case:reportercite/@ln.user-displayed[$streamID = 'AU07']"
                        mode="metadata"/>
                    <!-- JD: end add for UK05 -->
                    <xsl:apply-templates
                        select="/CITATORDOC/@citatordoctype | /CITATORDOC/@fullcourt | /CITATORDOC/@notannotated | /CITATORDOC/@shortannot | /CITATORDOC/@unreported | @browseprev | @browsenext | @partitionnum | @majorrevision | @excludefromalerts | @id-string"/>

                    <xsl:apply-templates
                        select="docinfo:custom-metafields[not($streamID = 'USLPA')]"/>
                    <xsl:if test="not($streamID = 'CA05')">
                        <xsl:apply-templates select="//leg:info/leg:hier"/>
                    </xsl:if>
                    <xsl:apply-templates select="docinfo:lbu-meta"/>
                    <xsl:apply-templates select="docinfo:subtype"/>
                    <!-- Vikas Rohilla	: Apply templates added for the streamID CA02DC -->
                    <xsl:apply-templates select="//case:courtcode[$streamID = ('CA02DC', 'CA02DS')]"
                        mode="meta_item"/>
                    <xsl:apply-templates
                        select="//classification[@rendition and @classscheme][$streamID = 'CA02DC']"
                        mode="meta-item"/>

                    <xsl:call-template name="perjudge"/>
                    <!--<xsl:apply-templates select="//case:courtinfo/case:courtcode" mode="metadata"/>-->
                    <xsl:if test="$streamID = ('HK08', 'AU02')">
                        <xsl:apply-templates
                            select="//case:headnote/case:info/case:courtinfo/case:courtcode"
                            mode="metadata"/>
                    </xsl:if>
                </meta>
            </doc:legacy-metadata>

            <xsl:if test="$streamID = 'USLPA'">
                <xsl:apply-templates select="docinfo:custom-metafields"/>
            </xsl:if>

            <!-- Awantika: Need to create two legacy metadata one isdefault one is with @metadatasource="tracking-timestamp". 
				1. For all documents, the conversion should add a date-timestamp in the format YYYYMMDDHHMMSS using doc:legacymetadata@
metadatasource="tracking-timestamp"/meta containing meta/metaitem@name="conversiontimestamp"@
value="YYYYMMDDHHMMSS"
				2. If optional docinfo:custom-metafields/docinfo:custom-metafield[@name="lbu-publish-timestamp"] exists, create doc:legacymetadata[@
metadatasource="tracking-timestamp"] and add child meta/metaitem[@name="lbu-publish-timestamp"]
[@value="YYYYMMDDHHMMSS"] -->

            <xsl:if test="$streamID = 'AU20'">
                <doc:legacy-metadata metadatasource="tracking-timestamp">
                    <meta>
                        <metaitem>
                            <xsl:attribute name="name">
                                <xsl:text>conversion-timestamp</xsl:text>
                            </xsl:attribute>
                            <xsl:attribute name="value">
                                <xsl:choose>
                                    <xsl:when
                                        test="docinfo:custom-metafields/docinfo:custom-metafield[@name = 'lbu-publish-timestamp']">
                                        <xsl:value-of
                                            select="concat(docinfo:custom-metafields/docinfo:custom-metafield[@name = 'lbu-publish-timestamp'], format-dateTime(current-dateTime(), '[H01][m01][s]'))"
                                        />
                                    </xsl:when>
                                    <xsl:otherwise>
                                        <xsl:value-of
                                            select="format-dateTime(current-dateTime(), '[Y0001][M01][D01][H01][m01][s]')"
                                        />
                                    </xsl:otherwise>
                                </xsl:choose>
                            </xsl:attribute>
                        </metaitem>
                        <xsl:if
                            test="docinfo:custom-metafields/docinfo:custom-metafield[@name = 'lbu-publish-timestamp']">
                            <metaitem>
                                <xsl:attribute name="name">
                                    <xsl:text>lbu-publish-timestamp</xsl:text>
                                </xsl:attribute>
                                <xsl:attribute name="value">
                                    <xsl:value-of
                                        select="docinfo:custom-metafields/docinfo:custom-metafield[@name = 'lbu-publish-timestamp']"
                                    />
                                </xsl:attribute>
                            </metaitem>
                        </xsl:if>
                    </meta>
                </doc:legacy-metadata>
            </xsl:if>
        </xsl:if>
        <!-- Brad Thacker: corrected metaitem for classitem[@classscheme='topic:topicReference'] UK15CS, UK15ds, UK12cs, UK11dn -->
        <xsl:for-each
            select="/*/docinfo/classification/classitem[@classscheme = 'topic:topicReference'][classitem-identifier/classname['ModuleID']]">
            <xsl:if test="$streamID = ('UK11DN', 'UK12', 'UK15')">
                <doc:legacy-metadata metadatasource="lbu-meta">
                    <meta>
                        <metaitem>
                            <xsl:attribute name="name">
                                <xsl:text>MODULE-PGUID</xsl:text>
                            </xsl:attribute>
                            <xsl:attribute name="value">
                                <xsl:value-of
                                    select="./classitem-identifier[child::classname['ModuleID']]/classcode/@normval"
                                />
                            </xsl:attribute>
                        </metaitem>

                        <!-- BRT: comment out for now - don't need topic pguids in shared services (yet) -->
                        <!--xsl:for-each select="./classitem-identifier/classcode">
							<xsl:if test="contains(./@normval, 'urn:topic:')">
								<metaitem>
									<xsl:attribute name="name">
										<xsl:text>TOPIC-CURRENTNESS-ALERT</xsl:text>
									</xsl:attribute>
									<xsl:attribute name="value">
										<xsl:value-of select="./@normval"/>
									</xsl:attribute>
								</metaitem>
							</xsl:if>
						</xsl:for-each-->
                    </meta>
                </doc:legacy-metadata>
            </xsl:if>
        </xsl:for-each>
        <!-- Rohan Borkar: modifications end-->
        <!-- Rohan Borkar: corrected metaitem for UK11DA for alert:alertReference -->
        <xsl:for-each
            select="/DIGESTDOC/docinfo/classification/classitem[@classscheme = 'alert:alertReference']">
            <xsl:if test="$streamID = ('UK11DN', 'UK03', 'UK11DA')">
                <doc:legacy-metadata metadatasource="lbu-meta">
                    <meta>
                        <metaitem>
                            <xsl:attribute name="name">
                                <xsl:text>MODULE-CURRENTNESS-ALERT</xsl:text>
                            </xsl:attribute>
                            <xsl:attribute name="value">
                                <xsl:value-of
                                    select="./classitem-identifier[child::classname['ModuleID']]/classcode/@normval"
                                />
                            </xsl:attribute>
                        </metaitem>

                        <xsl:for-each select="./classitem-identifier/classcode">
                            <xsl:if test="contains(./@normval, 'urn:topic:')">
                                <metaitem>
                                    <xsl:attribute name="name">
                                        <xsl:text>TOPIC-CURRENTNESS-ALERT</xsl:text>
                                    </xsl:attribute>
                                    <xsl:attribute name="value">
                                        <xsl:value-of select="./@normval"/>
                                    </xsl:attribute>
                                </metaitem>
                            </xsl:if>
                        </xsl:for-each>
                    </meta>
                </doc:legacy-metadata>
            </xsl:if>
        </xsl:for-each>
        <!-- Rohan Borkar: modifications end-->
        <xsl:if test="$streamID = ('AU13', 'HK09')">
            <doc:legacy-metadata metadatasource="rosetta">
                <meta xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <xsl:for-each
                        select="/CASEDOC/case:body/case:headnote/case:info/case:courtinfo/case:courtcode">
                        <metaitem
                            xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                            <xsl:attribute name="name">case:courtcode</xsl:attribute>
                            <xsl:attribute name="value" select="."/>
                        </metaitem>
                    </xsl:for-each>
                </meta>
            </doc:legacy-metadata>
        </xsl:if>
    </xsl:template>

    <!-- JD: 20170524: adding this template (called above) -->
    <xsl:template match="docinfo:dpsi">
        <metaitem name="dpsi" value="{@id-string}"/>
    </xsl:template>


    <!-- person[@searchtype="JUDGES"] -->
    <xsl:template name="perjudge">
        <!-- JD: 2017-07-14: added 'judge'; probably a data error from UK XSLT development -->
        <xsl:if test="//person[@searchtype = ('JUDGES', 'judge')]">
            <metaitem name="JUDGES" value="{//person[ @searchtype = ('JUDGES','judge') ]/name.text}"
                xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/"/>
        </xsl:if>

    </xsl:template>

    <xsl:template
        match="/CITATORDOC/@citatordoctype | /CITATORDOC/@fullcourt | /CITATORDOC/@notannotated | /CITATORDOC/@shortannot | /CITATORDOC/@unreported | @browseprev | @browsenext | @partitionnum | @majorrevision | @excludefromalerts | @id-string">

        <metaitem name="{name()}" value="{.}"
            xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/"/>

    </xsl:template>

    <xsl:template name="findDPSI">
        <xsl:choose>
            <!--	**************************************************************  
		Vikas Rohilla : Commented this part because findDPSI templete called in the docinfo
		template and after using the double dot (..) current element becomes
		the CASEDOC and the docinfo:lbu-meta never find in the CASEDOC. 
		and after match the conversion is skip becauese it is created by the 
		docinfo:metaitem template.
		**************************************************************-->


            <!--	<xsl:when test="../docinfo:lbu-meta/docinfo:metaitem[@name='DPSI']">
				<metaitem xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
					<xsl:attribute name="name">dpsi</xsl:attribute>
					<xsl:attribute name="value" select="../docinfo:lbu-meta/docinfo:metaitem[@name='DPSI']/@value"/>
				</metaitem>
			</xsl:when>-->
            <!-- Vikas Rohilla : replaced double dot(..) with the single dot (.)  -->
            <xsl:when test="./docinfo:lbu-meta/docinfo:metaitem[upper-case(@name) = 'DPSI']"> </xsl:when>
            <xsl:otherwise>
                <metaitem xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <xsl:attribute name="name">dpsi</xsl:attribute>
                    <xsl:attribute name="value" select="$dpsi"/>
                </metaitem>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
    <xsl:template match="comm:info/pubdate" mode="dc.metadata">
        <xsl:apply-templates mode="dc.metadata"/>
    </xsl:template>

    <xsl:template
        match="case:headnote/case:info/case:casename | case2:headnote/case2:info/case2:casename"
        mode="dc.metadata">
        <!--  Original Target XPath:  dc:metadata/dc:title   -->
        <dc:title>
            <xsl:apply-templates select="@* | node()" mode="dc.metadata"/>
        </dc:title>
    </xsl:template>

    <xsl:template match="comm:info/pubdate/date" mode="dc.metadata">
        <dc:date lnmeta:datetype="pubdate">
            <xsl:value-of select="@year"/>
            <xsl:text>-</xsl:text>
            <xsl:value-of select="@month"/>
            <xsl:text>-</xsl:text>
            <xsl:value-of select="@day"/>
        </dc:date>

    </xsl:template>

    <xsl:template
        match="docinfo:lbu-meta/docinfo:metaitem[@name = 'PA-PGUID' or @name = 'TOPIC-PGUID' or @name = 'SUB-TOPIC-PGUID']"
        priority="2" mode="classify">
        <classify:classitem>
            <meta>
                <metaitem name="appliedby" value="human"/>
            </meta>
            <topic:topicReference guid:guid="{@value}"
                xmlns:topic="urn:x-lexisnexis:content:topic:global:1"
                xmlns:guid="urn:x-lexisnexis:content:guid:global:1"/>
        </classify:classitem>
    </xsl:template>

    <xsl:template match="docinfo:versionbranch" priority="2" mode="member">
        <doc:membership>
            <ref:groupid group-type="variants-1">
                <ref:resourceid>
                    <xsl:attribute name="ref:resourcekey">
                        <xsl:text>urn:cldi-1:</xsl:text>
                        <xsl:value-of
                            select="translate(translate(translate(translate(@value, '          (&#09; ', ''), '          &#09;) ', ''), '          ,&#09; ', ''), '          ''&#09; ', '')"
                        />
                    </xsl:attribute>
                </ref:resourceid>
            </ref:groupid>
        </doc:membership>
    </xsl:template>





    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_docinfo.doc-country.iso-cc-to-LexisAdvance_doc.docinfo_doc-content-country">
        <title><sourcexml>docinfo:doc-country[@iso-cc]</sourcexml> to
                <targetxml>doc:docinfo[@doc-content-country]</targetxml>
            <lnpid>id-CCCC-10291</lnpid></title>
        <body>
            <section>
                <title>Instructions <i>[common element]</i></title>
                <p><sourcexml>docinfo:doc-country[@iso-cc]</sourcexml> becomes
                        <targetxml>doc:docinfo[@doc-content-country]</targetxml>. </p>
                <p>If <sourcexml>docinfo:doc-country[@iso-cc="AU"]</sourcexml>, check the value of
                        <sourcexml>case:headnote/case:info/case:courtinfo//case:juris</sourcexml>.
                    If <sourcexml>case:juris="NZ"</sourcexml>, set
                        <targetxml>doc:docinfo[@doc-content-country="NZ"]</targetxml>.<note>@doc-content-country
                        is required.</note>
                    <note><sourcexml>docinfo:doc-country[@iso-cc]</sourcexml> is used to specify the
                        country in the source document and also becomes part of
                            <targetxml>@xml:id</targetxml> as described in the instructions for
                            <xref
                            href="Rosetta_docinfo.doc-lang-and-doc-country-LxAdv-ROOT_xml.lang.dita"
                            >Target @xml:lang</xref>.</note>
                </p>
            </section>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;docinfo&gt; .... &lt;docinfo:doc-country iso-cc="AU"/&gt; ....
                    &lt;/docinfo&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;doc:docinfo doc-content-country="AU"&gt; ... &lt;/doc:docinfo&gt;
                </codeblock>
            </example>

            <example>
                <title>Source XML - AU example with case:juris="NZ"</title>
                <codeblock> &lt;CITATORDOC&gt; &lt;docinfo&gt; .... &lt;docinfo:doc-country
                    iso-cc="AU"/&gt; .... &lt;/docinfo&gt; &lt;cttr:body&gt; &lt;case:headnote&gt;
                    &lt;case:info&gt; ........... &lt;case:courtinfo&gt; ......... &lt;case:juris
                    ln.user-displayed="false"&gt;NZ&lt;/case:juris&gt; &lt;/case:courtinfo&gt;
                    &lt;/case:info&gt; &lt;/case:headnote&gt; &lt;/cttr:body&gt; &lt;/CITATORDOC&gt;
                </codeblock>
            </example>

            <example>
                <title>Target XML - AU example with case:juris="NZ" </title>
                <codeblock> &lt;doc:docinfo doc-content-country="NZ"&gt; ... &lt;/doc:docinfo&gt;
                </codeblock>
            </example>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;docinfo&gt; .... &lt;docinfo:doc-country iso-cc="CA"/&gt; ....
                    &lt;/docinfo&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;doc:docinfo doc-content-country="CA"&gt; ... &lt;/doc:docinfo&gt;
                </codeblock>
            </example>

            <example>
                <title>Source XML - Example for UK Content</title>
                <codeblock> &lt;docinfo&gt; .... &lt;docinfo:doc-country iso-cc="GB"/&gt; ....
                    &lt;/docinfo&gt; </codeblock>
            </example>

            <example>
                <title>Target XML - Example for UK Content</title>
                <codeblock> &lt;doc:docinfo doc-content-country="GB"&gt; ... &lt;/doc:docinfo&gt;
                </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2014-11-13: Example added for AU content with
                        <sourcexml>case:juris="NZ"</sourcexml>.</p>
                <p>2012-10-05: Example added for UK content.</p>
            </section>
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_docinfo.doc-country_iso-cc-LxAdv-doc.docinfo_doc-content-country.dita  -->

    <xsl:template name="doc_content_country">
        <!-- This template creates @doc-content-country from doc-country 
                    however there is an NZ special case -->
        <!-- 2017-10-03 - MDS: Added handling for $streamID starts with 'HK' -->
        <!-- Awantika: 2017-10-11: added streamID HK in else to replace AU(which is given in input) -->
        <xsl:attribute name="doc-content-country"
            select="
                if (//docinfo:doc-country/@iso-cc = 'AU' or ($streamID = 'AU08')) then
                    if (//case:headnote/case:info/case:courtinfo//case:juris = 'NZ') then
                        'NZ'
                    else
                        if (starts-with($streamID, 'HK')) then
                            'HK'
                        else
                            'AU'
                else
                    if (starts-with($streamID, 'HK')) then
                        if (//docinfo:doc-country/@iso-cc) then
                            //docinfo:doc-country/@iso-cc
                        else
                            'HK'
                    else
                        //docinfo:doc-country/@iso-cc"/>

    </xsl:template>
    <!--  un-comment out the following template rule to perform unit testing via XSpec file   -->
    <!--xsl:template match="docinfo">
		<test>
			<xsl:call-template name="doc_content_country"/>
		</test>
	</xsl:template-->



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_docinfo.doc.heading-to-LexisAdvance_dc.title">
        <title><sourcexml>docinfo:doc-heading</sourcexml> to <targetxml>dc:title</targetxml>
            <lnpid>id-CCCC-10292</lnpid></title>
        <body>
            <section>
                <title>Instructions <i>[common element]</i></title>
                <p><sourcexml>docinfo:doc-heading</sourcexml> becomes
                        <targetxml>dc:metadata/dc:title</targetxml>. </p>
                <p>Exceptional scenario for CA Indices: When
                        <sourcexml>docinfo:doc-heading</sourcexml> contains word <b>TITLE: </b> or
                        <b>NAME: </b> or <b>SITE: </b> or <b>SUBJECT: </b> or <b>RULE: </b> or
                        <b>STATUTE: </b> then conversion should drop the word <b>TITLE: </b> or
                        <b>NAME: </b> or <b>SITE: </b> or <b>SUBJECT: </b> or <b>RULE: </b> or
                        <b>STATUTE: </b> from conversion.</p>
                <p>Exceptional scenario for AU Legislative Citator: When
                        <sourcexml>docinfo:doc-heading</sourcexml> contains text <b>Overview Tab for
                    </b> then conversion should drop the this text <b>Overview Tab for </b> from
                    conversion.</p>
                <p>Exceptional scenario for US Lexis Practice Advisor (LPA): In addition to the
                    standard mapping above, perform the following mappings. An example has been
                    added below. With this addition, the target output document will always contain
                    three <targetxml>dc:title</targetxml> elements; the one created above without
                    any attributes, as well as the two below with a
                        <targetxml>@lnmeta:titlepurpose</targetxml> attribute: <ul>
                        <li><sourcexml>docinfo:doc-heading</sourcexml> also maps to become
                                <targetxml>dc:metadata/dc:title[@lnmeta:titlepurpose='resultDisplayList']</targetxml>.</li>
                        <li>If <sourcexml>docinfo:doc-heading</sourcexml> ends with a string
                            enclosed by parentheses (e.g. "Patent License Agreement
                            (Pro-Licensee)"), remove the parentheses and the enclosed text, remove
                            any trailing spaces in the remaining text, and the remaining text
                            becomes the content of a new
                                <targetxml>dc:metadata/dc:title[@lnmeta:titlepurpose='download']</targetxml>
                            element. If <sourcexml>docinfo:doc-heading</sourcexml> does not end with
                            a string inside parentheses, map
                                <sourcexml>docinfo:doc-heading</sourcexml>, with all of its text
                            content, to a new
                                <targetxml>dc:metadata/dc:title[@lnmeta:titlepurpose='download']</targetxml>
                            element.</li>
                    </ul>
                </p>
            </section>

            <example>
                <title>Source XML</title>
                <codeblock>
                    &lt;docinfo:doc-heading&gt;PART�1&amp;#x2014;PRELIMINARY&lt;/docinfo:doc-heading&gt;
                </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;dc:title&gt;PART�1&amp;#x2014;PRELIMINARY&lt;/dc:title&gt;
                </codeblock>
            </example>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;docinfo:doc-heading&gt;West Energy Ltd. (Re), [2007] A.E.U.B.D. No.
                    57&lt;/docinfo:doc-heading&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;dc:title&gt;West Energy Ltd. (Re), [2007] A.E.U.B.D. No.
                    57&lt;/dc:title&gt; </codeblock>
            </example>

            <example>
                <title>Source XML - Example for UK Content</title>
                <codeblock> &lt;docinfo:doc-heading&gt;In re B (Children) (Care Proceedings:
                    Standard of Proof) (CAFCASS intervening) - [2009] AC
                    11&lt;/docinfo:doc-heading&gt; </codeblock>
            </example>

            <example>
                <title>Target XML - Example for UK Content</title>
                <codeblock> &lt;dc:title&gt;In re B (Children) (Care Proceedings: Standard of Proof)
                    (CAFCASS intervening) - [2009] AC 11&lt;/dc:title&gt; </codeblock>
            </example>
            <note>If <sourcexml>emph</sourcexml> is child of
                    <sourcexml>docinfo:doc-heading</sourcexml> then suppress
                    <sourcexml>emph</sourcexml> element and retain its content in
                    <targetxml>dc:title</targetxml>.</note>
            <note><b>For Canada Contents:</b> if <sourcexml>nl</sourcexml> is child of
                    <sourcexml>docinfo:doc-heading</sourcexml>, then replace it with single space
                character. For furter details please see the following example.</note>
            <example>
                <title>Source XML- From CAN</title>
                <codeblock> &lt;docinfo:doc-heading&gt;90F32&lt;nl/&gt;Memorandum of Argument of the
                    Applicant&lt;/docinfo:doc-heading&gt; </codeblock>
            </example>
            <example>
                <title>Target XML</title>
                <codeblock> &lt;dc:title&gt;90F32 Memorandum of Argument of the
                    Applicant&lt;/dc:title&gt; </codeblock>
            </example>

            <note>
                <b>Exception Scenario for Canada CA14:</b>
                <p>Trademarks and related marks: When (TM) or (R) occur in
                        <sourcexml>docinfo:doc-heading</sourcexml>, convert to unicode code point as
                    follows:</p>
                <p><b>(TM)</b> becomes &amp;#8482; <b>(R)</b> becomes &amp;#174;</p>
            </note>
            <example>
                <title>Source XML- From CA14</title>
                <codeblock> &lt;docinfo:doc-heading&gt;Alan D. Gold's NetLetter(TM), Monday,
                    November 24, 2008 - Issue 615&lt;/docinfo:doc-heading&gt; </codeblock>
            </example>
            <example>
                <title>Target XML for CA14</title>
                <codeblock> &lt;dc:title&gt;Alan D. Gold's NetLetter&amp;#8482;, Monday, November
                    24, 2008 - Issue 615&lt;/dc:title&gt; </codeblock>
            </example>

            <example>
                <title>Source XML for US LPA Forms</title>
                <codeblock>
                    <![CDATA[
<docinfo:doc-heading>Patent License Agreement (Pro-Licensee)</docinfo:doc-heading>
]]>
                </codeblock>

                <title>Target XML for US LPA Forms</title>
                <codeblock>
                    <![CDATA[
<dc:metadata>
	<dc:title>Patent License Agreement (Pro-Licensee)</dc:title>
	<dc:title lnmeta:titlepurpose="resultDisplayList">Patent License Agreement (Pro-Licensee)</dc:title>
	<dc:title lnmeta:titlepurpose="download">Patent License Agreement</dc:title>
	...
</dc:metadata>
]]>
                </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2017-04-03: <ph id="change_20170403_snb">US LPA 2016 enhancements: Changes for
                        treatment of parenthesis containing form types for Title Parenthetical
                        feature requirements for Forms Enhancements. Change is to support content in
                        forms (PCTs 275 and 305), but should be implemented for all US LPA
                        conversions. Added additional mapping of
                            <sourcexml>docinfo:doc-heading</sourcexml> to
                            <targetxml>dc:metadata/dc:title[@lnmeta:titlepurpose='resultDisplayList']</targetxml>
                        for search results, and to
                            <targetxml>dc:metadata/dc:title[@lnmeta:titlepurpose='download']</targetxml>
                        for form download. Also added an example.</ph></p>
                <p>2015-12-04: <ph id="change_20151204_snb">Added exception for AU Legislative
                        Citator to drop text <b>Overview Tab for </b> from conversion.</ph></p>
                <p>2015-09-06: <ph id="change_20150906_jm">Modified only the special rule for CA14
                        trademarks. No longer mapping (MC) to entity, the unicode code point is not
                        currently supported. The pcdata (MC) is retained instead. RFA 145. CA14
                        only.</ph></p>
                <p>2015-05-05: <ph id="change_20150505_PS">Added note to convert (TM), (R), and (MC)
                        to unicode code points. DB # 45. Applicable to CA14.</ph></p>
                <p>2014-02-11: <ph id="change_20140211_PS">Updated note when
                            <sourcexml>emph</sourcexml> is child of
                            <sourcexml>docinfo:doc-heading</sourcexml> then suppress
                            <sourcexml>emph</sourcexml> element and retain its content in
                            <targetxml>dc:title</targetxml>, These instructions apply immediately to
                        CA12.</ph></p>
                <p>2013-10-18: <ph id="change_20131018_PS">Updated Instruction when
                            <sourcexml>docinfo:doc-heading</sourcexml> contains word <b>RULE: "</b>
                        or <b>STATUTE: </b>.</ph></p>
                <p>2013-09-03: <ph id="change_20130903_PS">Updated Instruction when
                            <sourcexml>docinfo:doc-heading</sourcexml> contains word <b>"TITLE:
                            "</b> or <b>NAME: </b> or <b>SITE: </b> or <b>SUBJECT:</b>.</ph></p>
                <p>2013-08-01: <ph id="change_20130801_PKY"><b>For Canada Content streams:</b> Added
                        a note and examples, when <sourcexml>docinfo:doc-heading</sourcexml>
                        contains <sourcexml>nl</sourcexml> as a child element.</ph></p>
                <p>2013-07-30: <ph id="change_20130730_PS">Added Instruction when
                            <sourcexml>docinfo:doc-heading</sourcexml> contains word <b>"TITLE:
                            "</b> or <b>NAME: </b>.</ph></p>
                <p>2012-12-06: Added note for <sourcexml>emph</sourcexml> with
                        <sourcexml>docinfo:doc-heading</sourcexml>.</p>
                <p>2012-10-05: Added example for UK Content.</p>
            </section>
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_docinfo.doc-heading-LxAdv-dc.title.dita  -->

    <xsl:template match="docinfo:doc-heading">
        <!-- these are used as regexes  -->
        <xsl:param name="docHeadingStringsToRemove" as="xs:string*"
            select="
                if ($streamID = 'CA11') then
                    ('TITLE:', 'NAME:', 'SITE:', 'SUBJECT:', 'RULE:', 'STATUTE:')
                else
                    if ($streamID = 'CA15') then
                        ('TITLE/TITRE:', 'TITRE/TITLE:', 'CITED/CITÉ:', 'CITÉ/CITED:', 'CITE/CITED:', 'CITED:', 'TITLE:', 'TITRE:')
                    else
                        'Overview Tab for'"/>

        <xsl:variable name="outputText" as="xs:string*">
            <xsl:apply-templates/>
        </xsl:variable>

        <!--  Original Target XPath:  dc:title   -->
        <dc:title>
            <!--  remove any occurrence of $docHeadingStringsToRemove strings but assume case sensitive; also replace (TM) and (R) with the trademark and copyright characters, respectively, all depending on streamID   -->
            <xsl:choose>
                <xsl:when test="$streamID = ('CA11', 'AU20', 'CA15')">

                    <xsl:sequence
                        select="lnf:removeSequenceOfStrings(string-join($outputText, ''), $docHeadingStringsToRemove, false())"/>

                </xsl:when>
                <xsl:when test="$streamID = 'CA14'">

                    <xsl:sequence
                        select="replace(replace(string-join($outputText, ''), '\(TM\)', '&#8482;'), '\(R\)', '&#174;')"/>

                </xsl:when>
                <xsl:when
                    test="$streamID = 'CA06' or $streamID = 'CA12' or $streamID = 'CA10' or $streamID = 'CA09'">
                    <xsl:value-of select="."/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:apply-templates select="@* | node()"/>
                </xsl:otherwise>
            </xsl:choose>
        </dc:title>
        <xsl:if test="$streamID = 'USLPA'">
            <dc:title>
                <xsl:attribute name="lnmeta:titlepurpose">
                    <xsl:text>resultDisplayList</xsl:text>
                </xsl:attribute>
                <xsl:apply-templates select="@* | node()"/>
            </dc:title>
            <dc:title>
                <xsl:attribute name="lnmeta:titlepurpose">
                    <xsl:text>download</xsl:text>
                </xsl:attribute>
                <xsl:apply-templates select="@* | node()"/>
            </dc:title>
        </xsl:if>

    </xsl:template>

    <xsl:template match="docinfo:doc-heading/emph">

        <!--  Original Target XPath:  dc:title   -->
        <!--  emph is pass-through when under doc-heading   -->
        <xsl:apply-templates select="@* | node()"/>

    </xsl:template>

    <xsl:template match="docinfo:doc-heading/nl">

        <!--  Original Target XPath:  dc:title   -->
        <!--  @SBy:  nl becomes a space when under doc-heading; implemented for ***all*** streamIDs, not just Canada Contents...   -->
        <xsl:text> </xsl:text>

    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_refnum_refnumtype_UCN-LxAdv_ref_groupid">
        <title>refnum[@refnumtype="UCN"] - ref:groupid <lnpid>id-CCCC-12047</lnpid></title>
        <body>
            <section>
                <p><sourcexml>refnum[@refnumtype="UCN"]</sourcexml> becomes
                        <targetxml>doc:docinfo/doc:membership/ref:groupid[@group-type="ucn-1"]</targetxml>.</p>
                <p>The content of <sourcexml>refnum</sourcexml>, prepended with the string
                    "urn:ucn-1:", becomes the content of the <targetxml>ref:resourcekey</targetxml>
                    attribute of <targetxml>ref:resourceid</targetxml>.</p>
                <p>Other attributes of <sourcexml>refnum</sourcexml> are dropped.</p>
            </section>
            <example>
                <title>Mapping of <sourcexml>refnum[@refnumtype="UCN"]</sourcexml></title>
                <codeblock> &lt;refnum refnumtype="UCN"
                    ln.user-displayed="false"&gt;00180609&lt;/refnum&gt; </codeblock>
                <b>becomes</b>
                <codeblock> &lt;doc:docinfo doc-content-country="CA"&gt; &lt;!-- ...--&gt;
                    &lt;doc:membership&gt; &lt;ref:groupid group-type="ucn-1"&gt; &lt;ref:resourceid
                    ref:resourcekey="urn:ucn-1:00180609"/&gt; &lt;/ref:groupid&gt;
                    &lt;/doc:membership&gt; ... &lt;/doc:docinfo&gt; </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2014-09-26: <ph id="change_20140926_AS">updated Instructions. Db issue#
                    1913</ph></p>
                <p>2014-09-17: <ph id="change_20140917_AS">updated example. P4- Db issue#
                    338</ph></p>
                <p>2014-09-15: <ph id="change_20140915_AS">update target mapping of
                            <sourcexml>refnum[@refnumtype="UCN"]</sourcexml> from <b>Head</b> to
                            <targetxml>doc:docinfo/doc:membership/ref:groupid[@group-type="ucn-1"]</targetxml>.
                        Db issue #1893 and 338</ph></p>
                <p>2014-06-26: <ph id="change_20140626_sep">Make
                            <targetxml>ref:resourcekey</targetxml> UCN value urn conform to PGUID
                        registry, e.g. "urn:ucn-1:00180609".</ph></p>
                <p>2014-06-12: <ph id="change_20140612_sep">Created this instruction.</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_caselaw\Rosetta_refnum.refnumtype.UCN-LxAdv_ref.groupid.dita  -->

    <!-- Vikas Rohilla : Skip conversion in the current mode need to create in to the doc:docinfo the -->
    <xsl:template match="refnum | refnum/@*"/>

    <!-- Vikas Rohilla : Initial updated may be updated if required-->
    <xsl:template match="refnum[@refnumtype = 'UCN']" mode="docinfoMember">
        <xsl:element name="doc:membership">
            <xsl:element name="ref:groupid">
                <xsl:attribute name="group-type">
                    <xsl:text>ucn-1</xsl:text>
                </xsl:attribute>
                <xsl:element name="ref:resourceid">
                    <xsl:attribute name="ref:resourcekey">
                        <xsl:value-of select="concat('urn:ucn-1:', .)"/>
                    </xsl:attribute>
                </xsl:element>
            </xsl:element>
        </xsl:element>
    </xsl:template>




    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_docinfo.doc-id-to-LexisAdvance_dcidentifier_lnmetaidentifier-scheme">
        <title><sourcexml>docinfo:doc-id</sourcexml> to
                <targetxml>dc:identifier[@lnmeta:identifier-scheme]</targetxml>
            <lnpid>id-CCCC-10293</lnpid></title>
        <body>
            <section>
                <title>Instructions <i>[common element]</i></title>
                <p>Identifies the normalization scheme (e.g. URI, LNI, ISSN, et al.) used for the
                    identifier. <sourcexml>docinfo:doc-id</sourcexml> becomes
                        <targetxml>dc:metadata/dc:identifier[@lnmeta:identifier-scheme]</targetxml>.
                    Also capture  <sourcexml>docinfo:dpsi[@id-string]</sourcexml>  and prepend the
                    value, followed by hyphen, to create globally unique identifier. </p>
                <note>
                    <p>If <sourcexml>docinfo:dpsi[@id-string]</sourcexml> is not present, the dpsi
                        value must be captured from one of the following sources:</p>
                    <ul>
                        <li>The value in
                                <sourcexml>docinfo/docinfo:lbu-meta/docinfo:metaitem[@name="DPSI"]/@value</sourcexml></li>
                        <li>The value in
                                <sourcexml>docinfo/docinfo:custom-metafields/docinfo:custom-metafield[@name="dpsi"]</sourcexml></li>
                        <li>The LBU manifest file</li>

                    </ul>
                </note>
            </section>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;docinfo:dpsi id-string="008P"/&gt;
                    &lt;docinfo:doc-id&gt;VIC_ACT_1998-25_PT1&lt;/docinfo:doc-id&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;dc:identifier
                    lnmeta:identifier-scheme="DOC-ID"&gt;008P-VIC_ACT_1998-25_PT1&lt;/dc:identifier&gt;
                </codeblock>
            </example>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;docinfo:dpsi id-string="0062"/&gt;
                    &lt;docinfo:doc-id&gt;CA00000005222733&lt;/docinfo:doc-id&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;dc:identifier
                    lnmeta:identifier-scheme="DOC-ID"&gt;0062-CA00000005222733&lt;/dc:identifier&gt;
                </codeblock>
            </example>

            <example>
                <title>Source XML - Example for UK content</title>
                <codeblock>
                    &lt;docinfo:doc-id&gt;5B323030395D2D312D41432E3131&lt;/docinfo:doc-id&gt;
                </codeblock>
            </example>

            <example>
                <title>Target XML - Example for UK content</title>
                <codeblock> &lt;dc:identifier
                    lnmeta:identifier-scheme="DOC-ID"&gt;0GNE-5B323030395D2D312D41432E3131&lt;/dc:identifier&gt;
                </codeblock>
            </example>

            <note>In the above example <b>0GNE</b> is the dpsi value, which will be captured from
                LBU manifest file.</note>

            <example>
                <title>Source XML - Example for CA content with the dpsi value in
                        <sourcexml>docinfo/docinfo:lbu-meta/docinfo:metaitem[@name="DPSI"]/@value</sourcexml></title>
                <codeblock> &lt;docinfo&gt; ...
                    &lt;docinfo:doc-id&gt;CA00000000450962&lt;/docinfo:doc-id&gt; ...
                    &lt;docinfo:lbu-meta&gt; &lt;docinfo:metaitem name="SRCNAME" value="ACFH"/&gt;
                    &lt;docinfo:metaitem name="SRCDOCNO" value="00018000"/&gt; &lt;docinfo:metaitem
                    name="DPSI" value="03MN"/&gt; &lt;/docinfo:lbu-meta&gt; ... &lt;/docinfo&gt;
                </codeblock>
            </example>
            <example>
                <title>Target XML - Example for CA content</title>
                <codeblock> &lt;dc:identifier
                    lnmeta:identifier-scheme="DOC-ID"&gt;03MN-CA00000000450962&lt;/dc:identifier&gt;
                </codeblock>
            </example>
            <example>
                <title>Source XML - Example for CA content with the dpsi value in
                        <sourcexml>docinfo/docinfo:custom-metafields/docinfo:custom-metafield[@name="dpsi"]</sourcexml></title>
                <codeblock> &lt;docinfo&gt; ... &lt;docinfo:doc-id&gt;474&lt;/docinfo:doc-id&gt; ...
                    &lt;docinfo:custom-metafields&gt; &lt;docinfo:custom-metafield
                    name="dpsi"&gt;03EX&lt;/docinfo:custom-metafield&gt;
                    &lt;/docinfo:custom-metafields&gt; ... &lt;/docinfo&gt; </codeblock>
            </example>
            <example>
                <title>Target XML - Example for CA content</title>
                <codeblock> &lt;dc:identifier
                    lnmeta:identifier-scheme="DOC-ID"&gt;03EX-474&lt;/dc:identifier&gt; </codeblock>
            </example>

            <section>
                <title>Changes</title>
                <p>2014-06-23: <ph id="change_20140623_SSX">Note and Example removed - For CA05 Acts
                        and Bills- Mapping in dc:identifier for act-no and chunk-no. Db issue
                        #1464</ph></p>
                <p>2014-05-21:<ph id="change_20140521_AS">For CA05 Acts and Bills- Mapping in
                        dc:identifier for act-no and chunk-no.. Db issue #1464 </ph></p>
                <p>2013-03-20: <ph id="change_20130320_ss">Updated the information on handling the
                        situation when <sourcexml>docinfo:dpsi[@id-string]</sourcexml> is absent
                        with instructions to get the dpsi from
                            <sourcexml>docinfo/docinfo:custom-metafields/docinfo:custom-metafield[@name="dpsi"]</sourcexml>.</ph></p>
                <p>2012-10-05: Example added for UK content.</p>
                <p>2012-12-04: Added a note and updated target example for UK content.</p>
                <p>2012-12-20: Updated the information on handling the situation when
                        <sourcexml>docinfo:dpsi[@id-string]</sourcexml> is absent with instructions
                    to get the dpsi from
                        <sourcexml>docinfo/docinfo:lbu-meta/docinfo:metaitem[@name="DPSI"]/@value</sourcexml>
                    if possible. Added an example of CA content with the dpsi in
                        <sourcexml>docinfo/docinfo:lbu-meta/docinfo:metaitem[@name="DPSI"]/@value</sourcexml>.</p>
            </section>
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_docinfo.doc-id-LxAdv-dcidentifier_lnmetaidentifier-scheme.dita  -->

    <xsl:template match="docinfo:doc-id">

        <!--  Original Target XPath:  dc:identifier[@lnmeta:identifier-scheme]   -->

        <dc:identifier lnmeta:identifier-scheme="DOC-ID">
            <xsl:choose>
                <xsl:when test="../docinfo:dpsi/@id-string">
                    <xsl:value-of select="../docinfo:dpsi/@id-string"/>
                </xsl:when>
                <xsl:when test="../docinfo:dpsi">
                    <xsl:value-of select="../docinfo:dpsi"/>
                </xsl:when>
                <xsl:when test="..//docinfo:custom-metafield[lower-case(@name) = 'dpsi']">
                    <xsl:value-of select="..//docinfo:custom-metafield[lower-case(@name) = 'dpsi']"
                    />
                </xsl:when>
                <!-- Vikas Rohilla : updated for the docinfo:metaitem dpsi				-->
                <xsl:when test="..//docinfo:metaitem[lower-case(@name) = 'dpsi']">
                    <xsl:value-of select="..//docinfo:metaitem[lower-case(@name) = 'dpsi']/@value"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="$dpsi"/>
                </xsl:otherwise>
            </xsl:choose>

            <xsl:text>-</xsl:text>
            <xsl:apply-templates/>

        </dc:identifier>

        <xsl:if test="$streamID = ('AU16', 'AU17', 'AU19CA', 'NZ02', 'NZ07-DN', 'NZ14')">
            <xsl:choose>
                <xsl:when
                    test="ends-with(., 'CTHLEG_') or ends-with(., '_CTH') or starts-with(., 'CTHLEG_')">
                    <dc:coverage>
                        <location:country codescheme="ISO-3166-1" countrycode="AU"
                            >AU</location:country>
                    </dc:coverage>
                </xsl:when>
                <xsl:when
                    test="ends-with(., 'NSWLEG_') or ends-with(., '_NSW') or starts-with(., 'NSWLEG_')">
                    <dc:coverage>
                        <location:state codescheme="ISO-3166-2" statecode="AU-NS"
                            >NSW</location:state>
                    </dc:coverage>
                </xsl:when>
                <xsl:when
                    test="ends-with(., 'QLDLEG_') or ends-with(., '_QLD') or starts-with(., 'QLDLEG_')">
                    <dc:coverage>
                        <location:state codescheme="ISO-3166-2" statecode="AU-QL"
                            >QLD</location:state>
                    </dc:coverage>
                </xsl:when>
                <xsl:when
                    test="ends-with(., 'SALEG_') or ends-with(., '_SA') or starts-with(., 'SALEG_')">
                    <dc:coverage>
                        <location:state codescheme="ISO-3166-2" statecode="AU-SA"
                            >SA</location:state>
                    </dc:coverage>
                </xsl:when>
                <xsl:when
                    test="ends-with(., 'TASLEG_') or ends-with(., '_TAS') or starts-with(., 'TASLEG_')">
                    <dc:coverage>
                        <location:state codescheme="ISO-3166-2" statecode="AU-TS"
                            >TAS</location:state>
                    </dc:coverage>
                </xsl:when>
                <xsl:when
                    test="ends-with(., 'VICLEG_') or ends-with(., '_VIC') or starts-with(., 'VICLEG_')">
                    <dc:coverage>
                        <location:state codescheme="ISO-3166-2" statecode="AU-VI"
                            >VIC</location:state>
                    </dc:coverage>
                </xsl:when>
                <xsl:when
                    test="ends-with(., 'WALEG_') or ends-with(., '_WA') or starts-with(., 'WALEG_')">
                    <dc:coverage>
                        <location:state codescheme="ISO-3166-2" statecode="AU-WA"
                            >WA</location:state>
                    </dc:coverage>
                </xsl:when>
                <xsl:when
                    test="ends-with(., 'NTLEG_') or ends-with(., '_NT') or starts-with(., 'NTLEG_')">
                    <dc:coverage>
                        <location:state codescheme="ISO-3166-2" statecode="AU-NT"
                            >NT</location:state>
                    </dc:coverage>
                </xsl:when>
                <xsl:when
                    test="ends-with(., 'ACTLEG_') or ends-with(., '_ACT') or starts-with(., 'ACTLEG_')">
                    <dc:coverage>
                        <location:state codescheme="ISO-3166-2" statecode="AU-CT"
                            >ACT</location:state>
                    </dc:coverage>
                </xsl:when>
                <xsl:otherwise/>
            </xsl:choose>
        </xsl:if>
    </xsl:template>





    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_docinfo.assoc-links-to-LexisAdvance_doc.related-content">
        <title><sourcexml>docinfo:assoc-links</sourcexml> to
                <targetxml>doc:related-content</targetxml>
            <lnpid>id-CCCC-10284</lnpid></title>
        <body>
            <section>
                <title>Instructions <i>[common element]</i></title>
                <note>This topic is used in numerous conversion instructions for several LBUs. It is
                    a shared topic rather than duplicated to ensure consistency and accuracy. The
                    xml snippets contained in this topic reflect markup needed for the Apollo image
                    handling application. The UK is the first LBU to move from Apollo to the
                    Blobstore application for image handling. Therefore, if this is a UK conversion
                    instruction document, please refer to the following topics for correct image
                    handling markup.<ul>
                        <li><sourcexml>lnlink[@service="ATTACHMENT"]</sourcexml> to
                                <targetxml>ref:lnlink[@service="ATTACHMENT"]</targetxml> for
                            BLOBSTORE images (id-CCCC-10542)</li>
                        <li><sourcexml>inlineobject</sourcexml> to
                                <targetxml>ref:inlineobject</targetxml> for BLOBSTORE images
                            (id-CCCC-10540)</li>
                        <li><sourcexml>link[@filename]</sourcexml> to
                                <targetxml>ref:lnlink[@service="ATTACHMENT"]</targetxml> for
                            BLOBSTORE images (id-CCCC-10541)</li>
                    </ul></note>
                <p><sourcexml>docinfo:assoc-links</sourcexml> becomes
                        <targetxml>doc:related-content</targetxml>. Attribute
                        <sourcexml>@assoc-content</sourcexml> is suppressed.</p>
                <p><sourcexml>docinfo:assoc-links-grp</sourcexml> becomes
                        <targetxml>doc:related-content-grp</targetxml>, and its descendents are
                    processed as follows: <ul>
                        <li>If present, <sourcexml>docinfo:assoc-resource</sourcexml> becomes
                                <targetxml>ref:relatedresourceref/ref:relatedresourceid</targetxml>.
                            Copy the value of <sourcexml>@assoc-resourceid</sourcexml> to
                                <targetxml>@ref:resourcekey</targetxml></li>
                        <li>The target value of
                                <targetxml>doc:related-content-grp/@grptype</targetxml> depends on
                            the existing attrribute in the source: <ul>
                                <li>If <sourcexml>docinfo:assoc-links-grp/@assoc-content</sourcexml>
                                    exists, it becomes <targetxml>@grptype</targetxml>.</li>
                                <li>Otherwise,
                                        <sourcexml>docinfo:assoc-links-grp/@display-name</sourcexml>
                                    becomes <targetxml>@grptype</targetxml>.</li>
                            </ul></li>
                        <li><sourcexml>heading/title</sourcexml> becomes
                                <targetxml>heading/title</targetxml>.</li>
                    </ul></p>
                <p>The children below may occur within either level,
                        <sourcexml>docinfo:assoc-links</sourcexml> or
                        <sourcexml>docinfo:assoc-links-grp</sourcexml>, and convert as follows:</p>
                <p>
                    <ul>
                        <li>With one exception, <sourcexml>text</sourcexml> becomes
                                <targetxml>doc:related-content-item/doc:related-content-desc/p/text</targetxml>.
                            The exception to this rule is if and only if the only children of
                                <sourcexml>text</sourcexml> are one or more
                                <sourcexml>link</sourcexml> elements; in this case see the rule for
                                <sourcexml>link</sourcexml> below and example #4.</li>
                        <li>
                            <p><sourcexml>link</sourcexml> becomes
                                    <targetxml>doc:related-content-item/doc:related-content-link/ref:lnlink[@service="ATTACHMENT"]</targetxml>.</p>
                            <p>In addtion to this conversion being performed if the
                                    <sourcexml>link</sourcexml> element is a child of
                                    <sourcexml>docinfo:assoc-links</sourcexml> or
                                    <sourcexml>docinfo:assoc-links-grp</sourcexml>, it is also done
                                when the only children of <sourcexml>text</sourcexml> are one or
                                more <sourcexml>link</sourcexml>elements. That is, if and only if
                                    <b>all</b> of a <sourcexml>text/link</sourcexml> element's other
                                siblings are also <sourcexml>link</sourcexml> elements. In the
                                    <sourcexml>text</sourcexml> scenario, the start-tag and end-tag
                                (but not the content) of <sourcexml>text</sourcexml> are dropped
                                (see example #4). If there are multiple <sourcexml>link</sourcexml>
                                elements, then multiple
                                    <targetxml>doc:related-content-item</targetxml> and children are
                                created, one for each <sourcexml>link</sourcexml> element.</p>
                            <p>For details about converting <sourcexml>link</sourcexml> to
                                    <targetxml>ref:lnlink[@service="ATTACHMENT"]</targetxml> see
                                    <sourcexml>link</sourcexml> rules in the General Markup
                                section.</p>
                        </li>
                        <li><sourcexml>remotelink[@service="QUERY"]</sourcexml> is suppressed. If
                            nothing else is present then also suppress the parent. <note><p><b>This
                                        Note is applicable to CA03, and CA05-CA08 only</b> If we
                                    have XPath
                                        <sourcexml>docinfo:assoc-links-grp/remotelink[@service="QUERY"]</sourcexml>
                                    or
                                        <sourcexml>docinfo:assoc-links/remotelink[@service="QUERY"]</sourcexml>then
                                    we don't need to suppress it from target but in certain
                                    condition for that stream-wise.</p>
                                <ul>
                                    <li><b>For CA06 and CA07</b> If document is having
                                            <sourcexml>remotelink[@service="QUERY"]</sourcexml>
                                        under the
                                            <sourcexml>docinfo:assoc-links-grp[assoc-content="enabling"]
                                        </sourcexml>and <sourcexml>remotelink</sourcexml> comes with
                                        attributes <sourcexml>@remotekey1</sourcexml> with the start
                                        value <b>"DOCINFO(XXXX)"</b> and
                                            <sourcexml>@remotekey2</sourcexml> comes with value
                                            <b>All Canadian Statutes</b> then it should be mapped
                                        with
                                            <targetxml>doc:related-content/doc:related-content-grp/doc:related-content-item[@content-type="enablingLeg"]/ref:relatedresourceref/ref:relatedresourceid/ref:resourcekey="urn:leg-id-1:XXXX"</targetxml>
                                        where <b>XXXX</b> will be taken from source attribute
                                            <sourcexml>remotekey1</sourcexml> Refer Example 7.</li>
                                    <li><b>For CA05 and CA08</b> If document is having
                                            <sourcexml>remotelink[@service="QUERY"]</sourcexml>
                                        under the <sourcexml>docinfo:assoc-links</sourcexml> or
                                            <sourcexml>docinfo:assoc-links-grp</sourcexml> and
                                            <sourcexml>remotelink</sourcexml> comes with attributes
                                            <sourcexml>@remotekey2="All Canadian
                                            Regulations"</sourcexml> then it should be mapped with
                                            <targetxml>doc:related-content/doc:related-content-grp[@grptype="subordinateLeg"]/doc:related-content-item[@content-type="subordinateLeg"]/ref:relatedresourceref/ref:relatedresourceid/ref:resourcekey="urn:leg-id-1:XXXX"</targetxml>
                                        where <b>XXXX</b> will be taken from source attribute
                                            <sourcexml>remotekey1</sourcexml> Refer Example 8.</li>
                                    <li><b>For CA05 - CA08</b> Conversion Needs to split multiple
                                            <b>ORs</b> into a separate
                                            <targetxml>doc:related-content-item</targetxml>. Refer
                                            <b>Example 9</b> for CA06-CA07 streams. </li>
                                    <li><b>For CA06 and CA07</b>
                                        <sourcexml>docinfo:assoc-links-grp/@assoc-content="enabling"</sourcexml>
                                        should map with
                                            <targetxml>doc:related-content-grp/@grptype="enablingLeg"</targetxml>.
                                        Any heading found inside
                                            "<sourcexml>docinfo:assoc-links-grp/remotelink</sourcexml>"
                                        then it should be mapped with
                                            <targetxml>@doc:related-content-grp/heading/title</targetxml>.
                                        Refer Example 9.</li>
                                    <li><b>For CA03</b> If document is having
                                            <sourcexml>remotelink[@service="QUERY"]</sourcexml> and
                                            <sourcexml>remotelink</sourcexml> comes with attributes
                                            <sourcexml>@remotekey1</sourcexml> with the value
                                            <b>"REFNUM(XXXX)"</b> and
                                            <sourcexml>@remotekey2</sourcexml> contains <b>"All
                                            Canadian Summaries"</b> then it should be mapped with
                                            <targetxml>doc:related-content/doc:related-content-grp/doc:related-content-item[@content-type="caseSummaries"]/ref:relatedresourceref/ref:relatedresourceid/ref:resourcekey="urn:ucn-1:XXXX"</targetxml>
                                        where <b>XXXX</b> will be taken from source attribute
                                            <sourcexml>remotekey1</sourcexml>. Any bilingual
                                        headings should be retained along with their associated
                                            <targetxml>@xml:lang</targetxml>. Refer Example 10.
                                    </li>
                                </ul></note>
                        </li>
                        <li><sourcexml>remotelink[@service="DOC-ID"]</sourcexml> becomes
                                <targetxml>doc:related-content-item/doc:related-content-link/ref:lnlink[@service="DOCUMENT"]</targetxml>.
                            If the parent <sourcexml>docinfo:assoc-links</sourcexml> contains
                                <sourcexml>@assoc-content="external-content-location"</sourcexml>,
                            then add
                                <targetxml>@content-type="external-content-location"]</targetxml> to
                                <targetxml>doc:related-content-item</targetxml>. Create the
                            following child elements: <ul>
                                <li>Create <targetxml>ref:marker</targetxml> to capture the PCDATA
                                    of <sourcexml>remotelink</sourcexml>.</li>
                                <li>Create <targetxml>ref:locator</targetxml> and populate it as
                                    follows: <ul>
                                        <li>Create <targetxml>ref:locator-key</targetxml> and
                                            populate it as follows: <ul>
                                                <li>If <sourcexml>@remotekey1="DOC-ID"</sourcexml>
                                                  then <ul>
                                                  <li><targetxml>ref:key-name/@name</targetxml> will
                                                  have the value "DOC-ID".</li>
                                                  <li><targetxml>key-value/@value</targetxml> will
                                                  be the value of <sourcexml>@dpsi</sourcexml>
                                                  followed by hyphen and concatenated with
                                                  <sourcexml>@refpt</sourcexml> or
                                                  <sourcexml>@remotekey2</sourcexml>, which ever is
                                                  present (if both are present, use
                                                  <sourcexml>@remotekey2</sourcexml>).</li>
                                                  </ul>
                                                </li>
                                                <li>If <sourcexml>@remotekey1="REFPTID"</sourcexml>
                                                  then <ul>
                                                  <li><targetxml>ref:key-name/@name</targetxml> will
                                                  have the value "DOC-ID".</li>
                                                  <li><targetxml>ref:key-value/@value</targetxml>
                                                  will be the value of <sourcexml>@dpsi</sourcexml>
                                                  followed by hyphen and concatenated with
                                                  <sourcexml>@docidref</sourcexml>.</li>
                                                  <li>Create
                                                  <targetxml>ref:locator/@anchoridref</targetxml>
                                                  with value from <sourcexml>@refpt</sourcexml> or
                                                  <sourcexml>@remotekey2</sourcexml>, which ever is
                                                  present (if both are present, use
                                                  <sourcexml>@refpt</sourcexml>).</li>
                                                  </ul>
                                                </li>
                                            </ul></li>
                                    </ul>
                                    <note>If <sourcexml>remotelink/@dpsi</sourcexml> is not present,
                                        use value from
                                            <sourcexml>docinfo:dpsi/@id-string</sourcexml> or
                                        capture value from the LBU manifest file.</note>
                                    <note><targetxml>ref:locator/@anchoridref</targetxml> that
                                        begins with a number must have an underscore added at start.
                                        Also apply other identifier data type format as used for
                                            <targetxml>xml:id</targetxml> and
                                            <targetxml>ref:anchor/@id</targetxml> (e.g. change colon
                                        to underscore). Refer to the section titled "Identifiers to
                                        ID Data Type - Handling Pattern Restrictions", if that
                                        section exists in this CI.</note>
                                </li>
                            </ul>
                        </li>
                        <li><sourcexml>remotelink[@href]</sourcexml> becomes
                                <targetxml>doc:related-content-item/doc:related-content-link/ref:lnlink[@service="URL"]</targetxml>.
                            If the parent <sourcexml>docinfo:assoc-links</sourcexml> contains
                                <sourcexml>@assoc-content="external-content-location"</sourcexml>,
                            then add
                                <targetxml>@content-type="external-content-location"]</targetxml> to
                                <targetxml>doc:related-content-item</targetxml>. <p>For details on
                                converting <sourcexml>remotelink[@href]</sourcexml> to
                                    <targetxml>ref:lnlink</targetxml> see
                                    <sourcexml>remotelink</sourcexml> rules in General Markup
                                section.</p>
                        </li>
                        <li>
                            <p><sourcexml>lnlink[@service="QUERYLINK"]</sourcexml> becomes
                                    <targetxml>doc:related-content-item/doc:related-content-link/ref:lnlink</targetxml>
                                which is populated as follows: <ul>
                                    <li><sourcexml>lnlink[@service="QUERYLINK"]</sourcexml> becomes
                                            <targetxml>ref:lnlink[@service="QUERYLINK"]</targetxml></li>
                                    <li><sourcexml>lnlink/marker</sourcexml> becomes
                                            <targetxml>ref:lnlink/ref:marker</targetxml></li>
                                    <li>Create <targetxml>ref:locator</targetxml> and populate it as
                                        follows: <ul>
                                            <li>Create <targetxml>ref:locator-key</targetxml> and
                                                populate it as follows: <ul>
                                                  <li><sourcexml>lnlink/key-name[@name="queryTemplatePGUID"]</sourcexml>
                                                  becomes
                                                  <targetxml>ref:locator/ref:locator-key/ref:key-name[@name="queryTemplatePGUID"].</targetxml></li>
                                                  <li><sourcexml>lnlink/key-value/@value</sourcexml>
                                                  becomes
                                                  <targetxml>ref:locator/ref:locator-key/ref:key-value/@value</targetxml></li>
                                                </ul>
                                            </li>
                                            <li><sourcexml>lnlink/api-params</sourcexml> becomes
                                                  <targetxml>ref:locator/ref:locator-params</targetxml>,
                                                and the children are mapped as follows: <ul>
                                                  <li>For each
                                                  <sourcexml>api-params/param</sourcexml> element,
                                                  create a corresponding
                                                  <targetxml>proc:param</targetxml> and populate the
                                                  attributes: <ul>
                                                  <li><sourcexml>param/@name</sourcexml> becomes
                                                  <targetxml>proc:param/@name</targetxml></li>
                                                  <li><sourcexml>param/@value</sourcexml> becomes
                                                  <targetxml>proc:param/@value</targetxml></li>
                                                  </ul>
                                                  </li>
                                                </ul></li>
                                        </ul>
                                    </li>
                                </ul></p>
                        </li>
                        <li>
                            <p><sourcexml>lnlink[@service="ATTACHMENT"]</sourcexml> becomes
                                    <targetxml>doc:related-content-item/doc:related-content-link/ref:lnlink</targetxml>
                                which is populated as follows: See example 6 for more clarification.<ul>
                                    <li><sourcexml>lnlink[@service="ATTACHMENT"]</sourcexml> becomes
                                            <targetxml>ref:lnlink[@service="ATTACHMENT"]</targetxml></li>
                                    <li><sourcexml>lnlink/marker</sourcexml> becomes
                                            <targetxml>ref:lnlink/ref:marker</targetxml></li>
                                    <li>Create <targetxml>ref:locator</targetxml> and populate it as
                                        follows: <ul>
                                            <li>Create <targetxml>ref:locator-key</targetxml> and
                                                populate it as follows: <ul>
                                                  <li><sourcexml>lnlink/api-params/param/@name="attachment-key"</sourcexml>
                                                  becomes
                                                  <targetxml>ref:locator/ref:locator-key/ref:key-name/@name="attachment-key"</targetxml>.</li>
                                                  <li><sourcexml>lnlink/api-params/param/@value</sourcexml>
                                                  becomes
                                                  <targetxml>ref:locator/ref:locator-key/ref:key-value/@value</targetxml>
                                                  <note>Conversion final output will be
                                                  <targetxml>ref:key-value/@value="{LNI}-{SMI}-{X}"</targetxml>
                                                  where as {X} is the
                                                  <sourcexml>lnlink/api-params/param/@value</sourcexml>
                                                  as described above and prepend {LNI} and {SMI} are
                                                  not literal values, they show where the LNI and
                                                  SMI values obtained from CSSM should be output.
                                                  See the Example 6</note>
                                                  </li>
                                                </ul>
                                            </li>
                                            <li><sourcexml>lnlink/api-params</sourcexml> becomes
                                                  <targetxml>ref:locator/ref:locator-params</targetxml>,
                                                and the children are mapped as follows: <ul>
                                                  <li>For each
                                                  <sourcexml>api-params/param</sourcexml> element,
                                                  create a corresponding
                                                  <targetxml>proc:param</targetxml> and populate the
                                                  attributes: <ul>
                                                  <li><sourcexml>param/@name</sourcexml> becomes
                                                  <targetxml>proc:param/@name</targetxml></li>
                                                  <li><sourcexml>param/@value</sourcexml> becomes
                                                  <targetxml>proc:param/@value</targetxml></li>
                                                  </ul>
                                                  <note>Also create the below markup in the target
                                                  document while conversion</note>
                                                  <ul>
                                                  <li><targetxml>proc:param/@name="attachment-smi"</targetxml>
                                                  and
                                                  <targetxml>proc:param/@value="{SMI}"</targetxml>
                                                  <note>@value populated with SMI obtained from
                                                  CSSM. This @value assignment is done by conversion
                                                  program</note>
                                                  </li>
                                                  </ul>
                                                  </li>
                                                </ul></li>
                                        </ul>
                                    </li>
                                </ul></p>
                        </li>
                        <li>
                            <p><sourcexml>lnlink[@service="TRAVERSE"]</sourcexml> becomes
                                    <targetxml>doc:related-content-item/doc:related-content-link/ref:lnlink[@service="TRAVERSE"]</targetxml>.
                                If the parent <sourcexml>docinfo:assoc-links</sourcexml> contains
                                    <sourcexml>@assoc-content="external-content-location"</sourcexml>,
                                then add
                                    <targetxml>@content-type="external-content-location"]</targetxml>
                                to <targetxml>doc:related-content-item</targetxml>.</p>
                            <p>For details on converting
                                    <sourcexml>lnlink[@service="TRAVERSE"]</sourcexml> to
                                    <targetxml>ref:lnlink[@service="TRAVERSE"] </targetxml> see
                                    <sourcexml>lnlink[@service="TRAVERSE"]</sourcexml> rules in
                                General Markup section.</p>
                        </li>
                        <li>
                            <p><sourcexml>lnlink[@service="URL"]</sourcexml> becomes
                                    <targetxml>doc:related-content-item/doc:related-content-link/ref:lnlink[@service="URL"]</targetxml>.
                                If the parent <sourcexml>docinfo:assoc-links</sourcexml> contains
                                    <sourcexml>@assoc-content="external-content-location"</sourcexml>,
                                then add
                                    <targetxml>@content-type="external-content-location"]</targetxml>
                                to <targetxml>doc:related-content-item</targetxml>.</p>
                            <p>For details on converting
                                    <sourcexml>lnlink[@service="URL"]</sourcexml> to
                                    <targetxml>ref:lnlink[@service="URL"] </targetxml> see
                                    <sourcexml>lnlink[@service="URL"]</sourcexml> rules in General
                                Markup section.</p>
                        </li>
                        <li><sourcexml>ci:cite</sourcexml> becomes
                                <targetxml>doc:related-content-item/doc:related-content-link/ref:lnlink[@service="TRAVERSE"]</targetxml>.
                            If the parent <sourcexml>docinfo:assoc-links</sourcexml> contains
                                <sourcexml>@assoc-content="external-content-location"</sourcexml>,
                            then add
                                <targetxml>@content-type="external-content-location"]</targetxml> to
                                <targetxml>doc:related-content-item</targetxml>. Create the
                            following child elements: <ul>
                                <li> Create <targetxml>ref:marker</targetxml> to capture the PCDATA
                                    of <sourcexml>ci:cite/ci:content</sourcexml>.</li>
                                <li><targetxml>ref:locator/ref:locator-key/ref:key-name/@name</targetxml>
                                    will have the value "normcite".</li>
                                <li><targetxml>ref:locator/ref:locator-key/key-value/@value</targetxml>
                                    will be the value of
                                    <sourcexml>ci:cite/ci:content</sourcexml>.</li>
                                <li>Create
                                        <targetxml>ref:locator/ref:locator-params/proc:param[@name="normprotocol"]</targetxml>.
                                    If <sourcexml>ci:cite/@normprotocol</sourcexml> is present,
                                    create the attribute <targetxml>proc:param/@value</targetxml>
                                    and copy the value of <sourcexml>normprotocol</sourcexml>;
                                    otherwise, add <targetxml>@value="lexsee"</targetxml>. This line
                                    is hard coded.</li>
                                <li>If <sourcexml>docinfo:doc-country/@iso-cc</sourcexml> exists,
                                    create
                                        <targetxml>ref:locator/ref:locator-params/proc:param[@name="countrycode"]</targetxml>
                                    with the attribute <targetxml>@value</targetxml>. The
                                        <targetxml>@value</targetxml> value is from
                                        <sourcexml>docinfo:doc-country/@iso-cc</sourcexml>.</li>
                            </ul>
                        </li>
                    </ul>
                </p>
            </section>
            <!-- McNally Apr 3 2014. The following special rule is moved to separate AU-NZ module. Commenting-out for now; can delete when we want -->
            <!--<section>
   <p><b><u>Special Rule for AU and NZ</u></b></p>
   <p>Usual rule is that each rosetta child (<sourcexml>text</sourcexml>,
     <sourcexml>remotelink</sourcexml>, <sourcexml>ci:cite</sourcexml>) maps to its own
     <targetxml>doc:related-content-item</targetxml>, as described above. For AU and NZ streams, a
    special merge is required, as follows: If rosetta linking element
     (<sourcexml>remotelink</sourcexml> or <sourcexml>ci:cite</sourcexml>) is immediately followed
    by <sourcexml>text</sourcexml>, then map the linking element (<sourcexml>remotelink</sourcexml>
    or <sourcexml>ci:cite</sourcexml>) and <sourcexml>text</sourcexml> to a single
     <targetxml>doc:related-content-item</targetxml>. See Example 4.</p>
  </section>-->
            <example>
                <title>Source XML 1</title>
                <codeblock> &lt;docinfo:assoc-links&gt; &lt;remotelink alttext="Find related
                    journals" cmd="f:exp" remotekey1="LEG-REF(Flood and Water Management Act 2010 OR
                    FWMA 2010 w/3 s 48 OR ss 48 OR section 48 OR sections 48) OR &amp;quot;Flood and
                    Water Management Act 2010&amp;quot; OR FWMA 2010 w/3 LEG-REF(s 48 OR ss 48 OR
                    section 48 OR sections 48)" remotekey2="All Subscribed Journals Sources"
                    service="QUERY"&gt;Find related journals&lt;/remotelink&gt; &lt;remotelink
                    service="DOC-ID" remotekey1="REFPTID" refpt="786617_SL" dpsi="02o0"
                    docidref="ABC123"&gt;Find related subordinate legislation&lt;/remotelink&gt;
                    &lt;/docinfo:assoc-links&gt; </codeblock>
            </example>

            <example>
                <title>Target XML 1</title>
                <codeblock> &lt;doc:related-content&gt; &lt;doc:related-content-item&gt;
                    &lt;doc:related-content-link&gt; &lt;ref:lnlink service="DOCUMENT"&gt;
                    &lt;ref:marker&gt; Find related subordinate legislation &lt;/ref:marker&gt;
                    &lt;ref:locator anchoridref="_786617_SL "&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="DOC-ID"/&gt; &lt;ref:key-value value="02o0-ABC123"/&gt;
                    &lt;/ref:locator-key&gt; &lt;/ref:locator&gt; &lt;/ref:lnlink&gt;
                    &lt;/doc:related-content-link&gt; &lt;/doc:related-content-item&gt;
                    &lt;/doc:related-content&gt; </codeblock>
            </example>

            <example>
                <title>Source XML 2</title>
                <codeblock> &lt;docinfo:assoc-links assoc-content="related-content-pod"&gt;
                    &lt;docinfo:assoc-links-grp assoc-content="related-documents"&gt;
                    &lt;heading&gt; &lt;title&gt;Related Documents&lt;/title&gt; &lt;/heading&gt;
                    &lt;remotelink service="DOC-ID" remotekey1="DOC-ID" remotekey2="0ONJ_151450"
                    dpsi="0ONJ"&gt;Transferring patent rights&lt;/remotelink&gt;
                    &lt;/docinfo:assoc-links-grp&gt; &lt;docinfo:assoc-links-grp
                    assoc-content="related-legislation"&gt; &lt;heading&gt; &lt;title&gt;Related
                    Legislation&lt;/title&gt; &lt;/heading&gt; &lt;text&gt;Primary statute:
                    &lt;ci:cite searchtype="LEG-REF" status="valid"&gt; &lt;ci:sesslaw&gt;
                    &lt;ci:sesslawinfo&gt; &lt;ci:sesslawnum num="1977_37a_Title"/&gt;
                    &lt;/ci:sesslawinfo&gt; &lt;ci:sesslawref&gt; &lt;ci:standardname
                    normpubcode="UK_ACTS"/&gt; &lt;/ci:sesslawref&gt; &lt;/ci:sesslaw&gt;
                    &lt;ci:content&gt;Patents Act 1977&lt;/ci:content&gt; &lt;/ci:cite&gt;
                    &lt;/text&gt; &lt;/docinfo:assoc-links-grp&gt; &lt;/docinfo:assoc-links&gt;
                </codeblock>
            </example>

            <example>
                <title>Target XML 2</title>
                <codeblock> &lt;doc:related-content&gt; &lt;doc:related-content-grp
                    grptype="related-documents"&gt; &lt;heading&gt; &lt;title&gt;Related
                    Documents&lt;/title&gt; &lt;/heading&gt; &lt;doc:related-content-item&gt;
                    &lt;doc:related-content-link&gt; &lt;ref:lnlink service="DOCUMENT"&gt;
                    &lt;ref:marker&gt;Transferring patent rights&lt;/ref:marker&gt;
                    &lt;ref:locator&gt; &lt;ref:locator-key&gt; &lt;ref:key-name name="DOC-ID"/&gt;
                    &lt;ref:key-value value="0ONJ-0ONJ_151450"/&gt; &lt;/ref:locator-key&gt;
                    &lt;/ref:locator&gt; &lt;/ref:lnlink&gt; &lt;/doc:related-content-link&gt;
                    &lt;/doc:related-content-item&gt; &lt;/doc:related-content-grp&gt;
                    &lt;doc:related-content-grp grptype="related-legislation"&gt; &lt;heading&gt;
                    &lt;title&gt;Related Legislation&lt;/title&gt; &lt;/heading&gt;
                    &lt;doc:related-content-item&gt; &lt;doc:related-content-desc&gt; &lt;p&gt;
                    &lt;text&gt;Primary statute: &lt;lnci:cite status="valid"&gt;
                    &lt;lnci:sesslaw&gt; &lt;lnci:sesslawinfo&gt; &lt;lnci:sesslawnum
                    num="1977_37a_Title"/&gt; &lt;/lnci:sesslawinfo&gt; &lt;lnci:sesslawref&gt;
                    &lt;lnci:standardname normpubcode="UK_ACTS"/&gt; &lt;/lnci:sesslawref&gt;
                    &lt;/lnci:sesslaw&gt; &lt;lnci:content&gt;Patents Act 1977&lt;/lnci:content&gt;
                    &lt;/lnci:cite&gt; &lt;/text&gt; &lt;/p&gt; &lt;/doc:related-content-desc&gt;
                    &lt;/doc:related-content-item&gt; &lt;/doc:related-content-grp&gt;
                    &lt;/doc:related-content&gt; </codeblock>
            </example>
            <!-- McNally Apr 3 2014. Example 3 expanded to include ci:cite.  Done to illustrate general mapping; avoid confusion with separate module for AU-NZ use case.  -->
            <example>
                <title>Source XML 3</title>
                <codeblock> &lt;docinfo:assoc-links&gt; &lt;remotelink alttext="Latest Times Law
                    Reports" href="www.timesonline.co.uk/TGD/lexisDisplay/0,,,00.html"
                    hrefclass="http"&gt;Latest Times Law Reports&lt;/remotelink&gt; &lt;ci:cite
                    searchtype="BOOK-REF"&gt; &lt;ci:content&gt;Data technologies and patents (2012)
                    18 MCN 5&lt;/ci:content&gt; &lt;/ci:cite&gt; &lt;/docinfo:assoc-links&gt;
                </codeblock>
            </example>

            <example>
                <title>Target XML 3</title>
                <codeblock> &lt;doc:related-content&gt; &lt;doc:related-content-item&gt;
                    &lt;doc:related-content-link&gt; &lt;ref:lnlink service="URL"&gt;
                    &lt;ref:marker&gt;Latest Times Law Reports&lt;/ref:marker&gt;
                    &lt;ref:locator&gt; &lt;ref:locator-key&gt; &lt;ref:key-name name="URL"/&gt;
                    &lt;ref:key-value
                    value="http://www.timesonline.co.uk/TGD/lexisDisplay/0,,,00.html"/&gt;
                    &lt;/ref:locator-key&gt; &lt;/ref:locator&gt; &lt;/ref:lnlink&gt;
                    &lt;/doc:related-content-link&gt; &lt;/doc:related-content-item&gt;
                    &lt;doc:related-content-item&gt; &lt;doc:related-content-link&gt; &lt;ref:lnlink
                    service="TRAVERSE"&gt; &lt;ref:marker role="label"&gt;Data technologies and
                    patents (2012) 18 MCN 5&lt;/ref:marker&gt; &lt;ref:locator&gt;
                    &lt;ref:locator-key&gt; &lt;ref:key-name name="normcite"/&gt; &lt;ref:key-value
                    value="Data technologies and patents (2012) 18 MCN 5"/&gt;
                    &lt;/ref:locator-key&gt; &lt;ref:locator-params&gt; &lt;proc:param
                    name="normprotocol" value="lexsee"/&gt; &lt;proc:param name="countrycode"
                    value="GB"/&gt; &lt;/ref:locator-params&gt; &lt;/ref:locator&gt;
                    &lt;/ref:lnlink&gt; &lt;/doc:related-content-link&gt;
                    &lt;/doc:related-content-item&gt; &lt;/doc:related-content&gt; </codeblock>
            </example>

            <example>
                <title>Source XML 4, showing a <sourcexml>text</sourcexml> element containing only a
                        <sourcexml>link</sourcexml> child element</title>
                <codeblock> &lt;docinfo:assoc-links-grp assoc-content="related-documents"&gt;
                    &lt;heading&gt; &lt;title&gt;Related documents&lt;/title&gt; &lt;/heading&gt;
                    &lt;remotelink service="DOC-ID" remotekey1="REFPTID" newwindow="YES"
                    refpt="0OLB_258264" dpsi="0OLB" status="invalid"
                    docidref="e60348a7-cc9b-4d43-468b-55a207cd7f00"&gt;Serving the claim
                    form—method, address, deemed service and dispensing with
                    service&lt;/remotelink&gt; &lt;text searchtype="figure"&gt; &lt;link
                    filename="EXT_DR_List of authorised government departments for service.pdf"
                    alttext="EXT_DR_List of authorised government departments for service.pdf"
                    type="pdf" &gt;List of authorised government departments for
                    service&lt;/link&gt; &lt;/text&gt; &lt;/docinfo:assoc-links-grp&gt;
                    &lt;/docinfo:assoc-links&gt; </codeblock>
            </example>

            <example>
                <title>Target XML 4</title>
                <codeblock> &lt;doc:related-content&gt; &lt;doc:related-content-grp
                    grptype="related-documents"&gt; &lt;heading&gt; &lt;title&gt;Related
                    documents&lt;/title&gt; &lt;/heading&gt; &lt;doc:related-content-item&gt;
                    &lt;doc:related-content-link&gt; &lt;ref:lnlink service="DOCUMENT"&gt;
                    &lt;ref:marker&gt;Serving the claim form—method, address, deemed service and
                    dispensing with service&lt;/ref:marker&gt; &lt;ref:locator
                    anchoridref="0OLB_258264"&gt; &lt;ref:locator-key&gt; &lt;ref:key-name
                    name="DOC-ID"/&gt; &lt;ref:key-value
                    value="0OLB-e60348a7-cc9b-4d43-468b-55a207cd7f00"/&gt; &lt;/ref:locator-key&gt;
                    &lt;/ref:locator&gt; &lt;/ref:lnlink&gt; &lt;/doc:related-content-link&gt;
                    &lt;/doc:related-content-item&gt; &lt;doc:related-content-item&gt;
                    &lt;doc:related-content-link&gt; &lt;ref:lnlink service="ATTACHMENT"&gt;
                    &lt;ref:marker role="label"&gt;List of authorised government departments for
                    service&lt;/ref:marker&gt; &lt;ref:locator&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="attachment-key"/&gt; &lt;ref:key-value
                    value="{LNI}-{SMI}-EXT_DR_List of authorised government departments for
                    service"/&gt; &lt;!-- The {LNI} and {SMI} are not literal values, they show
                    where the LNI and SMI values obtained from CSSM should be output. --&gt;
                    &lt;/ref:locator-key&gt; &lt;ref:locator-params&gt; &lt;proc:param
                    name="componentseq" value="1"/&gt; &lt;proc:param name="attachment-type"
                    value="PDF"/&gt; &lt;proc:param name="attachment-smi" value=""/&gt; &lt;!--
                    proc:param/@value is set to the SMI value obtained from CSSM. --&gt; &lt;!--
                    This @value assignment is done by the conversion program. --&gt;
                    &lt;/ref:locator-params&gt; &lt;/ref:locator&gt; &lt;/ref:lnlink&gt;
                    &lt;/doc:related-content-link&gt; &lt;/doc:related-content-item&gt;
                    &lt;/doc:related-content-grp&gt; &lt;/doc:related-content&gt; </codeblock>
            </example>

            <example>
                <title>Source XML 5 - <sourcexml>lnlink[@service="QUERYLINK"]</sourcexml></title>
                <codeblock> &lt;docinfo:assoc-links&gt; &lt;docinfo:assoc-links-grp
                    display-name="VALUE_PROVIDED_BY_CONTENTEDITOR"&gt; &lt;heading&gt;
                    &lt;title&gt;Query Links&lt;/title&gt; &lt;/heading&gt; &lt;lnlink
                    service="QUERYLINK"&gt; &lt;key-name name="queryTemplatePGUID"/&gt;
                    &lt;key-value value="urn:queryTemplate:1119"/&gt; &lt;marker&gt;Other Tax
                    documents&lt;/marker&gt; &lt;api-params&gt; &lt;param name="queryParameter1"
                    value="CA $#$ US"/&gt; &lt;param name="queryParameter2" value="MA"/&gt;
                    &lt;param name="queryParameter3" value="-60"/&gt; &lt;/api-params&gt;
                    &lt;/lnlink&gt; &lt;/docinfo:assoc-links-grp&gt; &lt;/docinfo:assoc-links&gt;
                </codeblock>
            </example>

            <example>
                <title>Target XML 5</title>
                <codeblock> &lt;doc:related-content&gt; &lt;doc:related-content-grp
                    grptype="VALUE_PROVIDED_BY_CONTENTEDITOR"&gt; &lt;heading&gt; &lt;title&gt;Query
                    Links&lt;/title&gt; &lt;/heading&gt; &lt;doc:related-content-item&gt;
                    &lt;doc:related-content-link&gt; &lt;ref:lnlink service="QUERYLINK"&gt;
                    &lt;ref:marker&gt;Other Tax documents&lt;/ref:marker&gt; &lt;ref:locator&gt;
                    &lt;ref:locator-key&gt; &lt;ref:key-name name="queryTemplatePGUID"/&gt;
                    &lt;ref:key-value value="urn:queryTemplate:1119"/&gt; &lt;/ref:locator-key&gt;
                    &lt;ref:locator-params&gt; &lt;proc:param name="queryParameter1" value="CA $#$
                    US"/&gt; &lt;proc:param name="queryParameter2" value="MA"/&gt; &lt;proc:param
                    name="queryParameter3" value="-60"/&gt; &lt;/ref:locator-params&gt;
                    &lt;/ref:locator&gt; &lt;/ref:lnlink&gt; &lt;/doc:related-content-link&gt;
                    &lt;/doc:related-content-item&gt; &lt;/doc:related-content-grp&gt;
                    &lt;/doc:related-content&gt; </codeblock>
            </example>

            <example>
                <title>Source XML 6 - <sourcexml>lnlink[@service="ATTACHMENT"]</sourcexml></title>
                <codeblock> &lt;docinfo:assoc-links&gt; &lt;docinfo:assoc-links-grp
                    assoc-content="related-documents"&gt; &lt;heading&gt; &lt;title&gt;Related
                    Documents&lt;/title&gt; &lt;/heading&gt; &lt;lnlink service="ATTACHMENT"&gt;
                    &lt;marker&gt;See PDF rendition&lt;/marker&gt; &lt;api-params&gt; &lt;param
                    name="attachment-key" value="RSCS_14905_CURRENT-0001"/&gt; &lt;param
                    name="attachment-type" value="PDF"/&gt; &lt;param name="componentseq"
                    value="1"/&gt; &lt;/api-params&gt; &lt;/lnlink&gt;
                    &lt;/docinfo:assoc-links-grp&gt; &lt;/docinfo:assoc-links&gt; </codeblock>
            </example>

            <example>
                <title>Target XML 6</title>
                <codeblock> &lt;doc:related-content-grp grptype="related-documents"&gt;
                    &lt;heading&gt; &lt;title&gt;Related documents&lt;/title&gt; &lt;/heading&gt;
                    &lt;doc:related-content-item&gt; &lt;doc:related-content-link&gt; &lt;ref:lnlink
                    service="ATTACHMENT"&gt; &lt;ref:marker role="label"&gt;See PDF
                    rendition&lt;/ref:marker&gt; &lt;ref:locator&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="attachment-key"/&gt; &lt;ref:key-value
                    value="{LNI}-{SMI}-RSCS_14905_CURRENT-0001"/&gt; &lt;!-- The {LNI} and {SMI} are
                    not literal values, they show where the LNI and SMI values obtained from CSSM
                    should be output. --&gt; &lt;/ref:locator-key&gt; &lt;ref:locator-params&gt;
                    &lt;proc:param name="componentseq" value="1"/&gt; &lt;proc:param
                    name="attachment-type" value="PDF"/&gt; &lt;proc:param name="attachment-smi"
                    value="{SMI}"/&gt; &lt;!-- proc:param/@value is set to the SMI value obtained
                    from CSSM. --&gt; &lt;!-- This @value assignment is done by the conversion
                    program. --&gt; &lt;/ref:locator-params&gt; &lt;/ref:locator&gt;
                    &lt;/ref:lnlink&gt; &lt;/doc:related-content-link&gt;
                    &lt;/doc:related-content-item&gt; &lt;/doc:related-content-grp&gt; </codeblock>
            </example>

            <example>
                <title>Source XML 7 - CA06-CA07
                        <sourcexml>docinfo:assoc-links-grp/remotelink[@service="QUERY"]</sourcexml></title>
                <codeblock> &lt;docinfo:assoc-links&gt; &lt;docinfo:assoc-links-grp
                    assoc-content="enabling"&gt; &lt;heading&gt; &lt;title&gt;Enabling
                    Act&lt;/title&gt; &lt;/heading&gt; &lt;remotelink
                    remotekey1="DOCINFO(2cb2cdcca9bdd55a897d897ac67f7e39)" remotekey2="All Canadian
                    Statutes" service="QUERY"&gt;Enabling Act&lt;/remotelink&gt;
                    &lt;/docinfo:assoc-links-grp&gt; &lt;/docinfo:assoc-links&gt; </codeblock>
            </example>

            <example>
                <title>Target XML 7 -
                        CA06-CA07<sourcexml>docinfo:assoc-links-grp/remotelink[@service="QUERY"]</sourcexml></title>
                <codeblock> &lt;doc:related-content&gt; &lt;doc:related-content-grp
                    grptype="enablingLeg"&gt; &lt;heading&gt; &lt;title&gt;Enabling
                    Act&lt;/title&gt; &lt;/heading&gt; &lt;doc:related-content-item
                    content-type="enablingLeg"&gt; &lt;ref:relatedresourceref&gt;
                    &lt;ref:relatedresourceid
                    ref:resourcekey="urn:leg-id-1:2cb2cdcca9bdd55a897d897ac67f7e39"/&gt;
                    &lt;/ref:relatedresourceref&gt; &lt;/doc:related-content-item&gt;
                    &lt;/doc:related-content-grp&gt; &lt;/doc:related-content&gt; </codeblock>
            </example>

            <example>
                <title>Source XML 8 - CA05
                        <sourcexml>docinfo:assoc-links/remotelink[@service="QUERY"]</sourcexml></title>
                <codeblock> &lt;docinfo:assoc-links&gt; &lt;remotelink
                    remotekey1="DOCINFO(5eff46c7fc603910e15eb944d97c13c0)" remotekey2="All Canadian
                    Regulations" service="QUERY"&gt;Link to regulations enabled by this
                    act&lt;/remotelink&gt; &lt;/docinfo:assoc-links&gt; </codeblock>
            </example>

            <example>
                <title>Target XML 8 - CA05
                        <sourcexml>docinfo:assoc-links/remotelink[@service="QUERY"]</sourcexml></title>
                <codeblock> &lt;doc:related-content&gt; &lt;doc:related-content-grp
                    grptype="subordinateLeg"&gt; &lt;doc:related-content-item
                    content-type="subordinateLeg"&gt; &lt;ref:relatedresourceref&gt;
                    &lt;ref:relatedresourceid
                    ref:resourcekey="urn:leg-id-1:5eff46c7fc603910e15eb944d97c13c0"/&gt;
                    &lt;/ref:relatedresourceref&gt; &lt;/doc:related-content-item&gt;
                    &lt;/doc:related-content-grp&gt; &lt;/doc:related-content&gt; </codeblock>
            </example>
            <example>
                <title>Source XML 9 (CA06-CA07)</title>
                <codeblock> &lt;docinfo:assoc-links&gt; &lt;docinfo:assoc-links-grp
                    assoc-content="enabling"&gt; &lt;heading/&gt; &lt;remotelink
                    remotekey1="DOCINFO(2ccc2826b445aebac6f6b3f8013e7931) OR
                    DOCINFO(2ccc2826b445aebac6f6b3f8013e7932) OR
                    DOCINFO(2ccc2826b445aebac6f6b3f8013e7933) .... OR
                    DOCINFO(2ccc2826b445aebac6f6b3f8013e7939)" remotekey2="All Canadian Statutes"
                    service="QUERY"&gt;Enabling Act&lt;/remotelink&gt;
                    &lt;/docinfo:assoc-links-grp&gt; &lt;/docinfo:assoc-links&gt; </codeblock>
            </example>
            <example>
                <title>Target XML 9 (CA06-CA07)</title>
                <codeblock> &lt;doc:related-content&gt; &lt;doc:related-content-grp
                    grptype="enablingLeg"&gt; &lt;heading&gt; &lt;title&gt;Enabling
                    Act&lt;/title&gt; &lt;/heading&gt; &lt;doc:related-content-item
                    content-type="enablingLeg"&gt; &lt;ref:relatedresourceref&gt;
                    &lt;ref:relatedresourceid
                    ref:resourcekey="urn:leg-id-1:2ccc2826b445aebac6f6b3f8013e7931"/&gt;
                    &lt;/ref:relatedresourceref&gt; &lt;/doc:related-content-item&gt;
                    &lt;doc:related-content-item content-type="enablingLeg"&gt;
                    &lt;ref:relatedresourceref&gt; &lt;ref:relatedresourceid
                    ref:resourcekey="urn:leg-id-1:2ccc2826b445aebac6f6b3f8013e7932"/&gt;
                    &lt;/ref:relatedresourceref&gt; &lt;/doc:related-content-item&gt;
                    &lt;doc:related-content-item content-type="enablingLeg"&gt;
                    &lt;ref:relatedresourceref&gt; &lt;ref:relatedresourceid
                    ref:resourcekey="urn:leg-id-1:2ccc2826b445aebac6f6b3f8013e7933"/&gt;
                    &lt;/ref:relatedresourceref&gt; &lt;/doc:related-content-item&gt; ....
                    &lt;doc:related-content-item content-type="enablingLeg"&gt;
                    &lt;ref:relatedresourceref&gt; &lt;ref:relatedresourceid
                    ref:resourcekey="urn:leg-id-1:2ccc2826b445aebac6f6b3f8013e7939"/&gt;
                    &lt;/ref:relatedresourceref&gt; &lt;/doc:related-content-item&gt;
                    &lt;/doc:related-content-grp&gt; &lt;/doc:related-content&gt; </codeblock>
            </example>
            <example>
                <title>Source XML 10 (CA03)</title>
                <codeblock> &lt;docinfo:assoc-links&gt; &lt;remotelink service="QUERY"
                    remotekey1="REFNUM(01704997)" remotekey2="All Canadian Summaries (Netletters,
                    Digests, Summaries)" xml:lang="en-CA"&gt;Find case digests&lt;/remotelink&gt;
                    &lt;remotelink service="QUERY" remotekey1="REFNUM(01704997)" remotekey2="All
                    Canadian Summaries (Netletters, Digests, Summaries)" xml:lang="fr-CA"&gt;Résumés
                    jurisprudentiels&lt;/remotelink&gt; &lt;/docinfo:assoc-links&gt; </codeblock>
            </example>
            <!--CA03 note: doc:related-content-grp/@grptype we set to the same as doc:related-content-item@content-type: enablingLeg | subordinateLeg | caseSummaries | quantums-->
            <example>
                <title>Target XML 10 (CA03)</title>
                <codeblock> &lt;doc:related-content&gt; &lt;doc:related-content-grp
                    grptype="caseSummaries"&gt; &lt;heading&gt; &lt;title xml:lang="en-CA"&gt;Find
                    case digests&lt;/title&gt; &lt;title xml:lang="fr-CA"&gt;Résumés
                    jurisprudentiels&lt;/title&gt; &lt;/heading&gt; &lt;doc:related-content-item
                    content-type="caseSummaries"&gt; &lt;ref:relatedresourceref&gt;
                    &lt;ref:relatedresourceid ref:resourcekey="urn:ucn-1:01704997"/&gt;
                    &lt;/ref:relatedresourceref&gt; &lt;/doc:related-content-item&gt;
                    &lt;/doc:related-content-grp&gt; &lt;/doc:related-content&gt; </codeblock>
            </example>
            <example>
                <title>Source XML 11 (LPA)</title>
                <codeblock> &lt;docinfo:assoc-links&gt; &lt;docinfo:assoc-links-grp
                    assoc-content="related-documents" content-type="form"&gt;
                    &lt;docinfo:assoc-resource assoc-resourcename="BusLaw"
                    assoc-resourceid="urn:krm:ABCDEABCDEABCDEABCDEABCDE3ABCDE1"/&gt; &lt;lnlink
                    service="TRAVERSE"&gt; &lt;key-name name="normcite"/&gt; &lt;key-value
                    value="LexisNexis Forms Form 219-8.22-7"/&gt; &lt;marker role="label"&gt;Notice
                    of Commencement Of Case Under Chapter 11 of the Bankruptcy Code, Meeting of
                    Creditors, and Deadlines--Chapter 11 Corporation/Partnership Case; Official Form
                    9F &lt;/marker&gt; &lt;/lnlink&gt; &lt;remotelink dpsi="0N5M"
                    remotekey1="DOC-ID" remotekey2="0N5M_157408" service="DOC-ID"&gt;Exhibit A to
                    Official Form 1&lt;/remotelink&gt; &lt;remotelink
                    href="http://www.justice.gov/ust/index.htm" newwindow="YES" service="SEARCH"
                    status="valid"&gt;Official Website of the U.S. Trustee
                    Program&lt;/remotelink&gt; &lt;/docinfo:assoc-links-grp&gt;
                    &lt;docinfo:assoc-links-grp assoc-content="related-documents"
                    content-type="case"&gt; &lt;docinfo:assoc-resource assoc-resourcename="IP"
                    assoc-resourceid="urn:krm:ABCDEABCDEABCDEABCDEABCDE3ABCDE2"/&gt; &lt;lnlink
                    service="TRAVERSE"&gt; &lt;key-name name="normcite"/&gt; &lt;key-value
                    value="2012 U.S. Bankr. Ct. Motions LEXIS 1246"/&gt; &lt;marker
                    role="label"&gt;2012 U.S. Bankr. Ct. Motions LEXIS 1246 (Bankr. N.D.
                    Ill.)&lt;/marker&gt; &lt;/lnlink&gt; &lt;remotelink dpsi="0N5N"
                    remotekey1="DOC-ID" remotekey2="0N5N-0N5N_157355" service="DOC-ID"&gt;Emergency
                    Motion for Joint Administration of Chapter 11 Cases&lt;/remotelink&gt;
                    &lt;remotelink
                    href="http://www.uscourts.gov/RulesAndPolicies/FederalRulemaking/LocalCourtRules/USBankruptcyCourts.htm"
                    newwindow="YES" service="SEARCH" status="valid"&gt;Official Website of the
                    Federal Judiciary&lt;/remotelink&gt; &lt;/docinfo:assoc-links-grp&gt;
                    &lt;/docinfo:assoc-links&gt; </codeblock>
            </example>
            <example>
                <title>Target XML 11 (LPA)</title>
                <codeblock> &lt;doc:related-content&gt; &lt;doc:related-content-grp
                    grptype="related-documents"&gt; &lt;ref:relatedresourceref&gt;
                    &lt;ref:relatedresourceid
                    ref:resourcekey="urn:krm:ABCDEABCDEABCDEABCDEABCDE3ABCDE1"/&gt;
                    &lt;/ref:relatedresourceref&gt; &lt;doc:related-content-item&gt;
                    &lt;doc:related-content-link&gt; &lt;ref:lnlink service="TRAVERSE"&gt;
                    &lt;ref:marker role="label"&gt;Notice of Commencement Of Case Under Chapter 11
                    of the Bankruptcy Code, Meeting of Creditors, and Deadlines--Chapter 11
                    Corporation/Partnership Case; Official Form 9F &lt;/ref:marker&gt;
                    &lt;ref:locator&gt; &lt;ref:locator-key&gt; &lt;ref:key-name
                    name="normcite"/&gt; &lt;ref:key-value value="LexisNexis Forms Form
                    219-8.22-7"/&gt; &lt;/ref:locator-key&gt; &lt;ref:locator-params&gt;
                    &lt;proc:param name="normprotocol" value="lexsee"/&gt;
                    &lt;/ref:locator-params&gt; &lt;/ref:locator&gt; &lt;/ref:lnlink&gt;
                    &lt;/doc:related-content-link&gt; &lt;/doc:related-content-item&gt;
                    &lt;doc:related-content-item&gt; &lt;doc:related-content-link&gt; &lt;ref:lnlink
                    service="DOCUMENT"&gt; &lt;ref:marker&gt;Exhibit A to Official Form
                    1&lt;/ref:marker&gt; &lt;ref:locator&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="DOC-ID"/&gt; &lt;ref:key-value
                    value="0N5M-0N5M_157408"/&gt; &lt;/ref:locator-key&gt; &lt;/ref:locator&gt;
                    &lt;/ref:lnlink&gt; &lt;/doc:related-content-link&gt;
                    &lt;/doc:related-content-item&gt; &lt;doc:related-content-item&gt;
                    &lt;doc:related-content-link&gt; &lt;ref:lnlink service="URL"&gt;
                    &lt;ref:marker&gt;Official Website of the U.S. Trustee
                    Program&lt;/ref:marker&gt; &lt;ref:locator&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="URL"/&gt; &lt;ref:key-value
                    value="http://www.justice.gov/ust/index.htm"/&gt; &lt;/ref:locator-key&gt;
                    &lt;/ref:locator&gt; &lt;/ref:lnlink&gt; &lt;/doc:related-content-link&gt;
                    &lt;/doc:related-content-item&gt; &lt;/doc:related-content-grp&gt;
                    &lt;doc:related-content-grp grptype="related-documents"&gt;
                    &lt;ref:relatedresourceref&gt; &lt;ref:relatedresourceid
                    ref:resourcekey="urn:krm:ABCDEABCDEABCDEABCDEABCDE3ABCDE2"/&gt;
                    &lt;/ref:relatedresourceref&gt; &lt;doc:related-content-item&gt;
                    &lt;doc:related-content-link&gt; &lt;ref:lnlink service="TRAVERSE"&gt;
                    &lt;ref:marker role="label"&gt;2012 U.S. Bankr. Ct. Motions LEXIS 1246 (Bankr.
                    N.D. Ill.)&lt;/ref:marker&gt; &lt;ref:locator&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="normcite"/&gt; &lt;ref:key-value value="2012 U.S. Bankr.
                    Ct. Motions LEXIS 1246"/&gt; &lt;/ref:locator-key&gt; &lt;ref:locator-params&gt;
                    &lt;proc:param name="normprotocol" value="lexsee"/&gt;
                    &lt;/ref:locator-params&gt; &lt;/ref:locator&gt; &lt;/ref:lnlink&gt;
                    &lt;/doc:related-content-link&gt; &lt;/doc:related-content-item&gt;
                    &lt;doc:related-content-item&gt; &lt;doc:related-content-link&gt; &lt;ref:lnlink
                    service="DOCUMENT"&gt; &lt;ref:marker&gt;Emergency Motion for Joint
                    Administration of Chapter 11 Cases&lt;/ref:marker&gt; &lt;ref:locator&gt;
                    &lt;ref:locator-key&gt; &lt;ref:key-name name="DOC-ID"/&gt; &lt;ref:key-value
                    value="0N5N-0N5N_157355"/&gt; &lt;/ref:locator-key&gt; &lt;/ref:locator&gt;
                    &lt;/ref:lnlink&gt; &lt;/doc:related-content-link&gt;
                    &lt;/doc:related-content-item&gt; &lt;doc:related-content-item&gt;
                    &lt;doc:related-content-link&gt; &lt;ref:lnlink service="URL"&gt;
                    &lt;ref:marker&gt;Official Website of the Federal Judiciary&lt;/ref:marker&gt;
                    &lt;ref:locator&gt; &lt;ref:locator-key&gt; &lt;ref:key-name name="URL"/&gt;
                    &lt;ref:key-value
                    value="http://www.uscourts.gov/RulesAndPolicies/FederalRulemaking/LocalCourtRules/USBankruptcyCourts.htm"/&gt;
                    &lt;/ref:locator-key&gt; &lt;/ref:locator&gt; &lt;/ref:lnlink&gt;
                    &lt;/doc:related-content-link&gt; &lt;/doc:related-content-item&gt;
                    &lt;/doc:related-content-grp&gt; &lt;/doc:related-content&gt; </codeblock>
            </example>


            <!-- McNally Apr 3 2014. Removing Example 4 to avoid confusion with separate module for AU-NZ use case. -->

            <!--        <example>
            <title>Source XML 4</title>
            <codeblock>
            <![CDATA[
                <docinfo:assoc-links>
                    <docinfo:assoc-links-grp>
                        <heading>
                            <title>Related Content</title>
                        </heading>
                        <remotelink dpsi="0084" remotekey1="REFPTID" service="DOC-ID" refpt="PCL.C19">Chapter 19
                            Debt Finance</remotelink>
                            <text>Ford's Principles of Corporations Law</text>
                        <remotelink dpsi="0KKU" remotekey1="REFPTID" service="DOC-ID" refpt="0KKU_72492">Overall
                            results and consequences of the PPSA</remotelink>
                        <text>LexisNexis Practical Guidance, Family module</text>
                        <remotelink href="www.familycourt.gov.au" hrefclass="http" newwindow="YES">Family Court of
                            Australia</remotelink>
                    </docinfo:assoc-links-grp>
                </docinfo:assoc-links>
             ]]>
	   </codeblock>
        </example>

        <example>
            <title>Target XML 4</title>
            <codeblock>
<![CDATA[
 <doc:related-content>
                 <doc:related-content-grp grptype="related-content">
                     <heading><title>Related Content</title></heading>
                     <doc:related-content-item>
                     <doc:related-content-link>
                         <ref:lnlink service="DOCUMENT">
                             <ref:marker>Chapter 19 Debt Finance</ref:marker>
                             <ref:locator>
                                 <ref:locator-key>
                                     <ref:key-name name="DOC-ID"/>
                                     <ref:key-value value="0084-PCL.C19"/>
                                 </ref:locator-key>
                             </ref:locator>
                         </ref:lnlink>
                     </doc:related-content-link>
                     </doc:related-content-item>
                     <doc:related-content-item>
                         <doc:related-content-desc>
                             <p><text>Ford's Principles of Corporations Law</text></p>
                         </doc:related-content-desc>
                     </doc:related-content-item>
                     <doc:related-content-item>
                         <doc:related-content-link>
                             <ref:lnlink service="DOCUMENT">
                                 <ref:marker>Overall
                                 results and consequences of the PPSA</ref:marker>
                                 <ref:locator>
                                     <ref:locator-key>
                                         <ref:key-name name="DOC-ID"/>
                                         <ref:key-value value="0KKU-0KKU_72492"/>
                                     </ref:locator-key>
                                 </ref:locator>
                             </ref:lnlink>
                         </doc:related-content-link>
                     </doc:related-content-item>
                     <doc:related-content-item>
                         <doc:related-content-desc>
                             <p><text>LexisNexis Practical Guidance, Family module</text></p>
                         </doc:related-content-desc>
                     </doc:related-content-item>
                     <doc:related-content-item>
                         <doc:related-content-link>
                             <ref:lnlink service="URL">
                                 <ref:marker>Family Court of Australia</ref:marker>
                                 <ref:locator>
                                     <ref:locator-key>
                                       <ref:key-name name="URL"/>
                                       <ref:key-value value="http://www.familycourt.gov.au"/>
                                     </ref:locator-key>
                                 </ref:locator>
                             </ref:lnlink>
                         </doc:related-content-link>
                     </doc:related-content-item>
                </doc:related-content-grp>
                ]]>
	   </codeblock>
	   </example>-->

            <!-- McNally Apr 3 2014. Removing Example 5 to avoid confusion with separate module for AU-NZ use case. -->
            <!--  <example>
   <title>Source XML 5 :
    <sourcexml>docinfo:assoc-links/docinfo:assoc-links-grp/ci:cite</sourcexml></title>
   <codeblock>
<![CDATA[
<docinfo:assoc-links>
 <docinfo:assoc-links-grp>  
  <heading><title>Related Content</title></heading>
  <remotelink dpsi="008D" remotekey1="DOC-ID" service="DOC-ID" refpt="PIL.OV">Overview of Insurance</remotelink>
  <text>Kelly &amp; Ball Principles of Insurance Law</text>
  <remotelink dpsi="0384" remotekey1="DOC-ID" service="DOC-ID" refpt="PFI.ICA.ICA">Insurance Contracts Act 1984</remotelink>
  <text>Australian Insurance Law Annotated</text>
  <ci:cite searchtype="BOOK-REF">
   <ci:content>The central role of insurance in modern society and in the development of the law (2013) 24 ILJ 1</ci:content>
  </ci:cite>
  <text>Insurance Law Journal</text>
 </docinfo:assoc-links-grp>
</docinfo:assoc-links>]]>
            </codeblock>
  </example>
  <example>
   <title>Target XML 5 :
    <sourcexml>docinfo:assoc-links/docinfo:assoc-links-grp/ci:cite</sourcexml></title>
   <codeblock>
<![CDATA[
<doc:related-content>
 <doc:related-content-grp> 
  <heading><title>Related Content</title></heading>
  <doc:related-content-item>
    <doc:related-content-link>
     <ref:lnlink service="DOCUMENT">
      <ref:marker>Overview of Insurance</ref:marker>
      <ref:locator>
       <ref:locator-key>
        <ref:key-name name="DOC-ID"/>
        <ref:key-value value="008D-PIL.OV"/>
       </ref:locator-key>
      </ref:locator>
     </ref:lnlink>
    </doc:related-content-link>
    <doc:related-content-desc>
     <p><text>Kelly &amp; Ball Principles of Insurance Law</text></p>
    </doc:related-content-desc>
  </doc:related-content-item>
  <doc:related-content-item>
    <doc:related-content-link>
     <ref:lnlink service="DOCUMENT">
      <ref:marker>Insurance Contracts Act 1984</ref:marker>
      <ref:locator>
       <ref:locator-key>
        <ref:key-name name="DOC-ID"/>
        <ref:key-value value="0384-PFI.ICA.ICA"/>
       </ref:locator-key>
      </ref:locator>
     </ref:lnlink>
    </doc:related-content-link>
    <doc:related-content-desc>
     <p><text>Australian Insurance Law Annotated</text></p>
    </doc:related-content-desc>
  </doc:related-content-item>
  <doc:related-content-item>
    <doc:related-content-link>
     <ref:lnlink service="TRAVERSE">
      <ref:marker role="label">The central role of insurance in modern society and in the development of the law (2013) 24 ILJ 1</ref:marker>
      <ref:locator>
       <ref:locator-key>
        <ref:key-name name="normcite"/>
        <ref:key-value value="The central role of insurance in modern society and in the development of the law (2013) 24 ILJ 1"/>
       </ref:locator-key>
       <ref:locator-params>
        <proc:param name="normprotocol" value="lexsee"/>
        <proc:param name="countrycode" value="AU"/>
       </ref:locator-params>
      </ref:locator>
     </ref:lnlink>
    </doc:related-content-link>
    <doc:related-content-desc>
     <p><text>Insurance Law Journal</text></p>
    </doc:related-content-desc>
  </doc:related-content-item>
 </doc:related-content-grp>
</doc:related-content>]]>                
            </codeblock>
  </example>-->

            <section>
                <title>Changes</title>
                <p>2016-11-16: <ph id="change_20161116_snb">Added to note regarding applying any
                        rules related to <targetxml>@anchoridref</targetxml>, referring specifically
                        to section for "Identifiers to ID Data Type - Handling Pattern
                        Restrictions".</ph>
                </p>
                <p>2016-07-29: <ph id="change_20160729_jm">Added Note about xml snippets that
                        illustrate image handling. Note summarizes move from Apollo to Blobstore
                        application. UK is first LBU to move to Blobstore.</ph></p>
                <p>2015-09-11: <ph id="change_20150911_snb">Added instruction for handling of
                            <sourcexml>lnlink[@service="URL"]</sourcexml> inside
                            <sourcexml>docinfo:assoc-links</sourcexml> or
                            <sourcexml>docinfo:assoc-links-grp</sourcexml>.</ph>
                </p>
                <p>2015-09-11: <ph id="change_20150911_snb2">Correction to target XPATHs for
                            <sourcexml>lnlink[@service="QUERYLINK"]</sourcexml>,
                            <sourcexml>lnlink[@service="ATTACHMENT"]</sourcexml>, and
                            <sourcexml>lnlink[@service="TRAVERSE"]</sourcexml> to add
                            <targetxml>doc:related-content-item/doc:related-content-link</targetxml>
                        before the existing <targetxml>ref:lnlink</targetxml> element in the
                        XPATH.</ph>
                </p>
                <p>2015-09-03: <ph id="change_20150903_snb">Added instruction for handling of
                            <sourcexml>lnlink[@service="TRAVERSE"]</sourcexml> inside
                            <sourcexml>docinfo:assoc-links</sourcexml> or
                            <sourcexml>docinfo:assoc-links-grp</sourcexml>.</ph>
                </p>
                <p>2015-09-03: <ph id="change_20150903_snb2">Added
                            <targetxml>doc:related-content-item/@content-type="external-content-location"</targetxml>
                        when the parent
                            <sourcexml>docinfo:assoc-links[@assoc-content="external-content-location"]</sourcexml>
                        exists, for children: <sourcexml>remotelink[@service="DOC-ID"]</sourcexml>,
                            <sourcexml>remotelink[@href]</sourcexml>,
                            <sourcexml>lnlink[@service="TRAVERSE"]</sourcexml> and
                            <sourcexml>ci:cite</sourcexml>.</ph>
                </p>
                <p>2015-09-03: <ph id="change_20150903_snb3">Minor correction to bullet heading text
                        for children of <sourcexml>docinfo:assoc-links</sourcexml> or
                            <sourcexml>docinfo:assoc-links-grp</sourcexml> to change from
                            <sourcexml>lnlink/@service="QUERYLINK"</sourcexml> to be
                            <sourcexml>lnlink[@service="QUERYLINK"]</sourcexml> and
                            <sourcexml>lnlink/@service="ATTACHMENT"</sourcexml> to be
                            <sourcexml>lnlink[@service="ATTACHMENT"]</sourcexml>.</ph>
                </p>
                <p>2015-07-16: <ph id="change_20150716_bmh">Updated conversion for handling of
                            <sourcexml>ci:cite/@normprotocol</sourcexml>,
                            <targetxml>proc:param[@name="countrycode"]</targetxml>; added
                        instructions for <sourcexml>docinfo:assoc-resource</sourcexml>.</ph>
                </p>
                <p>2015-05-22: <ph id="change_20150522_jm">Clarification. Not a new rule or target.
                        Within rules handling <sourcexml>remotelink[@service="DOC-ID"]</sourcexml>,
                        added statement to create containing elements
                            <targetxml>ref:locator/ref:locator-key</targetxml> which hold
                            <targetxml>ref:key-name</targetxml> and
                            <targetxml>ref:key-value</targetxml>. The xpath is controlled by schema
                        and so conversions have been correct. CI examples were correct. The
                        narrative rule is now explicit. R4.5 Content Issue 2326.</ph></p>
                <p>2015-01-19: <ph id="change_20150119_SS"><b>For CA05 - CA08</b>- Updated
                        Instruction and included "<targetxml>related-content-grp</targetxml>" markup
                        inside the target <b>Example 8</b> for conversion of QUERY link to
                        doc:related-content.</ph></p>
                <p>2015-01-15: <ph id="change_20150115_SEP"><b>For CA03</b>- Convert the QUERY link
                        to doc:related-content. Refer Example 10. R4.5 RFA #2099.</ph></p>
                <p>2015-01-13: <ph id="change_20150113_SSX"><b>For CA05 - CA08</b> Conversion Needs
                        to split multiple <b>ORs</b> into a separate
                            <targetxml>doc:related-content-item</targetxml>. Refer Example
                    9</ph></p>
                <p>2015-01-02: <ph id="change_20150102_PS">Added
                            <sourcexml>docinfo:assoc-links/remotelink[@service="QUERY"]</sourcexml>
                        and
                            <sourcexml>docinfo:assoc-links-grp/remotelink[@service="QUERY"]</sourcexml>
                        to generate <targetxml>doc:related-content</targetxml> markup. Applicable on
                        CA05.</ph></p>
                <p>2014-12-19: <ph id="change_20141219_PS">Updated target mapping for <b>CA05</b>
                        for handling
                            <sourcexml>docinfo:assoc-links/remotelink[@service="QUERY"]</sourcexml>.
                        Applicable on CA05.</ph></p>
                <p>2014-12-17: <ph id="change_20141217_SS">Added a Note for <b>CA05, CA06, CA07 and
                            CA08</b> for handling
                            <sourcexml>docinfo:assoc-links-grp/remotelink[@service="QUERY"]
                        </sourcexml></ph> R4.5 issue #2088 and #2068.</p>
                <p>2014-09-16: <ph id="change_20140916_SSX">Added a note to create
                            <targetxml>proc:param/@name="attachment-smi"</targetxml> and
                            <targetxml>proc:param/@value</targetxml> as these was there in the
                        snippet but was missing in instruction and also added a note in to simplify
                        in output <targetxml>ref:key-value/@value</targetxml></ph></p>
                <p>2014-08-21: <ph id="change_20140821_PS">Added instructions and an example for
                        converting <sourcexml>lnlink[@service="ATTACHMENT"]</sourcexml> to
                            <targetxml>ref:lnlink</targetxml>. Applicable on CA05-CA08.</ph></p>
                <p>2014-06-18: <ph id="change_20140618_JCG">Corrected minor typos in
                            <sourcexml>lnlink[@service="QUERYLINK"]</sourcexml>
                    instructions.</ph></p>
                <p>2014-06-13: <ph id="change_20140613_brt">Added instructions and an example for
                        converting <sourcexml>lnlink[@service="QUERYLINK"]</sourcexml> to
                            <targetxml>ref:lnlink</targetxml>.</ph></p>
                <p>2014-04-28: <ph id="change_20140428_JCG">Clarified instructions regarding
                            <sourcexml>link</sourcexml> elements and added an example (#4)
                        illustrating the special <sourcexml>text/link</sourcexml> conversion. No
                        mapping rules where changed or added.</ph></p>
                <p>2014-04-21: <ph id="change_20140421_JCG">Added an instruction to handle
                            <sourcexml>link</sourcexml> elements. These can potentially occur in any
                        future UK data and will be present in stream UK21fl when those documents
                        become available later in 2014.</ph></p>
                <p>2014-04-03: <ph id="change_20140403_jm">Illustrative changes. Examples modified.
                        Mapping for <sourcexml>ci:cite</sourcexml> added to Example 3. Former
                        Examples 4 and 5 removed to avoid confusion with special AU-NZ use case
                        described in a separate module. R4.5 Content issue #1125, for AU-NZ, has
                        prompted the changes for this general module.</ph></p>
                <!--<p>2014-04-02: <ph id="change_20140402_jm">Added special rule for AU and NZ streams. Applies when
     a linking element is immediately followed by <sourcexml>text</sourcexml>. The pair map to a
     single <targetxml>doc:related-content-item</targetxml>. Example 4 is changed, now illustrates
     new rule. R4.5 Content issue #1125</ph></p>-->
                <p>2014-03-25: <ph id="change_20140325">Added rule and example for
                            <sourcexml>docinfo:assoc-links/docinfo:assoc-links-grp/ci:cite</sourcexml>.
                        R4.5 Content issue #1125</ph></p>
                <p>2013-07-19: <ph id="change_20130719_jm">Added rule mapping attribute
                            <sourcexml>remotelink[@service="DOC-ID"]</sourcexml> to
                            <targetxml>ref:lnlink[@service="DOCUMENT"]</targetxml></ph>.</p>
                <p>2013-04-12: <ph id="change_20130412_WLL">This module was changed from <b>UK</b>
                        specific to applicable to all LBUs</ph></p>
                <p>2013-04-10: <ph id="change_20130410_WLL">An example for related content Source
                        and Target XML 4</ph></p>
                <p>2013-03-28: <ph id="change_20130328_xx"> Added rules for
                            <sourcexml>docinfo:assoc-links-grp</sourcexml> and for child
                            <sourcexml>text</sourcexml>.</ph></p>
                <p>2013-01-22: <ph id="change_20130122_xx"> Added mapping instruction for
                            <sourcexml>docinfo:assoc-links/remotelink @href</sourcexml>.</ph></p>
                <p>2012-12-05: <ph id="change_20121205_xx"> Example added for Canada content
                        stream.</ph></p>
                <p>2012-10-15: <ph id="change_20121015_xx"> Made some Kraken related
                    changes.</ph></p>
                <p>2012-10-08: <ph id="change_20121008_xx">Created.</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_docinfo.assoc-links-LxAdv-doc.related-content.dita  -->
    <!-- begin debug code -->
    <!--<xsl:param name="streamID" select="'CA07'"/>
  
  <xsl:include href="../../modules/nonamespace/Rosetta_identifier-LxAdv-ID_data_type-HandlingPatternRestrictions.xsl"/> 
  
  <xsl:template match="heading">
    <xsl:copy-of select="."/>
  </xsl:template>-->
    <!-- end debug code -->

    <!-- Awantika:use of variable for AU20 -->


    <xsl:template match="docinfo:assoc-links">
        <xsl:if
            test="child::*[not(self::remotelink[@service = 'QUERY'])] or $streamID = ('CA03', 'CA05', 'CA06', 'CA07', 'CA08')">
            <doc:related-content>
                <xsl:apply-templates select="@* | node()"/>
            </doc:related-content>
        </xsl:if>
    </xsl:template>




    <xsl:template match="docinfo:assoc-links/@assoc-content"/>

    <!-- JL: to match DT, suppressing docinfo:assoc-links/@display-name -->

    <xsl:template match="docinfo:assoc-links/@display-name"/>

    <xsl:template match="docinfo:assoc-links-grp">
        <doc:related-content-grp>
            <xsl:apply-templates select="@* | node()"/>
            <!-- Awantika-2017-10-13: creating empty doc:related-content-item which is required child element for docinfo:assoc-links-grp
      Input data is coming with empty text the module created for docinfo:assoc-links-grp/text is not recognising the empty text and therefore 
      making the file invalid-->
            <!-- 2017-10-24 - MDS: Added 'UK11DA' streamID to test. -->
            <xsl:if
                test="$streamID = ('UK11DN', 'UK11DA') and child::text[not(preceding-sibling::* except heading and following-sibling::*)] = ''">
                <doc:related-content-item/>
            </xsl:if>
            <xsl:if
                test="$streamID = ('CA05', 'CA06') and child::remotelink[@service = 'QUERY'][not(following-sibling::*) and preceding-sibling::heading = '']">
                <doc:related-content-item/>
            </xsl:if>
        </doc:related-content-grp>
    </xsl:template>

    <xsl:template match="docinfo:assoc-links-grp/@assoc-content">
        <xsl:attribute name="grptype">
            <xsl:choose>
                <xsl:when
                    test="
                        (starts-with($streamID, 'CA06') or starts-with($streamID, 'CA07')) and . = 'enabling'
                        and parent::docinfo:assoc-links-grp/remotelink[@service = 'QUERY'][starts-with(@remotekey1, 'DOCINFO(')][@remotekey2[. = 'All Canadian Statutes']]">
                    <xsl:text>enablingLeg</xsl:text>
                </xsl:when>
                <xsl:when
                    test="(starts-with($streamID, 'CA05') or starts-with($streamID, 'CA08')) and parent::docinfo:assoc-links-grp/remotelink[@service = 'QUERY'][starts-with(@remotekey1, 'DOCINFO(')][@remotekey2[. = 'All Canadian Regulations']]">
                    <xsl:text>subordinateLeg</xsl:text>
                </xsl:when>
                <xsl:when
                    test="starts-with($streamID, 'CA03') and parent::docinfo:assoc-links-grp/remotelink[@service = 'QUERY'][starts-with(@remotekey1, 'REFNUM(')][@remotekey2 = 'All Canadian Summaries']">
                    <xsl:text>caseSummaries</xsl:text>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="."/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:attribute>
    </xsl:template>

    <xsl:template match="docinfo:assoc-links-grp/@display-name">
        <xsl:if test="not(parent::docinfo:assoc-links-grp[@assoc-content])">
            <xsl:attribute name="grptype">
                <xsl:value-of select="."/>
            </xsl:attribute>
        </xsl:if>
    </xsl:template>

    <xsl:template match="docinfo:assoc-links-grp/@content-type"/>

    <xsl:template match="docinfo:assoc-resource">
        <!--  Original Target XPath:  ref:relatedresourceref/ref:relatedresourceid   -->
        <ref:relatedresourceref>
            <ref:relatedresourceid>
                <xsl:apply-templates select="@* | node()"/>
            </ref:relatedresourceid>
        </ref:relatedresourceref>
    </xsl:template>

    <xsl:template match="docinfo:assoc-resource/@assoc-resourceid">
        <xsl:attribute name="ref:resourcekey">
            <xsl:value-of select="."/>
        </xsl:attribute>
    </xsl:template>

    <xsl:template match="docinfo:assoc-resource/@assoc-resourcename"/>


    <!-- <xsl:template match="docinfo:assoc-links/text | docinfo:assoc-links-grp/text">
    <xsl:choose>
      <xsl:when test="child::link and not(child::*[not(self::link)]) and not(text())">
        <xsl:apply-templates select="link"/>
      </xsl:when>
        <xsl:otherwise>
          <doc:related-content-item>
            <doc:related-content-desc>
              <p xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                <text xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                  <xsl:apply-templates select="@* | node()"/>
                </text>
              </p>
            </doc:related-content-desc>
          </doc:related-content-item>
        </xsl:otherwise>     
    </xsl:choose>    
  </xsl:template>-->
    <!-- 12/12/17 backed out 'priority="5" -->
    <!-- BRT 12/7/17 W*7065778 added priority='5' docinfo:assoc-links-grp/text was getting triggered somewhere else (couldn't find the template)-->
    <xsl:template match="docinfo:assoc-links/text | docinfo:assoc-links-grp/text">

        <!-- BRT 12/12/17 backed out code to normalize the text -->
        <!-- BRT 11/27/17 added processing to normlize the space in text nodes to avoid false positives -->
        <!-- xsl:variable name="text">
      <xsl:for-each select="text()">
        <xsl:value-of select="normalize-space(.)"/>
      </xsl:for-each>
    </xsl:variable-->
        <xsl:choose>
            <!-- BRT 12/12/17 backed out change: 'and not(text())' to  and $text =''" -->
            <!-- BRT change 'and not(text())' to  and $text =''" -->
            <xsl:when test="child::link and not(child::*[not(self::link)]) and not(text())">
                <xsl:apply-templates select="link"/>
            </xsl:when>
            <!-- Awantika: remotelink[@service="DOC-ID"] becomes doc:related-content-item/doc:related-content-link/
ref:lnlink[@service="DOCUMENT"]. Added this for UK11DN -->
            <xsl:when test="(./remotelink or ./url/remotelink) and $streamID = ('UK11DN', 'UK11DA')">
                <xsl:apply-templates select="@* | node()"/>
            </xsl:when>

            <!-- Priya Kaushal: Added below code for UK 15 -->
            <xsl:when test="(./remotelink or ./url/remotelink) and $streamID = ('UK15')">
                <doc:related-content-item>
                    <doc:related-content-desc>
                        <p xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                            <text
                                xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                                <xsl:apply-templates select="remotelink | url/remotelink"/>
                            </text>
                        </p>
                    </doc:related-content-desc>
                </doc:related-content-item>
            </xsl:when>
            <!-- Awantika: when condition for UK11DN -->
            <xsl:when test="$streamID = 'UK11DN' and child::link">
                <xsl:apply-templates select="node() except emph"/>
            </xsl:when>
            <xsl:otherwise>
                <doc:related-content-item>
                    <doc:related-content-desc>
                        <p xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                            <text
                                xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                                <xsl:apply-templates select="@* | node()"/>
                            </text>
                        </p>
                    </doc:related-content-desc>
                </doc:related-content-item>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>


    <xsl:template
        match="link[parent::docinfo:assoc-links or parent::docinfo:assoc-links-grp or parent::text[parent::docinfo:assoc-links or parent::docinfo:assoc-links-grp]]">
        <doc:related-content-item>
            <doc:related-content-link>
                <ref:lnlink service="ATTACHMENT">
                    <ref:marker>
                        <xsl:apply-templates/>
                    </ref:marker>
                    <ref:locator>
                        <ref:locator-key>
                            <ref:key-name name="attachment-key"/>
                            <ref:key-value>
                                <xsl:attribute name="value">
                                    <xsl:choose>
                                        <xsl:when test="@smi">
                                            <xsl:value-of select="substring-before(@filename, '.')"
                                            />
                                        </xsl:when>
                                        <!-- BRT 2018-01-11 modified otherwise  to keep file extension. For UK15 determined the file extension is required for blobstore images; Rocel says it is required for other type images as well-->
                                        <xsl:otherwise>
                                            <xsl:value-of select="@filename"/>
                                        </xsl:otherwise>
                                    </xsl:choose>
                                </xsl:attribute>
                            </ref:key-value>
                        </ref:locator-key>
                        <ref:locator-params>
                            <!-- 2017-10-04 - MDS: Added choose statement to test for stream ID to match modified monolithic in HK06 
            JL: 2017-10-06 added same for HK01-->
                            <!-- BRT 2018-01-02 added UK15 to choose statement. Note this template is almost exactly the same as in Rosetta_link-LxAdv-ref.lnlink_BLOBSTORE.xsl, which is commented out in UK15ds and is used by UK11dn. I don't know why both are present  -->
                            <xsl:choose>
                                <xsl:when test="$streamID = ('HK06', 'HK01', 'UK15')">
                                    <proc:param name="attachment-type" value="IMG"/>
                                    <proc:param name="external-or-local" value="external"/>
                                    <proc:param name="attachment-server" value="BlobStore"/>
                                    <proc:param name="attachment-pguid"
                                        value="urn:contentItem:0000-0000-0000-0000-00000-00"/>
                                    <proc:param name="componentseq" value="1"/>
                                </xsl:when>
                                <xsl:otherwise>
                                    <proc:param name="componentseq" value="1"/>
                                    <proc:param>
                                        <xsl:attribute name="name">attachment-type</xsl:attribute>
                                        <xsl:attribute name="value">
                                            <xsl:apply-templates select="@type"/>
                                        </xsl:attribute>
                                    </proc:param>
                                    <proc:param>
                                        <xsl:attribute name="name">attachment-smi</xsl:attribute>
                                        <xsl:attribute name="value">
                                            <xsl:value-of select="@smi"/>
                                        </xsl:attribute>
                                    </proc:param>
                                </xsl:otherwise>
                            </xsl:choose>
                        </ref:locator-params>
                    </ref:locator>
                </ref:lnlink>
            </doc:related-content-link>
        </doc:related-content-item>
    </xsl:template>

    <!-- MDS 2017-04-07 - Declared in Rosetta_link-LxAdv-ref.lnlink.xsl -->
    <!--<xsl:template match="link/@type">
    <xsl:choose>
      <xsl:when test=".=('para','page', 'ed-pnum','refpt','logo')">
        <xsl:message>attachment-type is invalid, cannot be determined.</xsl:message>
      </xsl:when>
      <xsl:when test=".=('pdf' , 'pdf-fillable')">PDF</xsl:when>
      <xsl:when test=".='hotdoc-nonfillable'">hotdoc</xsl:when>
      <xsl:otherwise><xsl:value-of select="."/></xsl:otherwise>
    </xsl:choose>
  </xsl:template>-->


    <xsl:template
        match="remotelink[@service = 'QUERY'][ancestor::docinfo:assoc-links][$streamID = ('CA03', 'CA05', 'CA06', 'CA07', 'CA08')]">
        <xsl:choose>
            <xsl:when
                test="
                    (starts-with($streamID, 'CA06') or starts-with($streamID, 'CA07')) and parent::docinfo:assoc-links-grp[@assoc-content = 'enabling']
                    and starts-with(@remotekey1, 'DOCINFO(') and @remotekey2 = 'All Canadian Statutes'">
                <xsl:call-template name="makeRelatedresourceref">
                    <xsl:with-param name="contentType" select="'enablingLeg'"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:when
                test="(starts-with($streamID, 'CA05') or starts-with($streamID, 'CA08')) and starts-with(@remotekey1, 'DOCINFO(') and @remotekey2 = 'All Canadian Regulations'">
                <xsl:call-template name="makeRelatedresourceref">
                    <xsl:with-param name="contentType" select="'subordinateLeg'"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:when
                test="starts-with(@remotekey1, 'REFNUM(') and contains(@remotekey2, 'All Canadian Summaries') and $streamID = 'CA03' and not(preceding-sibling::*[1][self::remotelink])">
                <doc:related-content-grp grptype="caseSummaries">
                    <heading xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                        <title xml:lang="en-CA">
                            <xsl:value-of select="."/>
                        </title>
                        <title xml:lang="fr-CA">
                            <xsl:value-of select="following-sibling::remotelink"/>
                        </title>
                    </heading>
                    <doc:related-content-item content-type="caseSummaries">
                        <ref:relatedresourceref>
                            <ref:relatedresourceid>
                                <xsl:attribute name="ref:resourcekey">
                                    <xsl:value-of
                                        select="concat('urn:ucn-1:', substring-before(substring-after(@remotekey1, 'REFNUM('), ')'))"
                                    />
                                </xsl:attribute>
                            </ref:relatedresourceid>
                        </ref:relatedresourceref>
                    </doc:related-content-item>
                </doc:related-content-grp>
            </xsl:when>
            <!-- otherwise we do nothing for remotelink service QUERY -->
        </xsl:choose>
    </xsl:template>

    <xsl:template name="makeRelatedresourceref">
        <xsl:param name="contentType"/>
        <xsl:for-each select="tokenize(@remotekey1, '\s+OR\s+')">
            <doc:related-content-item>
                <xsl:attribute name="content-type" select="$contentType"/>
                <ref:relatedresourceref>
                    <ref:relatedresourceid>
                        <xsl:attribute name="ref:resourcekey">
                            <xsl:value-of
                                select="concat('urn:leg-id-1:', substring-before(substring-after(., 'DOCINFO('), ')'))"
                            />
                        </xsl:attribute>
                    </ref:relatedresourceid>
                </ref:relatedresourceref>
            </doc:related-content-item>
        </xsl:for-each>
    </xsl:template>


    <xsl:template
        match="remotelink[@service = 'DOC-ID'][parent::docinfo:assoc-links or parent::docinfo:assoc-links-grp]">
        <doc:related-content-item>
            <xsl:if test="parent::docinfo:assoc-links[@assoc-content = 'external-content-location']">
                <xsl:attribute name="content-type">external-content-location</xsl:attribute>
            </xsl:if>
            <doc:related-content-link>
                <ref:lnlink>
                    <xsl:attribute name="service">DOCUMENT</xsl:attribute>
                    <ref:marker>
                        <xsl:apply-templates/>
                    </ref:marker>
                    <ref:locator>
                        <xsl:if test="@remotekey1 = 'REFPTID' and (@refpt or @remotekey2)">
                            <xsl:attribute name="anchoridref">
                                <xsl:choose>
                                    <xsl:when test="@refpt">
                                        <xsl:for-each select="@refpt">
                                            <xsl:call-template name="normalizeIdString"/>
                                        </xsl:for-each>
                                    </xsl:when>
                                    <xsl:otherwise>
                                        <xsl:for-each select="@remotekey2">
                                            <xsl:call-template name="normalizeIdString"/>
                                        </xsl:for-each>
                                    </xsl:otherwise>
                                </xsl:choose>
                            </xsl:attribute>
                        </xsl:if>
                        <ref:locator-key>
                            <xsl:choose>
                                <xsl:when test="@remotekey1 = 'DOC-ID'">
                                    <ref:key-name name="DOC-ID"/>
                                    <ref:key-value>
                                        <xsl:attribute name="value">
                                            <xsl:value-of select="@dpsi"/>
                                            <xsl:text>-</xsl:text>
                                            <xsl:value-of
                                                select="
                                                    if (@remotekey2) then
                                                        @remotekey2
                                                    else
                                                        @refpt"
                                            />
                                        </xsl:attribute>
                                    </ref:key-value>
                                </xsl:when>
                                <xsl:when test="@remotekey1 = 'REFPTID'">
                                    <ref:key-name name="DOC-ID"/>
                                    <ref:key-value>
                                        <xsl:attribute name="value">
                                            <xsl:value-of
                                                select="
                                                    if (@dpsi) then
                                                        @dpsi
                                                    else
                                                        //docinfo/docinfo:dpsi/@id-string"/>
                                            <xsl:text>-</xsl:text>
                                            <xsl:value-of select="@docidref"/>
                                        </xsl:attribute>
                                    </ref:key-value>
                                </xsl:when>
                            </xsl:choose>
                        </ref:locator-key>
                    </ref:locator>
                </ref:lnlink>
            </doc:related-content-link>
        </doc:related-content-item>
    </xsl:template>

    <xsl:template
        match="remotelink[@href][parent::docinfo:assoc-links or parent::docinfo:assoc-links-grp]"
        priority="25">
        <doc:related-content-item>
            <xsl:if test="parent::docinfo:assoc-links[@assoc-content = 'external-content-location']">
                <xsl:attribute name="content-type">external-content-location</xsl:attribute>
            </xsl:if>
            <doc:related-content-link>
                <ref:lnlink service="URL">
                    <ref:marker>
                        <xsl:value-of select="."/>
                    </ref:marker>
                    <ref:locator>
                        <ref:locator-key>
                            <ref:key-name name="URL"/>
                            <ref:key-value>
                                <xsl:attribute name="value">
                                    <xsl:value-of
                                        select="
                                            if (@hrefclass) then
                                                concat(@hrefclass, '://', @href)
                                            else
                                                @href"
                                    />
                                </xsl:attribute>
                            </ref:key-value>
                        </ref:locator-key>
                    </ref:locator>
                </ref:lnlink>
            </doc:related-content-link>
            <xsl:apply-templates select="following-sibling::text[1][$streamID != 'UK14']"/>
        </doc:related-content-item>
        <xsl:apply-templates select="following-sibling::*[1][self::text][$streamID = 'UK14']"/>
    </xsl:template>



    <!-- from other module: If the data content of the remotelink does not start with one of the previous listed
          text sequences, <sourcexml>remotelink</sourcexml> becomes
            <targetxml>ref:lnlink</targetxml> and is populated as follows:<ul>
            <li>The <targetxml>ref:lnlink/@service</targetxml> attribute is set to "URL".</li>
            <li>Element <targetxml>ref:lnlink/ref:marker</targetxml> is created and the content of
                <sourcexml>remotelink</sourcexml> becomes the content of child
                <targetxml>ref:lnlink/ref:marker</targetxml>. Any descendant element is converted
              according to instructions for that element in the section <i>General Mark-Up</i>.</li>
            <li>The child <targetxml>ref:lnlink/ref:locator</targetxml> is created, and within it
              the child <targetxml>ref:lnlink/ref:locator/ref:locator-key</targetxml> is created,
              and within it the children
                <targetxml>ref:lnlink/ref:locator/ref:locator-key/ref:key-name</targetxml> and
                <targetxml>ref:lnlink/ref:locator/ref:locator-key/ref:key-value</targetxml> are
              created.</li>
            <li>The <targetxml>ref:key-name/@name</targetxml> attribute is set to "URL".</li>
            <li>If the <sourcexml>remotelink/@hrefclass</sourcexml> attribute is present,
                <targetxml>ref:key-value/@value</targetxml> is set to the combined value of
                <sourcexml>remotelink/@hrefclass</sourcexml>, followed by "://", followed by the
              value of <sourcexml>remotelink/@href</sourcexml>.</li>
            <li>If the <sourcexml>remotelink/@hrefclass</sourcexml> attribute is <b>not</b> present,
                <targetxml>ref:key-value/@value</targetxml> is set to the value of
                <sourcexml>remotelink/@href</sourcexml>.</li> -->


    <xsl:template
        match="lnlink[@service = 'QUERYLINK'][parent::docinfo:assoc-links or parent::docinfo:assoc-links-grp]">
        <doc:related-content-item>
            <doc:related-content-link>
                <ref:lnlink service="QUERYLINK">
                    <xsl:apply-templates select="marker"/>
                    <ref:locator>
                        <ref:locator-key>
                            <ref:key-name>
                                <xsl:attribute name="name">
                                    <xsl:value-of
                                        select="key-name[@name = 'queryTemplatePGUID']/@name"/>
                                </xsl:attribute>
                            </ref:key-name>
                            <ref:key-value>
                                <xsl:attribute name="value">
                                    <xsl:value-of select="key-value/@value"/>
                                </xsl:attribute>
                            </ref:key-value>
                        </ref:locator-key>
                        <xsl:apply-templates select="api-params"/>
                    </ref:locator>
                </ref:lnlink>
            </doc:related-content-link>
        </doc:related-content-item>
    </xsl:template>

    <xsl:template match="lnlink/marker">
        <ref:marker>
            <xsl:apply-templates select="@* | node()"/>
        </ref:marker>
    </xsl:template>

    <xsl:template match="lnlink/marker/@role">
        <xsl:copy-of select="."/>
    </xsl:template>

    <xsl:template match="api-params">
        <ref:locator-params>
            <xsl:apply-templates/>
            <xsl:if test="parent::lnlink[@service = 'ATTACHMENT']">
                <proc:param>
                    <xsl:attribute name="name">attachment-smi</xsl:attribute>
                    <xsl:attribute name="value"/>
                    <xsl:message>need SMI from CSSM? Is this a parameter?</xsl:message>
                </proc:param>
            </xsl:if>
        </ref:locator-params>
    </xsl:template>



    <xsl:template match="param">
        <xsl:if test="@name != 'attachment-key'">
            <xsl:choose>
                <!-- Awantika: For AU20 one more param needs to be created with the name targetcontentType value practicalguidance -->
                <xsl:when test="$streamID = 'AU20'">
                    <xsl:if test="not(following-sibling::param)">
                        <proc:param>
                            <xsl:attribute name="name">
                                <xsl:text>targetContentType</xsl:text>
                            </xsl:attribute>
                            <xsl:attribute name="value">
                                <xsl:text>practicalguidance</xsl:text>
                            </xsl:attribute>
                        </proc:param>
                    </xsl:if>
                    <xsl:variable name="docinfoidtext" select="/*/docinfo/docinfo:doc-id/text()"/>
                    <!-- Awantika: Need to create only proc:param for topiccode in AU20 for the specific condition -->
                    <xsl:if
                        test="$streamID = 'AU20' and contains(lower-case($docinfoidtext), 'analytics') and ancestor::source_cttr:annotations[@annotgroup = 'LPG']">
                        <xsl:choose>
                            <xsl:when test="@name[. = 'topiccode']">
                                <proc:param>
                                    <xsl:attribute name="name">
                                        <xsl:text>topiccode</xsl:text>
                                    </xsl:attribute>
                                    <xsl:attribute name="value">
                                        <xsl:value-of select="@value"/>
                                    </xsl:attribute>
                                </proc:param>
                            </xsl:when>
                            <xsl:otherwise/>
                        </xsl:choose>
                    </xsl:if>
                </xsl:when>
                <xsl:otherwise>
                    <proc:param>
                        <xsl:apply-templates select="@name | @value"/>
                    </proc:param>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:if>
    </xsl:template>

    <xsl:template match="param/@name | param/@value">
        <xsl:copy-of select="."/>
    </xsl:template>

    <xsl:template
        match="lnlink[@service = 'ATTACHMENT'][parent::docinfo:assoc-links or parent::docinfo:assoc-links-grp]">
        <doc:related-content-item>
            <doc:related-content-link>
                <ref:lnlink service="ATTACHMENT">
                    <xsl:apply-templates select="marker"/>
                    <ref:locator>
                        <ref:locator-key>
                            <ref:key-name>
                                <xsl:attribute name="name">attachment-key</xsl:attribute>
                            </ref:key-name>
                            <ref:key-value>
                                <xsl:attribute name="value">
                                    <xsl:value-of
                                        select="api-params/param[@name = 'attachment-key']/@value"/>
                                </xsl:attribute>
                            </ref:key-value>
                        </ref:locator-key>
                        <xsl:apply-templates select="api-params"/>
                    </ref:locator>
                </ref:lnlink>
            </doc:related-content-link>
        </doc:related-content-item>
    </xsl:template>

    <xsl:template
        match="lnlink[@service = 'TRAVERSE'][parent::docinfo:assoc-links or parent::docinfo:assoc-links-grp]">
        <doc:related-content-item>
            <xsl:if test="parent::docinfo:assoc-links[@assoc-content = 'external-content-location']">
                <xsl:attribute name="content-type">external-content-location</xsl:attribute>
            </xsl:if>
            <doc:related-content-link>
                <ref:lnlink service="TRAVERSE">
                    <xsl:apply-templates select="marker"/>
                    <ref:locator>
                        <ref:locator-key>
                            <ref:key-name>
                                <xsl:attribute name="name">
                                    <xsl:value-of select="key-name/@name"/>
                                </xsl:attribute>
                            </ref:key-name>
                            <ref:key-value>
                                <xsl:attribute name="value">
                                    <xsl:value-of select="key-value/@value"/>
                                </xsl:attribute>
                            </ref:key-value>
                        </ref:locator-key>
                        <ref:locator-params>
                            <xsl:choose>
                                <xsl:when test="api-params/param[@name = 'normprotocol']">
                                    <xsl:apply-templates
                                        select="api-params/param[@name = 'normprotocol']"/>
                                </xsl:when>
                                <xsl:otherwise>
                                    <proc:param name="normprotocol" value="lexsee"/>
                                </xsl:otherwise>
                            </xsl:choose>
                            <xsl:apply-templates select="api-params/param[@name != 'normprotocol']"
                            />
                        </ref:locator-params>
                    </ref:locator>
                </ref:lnlink>
            </doc:related-content-link>
        </doc:related-content-item>
    </xsl:template>

    <xsl:template match="lnlink/@status"/>

    <xsl:template
        match="lnlink[@service = 'URL'][parent::docinfo:assoc-links or parent::docinfo:assoc-links-grp]">
        <doc:related-content-item>
            <xsl:if test="parent::docinfo:assoc-links[@assoc-content = 'external-content-location']">
                <xsl:attribute name="content-type">external-content-location</xsl:attribute>
            </xsl:if>
            <doc:related-content-link>
                <ref:lnlink service="URL">
                    <xsl:apply-templates select="marker"/>
                    <ref:locator>
                        <xsl:choose>
                            <xsl:when test="api-params/param[@name = 'URL']">
                                <ref:locator-key>
                                    <ref:key-name name="URL"/>
                                    <ref:key-value>
                                        <xsl:attribute name="value">
                                            <xsl:value-of
                                                select="api-params/param[@name = 'URL']/@value"/>
                                        </xsl:attribute>
                                    </ref:key-value>
                                </ref:locator-key>
                            </xsl:when>
                            <xsl:otherwise>
                                <xsl:apply-templates select="api-params"/>
                            </xsl:otherwise>
                        </xsl:choose>
                    </ref:locator>
                </ref:lnlink>
            </doc:related-content-link>
        </doc:related-content-item>
    </xsl:template>

    <xsl:template match="ci:cite[parent::docinfo:assoc-links or parent::docinfo:assoc-links-grp]">
        <doc:related-content-item>
            <xsl:if test="parent::docinfo:assoc-links[@assoc-content = 'external-content-location']">
                <xsl:attribute name="content-type">external-content-location</xsl:attribute>
            </xsl:if>
            <doc:related-content-link>
                <ref:lnlink service="TRAVERSE">
                    <ref:marker role="label">
                        <xsl:value-of select="ci:content"/>
                    </ref:marker>
                    <ref:locator>
                        <ref:locator-key>
                            <ref:key-name>
                                <xsl:attribute name="name">normcite</xsl:attribute>
                            </ref:key-name>
                            <ref:key-value>
                                <xsl:attribute name="value">
                                    <xsl:value-of select="ci:content"/>
                                </xsl:attribute>
                            </ref:key-value>
                        </ref:locator-key>
                        <ref:locator-params>
                            <xsl:choose>
                                <xsl:when test="api-params/param[@name = 'normprotocol']">
                                    <xsl:apply-templates
                                        select="api-params/param[@name = 'normprotocol']"/>
                                </xsl:when>
                                <xsl:otherwise>
                                    <proc:param name="normprotocol" value="lexsee"/>
                                </xsl:otherwise>
                            </xsl:choose>
                            <xsl:if test="//docinfo/docinfo:doc-country/@iso-cc">
                                <proc:param>
                                    <xsl:attribute name="name">countrycode</xsl:attribute>
                                    <xsl:attribute name="value">
                                        <xsl:value-of select="//docinfo/docinfo:doc-country/@iso-cc"
                                        />
                                    </xsl:attribute>
                                </proc:param>
                            </xsl:if>
                        </ref:locator-params>
                    </ref:locator>
                </ref:lnlink>
            </doc:related-content-link>
        </doc:related-content-item>
    </xsl:template>


    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_docinfo.doc-lang-to-LexisAdvance_Target_root_element.xmllang">
        <title><sourcexml>docinfo:doc-lang[@lang]</sourcexml> to
                <targetxml>RootElement[@xml:lang]</targetxml>
            <lnpid>id-CCCC-10295</lnpid></title>
        <body>
            <section>
                <title>Instructions <i>[common element]</i></title>
                <p>Since <targetxml>dc:language</targetxml> is not used,
                        <sourcexml>docinfo:doc-lang[@lang]</sourcexml> only becomes part of
                        <targetxml>@xml:lang</targetxml> as described in <xref
                        href="Rosetta_docinfo.doc-lang-and-doc-country-LxAdv-ROOT_xml.lang.dita"
                        >Target @xml:lang</xref> and is otherwise suppressed. </p>
            </section>
            <section>
                <title>Changes</title>
            </section>
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_docinfo.doc-lang-LxAdv-ROOT_xmllang.dita  -->

    <xsl:template name="xml_lang">
        <!-- This template creates @xml:lang from doc-lang and doc-country 
                    however there is an NZ special case -->
        <!-- 2017-10-03 - MDS: Added handling for $streamID starts with 'HK' -->
        <xsl:attribute name="xml:lang"
            select="
                concat(//docinfo:doc-lang/@lang,
                '-',
                if (//docinfo:doc-country/@iso-cc = 'AU' or ($streamID = 'AU08')) then
                    if (//case:headnote/case:info/case:courtinfo//case:juris = 'NZ') then
                        'NZ'
                    else
                        'AU'
                else
                    if (starts-with($streamID, 'HK')) then
                        if (//docinfo:doc-country/@iso-cc) then
                            //docinfo:doc-country/@iso-cc
                        else
                            'HK'
                    else
                        //docinfo:doc-country/@iso-cc
                )"/>

    </xsl:template>
    <!--  un-comment out the following template rule to perform unit testing via XSpec file   -->
    <!--xsl:template match="docinfo">
		<test>
			<xsl:call-template name="xml_lang"/>
		</test>
	</xsl:template-->



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_docinfo.lbu-indexing-terms-to-LexisAdvance_classify.classification_classscheme_lbu-subj-scheme">
        <title><sourcexml>docinfo:lbu-meta</sourcexml> to
                <targetxml>doc:legacy-metadata[@metadatasource="lbu-meta"]</targetxml>
            <lnpid>id-CCCC-10300</lnpid></title>

        <body>
            <section>
                <title>Instructions <i>[common element]</i></title>
                <p><sourcexml>docinfo:lbu-meta</sourcexml> becomes
                        <targetxml>doc:legacy-metadata[@metadatasource="lbu-meta"]</targetxml>.
                        <sourcexml>docinfo:metaitem</sourcexml> becomes
                        <targetxml>meta/metaitem</targetxml>. The source attribute
                        <sourcexml>@name</sourcexml> becomes <targetxml>metaitem[@name]</targetxml>
                    and <sourcexml>@value</sourcexml> becomes
                        <targetxml>metaitem[@value]</targetxml>. </p>
                <p><sourcexml>docinfo:metaitem</sourcexml> should be dropped if the attribute
                        <sourcexml>@name</sourcexml> has any of the following drop list values: <ul>
                        <li><sourcexml>@name="date"</sourcexml></li>
                        <li><sourcexml>@name="juris"</sourcexml></li>
                        <li><sourcexml>@name="court"</sourcexml></li>
                        <li><sourcexml>@name="country"</sourcexml></li>
                        <li><sourcexml>@name="parent-filename"</sourcexml></li>
                    </ul>
                </p>
            </section>


            <example>
                <title>Source XML 1</title>
                <codeblock>
                    <![CDATA[<docinfo>
	<docinfo:lbu-meta>
		<docinfo:metaitem name="date" value="18810104"/>
		<docinfo:metaitem name="country" value="2"/>
		<docinfo:metaitem name="court" value="2"/>
		<docinfo:metaitem name="date" value="18810104"/>
		<docinfo:metaitem name="juris" value="9"/>
		<docinfo:metaitem name="court" value="1"/>
		<docinfo:metaitem name="country" value="2"/>
		<docinfo:metaitem name="lbu-sourcename" value="New Zealand Law Reports"/>
		<docinfo:metaitem name="parent-docid" value="1NZLR_CA_1"/>
		<docinfo:metaitem name="parent-filename" value="1NZLR_CA_00001.xml"/>
	</docinfo:lbu-meta></docinfo>
	]]>
                </codeblock>
            </example>

            <example>
                <title>Target XML 1</title>
                <codeblock>
                    <![CDATA[<doc:metadata>
	<doc:docinfo>
		<doc:legacy-metadata metadatasource="lbu-meta">
			<meta>
			   <metaitem name="lbu-sourcename" value="New Zealand Law Reports"/>
			   <metaitem name="parent-docid" value="1NZLR_CA_1"/>
			</meta>
		</doc:legacy-metadata>
	</doc:docinfo></doc:metadata>
	]]>
                </codeblock>
            </example>

            <example>
                <title>Source XML 2</title>
                <codeblock>
                    <![CDATA[<docinfo>
	<docinfo:lbu-meta>
	<docinfo:metaitem name="SRCNAME" value="AGAA"></docinfo:metaitem>
	<docinfo:metaitem name="SRCDOCNO" value="00000008"></docinfo:metaitem>
	<docinfo:metaitem name="DPSI" value="03EN"></docinfo:metaitem>
	</docinfo:lbu-meta>
	</docinfo>
	]]>
                </codeblock>
            </example>

            <example>
                <title>Target XML 2</title>
                <codeblock>
                    <![CDATA[<doc:metadata>
	<doc:docinfo>
		<doc:legacy-metadata metadatasource="lbu-meta">
			<meta>
			   <metaitem name="SRCNAME" value="AGAA"/>
			   <metaitem name="SRCDOCNO" value="00000008"/>
			   <metaitem name="DPSI" value="03EN"/>
			</meta>
		</doc:legacy-metadata>
	</doc:docinfo></doc:metadata>
	]]>
                </codeblock>
            </example>
            <example>
                <title>Source XML 3</title>
                <codeblock>
                    <![CDATA[<docinfo>
	<docinfo:lbu-meta>
	<docinfo:metaitem name="QLDB" value="sb99"></docinfo:metaitem>
	</docinfo:lbu-meta>
	</docinfo>
	]]>
                </codeblock>
            </example>

            <example>
                <title>Target XML 3</title>
                <codeblock>
                    <![CDATA[<doc:metadata>
	<doc:docinfo>
		<doc:legacy-metadata metadatasource="lbu-meta">
			<meta>
			   <metaitem name="QLDB" value="sb99"/>	       
			</meta>
		</doc:legacy-metadata>
	</doc:docinfo></doc:metadata>
	]]>
                </codeblock>
            </example>

            <example>
                <title>Source XML 4</title>
                <codeblock>
                    <![CDATA[
	<docinfo>
	 <!-- ETC. -->
	 <docinfo:lbu-meta>
	  <docinfo:metaitem name="selection_criteria_variant" value="PCT207_regulation_1" />
	  <docinfo:metaitem name="lbu-sourcename" value="New Zealand Regulations" />
	  <docinfo:metaitem name="parent-docid" value="GCG-REGULATIONS-D" />
	  <docinfo:metaitem name="parent-filename" value="Regs-D.xml" />
	  <docinfo:metaitem name="parent-docid" value="NZREGS_REGS-D.SGM_2001R326-FRONT-CONTENTS" />
	  <docinfo:metaitem name="parent-filename" value="Regs-D1030.xml" />
	 </docinfo:lbu-meta>
	 <!-- ETC. -->
	</docinfo>]]>
                </codeblock>
            </example>
            <example>
                <title>Target XML 4</title>
                <codeblock>
                    <![CDATA[<doc:metadata>
	<doc:docinfo>
		<doc:legacy-metadata metadatasource="lbu-meta">
			<meta>
			   <metaitem name="selection_criteria_variant" value="PCT207_regulation_1"/>
			   <metaitem name="lbu-sourcename" value="New Zealand Regulations"/>
			   <metaitem name="parent-docid" value="GCG-REGULATIONS-D"/>
			   <metaitem name="parent-docid" value="NZREGS_REGS-D.SGM_2001R326-FRONT-CONTENTS"/>
			</meta>
		</doc:legacy-metadata>
	</doc:docinfo></doc:metadata>
	]]>
                </codeblock>
            </example>

            <!-- McNally July 28 2016.  I'm commenting-out the following section "Special rules for UK14". 
			Will investigate intent.  If truly UK14 only then probably want separate submodule. 
			Will need some work. Narrative describes custom-metafield which can't occur in docinfo:lbu-meta.
			Example shows docinfo:metaitem which would be ok. 
			Also commented-out the change entry and moved it out of the changelog section. -->

            <!--<section>
				<note><b>Special rules for UK14:</b> These are rules for mapping certain instances of
					the source element <sourcexml>docinfo:custom-metafield</sourcexml> and instances are
					identified through the <sourcexml>@name</sourcexml> attribute. If given source
					present then below rules apply. </note>
				<p><b><u>Mapping to <targetxml>classify:classification</targetxml></u></b></p>
				<p>Source: <ul>
						<li><sourcexml>docinfo:custom-metafield[@name="alternative-title-formal"]</sourcexml></li>
						<li><sourcexml>docinfo:custom-metafield[@name="alternative-title-acronym"]</sourcexml></li>
						<li><sourcexml>docinfo:custom-metafield[@name="alternative-title-popular"]</sourcexml></li>
					</ul></p>
				<p>Target: Each source item becomes <targetxml>metaitem[@name @value]</targetxml> within
						<targetxml>classify:classification</targetxml> markup. As follows:</p>
				<p>Within <targetxml>doc:metadata/doc:docinfo</targetxml> -<ul>
						<li>Create
								<targetxml>classify:classification[@classscheme="uk-functional-information"]/classify:classitem</targetxml>.
							The <targetxml>@classscheme</targetxml> value is hard coded.<ul>
								<li>Create <targetxml>meta</targetxml><ul>
										<li>For each <sourcexml>docinfo:custom-metafield</sourcexml>
											specified above, create <targetxml>metaitem[@name
												@value]</targetxml>. Where <sourcexml>@name</sourcexml>
											value becomes <targetxml>@name</targetxml> value. And
											content of source element becomes
												<targetxml>@value</targetxml> value.</li>
									</ul></li>
								<li>Create
										<targetxml>classify:classitem-identifier/classify:classcode[@normval="functional-parameters"]</targetxml>.
									The <targetxml>@normval</targetxml> value is hard coded.</li>
							</ul></li>
					</ul><note>Create only one container
							<targetxml>classify:classification[@classscheme="uk-functional-information"]/classify:classitem</targetxml>.
						The container holds the items described above and may also hold mappings from
						elsewhere in the same source file.</note></p>
			</section>
			<example>
				<title>Source XML 5</title>
				<codeblock>
	<![CDATA[<docinfo>
	<docinfo:lbu-meta>
		<docinfo:metaitem name="alternative-title-formal" value="Merger confidentiality agreement in letter form"/>
		<docinfo:metaitem name="alternative-title-acronym" value="NDA" />
		<docinfo:metaitem name="alternative-title-popular" value="Non-disclosure clause for a shareholders’ agreement"/>
	</docinfo:lbu-meta>
	</docinfo>
	]]>
		</codeblock>
			</example>
	
			<example>
				<title>Target XML 5</title>
				<codeblock>
	<![CDATA[
	<doc:metadata>
		<doc:docinfo>
			<classify:classification classscheme="uk-functional-information">
				<classify:classitem>
					<meta>
						<metaitem name="alternative-title-formal" value="Merger confidentiality agreement in letter form"/>
						<metaitem name="alternative-title-acronym" value="NDA"/>
						<metaitem name="alternative-title-popular" value="Non-disclosure clause for a shareholders’ agreement"/>
					</meta>
					<classify:classitem-identifier>
						<classify:classcode normval="functional-parameters"/>
					</classify:classitem-identifier>
				</classify:classitem>
			</classify:classification>
		</doc:docinfo>
	</doc:metadata>
	]]>
		</codeblock>
			</example>
			
				<p>2016-07-28: <ph id="change_20160728_ss">Added rules for handling of
							<sourcexml>@name="alternative-title-formal"</sourcexml>,
							<sourcexml>@name="alternative-title-acronym"</sourcexml> and
							<sourcexml>@name="alternative-title-popular"</sourcexml> with updated
						example.</ph></p> -->
            <section>
                <title>Changes</title>
                <p>2013-08-12: <ph id="change_20130812_ab">We removed the docinfo:lbu-meta "include"
                        list so now there is only a "drop" list. Anything not on the "drop" list
                        should be passed through. <b>Webteam 230557</b>.</ph></p>
                <p>2013-08-02: <ph id="change_20130802_ab">Added
                            <sourcexml>@name="selection_criteria_variant"</sourcexml> to the list of
                        values in docinfo:metaitem/@name that should be retained. And added a
                        example.</ph></p>
                <p>2013-05-31: <ph id="change_20130531_DSF">Added "document-type" to the list of
                        values in docinfo:metaitem/@name that should be retained.</ph></p>
                <p>2013-04-09: <ph id="change_20130409_vv">Added the instruction for handling
                            <sourcexml>docinfo:metaitem[@name="QLDB"]</sourcexml>.</ph></p>
                <p>2012-08-30: Created.</p>
            </section>


        </body>
    </dita:topic>

    <xsl:template match="docinfo:lbu-meta">
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="docinfo:metaitem">
        <xsl:choose>
            <xsl:when
                test="
                    @name = 'date' or
                    @name = 'juris' or
                    @name = 'court' or
                    @name = 'country' or
                    @name = 'parent-filename' or
                    @name = 'PA-PGUID' or
                    @name = 'TOPIC-PGUID' or
                    @name = 'SUB-TOPIC-PGUID'
                    "/>
            <xsl:otherwise>
                <!-- @name='parent-docid'and name='lbu-sourcename' are two values that need to be converted for court cases -->
                <metaitem xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <xsl:attribute name="name">
                        <xsl:value-of select="@name"/>
                    </xsl:attribute>
                    <xsl:attribute name="value">
                        <xsl:value-of select="@value"/>
                    </xsl:attribute>
                </metaitem>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_docinfo.topiccodes-to-LexisAdvance_classify.classification_classscheme_docinfo-topiccodes">
        <title><sourcexml>docinfo:topiccodes</sourcexml> to
                <targetxml>classify:classification[@classscheme="docinfo:topiccodes"]</targetxml>
            <lnpid>id-CCCC-10306</lnpid></title>
        <body>
            <section>
                <title>Instructions <i>[common element]</i></title>
                <p><sourcexml>docinfo:topiccodes/docinfo:topiccode</sourcexml> becomes
                        <targetxml>classify:classification[@classscheme="docinfo:topiccodes"]/classify:classitem/classify:classitem-identifier/classify:classcode/@normval</targetxml>.
                    The content of <sourcexml>docinfo:topiccode</sourcexml> becomes the value for
                        <targetxml>classify:classcode/@normval</targetxml>. A single
                        <targetxml>classify:classification[@classscheme="docinfo:topiccodes"]</targetxml>
                    is created for each unique value of <targetxml>@classscheme</targetxml>. Within
                    this single element, create multiple <targetxml>classify:classitem</targetxml>
                    elements. Only create additional <targetxml>classify:classification</targetxml>
                    wrapper elements when the
                        <targetxml>classify:classification[@classscheme]</targetxml> has different
                    values. </p>
            </section>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;docinfo:topiccodes&gt;
                    &lt;docinfo:topiccode&gt;#PA#CODE#&lt;/docinfo:topiccode&gt;
                    &lt;docinfo:topiccode&gt;#PA#BUSM#&lt;/docinfo:topiccode&gt;
                    &lt;/docinfo:topiccodes&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;classify:classification classscheme="docinfo:topiccodes"&gt;
                    &lt;classify:classitem&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classcode normval="#PA#CODE#"/&gt;
                    &lt;/classify:classitem-identifier&gt; &lt;/classify:classitem&gt;
                    &lt;classify:classitem&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classcode normval="#PA#BUSM#"/&gt;
                    &lt;/classify:classitem-identifier&gt; &lt;/classify:classitem&gt;
                    &lt;/classify:classification&gt; </codeblock>
            </example>
            <section>
                <note><b>Applied for UK07 Regulation contents only:</b> When element
                        <sourcexml>docinfo:topiccode</sourcexml> contains attribute
                        <sourcexml>@scheme="source-by-date"</sourcexml>, then conversion will
                    suppress it including its contents as well. Please see below input and output
                    examples for more details:</note>
            </section>
            <example>
                <title>Source XML:</title>
                <codeblock> &lt;docinfo:topiccodes&gt; &lt;docinfo:topiccode
                    scheme="source-by-date"&gt;2012-08-02&lt;/docinfo:topiccode&gt;
                    &lt;docinfo:topiccode&gt;#PA#CODE#&lt;/docinfo:topiccode&gt;
                    &lt;/docinfo:topiccodes&gt; </codeblock>
            </example>
            <example>
                <title>Target XML(Only second <sourcexml>docinfo:topiccode</sourcexml>)
                    converted</title>
                <codeblock> &lt;classify:classification classscheme="docinfo:topiccodes"&gt;
                    &lt;classify:classitem&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classcode normval="#PA#CODE#"/&gt;
                    &lt;/classify:classitem-identifier&gt; &lt;/classify:classitem&gt;
                    &lt;/classify:classification&gt; </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2014-02-03: <ph id="change_20140203_PY">Added a special rule for UK07 contents,
                        When element <sourcexml>docinfo:topiccode</sourcexml> contains attribute
                            <sourcexml>@scheme="source-by-date"</sourcexml>, then conversion will
                        suppress it including its contents as well. Phase 5 UK discussion-defect
                        tracking: issue #156. </ph></p>
                <p>2012-08-30: Created.</p>
            </section>



        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated (although the DITA file already has embedded XSLT).  Remove this comment after manual development complete!  (also remove the embedded XSLT within the DITA above) @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_docinfo.topiccodes-to-LxAdv-classify.classification_classscheme_docinfo-topiccodes.dita  -->

    <!-- CSN: Added docinfo:topiccodes and docinfo:topiccode from base.xsl. -->
    <xsl:template match="docinfo:topiccodes">
        <xsl:element name="classify:classification">
            <xsl:attribute name="classscheme">docinfo:topiccodes</xsl:attribute>
            <xsl:apply-templates/>
        </xsl:element>
    </xsl:template>

    <xsl:template match="docinfo:topiccode">
        <xsl:element name="classify:classitem">
            <xsl:element name="classify:classitem-identifier">
                <xsl:element name="classify:classcode">
                    <xsl:attribute name="normval">
                        <xsl:value-of select="."/>
                    </xsl:attribute>
                </xsl:element>
            </xsl:element>
        </xsl:element>
    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_docinfo.lbu-indexing-terms-to-LexisAdvance_classify.classification_classscheme_lbu-subj-scheme">
        <title><sourcexml>docinfo:lbu-indexing-terms</sourcexml> to
                <targetxml>classify:classification[@classscheme="lbu-subj"]</targetxml>
            <lnpid>id-CCCC-10299</lnpid></title>


        <body>
            <section>
                <title>Instructions <i>[common element]</i></title>
                <p><sourcexml>docinfo:lbu-indexing-terms/docinfo:lbu-subj</sourcexml> becomes
                        <targetxml>classify:classification[@classscheme="lbu-subj"]/classify:classitem/classify:classitem-identifier/classify:classcode[@normval]</targetxml>.
                    The content of <sourcexml>docinfo:lbu-subj</sourcexml> becomes the value for
                        <targetxml>classify:classcode[@normval]</targetxml>. </p>
            </section>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;docinfo:lbu-indexing-terms&gt;
                    &lt;docinfo:lbu-subj&gt;lawnow160&lt;/docinfo:lbu-subj&gt;
                    &lt;/docinfo:lbu-indexing-terms </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;classify:classification classscheme="lbu-subj"&gt;
                    &lt;classify:classitem&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classcode normval="lawnow160"/&gt;
                    &lt;/classify:classitem-identifier&gt; &lt;/classify:classitem&gt;
                    &lt;/classify:classification&gt; </codeblock>
            </example>
            <note>If source document having multiple <sourcexml>docinfo:lbu-subj</sourcexml> within
                    <sourcexml>docinfo:lbu-indexing-terms</sourcexml>, then each subsequent
                occurrence of the element <sourcexml>docinfo:lbu-subj</sourcexml> will
                    <b>becomes</b>
                <targetxml>classify:classitem/classify:classitem-identifier/classify:classcode[@normval]</targetxml>
                element.</note>
            <example>
                <title>Source XML</title>
                <codeblock> &lt;docinfo:lbu-indexing-terms&gt;
                    &lt;docinfo:lbu-subj&gt;lawnowl60&lt;/docinfo:lbu-subj&gt;
                    &lt;docinfo:lbu-subj&gt;lawnow295&lt;/docinfo:lbu-subj&gt;
                    &lt;/docinfo:lbu-indexing-terms&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;classify:classification classscheme="lbu-subj"&gt;
                    &lt;classify:classitem&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classcode normval="lawnow160"/&gt;
                    &lt;/classify:classitem-identifier&gt; &lt;/classify:classitem&gt;
                    &lt;classify:classitem&gt; &lt;classify:classitem-identifier&gt;
                    &lt;classify:classcode normval="lawnow295"/&gt;
                    &lt;/classify:classitem-identifier&gt; &lt;/classify:classitem&gt;
                    &lt;/classify:classification&gt; </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2012-08-30: Created.</p>
            </section>


        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated (although the DITA file already has embedded XSLT).  Remove this comment after manual development complete!  (also remove the embedded XSLT within the DITA above) @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_docinfo.lbu-indexing-terms-LxAdv-classify.classification_classscheme_lbu-subj-scheme.dita  -->
    <!--<xsl:message>Rosetta_docinfo.lbu-indexing-terms-LxAdv-classify.classification_classscheme_lbu-subj-scheme.xsl requires manual development!</xsl:message> -->

    <!-- CSN: Added docinfo:lbu-indexing-terms from base.xsl. -->

    <xsl:template match="docinfo:lbu-indexing-terms">
        <xsl:if test="child::docinfo:lbu-juris">
            <xsl:element name="classify:classification">
                <xsl:attribute name="classscheme">docinfo:lbu-juris</xsl:attribute>
                <xsl:apply-templates select="child::docinfo:lbu-juris"/>
            </xsl:element>
        </xsl:if>
        <xsl:if test="child::docinfo:lbu-subj">
            <xsl:element name="classify:classification">
                <xsl:attribute name="classscheme">lbu-subj</xsl:attribute>
                <xsl:apply-templates select="child::docinfo:lbu-subj"/>
            </xsl:element>
        </xsl:if>
    </xsl:template>

    <xsl:template match="docinfo:lbu-subj">
        <xsl:element name="classify:classitem">
            <xsl:element name="classify:classitem-identifier">
                <xsl:element name="classify:classcode">
                    <xsl:attribute name="normval">
                        <xsl:value-of select="."/>
                    </xsl:attribute>
                </xsl:element>
            </xsl:element>
        </xsl:element>
    </xsl:template>

    <xsl:template match="docinfo:lbu-juris[not($streamID = 'CA01')]">
        <xsl:element name="classify:classitem">
            <xsl:element name="classify:classitem-identifier">
                <xsl:element name="classify:classcode">
                    <xsl:attribute name="normval">
                        <xsl:value-of select="."/>
                    </xsl:attribute>
                </xsl:element>
            </xsl:element>
        </xsl:element>
    </xsl:template>

    <!-- Vikas Rohilla : Updated as per the $streamID CA01    -->
    <xsl:template match="docinfo:lbu-juris[$streamID = 'CA01'][. != 'CA' or . != 'UK' or . != 'NZ']">
        <xsl:element name="classify:classitem">
            <xsl:element name="classify:classitem-identifier">
                <xsl:element name="classify:classname">
                    <xsl:value-of select="."/>
                </xsl:element>
            </xsl:element>
        </xsl:element>
    </xsl:template>



    <!--Vikas Rohilla : -->
    <!--******************************************************************************* 
    No need to Include already Handeled in Rosetta_docinfo.lbu-indexing-terms-LxAdv-classify.classification_classscheme_lbu-subj-scheme.xsl
    *******************************************************************************-->
    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_docinfo.lbu.juris-LexisAdvance-classify.classification_classscheme_docinfolbu-juris">
        <title><sourcexml>docinfo:lbu-juris</sourcexml> to
                <targetxml>classify:classification[@classscheme="docinfo:lbu-juris"]</targetxml>
            <lnpid>id-CCCC-10301</lnpid></title>

        <body>
            <p><sourcexml>docinfo:lbu-juris</sourcexml> becomes
                    <targetxml>classify:classification@classscheme="docinfo:lbu-juris"/classify:classitem/classify:classitem-identifier/classify:classcode@normval="nz"</targetxml></p>

            <pre>
            
&lt;docinfo:lbu-juris&gt;nz&lt;/docinfo:lbu-juris&gt;


<b>Becomes</b>


&lt;classify:classification classscheme="docinfo:lbu-juris"&gt;
    &lt;classify:classitem&gt;
        &lt;classify:classitem-identifier&gt;
            &lt;classify:classcode normval="nz"/&gt;
        &lt;/classify:classitem-identifier&gt;
    &lt;/classify:classitem&gt;
&lt;/classify:classification&gt;

        </pre>

            <note>In all CANADA streams, if <sourcexml>docinfo:lbu-juris</sourcexml> contains the
                value other than country code like <sourcexml>CA, UK and NZ</sourcexml>, then
                conversion will convert <sourcexml>docinfo:lbu-juris</sourcexml> to
                    <targetxml>classify:classification@classscheme="docinfo:lbu-juris"/classify:classitem/classify:classitem-identifier/classify:classname</targetxml>.
                Please see below input and output examples for more details.</note>

            <pre>

&lt;docinfo:lbu-juris&gt;CICIV2290&lt;/docinfo:lbu-juris&gt;
&lt;docinfo:lbu-juris&gt;CIFAM4595&lt;/docinfo:lbu-juris&gt;
&lt;docinfo:lbu-juris&gt;CIFAM4650&lt;/docinfo:lbu-juris&gt;
&lt;docinfo:lbu-juris&gt;CIFAM4620&lt;/docinfo:lbu-juris&gt;
&lt;docinfo:lbu-juris&gt;CIFAM4870&lt;/docinfo:lbu-juris&gt;


<b>Becomes</b>
            

&lt;classify:classification classscheme="docinfo:lbu-juris"&gt;
    &lt;classify:classitem&gt;
        &lt;classify:classitem-identifier&gt;
            &lt;classify:classname&gt;CICIV2290&lt;/classify:classname&gt;
        &lt;/classify:classitem-identifier&gt;
    &lt;/classify:classitem&gt;
    &lt;classify:classitem&gt;
        &lt;classify:classitem-identifier&gt;
            &lt;classify:classname&gt;CIFAM4595&lt;/classify:classname&gt;
        &lt;/classify:classitem-identifier&gt;
    &lt;/classify:classitem&gt;
    &lt;classify:classitem&gt;
        &lt;classify:classitem-identifier&gt;
            &lt;classify:classname&gt;CIFAM4650&lt;/classify:classname&gt;
        &lt;/classify:classitem-identifier&gt;
    &lt;/classify:classitem&gt;
    &lt;classify:classitem&gt;
        &lt;classify:classitem-identifier&gt;
            &lt;classify:classname&gt;CIFAM4620&lt;/classify:classname&gt;
        &lt;/classify:classitem-identifier&gt;
    &lt;/classify:classitem&gt;
    &lt;classify:classitem&gt;
        &lt;classify:classitem-identifier&gt;
            &lt;classify:classname&gt;CIFAM4870&lt;/classify:classname&gt;
        &lt;/classify:classitem-identifier&gt;
    &lt;/classify:classitem&gt;
&lt;/classify:classification&gt;
            
</pre>
            <section>
                <title>Changes</title>
                <p>2014-08-11: <ph id="change_20140811_AS">Added a special scenario for all Canada
                        streams to handle <sourcexml>docinfo:lbu-juris</sourcexml> to
                            <targetxml>classify:classification@classscheme="docinfo:lbu-juris"/classify:classitem/classify:classitem-identifier/classify:classname</targetxml>.
                        Db P4 issue #305</ph></p>
                <p>2014-01-19: <ph id="change_20140119_PY">Added a special scenario for handling
                            <sourcexml>docinfo:lbu-juris</sourcexml> along with input and output
                        examples for <b>CANADA CA02 contents ONLY</b>.</ph></p>
                <p>2012-10-05: Created.</p>
            </section>
        </body>


    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_docinfo.lbu.juris-LxAdv-classify.classification_classscheme_docinfolbu-juris.dita  -->

    <!-- 20170516:  MCJ:  Turning into a do-nothing module. -->




    <!-- This is a generic module, this is coded as per CA11 CI. It can be modified if there is differnt scenario in other streams -->

    <xsl:template match="docinfo:custom-metafield[@name = 'COURT-CLASSIFY']" priority="2"/>
    <xsl:template match="docinfo:custom-metafield[@name = 'JURIS-CLASSIFY']" priority="2"/>
    <xsl:template match="docinfo:custom-metafield[@name = 'unhandled']" priority="2"/>
    <xsl:template match="docinfo:custom-metafield[@searchtype = 'JURIS-CLASSIFY']" priority="2"/>
    <xsl:template match="docinfo:custom-metafield[@searchtype = 'COURT-CLASSIFY']" priority="2"/>
    <xsl:template match="docinfo:custom-metafield[@searchtype = 'unhandled']" priority="2"/>

    <xsl:template match="docinfo:custom-metafields">

        <!-- Sudhanshu included streamID CA02CC and CA13for  legacy-metadata.-->
        <xsl:choose>
            <xsl:when
                test="$streamID = 'CA08' or $streamID = 'CA07' or $streamID = 'CA02CC' or $streamID = 'CA13' or $streamID = 'CA06' or $streamID = 'CA05' or $streamID = 'CA10' or $streamID = 'CA03' or $streamID = 'CA15' or $streamID = 'CA04'">
                <xsl:apply-templates select="@* | node()"/>
            </xsl:when>
            <xsl:when test="$streamID = 'CA12'">
                <xsl:apply-templates select="@* | node()"/>
                <xsl:apply-templates select="//heading/title/alias"/>
                <xsl:apply-templates select="//text[@searchtype[matches(., 'COURT-NAME')]]"
                    mode="meta_court"/>
                <xsl:apply-templates select="//text[@searchtype[matches(., 'CASE-NAME')]]"
                    mode="meta_case"/>
                <xsl:apply-templates select="//text[@searchtype[matches(., 'REPORTER-CITE')]]"
                    mode="meta_reporter"/>
                <xsl:apply-templates select="//emph[@searchtype[matches(., 'JUDGES')]]"
                    mode="meta_judge"/>

            </xsl:when>
            <xsl:otherwise>
                <doc:legacy-metadata metadatasource="lbu-meta">
                    <meta>
                        <xsl:apply-templates select="@* | node()"/>
                    </meta>
                </doc:legacy-metadata>
            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>

    <!-- Vikas Rohilla : Template to match the  docinfo:custom-metafields and the streamID='CA01'  with the priority higher thn normal for avoid the ambiguity  -->
    <xsl:template
        match="docinfo:custom-metafields[$streamID = 'CA01' or $streamID = 'CA02DC' or $streamID = 'CA02DS' or $streamID = 'CA14']"
        priority="2">
        <xsl:apply-templates select="node() | @*"/>
    </xsl:template>

    <xsl:template match="docinfo:custom-metafield">
        <metaitem>
            <xsl:apply-templates select="@*"/>
            <xsl:attribute name="value">
                <xsl:value-of select="normalize-space(.)"/>
            </xsl:attribute>
        </metaitem>
    </xsl:template>

    <xsl:template
        match="docinfo:custom-metafield[@name = 'effect-date'][$streamID = 'CA05' or $streamID = 'CA08' or $streamID = 'CA07']">
        <metaitem>
            <xsl:attribute name="name">
                <xsl:text>effect-date</xsl:text>
            </xsl:attribute>
            <xsl:attribute name="value">
                <xsl:value-of
                    select="concat(substring(., 1, 4), '-', substring(., 5, 2), '-', substring(., 7, 2))"
                />
            </xsl:attribute>
        </metaitem>
    </xsl:template>

    <xsl:template match="docinfo:custom-metafield/@name | docinfo:custom-metafield/@searchtype">
        <xsl:attribute name="name">
            <xsl:value-of select="normalize-space(.)"/>
        </xsl:attribute>

    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_docinfo.load-date_date-to-LexisAdvance_dc.date_lnmeta.datetype_load-date-scheme">
        <title><sourcexml>docinfo:load-date/date</sourcexml> to
                <targetxml>dc:date[@lnmeta:datetype="load-date"]</targetxml>
            <lnpid>id-CCCC-10274</lnpid></title>
        <body>
            <section>
                <title>Instructions <i>[common element]</i></title>
                <p><sourcexml>docinfo:load-date/date</sourcexml> becomes
                        <targetxml>dc:metadata/dc:date[@lnmeta:datetype="load-date"]</targetxml>.</p>
                <note>The format of the content of all <targetxml>dc:date</targetxml> elements must
                    be in 'YYYY-MM-DD'.</note>
            </section>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;docinfo:load-date&gt; &lt;date day="01" month="01" year="2006"&gt;01
                    January 2006&lt;/date&gt; &lt;/docinfo:load-date&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;dc:date lnmeta:datetype="load-date"&gt;2006-01-01&lt;/dc:date&gt;
                </codeblock>
            </example>
            <note>
                <p>The below example encountered in CANADA contents which contains "00" value in
                        <sourcexml>@day="00"</sourcexml> and <sourcexml>@month="00"</sourcexml>
                    attributes.</p>
                <p><b>Per LBU-</b> This was the format used for historical data in which only the
                    year was given. We will remediate the content to have a valid month/day and will
                    send the remediated data in a subsequent reload.</p>
            </note>
            <example>
                <codeblock> &lt;docinfo:load-date&gt; &lt;date year="1959" month="00"
                    day="00"&gt;19590000&lt;/date&gt; &lt;/docinfo:load-date&gt; </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2014-01-07: <ph id="change_20140107_PY"> Added a note along with example which
                        contains "00" value in <sourcexml>@day="00"</sourcexml> and
                            <sourcexml>@month="00"</sourcexml> attributes encountered in CANADA
                        contents.</ph></p>
                <p>2013-08-07: <ph id="change_20130807_raj">Removed instructions for creating
                            <targetxml>dc:date[@lnmeta:datetype="conversion-date"]</targetxml>.</ph></p>
                <p>2012-08-30: Created.</p>
            </section>
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_date-Chof-docinfo.load-date-LxAdv-dc.date_lnmeta.datetype_load-date-scheme.dita  -->

    <xsl:template match="docinfo:load-date">
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="docinfo:load-date/date">
        <dc:date lnmeta:datetype="load-date">
            <xsl:value-of select="@year"/>
            <xsl:text>-</xsl:text>
            <xsl:value-of select="@month"/>
            <xsl:text>-</xsl:text>
            <xsl:value-of select="@day"/>
        </dc:date>

    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_ci.cite-to-LexisAdvance_lnci.cite">
        <title><sourcexml>ci.cite</sourcexml> to <targetxml>lnci.cite</targetxml>
            <lnpid>id-CCCC-10268</lnpid></title>
        <body>
            <section>
                <title>Instructions</title>
                <p>In the Fab Pipeline, JCite/CFE shall conduct a lookup based on the lnci:content
                    or the @normcite (if populated) and populate the markup with the additional
                    keywords needed for cite traversal. </p>
                <p>The only markup needed for JCite/CFE is
                        <targetxml>lnci:cite/lnci:content</targetxml> and optionally
                        <targetxml>lnci:cite/@normcite</targetxml>. In order to resolve the correct
                    “pile? target for cite link traversal, either a semantic child content type
                    element as described below <b>or</b> the <targetxml>lnci:cite/@type</targetxml>
                    attribute (but not both) must also be present in the output markup.</p>

                <p><sourcexml>ci:cite</sourcexml> becomes <targetxml>lnci:cite</targetxml>, with all
                    attribute names and values copied as they occur in the source. Convert all
                    descendant elements of <sourcexml>ci:cite</sourcexml> by copying the elements
                    and their attribute names and values from the <sourcexml>ci:</sourcexml>
                    namespace <b>as is</b> into the <targetxml>lnci:</targetxml> namespace. That is,
                    every descendant of <sourcexml>ci:cite</sourcexml> that has the form
                        <sourcexml>ci:{element-name}</sourcexml> is converted to
                        <targetxml>lnci:{element-name}</targetxml>. As an example of converting the
                    descendants of <sourcexml>ci:cite</sourcexml> into the
                        <targetxml>lnci:</targetxml> namespace, here is a partial list of the child
                    elements from Rosetta and what they should be converted to: <ul>
                        <li><sourcexml>ci:casename</sourcexml> becomes
                                <targetxml>lnci:casename</targetxml>
                        </li>
                        <li><sourcexml>ci:constref</sourcexml> becomes
                                <targetxml>lnci:constref</targetxml>
                        </li>
                        <li><sourcexml>ci:courtruleref</sourcexml> becomes
                                <targetxml>lnci:courtruleref</targetxml>
                        </li>
                        <li><sourcexml>ci:decisionref</sourcexml> becomes
                                <targetxml>lnci:decisionref</targetxml>
                        </li>
                        <li><sourcexml>ci:effdate</sourcexml> becomes
                                <targetxml>lnci:effdate</targetxml>
                        </li>
                        <li><sourcexml>ci:party1</sourcexml> becomes
                                <targetxml>lnci:party1</targetxml>
                        </li>
                        <li><sourcexml>ci:party2</sourcexml> becomes
                                <targetxml>lnci:party2</targetxml>
                        </li>
                        <li><sourcexml>ci:procphrase</sourcexml> becomes
                                <targetxml>lnci:procphrase</targetxml>
                        </li>
                        <li><sourcexml>ci:reglref</sourcexml> becomes
                                <targetxml>lnci:reglref</targetxml>
                        </li>
                        <li><sourcexml>ci:statinfo</sourcexml> becomes
                                <targetxml>lnci:statinfo</targetxml>
                        </li>
                        <li><sourcexml>ci:text</sourcexml> becomes <targetxml>lnci:text</targetxml>
                        </li>
                    </ul>
                </p>
                <p>There are two important exceptions to the converstion instructions given in the
                    preceding paragraph: <ul>
                        <li>Do not convert any Rosetta-only markup that, if kept, would make the
                            output invalid. </li>
                        <li>Drop the start and end tags (the mark-up) for
                                <sourcexml>citefragment</sourcexml> and
                                <sourcexml>ci:span</sourcexml> but keep the content of these
                            elements as part of what is converted to the content of
                                <targetxml>lnci:content</targetxml>.</li>
                        <li> Drop all instances of
                            <sourcexml>ci:{element-name}/@spanref</sourcexml>.</li>
                    </ul></p>
                <p>The following are mappings for children of <sourcexml>ci:cite</sourcexml>: <ul>
                        <li><sourcexml>ci:case</sourcexml> becomes
                            <targetxml>lnci:case</targetxml></li>
                        <li><sourcexml>ci:stat</sourcexml> becomes
                            <targetxml>lnci:stat</targetxml></li>
                        <li><sourcexml>ci:juryinstr</sourcexml> becomes
                                <targetxml>lnci:juryinstr</targetxml></li>
                        <li><sourcexml>ci:reg</sourcexml> becomes
                            <targetxml>lnci:reg</targetxml></li>
                        <li><sourcexml>ci:courtrule</sourcexml> becomes
                                <targetxml>lnci:courtrule</targetxml></li>
                        <li><sourcexml>ci:sesslaw</sourcexml> becomes
                                <targetxml>lnci:sesslaw</targetxml></li>
                        <li><sourcexml>ci:patent</sourcexml> becomes
                                <targetxml>lnci:patent</targetxml></li>
                        <li><sourcexml>ci:tmark</sourcexml> becomes
                                <targetxml>lnci:tmark</targetxml></li>
                        <li><sourcexml>ci:copyright</sourcexml> becomes
                                <targetxml>lnci:copyright</targetxml></li>
                        <li><sourcexml>ci:lawrev</sourcexml> becomes
                                <targetxml>lnci:lawrev</targetxml></li>
                        <li><sourcexml>ci:periodical</sourcexml> becomes
                                <targetxml>lnci:periodical</targetxml></li>
                        <li><sourcexml>ci:pinpoint</sourcexml> becomes
                                <targetxml>lnci:pinpoint</targetxml></li>
                        <li><sourcexml>ci:book</sourcexml> becomes
                            <targetxml>lnci:book</targetxml></li>
                        <li><sourcexml>ci:oag</sourcexml> becomes
                            <targetxml>lnci:oag</targetxml></li>
                        <li><sourcexml>ci:agencydecision</sourcexml> becomes
                                <targetxml>lnci:agencydecision</targetxml></li>
                        <li><sourcexml>ci:constitution</sourcexml> becomes
                                <targetxml>lnci:constitution</targetxml></li>
                        <li><sourcexml>ci:annot</sourcexml> becomes
                                <targetxml>lnci:annot</targetxml></li>
                        <li><sourcexml>ci:execdoc</sourcexml> becomes
                                <targetxml>lnci:execdoc</targetxml></li>
                        <li><sourcexml>ci:admininterp</sourcexml> becomes
                                <targetxml>lnci:admininterp</targetxml></li>
                        <li><sourcexml>ci:misc</sourcexml> becomes
                            <targetxml>lnci:misc</targetxml></li>
                        <li><sourcexml>ci:form</sourcexml> becomes
                            <targetxml>lnci:form</targetxml></li>
                    </ul>Given one of the above mappings, the source
                        <sourcexml>ci:cite/@searchtype</sourcexml> should be dropped and the target
                        <targetxml>lnci:cite/@type</targetxml> should be <b>omitted</b>.</p>
                <p>In the absence of one of the possible children of <sourcexml>ci:cite</sourcexml>
                    listed above, <targetxml>lnci:cite/@type</targetxml> should be populated as
                    follows: <ul>
                        <li><sourcexml>ci:cite/@searchtype="LEG-REF"</sourcexml> becomes
                                <targetxml>lnci:cite/@type="legislation"</targetxml></li>
                        <li><sourcexml>ci:cite/@searchtype="CASE-REF"</sourcexml> becomes
                                <targetxml>lnci:cite/@type="case"</targetxml></li>
                        <li><sourcexml>ci:cite/@searchtype="BOOK-REF"</sourcexml> becomes
                                <targetxml>lnci:cite/@type="book"</targetxml></li>
                        <li><sourcexml>ci:cite/@searchtype="BODY-CASE-REF"</sourcexml> becomes
                                <targetxml>lnci:cite/@type="case"</targetxml></li>
                        <li><sourcexml>ci:cite/@searchtype="SUMM-CASE-REF"</sourcexml> becomes
                                <targetxml>lnci:cite/@type="case"</targetxml></li>
                    </ul>This will ensure that the correct “context clue? (Product Content Type or
                    PCT) is populated in the Fab Pipeline so that the resulting citation hyperlink
                    targets the correct pile. </p>
                <p>
                    <b>Handling for AU Journals/Newsitem:</b>
                    <ul>
                        <li>
                            <sourcexml>ci:cite</sourcexml> with attribute
                                <sourcexml>@type="cite4thisdoc"</sourcexml> becomes
                                <targetxml>lnci:cite</targetxml> with attribute
                                <targetxml>@type="cite4thisdoc"</targetxml>
                        </li>
                    </ul>
                </p>
                <p>
                    <b>Handling for NZ Regulation and NZ Act from services:</b>
                    <ul>
                        <li>If <sourcexml>ci:cite@type</sourcexml> comes with attribute value
                                    "<b><u>legref</u></b>" in source document then conversion needs
                            to suppressed attribute value in target and convert
                                <sourcexml>ci:cite</sourcexml> according to general rule. </li>
                    </ul>
                </p>
            </section>

            <example>
                <title>Source XML: ci:cite/searchtype="CASE-REF"</title>
                <codeblock> &lt;ci:cite searchtype="CASE-REF"&gt; &lt;ci:case&gt;
                    &lt;ci:caseinfo&gt; &lt;ci:decisiondate year="2001"/&gt; &lt;/ci:caseinfo&gt;
                    &lt;ci:caseref ID="cr000366" spanref="cr000366-001" status="unval"&gt;
                    &lt;ci:reporter value="NSWCCR"/&gt; &lt;ci:volume num="22"/&gt; &lt;ci:page
                    num="238"/&gt; &lt;/ci:caseref&gt; &lt;/ci:case&gt; &lt;ci:content&gt;
                    &lt;citefragment searchtype="CASE-NAME-REF"&gt; &lt;emph typestyle="it"&gt;Betts
                    v Prisk Contractors Pty Ltd&lt;/emph&gt; &lt;/citefragment&gt; &lt;citefragment
                    searchtype="CASE-CITE-REF"&gt; &lt;ci:span spanid="cr000366-001"
                    status="unval"&gt;(2001) 22 NSWCCR 238&lt;/ci:span&gt;; [2001] NSWCC 146
                    &lt;/citefragment&gt; &lt;/ci:content&gt; &lt;/ci:cite&gt; </codeblock>
                <title>Target XML</title>
                <codeblock> &lt;lnci:cite&gt; &lt;lnci:case&gt; &lt;lnci:caseinfo&gt;
                    &lt;lnci:decisiondate year="2001"/&gt; &lt;/lnci:caseinfo&gt; &lt;lnci:caseref
                    ID="cr000366" status="unval"&gt; &lt;lnci:reporter value="NSWCCR"/&gt;
                    &lt;lnci:volume num="22"/&gt; &lt;lnci:page num="238"/&gt; &lt;/lnci:caseref&gt;
                    &lt;/lnci:case&gt; &lt;lnci:content&gt; &lt;emph typestyle="it"&gt;Betts v Prisk
                    Contractors Pty Ltd&lt;/emph&gt; (2001) 22 NSWCCR 238; [2001] NSWCC 146
                    &lt;/lnci:content&gt; &lt;/lnci:cite&gt; </codeblock>
            </example>

            <example>
                <title>SOURCE XML: ci:cite/searchtype="BOOK-REF"</title>
                <codeblock> &lt;ci:cite searchtype="BOOK-REF"&gt; &lt;ci:lawrev&gt; &lt;ci:lawrevref
                    ID="cr003268" spanref="cr003268-001"&gt; &lt;ci:lawrevlocator&gt;
                    &lt;ci:publicationname normpubcode="BCB"/&gt; &lt;ci:volume num="3"/&gt;
                    &lt;ci:issue&gt; &lt;ci:date year="1985"/&gt; &lt;/ci:issue&gt; &lt;ci:page
                    num="86"/&gt; &lt;/ci:lawrevlocator&gt; &lt;/ci:lawrevref&gt; &lt;/ci:lawrev&gt;
                    &lt;ci:content&gt; &lt;citefragment searchtype="BOOK-CITE-REF"&gt; &lt;ci:span
                    spanid="cr003268-001"&gt;(1985) 3 BCB 86&lt;/ci:span&gt; &lt;/citefragment&gt;
                    &lt;/ci:content&gt; &lt;/ci:cite&gt; </codeblock>
                <title>Target XML</title>
                <codeblock> &lt;lnci:cite&gt; &lt;lnci:lawrev&gt; &lt;lnci:lawrevref
                    ID="cr003268"&gt; &lt;lnci:lawrevlocator&gt; &lt;lnci:publicationname
                    normpubcode="BCB"/&gt; &lt;lnci:volume num="3"/&gt; &lt;lnci:issue&gt;
                    &lt;lnci:date year="1985"/&gt; &lt;/lnci:issue&gt; &lt;lnci:page num="86"/&gt;
                    &lt;/lnci:lawrevlocator&gt; &lt;/lnci:lawrevref&gt; &lt;/lnci:lawrev&gt;
                    &lt;lnci:content&gt;(1985) 3 BCB 86&lt;/lnci:content&gt; &lt;/lnci:cite&gt;
                </codeblock>
            </example>

            <example>
                <title>SOURCE XML: ci:cite/searchtype="SUMM-CASE-REF"</title>
                <codeblock> &lt;ci:cite searchtype="SUMM-CASE-REF"&gt; &lt;ci:case&gt;
                    &lt;ci:caseref ID="cref00000048" spanref="cspan00000048"&gt; &lt;ci:reporter
                    value="FCR"/&gt; &lt;ci:volume num="1"/&gt; &lt;ci:edition&gt;&lt;ci:date
                    year="1985"/&gt;&lt;/ci:edition&gt; &lt;ci:page num="856"/&gt;
                    &lt;/ci:caseref&gt; &lt;/ci:case&gt; &lt;ci:content&gt;&lt;ci:span
                    spanid="cspan00000048"&gt;[1985] 1 F.C. 856&lt;/ci:span&gt;&lt;/ci:content&gt;
                    &lt;/ci:cite&gt; </codeblock>
                <title>Target XML</title>
                <codeblock> &lt;lnci:cite&gt; &lt;lnci:case&gt; &lt;lnci:caseref
                    ID="cref00000048"&gt; &lt;lnci:reporter value="FCR"/&gt; &lt;lnci:volume
                    num="1"/&gt; &lt;lnci:edition&gt;&lt;lnci:date
                    year="1985"/&gt;&lt;/lnci:edition&gt; &lt;lnci:page num="856"/&gt;
                    &lt;/lnci:caseref&gt; &lt;/lnci:case&gt; &lt;lnci:content&gt;[1985] 1 F.C.
                    856&lt;/lnci:content&gt; &lt;/lnci:cite&gt; </codeblock>
            </example>

            <example>
                <title>SOURCE XML: ci:cite/searchtype="BODY-CASE-REF"</title>
                <codeblock> &lt;ci:cite searchtype="BODY-CASE-REF"&gt; &lt;ci:case&gt;
                    &lt;ci:caseref ID="cref00000047" spanref="cspan00000047"&gt; &lt;ci:reporter
                    value="OEAB"/&gt; &lt;ci:edition&gt;&lt;ci:date
                    year="1993"/&gt;&lt;/ci:edition&gt; &lt;ci:refnum num="55"/&gt;
                    &lt;/ci:caseref&gt; &lt;/ci:case&gt; &lt;ci:content&gt;&lt;ci:span
                    spanid="cspan00000047"&gt;[1993] O.E.A.B. No. 55&lt;/ci:span&gt;
                    &lt;/ci:content&gt; &lt;/ci:cite&gt; </codeblock>
                <title>Target XML</title>
                <codeblock> &lt;lnci:cite&gt; &lt;lnci:case&gt; &lt;lnci:caseref
                    ID="cref00000047"&gt; &lt;lnci:reporter value="OEAB"/&gt;
                    &lt;lnci:edition&gt;&lt;lnci:date year="1993"/&gt;&lt;/lnci:edition&gt;
                    &lt;lnci:refnum num="55"/&gt; &lt;/lnci:caseref&gt; &lt;/lnci:case&gt;
                    &lt;lnci:content&gt;[1993] O.E.A.B. No. 55&lt;/lnci:content&gt;
                    &lt;/lnci:cite&gt; </codeblock>
            </example>

            <example>
                <title>Source XML: ci:pinpoint</title>
                <codeblock> &lt;ci:cite ID="I5DDT1GS2SF8P90080000400" normprotocol="lexsee"
                    status="valid"&gt; &lt;ci:agencydecision&gt; &lt;ci:decisionref
                    ID="I5DDT1GS2SF8P90070000400"&gt; &lt;ci:reporter normpubcode="4007"
                    value=""/&gt; &lt;ci:ldi jumppage="1" kw="8197_1999_805*.1" page="805"
                    pagesuffix="*" reporter="8197" volume="1999"/&gt; &lt;ci:volume num="1999"/&gt;
                    &lt;ci:page num="805"/&gt; &lt;ci:pinpoint lastnum="2" num="1"/&gt;
                    &lt;/ci:decisionref&gt; &lt;/ci:agencydecision&gt; &lt;ci:content&gt;1999 SEC
                    No-Act. LEXIS 805, 1-2&lt;/ci:content&gt; &lt;/ci:cite&gt; </codeblock>
            </example>

            <example>
                <title>Target XML: lnci:pinpoint</title>
                <codeblock> &lt;lnci:cite ID="I5DDT1GS2SF8P90080000400" normprotocol="lexsee"
                    status="valid"&gt; &lt;lnci:agencydecision&gt; &lt;lnci:decisionref
                    ID="I5DDT1GS2SF8P90070000400"&gt; &lt;lnci:reporter normpubcode="4007"
                    value=""/&gt; &lt;lnci:ldi jumppage="1" kw="8197_1999_805*.1" page="805"
                    pagesuffix="*" reporter="8197" volume="1999"/&gt; &lt;lnci:volume
                    num="1999"/&gt; &lt;lnci:page num="805"/&gt; &lt;lnci:pinpoint lastnum="2"
                    num="1"/&gt; &lt;/lnci:decisionref&gt; &lt;/lnci:agencydecision&gt;
                    &lt;lnci:content&gt;1999 SEC No-Act. LEXIS 805, 1-2&lt;/lnci:content&gt;
                    &lt;/lnci:cite&gt; </codeblock>
            </example>

            <p><b>Exception: When <sourcexml>link</sourcexml> is used as intra-document linking
                    within <sourcexml>ci:content</sourcexml></b>.</p>
            <p>If the <sourcexml>ci:content</sourcexml> contains a <sourcexml>link</sourcexml>
                child, the <sourcexml>link</sourcexml> wrapper markup (not its content) shall be
                removed (omit tag and retain content) and the <sourcexml>link/@refpt</sourcexml>
                value shall be moved to <targetxml>lnci:cite/@citeref</targetxml>.</p>

            <example>
                <title>SOURCE XML: ci:content/link</title>
                <codeblock> &lt;p&gt; &lt;pnum count="5"&gt;[5]&lt;/pnum&gt; &lt;refpt
                    id="20023NZLR_113_p5" type="ext" /&gt; &lt;text&gt;A number of issues were
                    raised on Bs behalf but may be summarised as follows:&lt;/text&gt; ...
                    &lt;/p&gt; … &lt;ci:cite searchtype="CASE-REF"&gt; &lt;ci:case&gt;
                    &lt;ci:caseref ID="x20023NZLR_113-171" spanref="x20023NZLR_113-171-1"&gt;
                    &lt;ci:reporter value="nzar" country="nz" /&gt; &lt;ci:edition&gt; &lt;ci:date
                    year="2001" /&gt; &lt;/ci:edition&gt; &lt;ci:page num="598" /&gt;
                    &lt;/ci:caseref&gt; &lt;/ci:case&gt; &lt;ci:content&gt; &lt;citefragment
                    searchtype="CASE-NAME-REF"&gt; &lt;emph typestyle="it"&gt;Auckland District Law
                    Society v Ford&lt;/emph&gt; &lt;/citefragment&gt; &lt;citefragment
                    searchtype="CASE-CITE-REF"&gt; &lt;ci:span
                    spanid="x20023NZLR_113-171-1"&gt;[2001] NZAR 598&lt;/ci:span&gt;
                    &lt;/citefragment&gt; at para [ &lt;link
                    refpt="20023NZLR_113_p5"&gt;5&lt;/link&gt; ] &lt;/ci:content&gt;
                    &lt;/ci:cite&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;p&gt; &lt;ref:anchor id="nz_20023NZLR_113_p5" anchortype="global"
                    /&gt; &lt;desig value="5" inline="true"&gt;[5]&lt;/desig&gt; &lt;text&gt;A
                    number of issues were raised on Bs behalf but may be summarised as
                    follows:&lt;/text&gt; ... &lt;/p&gt; … &lt;lnci:cite
                    citeref="20023NZLR_113_p5"&gt; &lt;lnci:case&gt; &lt;lnci:caseref
                    ID="x20023NZLR_113-171"&gt; &lt;lnci:reporter value="nzar" country="nz" /&gt;
                    &lt;lnci:edition&gt; &lt;lnci:date year="2001" /&gt; &lt;/lnci:edition&gt;
                    &lt;lnci:page num="598" /&gt; &lt;/lnci:caseref&gt; &lt;/lnci:case&gt;
                    &lt;lnci:content&gt; &lt;emph typestyle="it"&gt;Auckland District Law Society v
                    Ford&lt;/emph&gt; [2001] NZAR 598 at para [ 5 ] &lt;/lnci:content&gt;
                    &lt;/lnci:cite&gt; </codeblock>
            </example>
            <example>
                <title>Source XML: ci:cite/@type="cite4thisdoc" (AU Journals/Newsitem)</title>
                <codeblock> &lt;jrnl:journalcite&gt; &lt;ci:cite type="cite4thisdoc"&gt;
                    &lt;ci:lawrev&gt; &lt;ci:lawrevref&gt; &lt;ci:lawrevlocator&gt;
                    &lt;ci:publicationname normpubcode="Aust Jnl of Corp Law"/&gt; &lt;ci:volume
                    num="15"/&gt; &lt;ci:page num="185"/&gt; &lt;/ci:lawrevlocator&gt;
                    &lt;/ci:lawrevref&gt; &lt;/ci:lawrev&gt; &lt;ci:content&gt;(2003) 15 Aust Jnl of
                    Corp Law 185&lt;/ci:content&gt; &lt;/ci:cite&gt; &lt;/jrnl:journalcite&gt;
                </codeblock>
            </example>

            <example>
                <title>Target XML: lnci:cite/@type="cite4thisdoc" (AU Journals/Newsitem)</title>
                <codeblock> &lt;ref:cite4thisresource&gt; &lt;lnci:cite type="cite4thisdoc"&gt;
                    &lt;lnci:lawrev&gt; &lt;lnci:lawrevref&gt; &lt;lnci:lawrevlocator&gt;
                    &lt;lnci:publicationname normpubcode="Aust Jnl of Corp Law"/&gt; &lt;lnci:volume
                    num="15"/&gt; &lt;lnci:page num="185"/&gt; &lt;/lnci:lawrevlocator&gt;
                    &lt;/lnci:lawrevref&gt; &lt;/lnci:lawrev&gt; &lt;lnci:content&gt;(2003) 15 Aust
                    Jnl of Corp Law 185&lt;/lnci:content&gt; &lt;/lnci:cite&gt;
                    &lt;/ref:cite4thisresource&gt; </codeblock>
            </example>
            <example>
                <title>Source XML: ci:cite/@type="legref" (NZ Regulation)</title>
                <codeblock> &lt;glp:note&gt; &lt;p&gt; &lt;text&gt; &lt;ci:cite searchtype="LEG-REF"
                    type="legref"&gt; &lt;ci:content&gt;Compare: SR 1958/38 r 15Q&lt;/ci:content&gt;
                    &lt;/ci:cite&gt; &lt;/text&gt; &lt;/p&gt; &lt;/glp:note&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;note&gt; &lt;bodytext&gt; &lt;p&gt; &lt;text&gt; &lt;lnci:cite&gt;
                    &lt;lnci:content&gt;Compare: SR 1958/38 r 15Q&lt;/lnci:content&gt;
                    &lt;/lnci:cite&gt; &lt;/text&gt; &lt;/p&gt; &lt;/bodytext&gt; &lt;/note&gt;
                </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2016-03-23: <ph id="change_20160323_cite_MCJ">Updated main instructions to
                        clarify that descendants of ci:cite, and not just children, are to be
                        processed.</ph></p>
                <p>2015-09-15: <ph id="change_20150915_SS">Updated instruction to suppressed the
                        attribute <sourcexml>@type</sourcexml> with value "<b>legref</b>" in target.
                        Applicable on NZ Regulation and NZ Act from services [Webstar
                        #6245139].</ph></p>
                <p>2015-03-17: <ph id="change_20150317_AK">An attribute
                            <targetxml>@inline</targetxml> get added with
                            <targetxml>desig</targetxml> element even when the
                            source<sourcexml>pnum</sourcexml> is not having that
                            attribute<sourcexml>@inline</sourcexml> Applicable on CA12
                    only.</ph></p>
                <p>2015-02-24: <ph id="change_20150224_AK">Example updated as per new rule an
                        attribute <targetxml>@inline</targetxml>get added with
                            <targetxml>desig</targetxml>element when the
                            source<sourcexml>pnum</sourcexml>is not having that
                            attribute<sourcexml>@inline</sourcexml></ph>
                </p>
                <p>2014-12-08: <ph id="change_20141208-1_mlv">Addition of mapping for
                            <sourcexml>ci:pinpoint</sourcexml> to
                            <targetxml>lnci:pinpoint</targetxml> and example from US LPA
                        content.</ph></p>
                <p>2013-12-30: <ph id="change_20131230_jm">Minor illustrative change. Added "(AU
                        Journals/Newsitem)" to headings for last example to clarify that retention
                        of <sourcexml>@type="cite4thisdoc"</sourcexml> is an exception for that
                        content, as already described in narrative rules.</ph></p>
                <p>2013-05-01: <ph id="change_20130501_jm">Removed special rule for
                            <sourcexml>ci:cite/ci:content/remotelink</sourcexml> which required
                        suppression of <sourcexml>ci:cite/ci:content</sourcexml> tags. The elements
                        are now retained and convert according to common rules.</ph></p>
                <p>2013-04-24: <ph id="change_20130424_WL">Added a mapping for
                            <sourcexml>ci:procphrase</sourcexml> to
                            <sourcexml>lnci:procphrase</sourcexml></ph>.</p>
                <p>2013-01-22: <ph id="change_20130122_xxx">Instruction modified for the scenario
                            <sourcexml>ci:cite/ci:content/remotelink</sourcexml> to indicate that
                        the <sourcexml>ci:cite</sourcexml> and <sourcexml>ci:content</sourcexml>
                        start-tags and end-tags (but not their content) are dropped.</ph></p>
                <p>2012-11-29: <ph id="change_20121129_xxx">Updated instructions to drop all
                            <sourcexml>@spanref</sourcexml>.</ph></p>
                <p>2012-09-18: <ph id="change_20120918_xxx">Instruction and example added for
                        handling of <sourcexml>ci:cite/@type="cite4thisdoc"</sourcexml> for AU
                        Journals/Newsitem.</ph></p>
                <p>2012-09-11: <ph id="change_20120911_xxx">Created.</ph></p>
            </section>
        </body>
    </dita:topic>

    <xsl:template match="ci:cite">
        <xsl:choose>
            <xsl:when test="parent::leg:bodytext">
                <p xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <text>
                        <lnci:cite>
                            <xsl:if test="ci:content/link">
                                <xsl:attribute name="citeref" select="ci:content/link/@refpt"/>
                            </xsl:if>
                            <!-- MDS 2017-05-01 - Added parameter 'childElementName' to match other call.  
				General ci:* module states to drop value of ci:cite/@searchtype if certain strings are found in first child element local-name.  
				Previously this first child element local-name value was not being passed.  The value is not invalid but it is a diff from the DT documents. -->
                            <xsl:apply-templates select="@*">
                                <xsl:with-param name="childElementName"
                                    select="local-name(child::*[1])"/>
                            </xsl:apply-templates>
                            <xsl:apply-templates select="node()"/>
                        </lnci:cite>
                    </text>
                </p>
            </xsl:when>

            <xsl:otherwise>
                <lnci:cite>
                    <!-- JD: 2017-08-31: added for VSTS Issue 342175.
				  If there is no @type, and no child element aside from <ci:content>, and the parent is case:parallelcite,
				  then set @type='case'
				  -->
                    <xsl:if
                        test="
                            not(@type) and not(*[not(name() = 'ci:content')])
                            and parent::case:parallelcite and $streamID = 'UK05'">
                        <xsl:attribute name="type" select="'case'"/>
                    </xsl:if>
                    <!-- MDS - 2017-08-10 - added to address instructions in CI for AU13 -->
                    <!-- Awantika: Added AU01 for normcite -->
                    <xsl:if test="$streamID = ('AU13', 'AU01', 'HK09', 'UK11DN')">
                        <xsl:if
                            test="
                                ci:case/ci:caseref[ci:reporter/@value and ci:volume/@num and
                                ci:edition/ci:date/@year and ci:pinpoint[@targettype = 'page']/@num] and
                                not(ci:case/ci:caseref/ci:page/@num)">
                            <!-- Done simply to set the context node -->
                            <xsl:for-each select="ci:case[1]/ci:caseref">
                                <xsl:attribute name="normcite">
                                    <xsl:text>(</xsl:text>
                                    <xsl:value-of select="ci:edition/ci:date/@year"/>
                                    <xsl:text>) </xsl:text>
                                    <xsl:value-of select="ci:volume/@num"/>
                                    <xsl:text> </xsl:text>
                                    <xsl:value-of select="ci:reporter/@value"/>
                                    <xsl:text> </xsl:text>
                                    <xsl:value-of select="ci:pinpoint[@targettype = 'page']/@num"/>
                                </xsl:attribute>
                            </xsl:for-each>
                        </xsl:if>
                    </xsl:if>
                    <!-- Ankita Singh 12 June 2017: Introducted value of lnci:cite/@type to "cite4thisdoc under jrnl:journalcite as per latest CI of UK09 -->
                    <xsl:if test="$streamID = ('UK09', 'NZ08', 'AU14') and parent::jrnl:journalcite">
                        <xsl:attribute name="type">cite4thisdoc</xsl:attribute>
                    </xsl:if>

                    <xsl:if test="ci:content/link">
                        <xsl:attribute name="citeref" select="ci:content/link/@refpt"/>
                    </xsl:if>
                    <xsl:if
                        test="ci:content/remotelink and $streamID = ('NZ14', 'NZ02', 'AU11', 'NZ08', 'AU14')">
                        <xsl:attribute name="citeref" select="ci:content/remotelink[1]/@refpt"/>
                        <!-- CSN 8/4/17 added [1] in case there are multiple remotelinks -->
                    </xsl:if>
                    <!-- 20170721:  MCJ:  We originally grouped NZ15 into the code for NZ14 and NZ02 but found there are differences in how DT was
						                  handling colons and the leading underscore... so we kept NZ15 apart.  It is possibly (likely?) that something
						                  is going to need to change.  The NZ15 code attempts to follow the instructions about using a leading underscore
						                  and translating colons to underscores... however, it is not clear whether the target documents have had their
						                  "cite def" processed similarly.
					                      Also, note the added predicate that ensures that there is a remotelink that has @refpt.  It is not clear
					                      what should happen if cite:content/remotelink[not(@refpt)] exists... hoping data is good.
					-->
                    <xsl:if test="ci:content/remotelink[@refpt] and $streamID = ('NZ15')">
                        <!-- First replace any colons with underscores. -->
                        <xsl:variable name="translatedCiteRefValue"
                            select="translate(ci:content/remotelink[@refpt][1]/@refpt, ':', '_')"/>
                        <!-- Now, check if the value starts with a digit... if so, prepend an underscore.  There may be other offending first characters that need to be checked but digits should cover most. -->
                        <xsl:variable name="processedCiteRefValue"
                            select="
                                if (matches($translatedCiteRefValue, '^\d')) then
                                    concat('_', $translatedCiteRefValue)
                                else
                                    $translatedCiteRefValue"/>

                        <xsl:attribute name="citeref" select="$processedCiteRefValue"/>
                    </xsl:if>
                    <!-- MDS 2017-05-01 - Added parameter 'childElementName' to match other call.  
				General ci:* module states to drop value of ci:cite/@searchtype if certain strings are found in first child element local-name.  
				Previously this first child element local-name value was not being passed.  The value is not invalid but it is a diff from the DT documents. -->
                    <xsl:apply-templates select="@*">
                        <xsl:with-param name="childElementName" select="local-name(child::*[1])"/>
                    </xsl:apply-templates>
                    <xsl:apply-templates select="node()"/>
                </lnci:cite>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <xsl:template
        match="ci:*[not(local-name() = ('cite', 'fragment', 'span', 'volume', 'page'))] | ci:volume[normalize-space(@num) != ''] | ci:page[normalize-space(@num) != '']">
        <xsl:element name="{concat('lnci:', local-name())}">

            <xsl:apply-templates select="@*">
                <xsl:with-param name="childElementName" select="node()[1]/local-name()"/>
            </xsl:apply-templates>

            <!-- Sudhanshu Srivastava 7 June 2017 : Added condition for CA03 stream Only. condition for generating lnci:popname and lnci:hiertext.-->
            <xsl:if test="$streamID = 'CA03' and local-name() = 'statinfo'">
                <xsl:variable name="beforestring"
                    select="substring-before(ancestor::source_cttr:body/leg:info/leg:officialname, '/')"/>
                <xsl:variable name="afterstring"
                    select="substring-after(ancestor::source_cttr:body/leg:info/leg:officialname, '/')"/>
                <xsl:variable name="fullstring"
                    select="ancestor::source_cttr:body/leg:info/leg:officialname"/>
                <xsl:variable name="cicitecount"
                    select="count(ancestor::source_cttr:body/leg:info/leg:officialnum/ci:cite)"/>
                <xsl:variable name="legjuris"
                    select="ancestor::source_cttr:body/leg:info/leg:juris[1]"/>
                <xsl:variable name="legofnumchild"
                    select="ancestor::source_cttr:body/leg:info/leg:officialnum"/>
                <xsl:if test="ancestor::leg:officialnum/parent::leg:info/parent::source_cttr:body">
                    <xsl:choose>
                        <xsl:when test="$cicitecount = 1">
                            <xsl:choose>
                                <xsl:when test="not(contains($fullstring, '/'))">
                                    <xsl:if
                                        test="not(ancestor::ci:cite/preceding-sibling::*[1][self::ci:cite])">
                                        <lnci:popname value="{$fullstring}"/>
                                    </xsl:if>
                                </xsl:when>
                                <xsl:otherwise>
                                    <lnci:popname value="{$beforestring}"/>
                                </xsl:otherwise>
                            </xsl:choose>
                            <lnci:jurisinfo>
                                <lnci:can>
                                    <xsl:attribute name="district">
                                        <xsl:choose>
                                            <xsl:when test="$legjuris = 'PQ'">QC</xsl:when>
                                            <xsl:when test="$legjuris = ('CD', 'Canada', 'UK')"
                                                >CA</xsl:when>
                                            <xsl:when test="$legjuris = ('NF')">NL</xsl:when>
                                            <xsl:when test="$legjuris = ('NU')"/>
                                            <xsl:otherwise>
                                                <xsl:value-of select="$legjuris"/>
                                            </xsl:otherwise>
                                        </xsl:choose>
                                    </xsl:attribute>
                                </lnci:can>
                            </lnci:jurisinfo>
                        </xsl:when>
                        <xsl:when test="$cicitecount = 2">
                            <xsl:choose>
                                <xsl:when test="not(contains($fullstring, '/'))">
                                    <xsl:if
                                        test="not(ancestor::ci:cite/preceding-sibling::*[1][self::ci:cite])">
                                        <lnci:popname value="{$fullstring}"/>
                                    </xsl:if>
                                </xsl:when>
                                <xsl:otherwise>
                                    <lnci:popname
                                        value="{if(not(ancestor::ci:cite/preceding-sibling::*[1][self::ci:cite])) then $beforestring else $afterstring}"
                                    />
                                </xsl:otherwise>
                            </xsl:choose>
                            <lnci:jurisinfo>
                                <lnci:can>
                                    <xsl:attribute name="district">
                                        <xsl:choose>
                                            <xsl:when test="$legjuris = 'PQ'">QC</xsl:when>
                                            <xsl:when test="$legjuris = ('CD', 'Canada', 'UK')"
                                                >CA</xsl:when>
                                            <xsl:when test="$legjuris = ('NF')">NL</xsl:when>
                                            <xsl:when test="$legjuris = ('NU')"/>
                                            <xsl:otherwise>
                                                <xsl:value-of select="$legjuris"/>
                                            </xsl:otherwise>
                                        </xsl:choose>
                                    </xsl:attribute>
                                </lnci:can>
                            </lnci:jurisinfo>
                        </xsl:when>
                        <xsl:when test="$cicitecount = 4">
                            <xsl:choose>
                                <xsl:when test="not(contains($fullstring, '/'))">
                                    <xsl:if
                                        test="not(ancestor::ci:cite/preceding-sibling::*[1][self::ci:cite])">
                                        <lnci:popname value="{$fullstring}"/>
                                    </xsl:if>
                                    <xsl:if
                                        test="ancestor::ci:cite/preceding-sibling::*[1][self::ci:cite] and count(ancestor::ci:cite/preceding-sibling::*[1][self::ci:cite]) = 1">
                                        <lnci:popname value="{$fullstring}"/>
                                    </xsl:if>
                                </xsl:when>
                                <xsl:otherwise>
                                    <xsl:if
                                        test="not(ancestor::ci:cite/preceding-sibling::*[1][self::ci:cite])">
                                        <lnci:popname value="{$beforestring}"/>
                                    </xsl:if>
                                    <xsl:if
                                        test="ancestor::ci:cite/preceding-sibling::*[1][self::ci:cite] and count(ancestor::ci:cite/preceding-sibling::ci:cite) = 1">
                                        <lnci:popname value="{$beforestring}"/>
                                    </xsl:if>
                                    <xsl:if
                                        test="count(ancestor::ci:cite/preceding-sibling::ci:cite) = 2">
                                        <lnci:popname value="{$afterstring}"/>
                                    </xsl:if>

                                    <xsl:if
                                        test="count(ancestor::ci:cite/preceding-sibling::ci:cite) = 3">
                                        <lnci:popname value="{$afterstring}"/>
                                    </xsl:if>
                                </xsl:otherwise>
                            </xsl:choose>

                            <lnci:jurisinfo>
                                <lnci:can>
                                    <xsl:attribute name="district">
                                        <xsl:choose>
                                            <xsl:when test="$legjuris = 'PQ'">QC</xsl:when>
                                            <xsl:when test="$legjuris = ('CD', 'Canada', 'UK')"
                                                >CA</xsl:when>
                                            <xsl:when test="$legjuris = ('NF')">NL</xsl:when>
                                            <xsl:when test="$legjuris = ('NU')"/>
                                            <xsl:otherwise>
                                                <xsl:value-of select="$legjuris"/>
                                            </xsl:otherwise>
                                        </xsl:choose>
                                    </xsl:attribute>
                                </lnci:can>
                            </lnci:jurisinfo>

                        </xsl:when>
                        <xsl:otherwise> </xsl:otherwise>
                    </xsl:choose>

                </xsl:if>
            </xsl:if>

            <xsl:if
                test="$streamID = 'CA03' and local-name() = 'hierlev' and not(child::ci:hierlev)">
                <xsl:variable name="beforeslash"
                    select="substring-before(ancestor::source_cttr:body/leg:info/leg:num, '/')"/>
                <xsl:variable name="afterslash"
                    select="substring-after(ancestor::source_cttr:body/leg:info/leg:num, '/')"/>
                <xsl:variable name="fullnumber" select="ancestor::source_cttr:body/leg:info/leg:num"/>
                <xsl:variable name="cicitecount"
                    select="count(ancestor::source_cttr:body/leg:info/leg:officialnum/ci:cite)"/>
                <xsl:variable name="legofnumchild"
                    select="ancestor::source_cttr:body/leg:info/leg:officialnum"/>
                <xsl:if test="contains(ancestor::leg:officialnum/preceding-sibling::leg:num, '/')">
                    <xsl:choose>
                        <xsl:when test="$cicitecount = 1">
                            <lnci:hiertext value="{$beforeslash}"/>
                        </xsl:when>
                        <xsl:when test="$cicitecount = 2">
                            <lnci:hiertext
                                value="{if(not(ancestor::ci:cite/preceding-sibling::*[1][self::ci:cite])) then $beforeslash else $afterslash}"
                            />
                        </xsl:when>
                        <xsl:when test="$cicitecount = 4">
                            <xsl:if
                                test="not(ancestor::ci:cite/preceding-sibling::*[1][self::ci:cite])">
                                <lnci:hiertext value="{$beforeslash}"/>
                            </xsl:if>
                            <xsl:if
                                test="ancestor::ci:cite/preceding-sibling::*[1][self::ci:cite] and count(ancestor::ci:cite/preceding-sibling::ci:cite) = 2">
                                <lnci:hiertext value="{$afterslash}"/>
                            </xsl:if>
                        </xsl:when>
                    </xsl:choose>

                </xsl:if>
            </xsl:if>
            <!-- Awantika-21-07-2017- For AU20 remotelink needs to be created outside ci:content -->
            <xsl:choose>
                <xsl:when test="$streamID = 'AU20' and local-name() = 'content'">
                    <xsl:apply-templates select="node() except remotelink"/>
                </xsl:when>
                <xsl:when
                    test="$streamID = 'CA02DC' and local-name() = 'content' and ancestor::case:reportercite">
                    <xsl:apply-templates select="*"/>
                </xsl:when>
                <!-- Awantika-2018-01-25-  trailing comma and space should be suppressed in target lnci:content. Webstar # 7102029 -->
                <!-- Awantika-2018-01-29-  trailing space should be suppressed in target lnci:content. Webstar # 7102029 -->
                <xsl:when test="$streamID = 'CA02CC' and local-name() = 'content'">
                    <xsl:choose>
                        <xsl:when test="starts-with(., 'Full text: ') and contains(., ',')">
                            <xsl:value-of select="replace(replace(., ', ', ''), 'Full text: ', '')"
                            />
                        </xsl:when>
                        <xsl:when test="starts-with(., 'Texte intégral :') and contains(., ',')">
                            <xsl:value-of
                                select="replace(replace(., ', ', ''), 'Texte intégral :', '')"/>
                        </xsl:when>
                        <xsl:when
                            test="starts-with(., 'Full text/texte intégral: ') and contains(., ',')">
                            <xsl:value-of
                                select="replace(replace(., ', ', ''), 'Full text/texte intégral: ', '')"
                            />
                        </xsl:when>


                        <xsl:when test="starts-with(., 'Full text: ') and not(contains(., ','))">
                            <xsl:value-of select="replace(., 'Full text: ', '')"/>
                        </xsl:when>
                        <xsl:when
                            test="starts-with(., 'Texte intégral :') and not(contains(., ','))">
                            <xsl:value-of select="replace(., 'Texte intégral :', '')"/>
                        </xsl:when>
                        <xsl:when
                            test="starts-with(., 'Full text/texte intégral: ') and not(contains(., ','))">
                            <xsl:value-of select="replace(., 'Full text/texte intégral: ', '')"/>
                        </xsl:when>
                        <xsl:otherwise>
                            <xsl:apply-templates select="node()"/>
                        </xsl:otherwise>
                    </xsl:choose>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:apply-templates select="node()"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:element>
    </xsl:template>

    <!-- JD: 20170524 : added to trap error output message -->
    <xsl:template match="ci:pinpoint/@searchtype"/>



    <xsl:template
        match="ci:*/@*[not(name() = ('searchtype', 'spanref', 'type', 'ID', 'ln.nsprefix'))]">
        <xsl:attribute name="{name()}">
            <xsl:value-of select="."/>
        </xsl:attribute>
    </xsl:template>

    <xsl:template match="ci:volume[@num = ''] | ci:volume[@num = ' '] | ci:page[@num = '']"/>

    <xsl:template match="ci:*/@spanref | ci:*/@ln.nsprefix"/>

    <xsl:template match="ci:*/@ID">
        <xsl:param name="increment-caserefid" tunnel="yes"/>
        <xsl:variable name="dupStatus">
            <xsl:for-each select="parent::*">
                <xsl:call-template name="amIaDuplicate"/>
            </xsl:for-each>
        </xsl:variable>
        <xsl:choose>
            <xsl:when test="$dupStatus = 'false'">
                <xsl:attribute name="ID">
                    <xsl:call-template name="normalizeIdString"/>
                    <xsl:if test="$increment-caserefid = 'yes'">
                        <xsl:text>_01</xsl:text>
                    </xsl:if>
                </xsl:attribute>
            </xsl:when>
            <xsl:otherwise>
                <xsl:message>citation ID for <xsl:value-of select="parent::*"/> was a duplicate and
                    has been removed from the conversion.</xsl:message>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>


    <xsl:template match="citefragment | ci:span">
        <!-- Sudhanshu : 6 june 2017 , requirement for converting ci:span to lnci:span, so using choose scenario. -->
        <xsl:choose>
            <xsl:when
                test="$streamID = 'CA03' and not(ancestor::leg:officialnum) and not(ancestor::case:parallelcite)">
                <lnci:span>
                    <xsl:apply-templates select="@* | node()"/>
                </lnci:span>
            </xsl:when>
            <xsl:otherwise>
                <xsl:apply-templates/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>


    <!--<xsl:template
		match="citefragment[parent::ci:content and remotelink[@service = 'DOC-ID']][$streamID = 'AU04' or $streamID = 'AU08']"> </xsl:template>-->

    <xsl:template
        match="citefragment[parent::ci:content and remotelink[@service = 'DOC-ID']][$streamID = ('AU04', 'AU08')]">

        <xsl:call-template name="remotelinkDOCID"/>
    </xsl:template>

    <xsl:template
        match="citefragment[parent::ci:content and remotelink[@service = 'DOC-ID']][$streamID = ('NZ09', 'NZ07-DN')]">
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template
        match="ci:cite[not(ancestor::case:references) or $streamID = 'NZ17CC' or $streamID = 'HK09']/@searchtype"
        priority="25">
        <xsl:param name="childElementName"/>
        <xsl:choose>
            <!-- JD: 2017-08-01: NZ06 includes standard module id-CCCC-10268; by my reading ci:cite/@type should not be suppressed, only the value 'legref'
			"If ci:cite@type comes with attribute value "legref" in source document then conversion needs to suppressed attribute value in target 
			and convert ci:cite according to general rule."
			Moving this logic to ci:cite/@type, below
			-->
            <!--<xsl:when test="$streamID = ('NZ06')"/>-->
            <xsl:when
                test="
                    $childElementName = 'case' or $childElementName = 'form' or
                    $childElementName = 'misc' or $childElementName = 'admininterp' or
                    $childElementName = 'execdoc' or $childElementName = 'annot' or
                    $childElementName = 'constitution' or $childElementName = 'agencydecision' or
                    $childElementName = 'oag' or $childElementName = 'book' or
                    $childElementName = 'pinpoint' or $childElementName = 'periodical' or
                    $childElementName = 'lawrev' or $childElementName = 'copyright' or
                    $childElementName = 'tmark' or $childElementName = 'patent' or
                    $childElementName = 'sesslaw' or $childElementName = 'courtrule' or
                    $childElementName = 'reg' or $childElementName = 'juryinstr'"/>
            <xsl:otherwise>
                <xsl:attribute name="type">
                    <xsl:choose>
                        <xsl:when test=". = 'LEG-REF'">legislation</xsl:when>
                        <xsl:when test=". = 'CASE-REF'">case</xsl:when>
                        <xsl:when test=". = 'BOOK-REF'">book</xsl:when>
                        <xsl:when test=". = 'BODY-CASE-REF'">case</xsl:when>
                        <xsl:when test=". = 'SUMM-CASE-REF'">case</xsl:when>
                        <xsl:when test=". = 'EU-REF'">EU-REF</xsl:when>
                    </xsl:choose>
                </xsl:attribute>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>


    <xsl:template match="ci:cite/@type | ci:citeditem/@type">
        <xsl:choose>
            <!-- 
				"Handling for NZ Regulation and NZ Act from services:
				If ci:cite@type comes with attribute value "legref" in source document then conversion needs to suppressed attribute value in target 
			  and convert ci:cite according to general rule."  -->
            <xsl:when test=". = 'legref' and $streamID = ('NZ05', 'NZ06')"/>
            <!-- do nothing -->
            <xsl:when
                test=". = 'legref' or parent::ci:cite[ci:case | ci:stat | ci:juryinstr | ci:reg | ci:courtrule | ci:sesslaw | ci:patent | ci:tmark | ci:copyright | ci:lawrev | ci:periodical | ci:pinpoint | ci:book | ci:oag | ci:agencydecision | ci:constitution | ci:annot | ci:execdoc | ci:admininterp | ci:misc | ci:form]"/>
            <xsl:otherwise>
                <xsl:attribute name="type" select="."/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <!-- Vikas Rohilla : Added for the error messege	-->
    <xsl:template match="ci:cite/@searchtype"/>




    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="common_rosetta_emph">
        <title><sourcexml>emph</sourcexml> to <targetxml>emph</targetxml>
            <lnpid>id-CCCC-10316</lnpid></title>
        <body>
            <section>
                <title>Instructions <i>[common element]</i></title>
                <p><sourcexml>emph</sourcexml> becomes <targetxml>emph</targetxml>.
                        <targetxml>@typestyle</targetxml> values are tokenized. These are given
                    below: <ul>
                        <li><targetxml>@typestyle="bf"</targetxml> bold.</li>
                        <li><targetxml>@typestyle="biu"</targetxml> bold, italic and underline.</li>
                        <li><targetxml>@typestyle="bu"</targetxml> bold underline.</li>
                        <li><targetxml>@typestyle="caps"</targetxml> capital characters.</li>
                        <li><targetxml>@typestyle="dbl-un"</targetxml> double underline.</li>
                        <li><targetxml>@typestyle="grayscal"</targetxml> grayscale.</li>
                        <li><targetxml>@typestyle="hi"</targetxml> highlighted.</li>
                        <li><targetxml>@typestyle="ib"</targetxml> italic and bold.</li>
                        <li><targetxml>@typestyle="it"</targetxml> italic.</li>
                        <li><targetxml>@typestyle="iu"</targetxml> italic underline.</li>
                        <li><targetxml>@typestyle="ro"</targetxml> roman.</li>
                        <li><targetxml>@typestyle="smcaps"</targetxml> small caps.</li>
                        <li><targetxml>@typestyle="un"</targetxml> underline.</li>
                        <li><targetxml>@typestyle="inherit"</targetxml> inherit.</li>
                    </ul>
                </p>
                <p>Children of <sourcexml>emph</sourcexml> should be processed.</p>
            </section>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;emph typestyle="ro"&gt;(1)&lt;/emph&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;emph typestyle="ro"&gt;(1)&lt;/emph&gt; </codeblock>
            </example>

            <note>If <targetxml>emph/emph</targetxml> has the same <targetxml>@typestyle</targetxml>
                value then remove one <targetxml>emph</targetxml> element.</note>

            <note>
                <p>
                    <sourcexml>heading/title/emph</sourcexml> becomes
                        <targetxml>heading/title</targetxml>. That is, the
                        <sourcexml>emph</sourcexml> start-tag and end-tag (but not the content) are
                    dropped, and the content becomes part of the target parent
                        <targetxml>title</targetxml> element.</p>

                <p><sourcexml>emph/inlineobject</sourcexml> becomes
                        <targetxml>figure/ref:inlineobject</targetxml>.</p>

                <p><sourcexml>h/emph/inlineobject</sourcexml> becomes
                        <targetxml>emph/ref:inlineobject</targetxml>.</p>

                <p><sourcexml>sup/emph/emph/inlineobject</sourcexml> becomes
                        <targetxml>sup/emph/ref:inlineobject</targetxml>.</p>
            </note>


            <example>
                <title>Source XML</title>
                <codeblock> &lt;heading&gt; &lt;title&gt; &lt;emph
                    typestyle="bf"&gt;Judgment&lt;/emph&gt; &lt;/title&gt; &lt;/heading&gt;
                </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;heading&gt; &lt;title&gt; Judgment &lt;/title&gt; &lt;/heading&gt;
                </codeblock>
            </example>
            <example>
                <title>Source XML: For multiple <sourcexml>emph</sourcexml> elements</title>
                <codeblock> &lt;heading&gt; &lt;title&gt; &lt;emph typestyle="bf"&gt; &lt;emph
                    typestyle="bf"&gt; Doc. 5.27 - Section 10(&lt;emph typestyle="it"&gt;&lt;emph
                    typestyle="it"&gt;b&lt;/emph&gt;&lt;/emph&gt;) &amp;#x2014; Affidavit
                    &lt;/emph&gt; &lt;/emph&gt; &lt;/title&gt; &lt;/heading&gt; </codeblock>
            </example>
            <example>
                <title>Target XML</title>
                <codeblock> &lt;heading&gt; &lt;title&gt;Doc. 5.27 - Section 10(b) &amp;#x2014;
                    Affidavit&lt;/title&gt; &lt;/heading&gt; </codeblock>
            </example>
            <example>
                <title>Source XML: Showing an <sourcexml>emph</sourcexml> that contains a child
                    element</title>
                <codeblock> &lt;heading&gt; &lt;title&gt; &lt;emph typestyle="bf"&gt;Non-residential
                    building—(&lt;ci:cite searchtype="LEG-REF" status="invalid"&gt;
                    &lt;ci:sesslaw&gt; &lt;ci:sesslawinfo&gt; &lt;ci:sesslawnum num="1994_23a"/&gt;
                    &lt;ci:hierpinpoint&gt;&lt;ci:hierlev label="schedule"
                    num="8"/&gt;&lt;/ci:hierpinpoint&gt; &lt;/ci:sesslawinfo&gt;
                    &lt;ci:sesslawref&gt;&lt;ci:standardname
                    normpubcode="UK_ACTS"/&gt;&lt;/ci:sesslawref&gt; &lt;/ci:sesslaw&gt;
                    &lt;ci:content&gt;VATA 1994, Schedule 8, group
                    5&lt;/ci:content&gt;&lt;/ci:cite&gt;, note 7A)&lt;/emph&gt; &lt;/title&gt;
                    &lt;/heading&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;heading&gt; &lt;title&gt;Non-residential building—(&lt;lnci:cite
                    searchtype="LEG-REF" status="invalid"&gt; &lt;lnci:sesslaw&gt;
                    &lt;lnci:sesslawinfo&gt; &lt;lnci:sesslawnum num="1994_23a"/&gt;
                    &lt;lnci:hierpinpoint&gt;&lt;lnci:hierlev label="schedule"
                    num="8"/&gt;&lt;/lnci:hierpinpoint&gt; &lt;/lnci:sesslawinfo&gt;
                    &lt;lnci:sesslawref&gt;&lt;lnci:standardname
                    normpubcode="UK_ACTS"/&gt;&lt;/lnci:sesslawref&gt; &lt;/lnci:sesslaw&gt;
                    &lt;lnci:content&gt;VATA 1994, Schedule 8, group
                    5&lt;/lnci:content&gt;&lt;/lnci:cite&gt;, note 7A)&lt;/title&gt;
                    &lt;/heading&gt; </codeblock>
            </example>

            <example>
                <title>Source XML: When source is having <sourcexml>emph</sourcexml> and
                        <sourcexml>PCDATA</sourcexml> under <sourcexml>heading/title</sourcexml>
                    than in that case the <sourcexml>emph</sourcexml> element get dropped from
                    target and its content along with the PCDATA will be put directly under
                        <targetxml>title</targetxml> element.</title>
                <codeblock> &lt;heading&gt; &lt;title&gt; &lt;emph
                    typestyle="it"&gt;R&lt;/emph&gt;(on the application of Green) v Police
                    Complaints Authority &lt;fnr fnrtoken="d30e128"
                    fntoken="d30e1108"&gt;13&lt;/fnr&gt; &lt;/title&gt; &lt;/heading&gt;
                </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;heading&gt; &lt;title&gt;R (on the application of Green) v Police
                    Complaints Authority &lt;footnote-ref anchoridref="d30e128"&gt; &lt;ref:anchor
                    id="d30e1108"/&gt; &lt;label&gt;13&lt;/label&gt; &lt;/footnote-ref&gt;
                    &lt;/title&gt; &lt;/heading&gt; </codeblock>
            </example>
            <section>
                <p><sourcexml>emph/sub/inlineobject</sourcexml> becomes
                        <targetxml>figure/ref:inlineobject</targetxml>.</p>
            </section>

            <section>
                <title>Changes</title>
                <p>2015-03-18: <ph id="change_20150318_AK">When <sourcexml>heading\title</sourcexml>
                        contains <sourcexml>emph</sourcexml> and <sourcexml>PCDATA</sourcexml> under
                        it then from target the emph tags will dropped and it's content along with
                        PCDATA content will be put directly under <targetxml>title</targetxml>
                        element . Applicable to UK09 only.</ph></p>
                <p>2014-10-22: <ph id="change_20141022_JCG">Added an example to explicitly show
                        child elements of <sourcexml>emph</sourcexml> being retained. (R4.5 Content
                        Issue List #1998)</ph></p>
                <p>2014-06-04: <ph id="change_20140604_JCG">Clarified instructions and added an
                        example to show multiple <sourcexml>emph</sourcexml> elements being
                        handled.</ph></p>
                <p>2013-02-26: <ph id="change_20130226_SP">Created.</ph></p>
            </section>
            <section>
                <title>Changes</title>
                <p>2016-04-01: <ph id="change_20160401_emph_MCJ_1">Added statement to clarify that
                        children of emph should be processed.</ph></p>
                <p>2013-01-08: <ph id="change_20130108_xxx">Added note for handling
                            <targetxml>emph/emph</targetxml> has the same
                            <targetxml>@typestyle</targetxml> value.</ph></p>
                <p>2012-02-28: <ph id="change_20120228_xxx">Added instructions for handling of
                            <sourcexml>case:judges/emph/@typestyle="smcaps"</sourcexml>.</ph></p>
                <p>2011-12-15: <ph id="change_20111215_xxx">Created.</ph></p>
            </section>

        </body>
    </dita:topic>



    <xsl:template match="emph" name="emph-generic">
        <xsl:choose>
            <!-- pass through when parent is title with heading parent or parent is emph with parent title with parent title-->
            <xsl:when test="(child::copyright and parent::disclaimer and $streamID = 'UK11DA')">
                <xsl:element name="emph">
                    <xsl:copy-of select="@typestyle"/>
                    <xsl:apply-templates select="@* | node() except copyright"/>
                </xsl:element>
            </xsl:when>
            <xsl:when test="parent::title/parent::heading[$streamID = 'UK07']">
                <xsl:element name="emph"
                    xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <xsl:copy-of select="@typestyle"/>
                    <xsl:apply-templates/>
                </xsl:element>
            </xsl:when>
            <!-- 2016-10-24 - MDS: Pass through when child outputting as URL in UK11DA -->
            <xsl:when test="parent::remotelink[$streamID = 'UK11DA']">
                <xsl:apply-templates select="node()"/>
            </xsl:when>

            <!-- JD: excluding the dropping of <emph> within title for streams to match DT output.  
                    			There is no instruction to remove <emph> from <title> in 
                    		 emph to emph (id-CCCC-10316)
                    		 title to title (id-CCCC-10479)
                    		-->
            <xsl:when
                test="
                    $streamID = ('AU11', 'NZ06', 'NZ08', 'NZ18', 'NZ11', 'NZ13', 'AU14') and (parent::title/parent::heading
                    | parent::emph/parent::title/parent::heading
                    | parent::title/parent::leg:heading
                    | parent::emph/parent::title/parent::leg:heading) and (not(preceding-sibling::text()) or not(following-sibling::text()))
                    ">
                <!-- not in CI, but match DT output: when parent emph is same, merge -->
                <xsl:choose>
                    <!-- pass through when there is a parent emph with the same @typestyle -->
                    <xsl:when test="@typestyle = parent::emph/@typestyle">
                        <xsl:apply-templates/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:element name="emph"
                            xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                            <xsl:copy-of select="@typestyle"/>
                            <xsl:apply-templates/>
                        </xsl:element>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:when>

            <xsl:when
                test="
                    (parent::title/parent::heading
                    | parent::emph/parent::title/parent::heading
                    | parent::title/parent::leg:heading
                    | parent::emph/parent::title/parent::leg:heading) and (not(preceding-sibling::text()) or not(following-sibling::text()))
                    ">
                <xsl:apply-templates/>
            </xsl:when>
            <!--skip over emphasis if only refpt at child -->
            <xsl:when
                test="refpt and not(normalize-space(string-join(text(), '')))[$streamID != 'CA10']">
                <!-- suppress -->
            </xsl:when>
            <xsl:when test="refpt and parent::h[$streamID = 'CA10']">
                <xsl:element name="emph">
                    <xsl:copy-of select="@typestyle"/>
                    <xsl:for-each select="node()">
                        <!-- there's no target for refpt here, strip it out but leave the txt content 
                                JL 20180212 Webstar 7113097 -->
                        <xsl:choose>
                            <xsl:when test="self::refpt">
                                <xsl:apply-templates select="text()"/>
                            </xsl:when>
                            <xsl:otherwise>
                                <xsl:apply-templates select="."/>
                            </xsl:otherwise>
                        </xsl:choose>
                    </xsl:for-each>
                </xsl:element>
            </xsl:when>
            <xsl:when test="@typestyle = parent::emph/@typestyle">
                <!-- pass through when there is a parent emph with the same @typestyle -->
                <xsl:apply-templates/>
            </xsl:when>
            <xsl:when test="child::inlineobject and not(parent::h) and $streamID = 'AU08'">
                <xsl:apply-templates/>
            </xsl:when>
            <!-- The handling for AU06 could be shareable but keeping as stream-specific until we have more testing. -->
            <!-- JD: 2017-07-19: tested with UK01 too (added); this appears to be working properly.  
                    			Note that the following 'when' drops text() that should be emphasized -->

            <xsl:when
                test="child::inlineobject and not(parent::h) and ($streamID = ('AU06', 'AU04', 'UK01', 'HK02'))">
                <!-- this attempts to allow the emphasis markup to be retained around some output but not around others. -->
                <!-- keep current emph node to get to later. -->
                <xsl:variable name="me" select="."/>
                <xsl:for-each-group select="node()"
                    group-adjacent="
                        if (self::inlineobject) then
                            0
                        else
                            1">
                    <xsl:choose>
                        <!-- anything here is not kept within emphasis. -->
                        <xsl:when test="current-grouping-key() = 0">
                            <xsl:apply-templates select="current-group()"/>
                        </xsl:when>
                        <!-- the otherwise condition allows the retention of the emphasis markup. -->
                        <xsl:otherwise>
                            <emph
                                xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                                <!-- build @typestyle using the input node's @typestyle. -->
                                <xsl:copy-of select="$me/@typestyle"/>
                                <xsl:apply-templates select="current-group()"/>
                            </emph>
                        </xsl:otherwise>
                    </xsl:choose>
                </xsl:for-each-group>
            </xsl:when>
            <!-- JD: Note that this template will drop any text() appearing in emph, as in "Declared takings (F)"  
                    		<emph typestyle="bf">Declared takings (F) 
                    		   <inlineobject type="image" mimetype="image/gif" filename="VATC_19761_1.gif"/>
                    	  </emph>
                    		-->
            <xsl:when test="child::inlineobject and not(parent::h) and not($streamID = 'UK09')">
                <!-- AS: for emph/inlineobject in DT GDS it's emph/ref:inlineobject but in CI it's figure/ref:inlineobeject -->
                <xsl:element name="figure"
                    xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <xsl:apply-templates/>
                </xsl:element>
            </xsl:when>
            <xsl:when test="child::sub/child::inlineobject">
                <xsl:apply-templates/>
            </xsl:when>
            <xsl:when test="ancestor::ci:content[$streamID = 'CA02DS']">
                <xsl:apply-templates/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:element name="emph"
                    xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <xsl:copy-of select="@typestyle"/>
                    <xsl:apply-templates
                        select="child::node() except child::refpt[ancestor::h][$streamID = 'AU04']"
                    />
                </xsl:element>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <!--suppress to get rid of errors as @typestyle already handled. JL -->
    <xsl:template match="emph/@typestyle"/>


    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="common_rosetta_endnote">
        <title><sourcexml>endnote</sourcexml> to <targetxml>endnote</targetxml>
            <lnpid>id-CCCC-10317</lnpid></title>
        <body>
            <section>
                <title>Instructions <i>[common element]</i><b>Handling of Footnote references and
                        Endnotes</b></title>
                <p> Whenever <sourcexml>refpt</sourcexml> and <sourcexml>remotelink</sourcexml>
                    occurs as adjacent siblings, this indicates they are footnote refernces and are
                    linked to endnotes within the document or outside the document. <ol>
                        <li> Check for the <sourcexml>remotelink/@refpt</sourcexml> value, if it is
                            "*_FN#", then create a <targetxml>footnote-ref</targetxml>. If it is
                            "*_FN#-R" then create the <targetxml>footnote</targetxml> as child of
                                <targetxml>endnotes</targetxml>. </li>
                        <li> The <sourcexml>l</sourcexml> around endnotes is converted to
                                <targetxml>endnotes</targetxml> the <sourcexml>li</sourcexml> around
                            a endnote is removed when <sourcexml>refpt</sourcexml> and
                                <sourcexml>remotelink</sourcexml> is converted to
                                <targetxml>footnote/@role="endnote"</targetxml>. </li>
                    </ol>
                    <note>endnote references can be found at any place in the same document or in
                        another document.</note>
                    <note>We are only converting <sourcexml>refpt</sourcexml> and
                            <sourcexml>remotelink</sourcexml> to
                            <targetxml>footnote/@role="endnote"</targetxml> within
                            <targetxml>primlaw:level/@leveltype="endnote"</targetxml> when they
                        occurs as adjacent siblings.</note>
                    <note>footnote-ref/@reftype will be set to "global" if refpt/@id="ext".</note>
                </p>
                <p> The attribute value's for <sourcexml>refpt/@id</sourcexml> and
                        <sourcexml>remotelink/@refpt</sourcexml> are duplicated within the source
                    document i.e., <ol>
                        <li>
                            <sourcexml>refpt/@id</sourcexml> (footnote refernce) and
                                <sourcexml>remotelink/@refpt</sourcexml> (endnote) will be same. and </li>
                        <li>
                            <sourcexml>remotelink/@refpt</sourcexml> (footnote refernces) and
                                <sourcexml>refpt/@id</sourcexml> (endnote) will be same. </li>
                    </ol>
                    <note>The endnote and associated endnote references may be in different
                        documents.</note>
                </p>
                <p>
                    <b>Footnote-ref:</b> Every occurance of <sourcexml>refpt</sourcexml> and
                        <sourcexml>remotelink</sourcexml> will become
                        <targetxml>footnote-ref</targetxml> in output. Populate
                        <targetxml>footnote-ref</targetxml> as follows: <ul>
                        <li><targetxml>footnote-ref/@role</targetxml> will always be set to
                                <targetxml>"endnote"</targetxml>.</li>
                        <li><sourcexml>remotelink/@refpt</sourcexml> becomes
                                <targetxml>footnote-ref/@anchoridref</targetxml>.</li>
                        <li><sourcexml>refpt/@id</sourcexml> becomes
                                <targetxml>footnote-ref/ref:anchor/@id</targetxml>.</li>
                        <li><sourcexml>remotelink/sup</sourcexml> becomes
                                <targetxml>footnote-ref/label</targetxml>.</li>
                        <li><sourcexml>remotelink</sourcexml> attributes are converted as follows:
                                <p> Create
                                    <targetxml>footnote:ref/ref:locator/ref:locator-key</targetxml>
                                with attributes and children as follows: <ul>
                                    <li>If <sourcexml>@remotekey1="DOC-ID"</sourcexml> then <ul>
                                            <li><targetxml>ref:key-name/@name</targetxml> will have
                                                the value "DOC-ID".</li>
                                            <li><targetxml>key-value/@value</targetxml> will be the
                                                value of <sourcexml>@dpsi</sourcexml> followed by
                                                hyphen and concatenated with
                                                  <sourcexml>@refpt</sourcexml> or
                                                  <sourcexml>@remotekey2</sourcexml>, which ever is
                                                present (if both are present, use
                                                  <sourcexml>@remotekey2</sourcexml>).</li>
                                        </ul></li>
                                    <li>If <sourcexml>@remotekey1="REFPTID"</sourcexml> then <ul>
                                            <li><targetxml>ref:key-name/@name</targetxml> will have
                                                the value "DOC-ID".</li>
                                            <li><targetxml>ref:key-value/@value</targetxml> will be
                                                the value of <sourcexml>@dpsi</sourcexml> followed
                                                by hyphen and concatenated with
                                                  <sourcexml>@docidref</sourcexml>.</li>
                                            <li>Create
                                                  <targetxml>ref:locator/@anchoridref</targetxml>
                                                with value from <sourcexml>@refpt</sourcexml> or
                                                  <sourcexml>@remotekey2</sourcexml>, which ever is
                                                present (if both are present, use
                                                  <sourcexml>@refpt</sourcexml>).</li>
                                        </ul></li>
                                </ul>
                            </p>
                        </li>
                    </ul>
                </p>
                <p>
                    <b>Endnote:</b> Every occurance of <sourcexml>refpt</sourcexml> and
                        <sourcexml>remotelink</sourcexml> will become
                        <targetxml>footnote</targetxml> as a child of
                        <targetxml>endnotes</targetxml> which is the container element for all the
                    converted endnotes. Populate each <targetxml>footnote</targetxml> created within
                        <targetxml>endnotes</targetxml> as follows: <ul>
                        <li><targetxml>footnote/@role</targetxml> will always be set to
                            "endnote".</li>
                        <li><sourcexml>refpt/@id</sourcexml> becomes
                                <targetxml>footnote/ref:anchor/@id</targetxml>.</li>
                        <li><sourcexml>remotelink/sup</sourcexml> becomes
                                <targetxml>footnote/label</targetxml>.</li>
                        <li><sourcexml>remotelink/sub</sourcexml> becomes
                                <targetxml>footnote/label</targetxml>.</li>
                        <li><sourcexml>remotelink</sourcexml> attributes are converted as follows:
                                <p> Create
                                    <targetxml>footnote/ref:returnreference/ref:locator/ref:locator-key</targetxml>
                                with attributes and children as follows: <ul>
                                    <li>If <sourcexml>@remotekey1="DOC-ID"</sourcexml> then <ul>
                                            <li><targetxml>ref:key-name/@name</targetxml> will have
                                                the value "DOC-ID".</li>
                                            <li><targetxml>key-value/@value</targetxml> will be the
                                                value of <sourcexml>@dpsi</sourcexml> followed by
                                                hyphen and concatenated with
                                                  <sourcexml>@refpt</sourcexml> or
                                                  <sourcexml>@remotekey2</sourcexml>, which ever is
                                                present (if both are present, use
                                                  <sourcexml>@remotekey2</sourcexml>).</li>
                                        </ul></li>
                                    <li>If <sourcexml>@remotekey1="REFPTID"</sourcexml> then <ul>
                                            <li><targetxml>ref:key-name/@name</targetxml> will have
                                                the value "DOC-ID".</li>
                                            <li><targetxml>ref:key-value/@value</targetxml> will be
                                                the value of <sourcexml>@dpsi</sourcexml> followed
                                                by hyphen and concatenated with
                                                  <sourcexml>@docidref</sourcexml>.</li>
                                            <li>Create
                                                  <targetxml>ref:locator/@anchoridref</targetxml>
                                                with value from <sourcexml>@refpt</sourcexml> or
                                                  <sourcexml>@remotekey2</sourcexml>, which ever is
                                                present (if both are present, use
                                                  <sourcexml>@refpt</sourcexml>).</li>
                                        </ul></li>
                                </ul>
                            </p>
                            <note>If <sourcexml>remotelink/@dpsi</sourcexml> is not present, use
                                value from <sourcexml>docinfo:dpsi/@id-string</sourcexml> or capture
                                value from the LBU manifest file.</note>
                            <note><targetxml>ref:locator/@anchoridref</targetxml> that begins with a
                                number must have an underscore added at start. Also apply other
                                identifier data type format as used for
                                    <targetxml>xml:id</targetxml> and
                                    <targetxml>ref:anchor/@id</targetxml> (e.g. change colon to
                                underscore). Refer to the section titled "Identifiers to ID Data
                                Type - Handling Pattern Restrictions", if that section exists in
                                this CI.</note>
                        </li>
                    </ul>
                    <note>All elements between the <sourcexml>l</sourcexml> and the nearest ancestor
                            <sourcexml>leg:level</sourcexml> are not converted as usual. For
                        example,
                            <sourcexml>leg:endmatter/leg:level/leg:level-vrnt/leg:levelbody/leg:bodytext/l/li</sourcexml>
                        becomes <targetxml>primlaw:level/endnotes/footnote</targetxml> with
                        appropriate attributes. </note>
                    <note>For the Xpath <sourcexml>leg:bodytext/glp:note/l/li</sourcexml>, all
                        elements between <sourcexml>l</sourcexml> and the nearest ancestor
                            <sourcexml>glp:note</sourcexml> are not converted as usual and the
                        target <targetxml>endnote</targetxml> will be sibling of
                            <targetxml>primlaw:bodytext</targetxml>. The target Xpath will be
                            <targetxml>primlaw:level/endnotes/footnote</targetxml>. Refer below
                        source XML 3 and target XML 3.</note>
                </p>
            </section>
            <example>
                <title>Source XML 1</title>
                <codeblock> &lt;!--Rosetta AU source markup for a reference to an endnote
                    VIC_ACT_6231.xml--&gt; &lt;row&gt; &lt;entry colname="c1" align="left"&gt;Pt 3
                    Div. 1 Subdiv. (12) (Heading and ss 390–396) &lt;/entry&gt; &lt;entry
                    colname="c2" align="left"&gt;repealed. &lt;emph
                    typestyle="bf"&gt;&lt;sup&gt;,&lt;/sup&gt;&lt;/emph&gt; &lt;!--
                    Footnote-refernce-start --&gt; &lt;refpt id="VIC_ACT_6231_FN32-R"
                    type="ext"/&gt; &lt;remotelink remotekey1="REFPTID" service="DOC-ID" dpsi="0062"
                    docidref="ABCD_5641" refpt="VIC_ACT_6231_FN32"&gt; &lt;sup&gt;32&lt;/sup&gt;
                    &lt;/remotelink&gt; &lt;!-- Footnote-reference-end --&gt; &lt;emph
                    typestyle="bf"&gt;&lt;sup&gt;,&lt;/sup&gt;&lt;/emph&gt; &lt;/entry&gt;
                    &lt;/row&gt; ... &lt;leg:endmatter&gt; &lt;leg:level&gt; &lt;leg:level-vrnt&gt;
                    &lt;leg:levelbody&gt; &lt;leg:bodytext&gt; &lt;!--Endnote-start --&gt; &lt;l&gt;
                    &lt;li&gt; &lt;lilabel&gt; &lt;refpt id="VIC_ACT_6231_FN32" type="ext"/&gt;
                    &lt;remotelink remotekey1="REFPTID" service="DOC-ID" dpsi="0062"
                    docidref="ABCD_5641"
                    refpt="VIC_ACT_6231_FN32-R"&gt;&lt;sup&gt;32&lt;/sup&gt;&lt;/remotelink&gt;
                    &lt;/lilabel&gt; &lt;p&gt; &lt;text align="left"&gt;...&lt;/text&gt; &lt;/p&gt;
                    &lt;/li&gt; &lt;!-- ... --&gt; &lt;/l&gt; &lt;!--Endnote-end --&gt;
                    &lt;/leg:bodytext&gt; &lt;/leg:levelbody&gt; &lt;/leg:level-vrnt&gt;
                    &lt;/leg:level&gt; &lt;/leg:endmatter&gt; </codeblock>
            </example>
            <example>
                <title>Target XML 1</title>
                <codeblock> &lt;!-- footnote-ref/@role will always be set to "endnote"
                    remotelink/@refpt becomes footnote-ref/@anchoridref refpt/@id becomes
                    footnote-ref/ref:anchor/@id remotelink/sub becomes footnote-ref/label --&gt;
                    &lt;row&gt; &lt;entry colname="c1" align="left"&gt;Pt 3 Div. 1 Subdiv. (12)
                    (Heading and ss 390–396) &lt;/entry&gt; &lt;entry colname="c2"
                    align="left"&gt;repealed. &lt;emph
                    typestyle="bf"&gt;&lt;sup&gt;,&lt;/sup&gt;&lt;/emph&gt; &lt;!--
                    Footnote-reference-start --&gt; &lt;footnote-ref role="endnote"
                    anchoridref="VIC_ACT_6231_FN32"&gt; &lt;ref:anchor
                    id="_0062-VIC_ACT_6231_FN32-R" anchortype="global"/&gt; &lt;ref:locator
                    anchoridref="VIC_ACT_6231_FN32"&gt; &lt;ref:locator-key&gt; &lt;ref:key-name
                    name="DOC-ID"/&gt; &lt;ref:key-value value="0062-ABCD_5641"/&gt;
                    &lt;/ref:locator-key&gt; &lt;/ref:locator&gt; &lt;label&gt;32&lt;/label&gt;
                    &lt;/footnote-ref&gt; &lt;!-- Footnote-reference-end --&gt; &lt;emph
                    typestyle="bf"&gt;&lt;sup&gt;,&lt;/sup&gt;&lt;/emph&gt; &lt;/entry&gt;
                    &lt;/row&gt; &lt;!-- ... endnotes/footnote/@role will always set to "endnote"
                    refpt/@id becomes footnote/ref:anchor/@id remotelink/sub becomes footnote/label
                    --&gt; &lt;!-- Endnote-start--&gt; &lt;primlaw:level leveltype="endnote"&gt;
                    &lt;endnotes&gt; &lt;footnote role="endnote"&gt; &lt;ref:returnreference&gt;
                    &lt;ref:locator anchoridref="VIC_ACT_6231_FN32-R"&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="DOC-ID"/&gt; &lt;ref:key-value
                    value="0062-ABCD_5641"/&gt; &lt;/ref:locator-key&gt; &lt;/ref:locator&gt;
                    &lt;/ref:returnreference&gt; &lt;ref:anchor id="0062-VIC_ACT_6231_FN32"
                    anchortype="global"/&gt; &lt;label&gt;32&lt;/label&gt; &lt;bodytext&gt;
                    &lt;p&gt; &lt;text align="left"&gt;...&lt;/text&gt; &lt;/p&gt; &lt;/bodytext&gt;
                    &lt;/footnote&gt; &lt;!-- rest of footnote@role='endnote' --&gt;
                    &lt;/endnotes&gt; &lt;/primlaw:level&gt; &lt;!--Endnote-end --&gt; </codeblock>
            </example>
            <example>
                <title>Source XML 2</title>
                <codeblock> &lt;!--Rosetta AU source markup for a reference to an endnote
                    VIC_ACT_9595.xml--&gt; &lt;!-- Footnote-refernce-start --&gt; &lt;title
                    align="left" searchtype="SECT-TITLE"&gt; &lt;emph typestyle="bf"&gt;&lt;emph
                    typestyle="it"&gt;Constitution of Board&lt;/emph&gt;&lt;/emph&gt;&lt;refpt
                    id="VIC_ACT_9595_FN1-R" type="ext"/&gt;&lt;remotelink remotekey1="REFPTID"
                    service="DOC-ID"
                    refpt="VIC_ACT_9595_FN1"&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/remotelink&gt;&amp;#x00A0;
                    &lt;lnlink status="valid" service="SEARCH" scope="All Subscribed Australian
                    Cases and Commentary" scope-protocol="combined-source-name"&gt;
                    &lt;marker&gt;&lt;inlineobject width="21px" type="image" filename="mb.gif"
                    attachment="web-server" alttext="click to find cases &amp;amp; commentary"/&gt;
                    &lt;/marker&gt; &lt;api-params&gt; &lt;param name="expressSearch"
                    value="true"/&gt;&lt;param name="searchString" value="COUNCIL OF ADULT EDUCATION
                    ACT 1981 w/s LEG-REF(6)"/&gt;&lt;/api-params&gt; &lt;/lnlink&gt; &lt;/title&gt;
                    &lt;!-- Footnote-reference-end --&gt; &lt;!-- ... --&gt; &lt;leg:level
                    id="VIC_ACT_9595_NOTESPROV4"&gt; &lt;leg:level-vrnt leveltype="clause"
                    searchtype="LEGISLATION" subdoc="true" toc-caption="4. List of Annotations"&gt;
                    &lt;leg:heading&gt; &lt;!-- ... --&gt; &lt;/leg:heading&gt;
                    &lt;leg:levelbody&gt; &lt;leg:bodytext&gt; &lt;table&gt; &lt;tgroup cols="2"&gt;
                    &lt;colspec colwidth="3*" colname="c1" colnum="1"/&gt; &lt;colspec
                    colwidth="12*" colname="c2" colnum="2"/&gt; &lt;tbody&gt; &lt;row&gt; &lt;entry
                    colname="c1"&gt;S. 2 def. of &amp;quot;adult, community and further
                    education&amp;quot;&lt;/entry&gt; &lt;entry colname="c2"&gt;inserted by No.
                    91/1991 s. 44(a).&lt;/entry&gt; &lt;!--... --&gt; &lt;/tbody&gt; &lt;/tgroup&gt;
                    &lt;/table&gt; &lt;!--Endnote-start --&gt; &lt;l&gt;
                    &lt;li&gt;&lt;lilabel&gt;&lt;refpt id="VIC_ACT_9595_FN1"
                    type="ext"/&gt;&lt;remotelink remotekey1="REFPTID" service="DOC-ID"
                    refpt="VIC_ACT_9595_FN1-R"&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/remotelink&gt;&lt;/lilabel&gt;
                    &lt;p&gt;&lt;text align="left"&gt;S. 6: Section&amp;#x00A0;50 of the &lt;emph
                    typestyle="bf"&gt;Adult, Community and Further Education Act 1991&lt;/emph&gt;,
                    No. 91/1991, provides as follows:&lt;/text&gt;&lt;/p&gt; &lt;p&gt;&lt;text
                    align="left"&gt;&lt;emph typestyle="bf"&gt;'50. &lt;emph
                    typestyle="it"&gt;Transitional provisions for the Council of Adult
                    Education&lt;/emph&gt;&lt;/emph&gt;&lt;/text&gt;&lt;/p&gt; &lt;/li&gt; &lt;!--
                    ... --&gt; &lt;/l&gt; &lt;!--Endnote-end --&gt; &lt;/leg:bodytext&gt;
                    &lt;/leg:levelbody&gt; &lt;/leg:level-vrnt&gt; &lt;/leg:level&gt; </codeblock>
            </example>
            <example>
                <title>Target XML 2</title>
                <codeblock> &lt;!-- footnote-ref/@role will always be set to "endnote"
                    remotelink/@refpt becomes footnote-ref/@anchoridref refpt/@id becomes
                    footnote-ref/ref:anchor/@id remotelink/sub becomes footnote-ref/label --&gt;
                    &lt;!-- Footnote-reference-start --&gt; &lt;title align="left"&gt; &lt;emph
                    typestyle="bf"&gt;&lt;emph typestyle="it"&gt;Constitution of
                    Board&lt;/emph&gt;&lt;/emph&gt; &lt;footnote-ref role="endnote"
                    anchoridref="VIC_ACT_9595_FN1"&gt; &lt;ref:anchor id="VIC_ACT_9595_FN1-R"
                    anchortype="global"/&gt; &lt;ref:locator anchoridref="VIC_ACT_9595_FN1"&gt;
                    &lt;ref:locator-key&gt; &lt;ref:key-name name="DOC-ID"/&gt; &lt;ref:key-value
                    value="0062-ABCD_1234"/&gt; &lt;/ref:locator-key&gt; &lt;/ref:locator&gt;
                    &lt;label&gt;1&lt;/label&gt; &lt;/footnote-ref&gt;&amp;#x00A0; &lt;/title&gt;
                    &lt;!-- Footnote-reference-end --&gt; &lt;!-- ... endnotes/footnote/@role will
                    always set to "endnote" refpt/@id becomes footnote/ref:anchor/@id remotelink/sub
                    becomes footnote/label --&gt; &lt;primlaw:level xml:id="VIC_ACT_9595_NOTESPROV4"
                    leveltype="clause" includeintoc="true" alternatetoccaption="4. List of
                    Annotations"&gt; &lt;heading&gt; &lt;!-- ... --&gt; &lt;/heading&gt;
                    &lt;primlaw:bodytext&gt; &lt;table&gt; &lt;tgroup cols="2"&gt; &lt;colspec
                    colwidth="3*" colname="c1" colnum="1"/&gt; &lt;colspec colwidth="12*"
                    colname="c2" colnum="2"/&gt; &lt;tbody&gt; &lt;row&gt;&lt;entry
                    colname="c1"&gt;S. 2 def. of &amp;quot;adult, community and further
                    education&amp;quot;&lt;/entry&gt;&lt;entry colname="c2"&gt;inserted by No.
                    91/1991 s. 44(a).&lt;/entry&gt; &lt;!--... --&gt; &lt;/tbody&gt; &lt;/tgroup&gt;
                    &lt;/table&gt; &lt;/primlaw:bodytext&gt; &lt;!-- Endnote-start--&gt;
                    &lt;endnotes&gt; &lt;footnote role="endnote"&gt; &lt;ref:returnreference&gt;
                    &lt;ref:locator anchoridref="VIC_ACT_9595_FN1-R"/&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="DOC-ID"/&gt; &lt;ref:key-value
                    value="0062-ABCD_1234"/&gt; &lt;/ref:locator-key&gt; &lt;/ref:locator&gt;
                    &lt;/ref:returnreference&gt; &lt;ref:anchor id="0062-VIC_ACT_9595_FN1"
                    anchortype="global"/&gt; &lt;label&gt;1&lt;/label&gt; &lt;bodytext&gt;
                    &lt;p&gt;&lt;text align="left"&gt;S. 6: Section&amp;#x00A0;50 of the &lt;emph
                    typestyle="bf"&gt;Adult, Community and Further Education Act 1991&lt;/emph&gt;,
                    No. 91/1991, provides as follows:&lt;/text&gt;&lt;/p&gt; &lt;p&gt;&lt;text
                    align="left"&gt;&lt;emph typestyle="bf"&gt;'50. &lt;emph
                    typestyle="it"&gt;Transitional provisions for the Council of Adult
                    Education&lt;/emph&gt;&lt;/emph&gt;&lt;/text&gt;&lt;/p&gt; &lt;/bodytext&gt;
                    &lt;/footnote&gt; &lt;!--rest of footnote@role=?endnote? --&gt;
                    &lt;/endnotes&gt; &lt;!--Endnote-end --&gt; &lt;/primlaw:level&gt; </codeblock>
            </example>
            <example>
                <title>Source XML 3</title>
                <codeblock> &lt;!--Rosetta AU source markup for a reference to an endnote
                    AUS-0065-20130614133539_VIC_REG_2012-14210020.xml--&gt; &lt;leg:level
                    id="VIC_REG_2012-142_PROV4"&gt; - &lt;leg:level-vrnt searchtype="LEGISLATION"
                    subdoc="true" leveltype="reg" toc-caption="4 Principal Rules"&gt; -
                    &lt;leg:heading&gt; - &lt;desig searchtype="REG-NUM"&gt; - &lt;designum&gt;
                    &lt;refpt id="VIC_REG_2012-142_PROV4" type="ext" /&gt; &lt;emph
                    typestyle="bf"&gt;4&lt;/emph&gt; &lt;/designum&gt; &lt;/desig&gt; - &lt;title
                    align="left" searchtype="REG-TITLE"&gt; &lt;emph typestyle="bf"&gt;Principal
                    Rules&lt;/emph&gt; &lt;/title&gt; &lt;/leg:heading&gt; - &lt;leg:levelbody&gt; -
                    &lt;leg:bodytext&gt; - &lt;p&gt; - &lt;text align="left"&gt; In these Rules, the
                    Supreme Court (General Civil Procedure) Rules 2005 &lt;!--
                    Footnote-refernce-start --&gt; &lt;refpt id="VIC_REG_2012-142_FN1-R" type="ext"
                    /&gt; - &lt;remotelink remotekey1="REFPTID" service="DOC-ID"
                    refpt="VIC_REG_2012-142_FN1" docidref="VIC_REG_2012-142_BODY"&gt;
                    &lt;sup&gt;1&lt;/sup&gt; &lt;/remotelink&gt; &lt;!-- Footnote-refernce-end
                    --&gt; are called the Principal Rules. &lt;/text&gt; &lt;/p&gt; -
                    &lt;glp:note&gt; &lt;!--Endnote-start --&gt; - &lt;l&gt; - &lt;li&gt; -
                    &lt;lilabel&gt; &lt;refpt id="VIC_REG_2012-142_FN1" type="ext" /&gt; -
                    &lt;remotelink remotekey1="REFPTID" service="DOC-ID"
                    refpt="VIC_REG_2012-142_FN1-R" docidref="VIC_REG_2012-142_BODY"&gt;
                    &lt;sup&gt;1&lt;/sup&gt; &lt;/remotelink&gt; &lt;/lilabel&gt; - &lt;p&gt;
                    &lt;text align="left"&gt;Rule 4: S.R. No. 148/2005. Reprint No. 4 as at 17
                    September 2012. Reprinted to S.R. No. 97/2012 and subsequently amended by S.R.
                    Nos 39/2012 and 121/2012.&lt;/text&gt; &lt;/p&gt; &lt;/li&gt; &lt;/l&gt;
                    &lt;!--Endnote-end --&gt; &lt;/glp:note&gt; &lt;/leg:bodytext&gt;
                    &lt;/leg:levelbody&gt; &lt;/leg:level-vrnt&gt; &lt;/leg:level&gt; </codeblock>
            </example>
            <example>
                <title>Target XML 3</title>
                <codeblock> &lt;!-- footnote-ref/@role will always be set to "endnote"
                    remotelink/@refpt becomes footnote-ref/@anchoridref refpt/@id becomes
                    footnote-ref/ref:anchor/@id remotelink/sub becomes footnote-ref/label --&gt;
                    &lt;primlaw:level includeintoc="true" alternatetoccaption="4 Principal Rules"
                    leveltype="regulation"&gt; &lt;ref:anchor id="VIC_REG_2012-142_PROV4"
                    anchortype="global"/&gt; &lt;heading&gt; &lt;desig&gt; &lt;emph
                    typestyle="bf"&gt;4&lt;/emph&gt; &lt;/desig&gt; &lt;title align="left"&gt;
                    &lt;emph typestyle="bf"&gt;Principal Rules&lt;/emph&gt; &lt;/title&gt;
                    &lt;/heading&gt; &lt;primlaw:bodytext&gt; &lt;p align="left"&gt; &lt;text&gt;In
                    these Rules, the Supreme Court (General Civil Procedure) Rules 2005 &lt;!--
                    Footnote-refernce-start --&gt; &lt;footnote-ref
                    anchoridref="VIC_REG_2012-142_FN1" role="endnote"&gt; &lt;ref:anchor
                    id="VIC_REG_2012-142_FN1-R"/&gt; &lt;ref:locator
                    anchoridref="VIC_REG_2012-142_FN1"&gt; &lt;ref:locator-key&gt;&lt;ref:key-name
                    name="DOC-ID"/&gt; &lt;ref:key-value value="0065-VIC_REG_2012-142_BODY" /&gt;
                    &lt;/ref:locator-key&gt; &lt;/ref:locator&gt; &lt;label&gt;1&lt;/label&gt;
                    &lt;/footnote-ref&gt; &lt;!-- Footnote-refernce-end --&gt; are called the
                    Principal Rules.&lt;/text&gt; &lt;/p&gt; &lt;/primlaw:bodytext&gt; &lt;!--
                    Endnote-start--&gt; &lt;endnotes&gt; &lt;footnote role="endnote"&gt;
                    &lt;ref:returnreference&gt; &lt;ref:locator
                    anchoridref="VIC_REG_2012142_FN1R"/&gt; &lt;ref:locator-key&gt; &lt;ref:key-name
                    name="DOC-ID"/&gt; &lt;ref:key-value value="0065-VIC_REG_2012142_BODY"/&gt;
                    &lt;/ref:locator-key&gt; &lt;/ref:locator&gt; &lt;/ref:returnreference&gt;
                    &lt;ref:anchor id="0065-VIC_REG_2012142_FN1" anchortype="global"/&gt;
                    &lt;label&gt;1&lt;/label&gt; &lt;bodytext&gt; &lt;p&gt; &lt;text
                    align="left"&gt;Rule 4: S.R. No. 148/2005. Reprint No. 4 as at 17 September
                    2012. Reprinted to S.R. No. 97/2012 and subsequently amended by S.R. Nos 39/2012
                    and 121/2012.&lt;/text&gt; &lt;/p&gt; &lt;/bodytext&gt; &lt;/footnote&gt;
                    &lt;/endnotes&gt; &lt;!-- Endnote-end--&gt; &lt;/primlaw:level&gt; </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2016-11-16: <ph id="change_20161116_snb">Added to note regarding applying any
                        rules related to <targetxml>@anchoridref</targetxml>, referring specifically
                        to section for "Identifiers to ID Data Type - Handling Pattern
                        Restrictions".</ph>
                </p>
                <p>2012-02-15: Created. </p>
                <p>2012-09-05: Added to note for <targetxml>ref:locator/@anchoridref</targetxml>
                    that begins with a number... Also apply other identifier data type format as
                    used for <targetxml>xml:id</targetxml> and <targetxml>ref:anchor/@id</targetxml>
                    (e.g. change colon to underscore).</p>
                <p>2012-10-03: Added another example for endnote handling.</p>
                <p>2013-10-07: <ph id="change_20131007_VV">Instruction and example for added for the
                        Xpath <sourcexml>leg:bodytext/glp:note/l/li</sourcexml> related to
                            <targetxml>endnote</targetxml> handling. WebTeam # is 238790.</ph></p>
                <p>2013-12-18: <ph id="change_20131218_brt">Instruction added to convert
                            <sourcexml>remotelink/@refpt</sourcexml> to
                            <targetxml>footnote-ref/@anchoridref</targetxml>. WebTeam #5158742 -
                        AU04. Applies generally to all LBUs and streams.</ph></p>

            </section>



        </body>
    </dita:topic>
    <!--  @@@ This file has been autogenerated (although the DITA file already has embedded XSLT).  Remove this comment after manual development complete!  (also remove the embedded XSLT within the DITA above) @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_endnote-LxAdv-endnote.dita  -->

    <!-- JL 20171109: white-space proofed the test, with fallback to traditional remotelink processing.
    Also tightened up the criteria for refpt and remotelink matching to include the @refpt FN string,
    so the processing for refpt or remotelink will resort to default handling if all the criteria are not met.
    This fixes a few production webstars 
    -->
    <xsl:template
        match="
            refpt[
            following-sibling::node()[1][self::remotelink[matches(@refpt, '^.*FN(\d+)\-R$') or matches(@refpt, '^.*FN(\d+)$')]]
            or
            preceding-sibling::node()[1][self::remotelink[matches(@refpt, '^.*FN(\d+)\-R$') or matches(@refpt, '^.*FN(\d+)$')]]
            or
            preceding-sibling::node()[1][self::text()[matches(., '^\s+$')]
            [preceding-sibling::node()[1][self::remotelink[matches(@refpt, '^.*FN(\d+)\-R$') or matches(@refpt, '^.*FN(\d+)$')]]]]
            or
            following-sibling::node()[1][self::text()[matches(., '^\s+$')]
            [following-sibling::node()[1][self::remotelink[matches(@refpt, '^.*FN(\d+)\-R$') or matches(@refpt, '^.*FN(\d+)$')]]]]
            ]"
        priority="30">
        <!-- do nothing -->
    </xsl:template>
    <!-- note: this logic will need to be merged with "remotelink" 
                
                JL made it node rather than element because there can be intervening text, and we don't want to do
                this with intervening text.-->

    <xsl:template
        match="
            remotelink[matches(@refpt, '^.*FN(\d+)\-R$') or matches(@refpt, '^.*FN(\d+)$')]
            [preceding-sibling::node()[1][self::refpt]
            or
            following-sibling::node()[1][self::refpt]
            or
            preceding-sibling::node()[1][self::text()[matches(., '^\s+$')][preceding-sibling::node()[1][self::refpt]]]
            or
            following-sibling::node()[1][self::text()[matches(., '^\s+$')][following-sibling::node()[1][self::refpt]]]
            ]"
        priority="30">
        <xsl:choose>
            <xsl:when test="matches(@refpt, '^.*FN(\d+)\-R$')">
                <xsl:apply-templates select="." mode="endnote"/>
            </xsl:when>
            <xsl:when test="matches(@refpt, '^.*FN(\d+)$')">
                <xsl:apply-templates select="." mode="footnoteref"/>
            </xsl:when>
            <xsl:otherwise>
                <!-- this should now never happen -->
                <xsl:call-template name="outputErrorMessage">
                    <xsl:with-param name="messageText" as="xs:string"
                        select="'remotelink/@refpt does not meet criteria for endnote or footnoteref'"/>
                    <xsl:with-param name="errorType" as="xs:string" select="'ICCE'"/>
                    <xsl:with-param name="errorCode" as="xs:string*" select="'TBD'"/>
                    <xsl:with-param name="context" as="xs:string">
                        <xsl:value-of select="base-uri()"/>
                    </xsl:with-param>
                </xsl:call-template>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>


    <xsl:template match="remotelink" mode="footnoteref">
        <footnote-ref xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <xsl:attribute name="role" select="'endnote'"/>
            <xsl:attribute name="anchoridref">
                <xsl:for-each select="@refpt">
                    <xsl:call-template name="normalizeIdString"/>
                </xsl:for-each>
            </xsl:attribute>
            <xsl:for-each
                select="preceding-sibling::node()[1][self::refpt] | following-sibling::node()[1][self::refpt]">
                <xsl:call-template name="refpt-generic"/>
            </xsl:for-each>
            <xsl:call-template name="locator"/>
            <xsl:apply-templates select="sup" mode="footnoteref"/>
        </footnote-ref>
    </xsl:template>


    <xsl:template name="locator">
        <ref:locator>
            <xsl:for-each
                select="
                    if (@refpt) then
                        @refpt
                    else
                        @remotekey2">
                <xsl:attribute name="anchoridref">
                    <xsl:call-template name="normalizeIdString"/>
                </xsl:attribute>
            </xsl:for-each>
            <ref:locator-key>
                <ref:key-name name="DOC-ID"/>
                <ref:key-value>
                    <xsl:attribute name="value">
                        <xsl:choose>
                            <xsl:when test="@dpsi">
                                <xsl:value-of select="@dpsi"/>
                            </xsl:when>
                            <xsl:when test="//docinfo:dpsi/@id-string">
                                <xsl:value-of select="//docinfo:dpsi/@id-string"/>
                            </xsl:when>
                            <xsl:otherwise>
                                <xsl:value-of select="$dpsi"/>
                            </xsl:otherwise>
                        </xsl:choose>
                        <xsl:text>-</xsl:text>
                        <xsl:choose>
                            <xsl:when test="@remotekey1 = 'DOC-ID' or @remotekey1 = 'DOCID'">
                                <xsl:value-of
                                    select="
                                        if (@remotekey2) then
                                            @remotekey2
                                        else
                                            @refpt"
                                />
                            </xsl:when>
                            <xsl:when test="@remotekey1 = 'REFPTID' or @remotekey1 = 'REFPT'">
                                <xsl:choose>
                                    <xsl:when test="@docidref">
                                        <xsl:value-of select="@docidref"/>
                                    </xsl:when>
                                    <xsl:when test="@status = ('unval', 'invalid')"
                                        ><!-- no @docidref however status is unvalidated or invalid so don't throw error  --></xsl:when>
                                    <xsl:otherwise>
                                        <!-- This should be an error message -->
                                        <xsl:text>XXXX</xsl:text>
                                        <xsl:call-template name="outputErrorMessage">
                                            <xsl:with-param name="messageText" as="xs:string"
                                                select="'remotelink/@docidref is missing and link cannot be correctly completed'"/>
                                            <xsl:with-param name="errorType" as="xs:string"
                                                select="'ICCE'"/>
                                            <xsl:with-param name="errorCode" as="xs:string*"
                                                select="'403'"/>
                                            <xsl:with-param name="context" as="xs:string">
                                                <xsl:value-of select="base-uri()"/>
                                            </xsl:with-param>
                                        </xsl:call-template>
                                    </xsl:otherwise>
                                </xsl:choose>
                            </xsl:when>
                        </xsl:choose>
                    </xsl:attribute>
                </ref:key-value>
            </ref:locator-key>
        </ref:locator>
    </xsl:template>

    <xsl:template match="remotelink" mode="endnote">
        <footnote xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <xsl:attribute name="role" select="'endnote'"/>
            <!-- Paul: moved the refanchor creation (foreach) before the ref:returnreference.
            The court rules schema (and statutory) requires this occur first.  -->
            <xsl:for-each select="preceding-sibling::refpt | following-sibling::refpt">
                <xsl:call-template name="refpt-generic"/>
            </xsl:for-each>
            <ref:returnreference>
                <xsl:call-template name="locator"/>
            </ref:returnreference>
            <xsl:apply-templates select="sup | sub" mode="footnoteref"/>
            <xsl:if test="parent::lilabel[following-sibling::node()]">
                <bodytext xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <xsl:apply-templates select="parent::lilabel/following-sibling::node()"/>
                </bodytext>
            </xsl:if>
        </footnote>
    </xsl:template>

    <xsl:template match="sup | sub" mode="footnoteref">
        <label xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <xsl:apply-templates/>
        </label>
    </xsl:template>

    <xsl:template
        match="l[li[lilabel[refpt][remotelink][not(child::*[3])]]][not(child::*[not(self::li[lilabel[refpt][remotelink][not(child::*[3])]])])][not(@virtual-nesting)]"
        priority="30">
        <endnotes xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <xsl:apply-templates select="li" mode="endnote"/>
        </endnotes>
    </xsl:template>

    <xsl:template match="li" mode="endnote">
        <xsl:apply-templates select="lilabel" mode="endnote"/>
    </xsl:template>

    <xsl:template match="lilabel" mode="endnote">
        <xsl:apply-templates select="remotelink" mode="endnote"/>
    </xsl:template>

    <!-- endnotes become a bump-up within primlaw:level (within and outside of glp:note) as well as leg:comntry
   Since I coded this for a dictionary stream, it hasn't been tested yet.  Someone with a 
   legislation stream should test it and sign off here. JL 
   
   JD: 2017-08-10: works for legislation stream NZ06; see notes in /modules/glp/Rosetta_glp.note-LxAdv-note.xsl
   -->

    <xsl:template match="leg:bodytext" priority="30">
        <!-- this will handle annotations interspersed with primlaw:bodytext elements in document order -->
        <xsl:for-each-group select="*"
            group-adjacent="
                if (self::leg:comntry or self::l[li[lilabel[refpt][remotelink][not(child::*[3])]]][not(child::*[not(self::li[lilabel[refpt][remotelink][not(child::*[3])]])])][not(@virtual-nesting)]
                or self::glp:note[l[li[lilabel[refpt][remotelink][not(child::*[3])]]][not(child::*[not(self::li[lilabel[refpt][remotelink][not(child::*[3])]])])][not(@virtual-nesting)]]
                ) then
                    0
                else
                    1">
            <xsl:choose>
                <xsl:when test="current-grouping-key() = 0">
                    <xsl:for-each select="current-group()">
                        <xsl:choose>
                            <xsl:when test="self::glp:note">
                                <xsl:apply-templates select="*"/>
                            </xsl:when>
                            <xsl:otherwise>
                                <xsl:apply-templates select="."/>
                            </xsl:otherwise>
                        </xsl:choose>
                    </xsl:for-each>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:choose>
                        <xsl:when
                            test="$streamID = 'AU19LA' or ($streamID = ('NZ12') and not(ancestor::legfragment))">
                            <admindoc:bodytext
                                xmlns:admindoc="urn:x-lexisnexis:content:administrative-document:sharedservices:1">
                                <xsl:apply-templates select="parent::leg:bodytext/@*"/>
                                <xsl:for-each select="current-group()">
                                    <xsl:apply-templates select="."/>
                                </xsl:for-each>
                            </admindoc:bodytext>
                        </xsl:when>
                        <xsl:when test="$streamID = 'AU18' and not(ancestor::legfragment)">
                            <xsl:choose>
                                <xsl:when test="parent::leg:bodytext[preceding-sibling::leg:level]">
                                    <xsl:element name="admindoc:level">
                                        <xsl:attribute name="leveltype">
                                            <xsl:text>unclassified</xsl:text>
                                        </xsl:attribute>
                                        <admindoc:bodytext
                                            xmlns:admindoc="urn:x-lexisnexis:content:administrative-document:sharedservices:1">
                                            <xsl:apply-templates select="parent::leg:bodytext/@*"/>
                                            <xsl:for-each select="current-group()">
                                                <xsl:apply-templates select="."/>
                                            </xsl:for-each>
                                        </admindoc:bodytext>
                                    </xsl:element>
                                </xsl:when>
                                <xsl:otherwise>
                                    <admindoc:bodytext
                                        xmlns:admindoc="urn:x-lexisnexis:content:administrative-document:sharedservices:1">
                                        <xsl:apply-templates select="parent::leg:bodytext/@*"/>
                                        <xsl:for-each select="current-group()">
                                            <xsl:apply-templates select="."/>
                                        </xsl:for-each>
                                    </admindoc:bodytext>
                                </xsl:otherwise>
                            </xsl:choose>
                        </xsl:when>
                        <xsl:otherwise>
                            <primlaw:bodytext>
                                <xsl:apply-templates select="parent::leg:bodytext/@*"/>
                                <xsl:for-each select="current-group()">
                                    <xsl:apply-templates select="."/>
                                </xsl:for-each>
                            </primlaw:bodytext>
                        </xsl:otherwise>
                    </xsl:choose>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:for-each-group>
    </xsl:template>

    <!-- This template is being suppressed as no requirement in the output. -->
    <xsl:template match="leg:bodytext/@searchtype[$streamID = 'UK06']"/>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="common-rosetta_figure">
        <title><sourcexml>figure</sourcexml> to <targetxml>figure</targetxml>
            <lnpid>id-CCCC-10320</lnpid></title>
        <body>
            <section>
                <note>This topic is used in numerous conversion instructions for several LBUs. It is
                    a shared topic rather than duplicated to ensure consistency and accuracy. The
                    xml snippets contained in this topic reflect markup needed for the Apollo image
                    handling application. The UK is the first LBU to move from Apollo to the
                    Blobstore application for image handling. Therefore, if this is a UK conversion
                    instruction document, please refer to the following topics for correct image
                    handling markup.<ul>
                        <li><sourcexml>lnlink[@service="ATTACHMENT"]</sourcexml> to
                                <targetxml>ref:lnlink[@service="ATTACHMENT"]</targetxml> for
                            BLOBSTORE images (id-CCCC-10542)</li>
                        <li><sourcexml>inlineobject</sourcexml> to
                                <targetxml>ref:inlineobject</targetxml> for BLOBSTORE images
                            (id-CCCC-10540)</li>
                        <li><sourcexml>link[@filename]</sourcexml> to
                                <targetxml>ref:lnlink[@service="ATTACHMENT"]</targetxml> for
                            BLOBSTORE images (id-CCCC-10541)</li>
                    </ul></note>
                <p><sourcexml>figure</sourcexml> becomes <targetxml>figure</targetxml>. The children
                    of <sourcexml>figure</sourcexml> are handled as follows:<ul>
                        <li><sourcexml>caption</sourcexml> becomes <targetxml>caption</targetxml>.
                            The content inside <sourcexml>caption</sourcexml> should be mapped to
                                <targetxml>caption/p/text</targetxml>.</li>
                        <li><sourcexml>inlineobject</sourcexml> becomes
                                <targetxml>ref:inlineobject</targetxml>. See <xref
                                href="../common_newest/Rosetta_inlineobject-LxAdv-figure_ref.inlineobject.dita"
                            /> for details.</li>
                        <li><sourcexml>link</sourcexml> becomes
                                <targetxml>ref:lnlink[@service="ATTACHMENT"]</targetxml>. See
                            General Markup section for details.</li>
                        <!-- Did not use xref markup for link-to-ref:lnlink instruction because some CIs have figure module but not link module, e.g. CA06-Regulations. McNally Mar 20 2014. -->
                    </ul>
                </p>
                <note>
                    <b>In NewLexis <targetxml>figure</targetxml> is not allowed within
                            <targetxml>blockquote</targetxml> element. If
                            <sourcexml>figure</sourcexml> element is a direct child of
                            <sourcexml>blockquote</sourcexml> element and
                            <sourcexml>figure</sourcexml> element does not have any sibling element
                        in <sourcexml>blockquote</sourcexml> element, then drop the outer
                            <sourcexml>blockquote</sourcexml> element in NewLexis.</b>
                </note>
                <note>
                    <p>
                        <b><sourcexml>figure/glp:note/h</sourcexml> becomes
                                <targetxml>figure/note/bodytext/h</targetxml> in NewLexis.</b>
                    </p>
                    <p>If <sourcexml>figure/p</sourcexml> becomes
                            <targetxml>figure/note/bodytext/p</targetxml> in NL conversion.</p>
                </note>
            </section>
            <example>
                <title>Example 1</title>
                <codeblock> &lt;blockquote&gt; &lt;figure&gt; &lt;glp:note&gt; &lt;h&gt;(MAB
                    PROGRAMME STRUCTURE)&lt;/h&gt; &lt;/glp:note&gt; &lt;inlineobject type="image"
                    attachment="ln-server" filename="pbep-g00121.gif"/&gt; &lt;/figure&gt;
                    &lt;/blockquote&gt; </codeblock>
                <b>becomes</b>
                <codeblock> &lt;figure&gt; &lt;note&gt; &lt;bodytext&gt; &lt;h&gt;(MAB PROGRAMME
                    STRUCTURE)&lt;/h&gt; &lt;/bodytext&gt; &lt;/note&gt; &lt;ref:inlineobject&gt;
                    &lt;ref:locator&gt; &lt;ref:locator-key&gt; &lt;ref:key-name
                    name="object-key"/&gt; &lt;ref:key-value value="X-Y-pbep-g00121"/&gt; &lt;!-- X
                    and Y are LNI and SMI values obtained from CSSM --&gt; &lt;/ref:locator-key&gt;
                    &lt;ref:locator-params&gt; &lt;proc:param name="componentseq" value="1"/&gt;
                    &lt;proc:param name="object-type" value="image"/&gt; &lt;!-- allowable values:
                    “image?; (from .jpg, .gif, .png, .bmp)--&gt; &lt;proc:param name="object-smi"
                    value=""/&gt; &lt;!-- This @value assignment is done by conversion program
                    --&gt; &lt;/ref:locator-params&gt; &lt;/ref:locator&gt;
                    &lt;/ref:inlineobject&gt; &lt;/figure&gt; </codeblock>
            </example>
            <example>
                <title>Example 2</title>
                <codeblock> &lt;figure&gt; &lt;inlineobject
                    filename="1484985_RSOS_913_CURRENT-0001.jpg" type="image"
                    attachment="ln-server"/&gt; &lt;/figure&gt; </codeblock>
                <b>becomes</b>
                <codeblock> &lt;figure&gt; &lt;ref:inlineobject&gt; &lt;ref:locator&gt;
                    &lt;ref:locator-key&gt; &lt;ref:key-name name="object-key"/&gt;
                    &lt;ref:key-value value="X-Y-1484985-RSOS-913-CURRENT-0001"/&gt; &lt;!-- X and Y
                    are LNI and SMI values obtained from CSSM --&gt; &lt;/ref:locator-key&gt;
                    &lt;ref:locator-params&gt; &lt;proc:param name="componentseq" value="1"/&gt;
                    &lt;proc:param name="object-type" value="image"/&gt; &lt;!-- allowable values:
                    “image?; (from .jpg, .gif, .png)--&gt; &lt;proc:param name="object-smi"
                    value=""/&gt; &lt;!-- This @value assignment is done by conversion program
                    --&gt; &lt;/ref:locator-params&gt; &lt;/ref:locator&gt;
                    &lt;/ref:inlineobject&gt; &lt;/figure&gt; </codeblock>
            </example>
            <example>
                <title>Example 3</title>
                <codeblock> &lt;figure&gt; &lt;caption&gt;Head of PSL IP&amp;amp;IT&lt;/caption&gt;
                    &lt;inlineobject filename="Lawrence Milner.jpg"/&gt; &lt;/figure&gt; </codeblock>
                <b>becomes</b>
                <codeblock> &lt;figure&gt; &lt;caption&gt; &lt;p&gt; &lt;text&gt;Head of PSL
                    IP&amp;amp;IT&lt;/text&gt; &lt;/p&gt; &lt;/caption&gt; &lt;ref:inlineobject&gt;
                    &lt;ref:locator&gt; &lt;ref:locator-key&gt; &lt;ref:key-name
                    name="object-key"/&gt; &lt;ref:key-value value="X-Y-Lawrence Milner"/&gt;
                    &lt;!-- X and Y are LNI and SMI values obtained from CSSM --&gt;
                    &lt;/ref:locator-key&gt; &lt;ref:locator-params&gt; &lt;proc:param
                    name="componentseq" value="1"/&gt; &lt;proc:param name="object-type"
                    value="image"/&gt; &lt;proc:param name="object-smi" value=""/&gt; &lt;!-- This
                    @value assignment is done by conversion program --&gt;
                    &lt;/ref:locator-params&gt; &lt;/ref:locator&gt; &lt;/ref:inlineobject&gt;
                    &lt;/figure&gt; </codeblock>
            </example>
            <note>
                <sourcexml>figure/p/text/inlineobject</sourcexml> becomes
                    <targetxml>figure/ref:inlineobject</targetxml>, omit p/text from output if
                    <sourcexml>figure/p/text/</sourcexml> having only
                    <sourcexml>inlineobject</sourcexml> as single child and no PCDATA within
                    <sourcexml>text</sourcexml>. </note>
            <example>
                <title>Example 4</title>
                <codeblock> &lt;figure&gt; &lt;p&gt; &lt;text&gt; &lt;inlineobject type="image"
                    filename="eu-tracker_band_of_flags.jpg"/&gt; &lt;/text&gt; &lt;/p&gt;
                    &lt;/figure&gt; </codeblock>
                <b>becomes</b>
                <codeblock> &lt;figure&gt; &lt;ref:inlineobject&gt; &lt;ref:locator&gt;
                    &lt;ref:locator-key&gt; &lt;ref:key-name name="object-key"/&gt;
                    &lt;ref:key-value value="X-Y-eu-tracker_band_of_flags"/&gt; &lt;!-- X and Y are
                    LNI and SMI values obtained from CSSM --&gt; &lt;/ref:locator-key&gt;
                    &lt;ref:locator-params&gt; &lt;proc:param name="componentseq" value="1"/&gt;
                    &lt;proc:param name="object-type" value="image"/&gt; &lt;proc:param
                    name="object-smi" value=""/&gt; &lt;!-- This @value assignment is done by
                    conversion program --&gt; &lt;/ref:locator-params&gt; &lt;/ref:locator&gt;
                    &lt;/ref:inlineobject&gt; &lt;/figure&gt; </codeblock>
            </example>
            <example>
                <title>Example 5. child <sourcexml>link</sourcexml></title>
                <codeblock> &lt;figure&gt; &lt;link type="image"
                    filename="HSWT-THS-W11037A.tif"&gt;Click here to view image&lt;/link&gt;
                    &lt;/figure&gt; </codeblock>
                <b>becomes</b>
                <codeblock> &lt;figure&gt; &lt;ref:lnlink service="ATTACHMENT"&gt; &lt;ref:marker
                    role="label"&gt;Click here to view image&lt;/ref:marker&gt; &lt;ref:locator&gt;
                    &lt;ref:locator-key&gt; &lt;ref:key-name name="attachment-key"/&gt;
                    &lt;ref:key-value value="X-Y-HSWT-THS-W11037A"/&gt; &lt;!-- X and Y are LNI and
                    SMI values obtained from CSSM --&gt; &lt;/ref:locator-key&gt;
                    &lt;ref:locator-params&gt; &lt;proc:param name="componentseq" value="1"/&gt;
                    &lt;proc:param name="attachment-type" value="image"/&gt; &lt;proc:param
                    name="attachment-smi" value=""/&gt; &lt;!-- @value populated with SMI obtained
                    from CSSM --&gt; &lt;/ref:locator-params&gt; &lt;/ref:locator&gt;
                    &lt;/ref:lnlink&gt; &lt;/figure&gt; </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2016-07-29: <ph id="change_20160729_jm">Added Note about xml snippets that
                        illustrate image handling. Note summarizes move from Apollo to Blobstore
                        application. UK is first LBU to move to Blobstore.</ph></p>
                <p>2014-10-28: <ph id="change_20141028_JCG">Moved instruction regarding the XPath
                        XPath <sourcexml>caption/note</sourcexml> into a separate topic. Not a rule
                        change, just a minor reorganization of the instructions.</ph></p>
                <p>2014-10-24: <ph id="change_20141024_JCG">Added instructions and example to handle
                        the new XPath <sourcexml>caption/note</sourcexml>. (R4.5 Content Issue List
                        #1993)</ph></p>
                <p>2014-03-20: <ph id="change_20140320_jm">Illustrative change. Added example to
                        explicitly show standard conversion of child link to ref:lnlink. Prompted by
                        Phase 6 UK Discussion Item 77. Webteam 252434.</ph></p>
                <p>2013-10-23: <ph id="change_20131023_SSX">Added instruction for handling
                        figure/p/text/inlineobject Webteam # 239816</ph></p>
                <p>2013-07-15: <ph id="change_20130715_DSF">Added instructions for handling
                        figure/caption and an example demonstrating the mapping.</ph></p>
                <p>2013-05-08: <ph id="change_20130508_SP">Extended the list of allowable values for
                        image handling.</ph></p>
                <p>2013-05-01: <ph id="change_20130501_SP">Removed instructions for section
                            <b>"Pre-Release 4.0"</b> because according to latest Apollo markup,
                        section <b>"Release 4.0 and after"</b> and section <b>"Pre-Release 4.0"</b>
                        now have similar conversion markup.</ph></p>
                <p>2013-04-30: <ph id="change_20130430_SP">Updated target sample according to latest
                        Apollo markup.</ph></p>
                <p>2013-02-18: <ph id="change_20130218_SP">Created two sections, one for <b>"Release
                            4.0 and after"</b> and another for <b>"Pre-Release 4.0"</b>.</ph></p>
                <p>2013-02-18: Target example updated per inlineobject instructions.</p>
                <p>2013-01-11: Example added for figure/inlineobject scenario.</p>
            </section>



        </body>
    </dita:topic>


    <xsl:template match="figure">
        <xsl:choose>
            <xsl:when test="$streamID = 'UK06'">
                <xsl:choose>
                    <xsl:when test="p/text[not(child::node() except inlineobject)]">
                        <xsl:element name="figure"
                            xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                            <xsl:apply-templates
                                select="p/text/inlineobject | (node() except p[text[not(child::node() except inlineobject)]])"
                            />
                        </xsl:element>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:element name="figure"
                            xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                            <xsl:apply-templates select="@* | node()"/>
                        </xsl:element>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:when>
            <xsl:when test="$streamID = 'AU15'">
                <figure>
                    <xsl:apply-templates select="node()"/>
                </figure>
            </xsl:when>
            <!--Ravikant: 2018-03-09: added the when condition for the stream ID MY02 -->
            <xsl:when test="$streamID = 'MY02'">
                <figure>
                    <xsl:apply-templates select="caption"/>
                    <xsl:apply-templates select="node() except caption"/>
                </figure>
            </xsl:when>
            <xsl:otherwise>
                <xsl:element name="figure">
                    <xsl:apply-templates/>
                </xsl:element>
            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>

    <xsl:template match="caption[not(preceding-sibling::*[1][self::caption])]">
        <xsl:element name="caption"
            xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <xsl:element name="p">
                <xsl:element name="text">
                    <xsl:apply-templates/>
                </xsl:element>
            </xsl:element>
            <xsl:apply-templates select="following-sibling::*[1][self::caption]"
                mode="caption_wrapper"/>
            <!-- JD: 2017-11-13: apply 'caption_wrapper' mode for follwing p elements that do not contain links/inlineobjects (Note: not limited to first sibling p). Limited to UK08OR for now. -->
            <xsl:apply-templates
                select="following-sibling::*[self::p[not(text/link or text/inlineobject)]][$streamID = 'UK08OR']"
                mode="caption_wrapper"/>
        </xsl:element>
    </xsl:template>

    <xsl:template match="caption[preceding-sibling::*[1][self::caption]]" mode="caption_wrapper">
        <xsl:element name="p">
            <xsl:element name="text">
                <xsl:apply-templates/>
            </xsl:element>
        </xsl:element>
    </xsl:template>

    <!-- JD: 2017-11-13: new mode 'caption_wrapper' for p siblings of caption that do not contain link or inlineobject (Note: not limited to first sibling p).  Limited to UK08OR for now.  -->
    <xsl:template
        match="p[not(text/inlineobject) or not(text/link)][preceding-sibling::*[self::caption]][$streamID = 'UK08OR']"
        mode="caption_wrapper">
        <xsl:element name="p">
            <xsl:element name="text">
                <xsl:apply-templates/>
            </xsl:element>
        </xsl:element>
    </xsl:template>

    <xsl:template match="caption[preceding-sibling::*[1][self::caption]]"/>

    <!-- JD: 2017-11-13: suppress p when contents have been processed by mode 'caption_wrapper' for p siblings of caption that do not contain link or inlineobject (Note: not limited to first sibling p).  Limited to UK08OR for now.  -->
    <xsl:template
        match="figure/p[preceding-sibling::*[self::caption]][not(text/inlineobject or text/link)][$streamID = 'UK08OR']"
        priority="21"/>

    <xsl:template match="figure/p" priority="20">
        <xsl:for-each-group select="*"
            group-adjacent="
                if (self::heading or self::inlineobject or self::link
                or self::text[not(child::*[not(self::heading or self::inlineobject or self::link)])]) then
                    0
                else
                    1">
            <xsl:variable name="pVariable">
                <xsl:copy-of select="."/>
            </xsl:variable>
            <xsl:choose>
                <xsl:when test="current-grouping-key() = 1">
                    <note xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                        <bodytext>
                            <p>
                                <xsl:apply-templates select="$pVariable/p/@*"/>
                                <xsl:apply-templates select="current-group()"/>
                            </p>
                        </bodytext>
                    </note>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:apply-templates select="current-group()"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:for-each-group>

    </xsl:template>

    <xsl:template match="figure/p/text" priority="20">
        <xsl:choose>
            <xsl:when
                test="
                    parent::p[child::*[not(self::heading or self::inlineobject or self::link or
                    self::text[not(child::*[not(self::heading or self::inlineobject or self::link)])])]]">
                <text xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <xsl:apply-templates select="@* | node()"/>
                </text>
            </xsl:when>
            <xsl:otherwise>
                <xsl:apply-templates/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <!-- Vikas Rohilla : Updated for the streamID CA01   -->
    <xsl:template
        match="figure[child::p[child::text[child::inlineobject]]][$streamID = 'CA01' or $streamID = 'CA15']">
        <xsl:apply-templates select="descendant::inlineobject"/>
    </xsl:template>

    <!-- JD: 2017-11-27: updated for Web* 7054824.
  Limiting to certain streams for now, but may be more broadly applicable.  UK08 only mentions glp:note/h in this file (id-CCCC-10320), but glp:note has no handling.  Inferring from CI example.
  -->
    <xsl:template match="glp:note[$streamID = 'UK08OR']">
        <note xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <bodytext>
                <xsl:apply-templates/>
            </bodytext>
        </note>
    </xsl:template>




    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_figure_glp.note-to-LexisAdvance_figure">
        <title>(Legislation &amp; Regulation) <sourcexml>figure/glp:note</sourcexml> to
                <targetxml>figure</targetxml>
            <lnpid>id-CCCC-10330</lnpid></title>
        <body>
            <section>
                <note>This topic is used in numerous conversion instructions for several LBUs. It is
                    a shared topic rather than duplicated to ensure consistency and accuracy. The
                    xml snippets contained in this topic reflect markup needed for the Apollo image
                    handling application. The UK is the first LBU to move from Apollo to the
                    Blobstore application for image handling. Therefore, if this is a UK conversion
                    instruction document, please refer to the following topics for correct image
                    handling markup.<ul>
                        <li><sourcexml>lnlink[@service="ATTACHMENT"]</sourcexml> to
                                <targetxml>ref:lnlink[@service="ATTACHMENT"]</targetxml> for
                            BLOBSTORE images (id-CCCC-10542)</li>
                        <li><sourcexml>inlineobject</sourcexml> to
                                <targetxml>ref:inlineobject</targetxml> for BLOBSTORE images
                            (id-CCCC-10540)</li>
                        <li><sourcexml>link[@filename]</sourcexml> to
                                <targetxml>ref:lnlink[@service="ATTACHMENT"]</targetxml> for
                            BLOBSTORE images (id-CCCC-10541)</li>
                    </ul></note>
                <title>Handling for figure/glp:note scenario specifically for Legislation and
                    Regulation:</title>
                <p>
                    <ul>
                        <li> If <sourcexml>inlineobject</sourcexml> is the sole child content of the
                            input Xpath <sourcexml>figure/glp:note/p/text</sourcexml> then each
                            image will be embedded in a single <targetxml>figure</targetxml>
                            suppressing the input elements <sourcexml>glp:note</sourcexml>,
                                <sourcexml>p</sourcexml> and <sourcexml>text</sourcexml>
                            <note>If there is any other text or mark-up within
                                    <sourcexml>text</sourcexml> then it needs to be handled
                                differently.</note>
                        </li>
                    </ul>
                </p>
            </section>

            <example>
                <title>Source XML 1: When <sourcexml>inlineobject</sourcexml> is the sole child
                    content of <sourcexml>figure/glp:note/p/text</sourcexml>.</title>
                <codeblock> &lt;figure&gt; &lt;glp:note&gt; &lt;p&gt;&lt;text&gt;&lt;inlineobject
                    type="image" filename="TAS_ACT_2009-88_LOW-IRCP09P1.gif"
                    attachment="ln-server"/&gt;&lt;/text&gt;&lt;/p&gt; &lt;/glp:note&gt;
                    &lt;glp:note&gt; &lt;p&gt;&lt;text&gt;&lt;inlineobject type="image"
                    filename="TAS_ACT_2009-88_LOW-IRCP09P2.gif"
                    attachment="ln-server"/&gt;&lt;/text&gt;&lt;/p&gt; &lt;/glp:note&gt;
                    &lt;/figure&gt; </codeblock>

                <title>Target XML 1: When <sourcexml>inlineobject</sourcexml> is the sole child
                    content of <sourcexml>figure/glp:note/p/text</sourcexml>.</title>
                <codeblock> &lt;figure&gt; &lt;ref:inlineobject&gt; &lt;ref:locator&gt;
                    &lt;ref:locator-key&gt; &lt;ref:key-name name="object-key"/&gt;
                    &lt;ref:key-value value="X-Y-TAS-ACT-2009-88-LOW-IRCP09P1"/&gt; &lt;!-- X and Y
                    are LNI and SMI values obtained from CSSM --&gt; &lt;/ref:locator-key&gt;
                    &lt;ref:locator-params&gt; &lt;proc:param name="componentseq" value="1"/&gt;
                    &lt;proc:param name="object-type" value="image"/&gt; &lt;!-- allowable values:
                    “image?; (from .jpg, .gif, .png, .bmp)--&gt; &lt;proc:param name="object-smi"
                    value=""/&gt; &lt;!-- This @value assignment is done by conversion program
                    --&gt; &lt;/ref:locator-params&gt; &lt;/ref:inlineobject&gt; &lt;/figure&gt;
                    &lt;figure&gt; &lt;ref:inlineobject&gt; &lt;ref:locator&gt;
                    &lt;ref:locator-key&gt; &lt;ref:key-name name="object-key"/&gt;
                    &lt;ref:key-value value="X-Y-TAS-ACT-2009-88-LOW-IRCP09P2"/&gt; &lt;!-- X and Y
                    are LNI and SMI values obtained from CSSM --&gt; &lt;/ref:locator-key&gt;
                    &lt;ref:locator-params&gt; &lt;proc:param name="componentseq" value="1"/&gt;
                    &lt;proc:param name="object-type" value="image"/&gt; &lt;!-- allowable values:
                    “image?; (from .jpg, .gif, .png, .bmp)--&gt; &lt;proc:param name="object-smi"
                    value=""/&gt; &lt;!-- This @value assignment is done by conversion program
                    --&gt; &lt;/ref:locator-params&gt; &lt;/ref:locator&gt;
                    &lt;/ref:inlineobject&gt; &lt;/figure&gt; </codeblock>
            </example>

            <example>
                <title>Source XML 2: When there is any other text or mark-up within
                        <sourcexml>text</sourcexml> then it needs to be handled differently.</title>
                <codeblock> &lt;figure&gt; &lt;glp:note&gt;&lt;h&gt;Figure
                    5A&lt;/h&gt;&lt;/glp:note&gt; &lt;inlineobject type="image"
                    attachment="ln-server" filename="cc-figure5-1.gif"/&gt; ....
                    &lt;p&gt;&lt;text&gt;&lt;nl/&gt;&lt;nl/&gt;&lt;/text&gt;&lt;/p&gt;
                    &lt;/figure&gt; </codeblock>

                <title>Target XML 2: When there is any other text or mark-up within
                        <sourcexml>text</sourcexml> then it needs to be handled differently.</title>
                <codeblock> &lt;figure&gt; &lt;note&gt; &lt;bodytext&gt; &lt;h&gt;Figure
                    5A&lt;/h&gt; &lt;/bodytext&gt; &lt;/note&gt; &lt;ref:inlineobject&gt;
                    &lt;ref:locator&gt; &lt;ref:locator-key&gt; &lt;ref:key-name
                    name="object-key"/&gt; &lt;ref:key-value value="X-Y-cc-figure5-1"/&gt; &lt;!-- X
                    and Y are LNI and SMI values obtained from CSSM --&gt; &lt;/ref:locator-key&gt;
                    &lt;ref:locator-params&gt; &lt;proc:param name="componentseq" value="1"/&gt;
                    &lt;proc:param name="object-type" value="image"/&gt; &lt;!-- allowable values:
                    “image?; (from .jpg, .gif, .png, .bmp)--&gt; &lt;proc:param name="object-smi"
                    value=""/&gt; &lt;!-- This @value assignment is done by conversion program
                    --&gt; &lt;/ref:locator-params&gt; &lt;/ref:locator&gt;
                    &lt;/ref:inlineobject&gt; ....
                    &lt;note&gt;&lt;bodytext&gt;&lt;p&gt;&lt;text&gt;&lt;proc:nl/&gt;&lt;proc:nl/&gt;&lt;/text&gt;&lt;/p&gt;&lt;/bodytext&gt;&lt;/note&gt;
                    &lt;/figure&gt; </codeblock>
            </example>

            <section>
                <title>Changes</title>
                <p>First Draft</p>
                <p>2013-02-18: Target examples updated per inlineobject instructions. </p>
                <p>2013-02-18: <ph id="change_20130218_SP">Created two sections, one for <b>"Release
                            4.0 and after"</b> and another for <b>"Pre-Release 4.0"</b>.</ph></p>
                <p>2013-04-30: <ph id="change_20130430_SP">Updated target sample according to latest
                        Apollo markup.</ph></p>
                <p>2013-05-01: <ph id="change_20130501_SP">Removed instructions for section
                            <b>"Pre-Release 4.0"</b> because according to latest Apollo markup,
                        section <b>"Release 4.0 and after"</b> and section <b>"Pre-Release 4.0"</b>
                        now have similar conversion markup.</ph></p>
                <p>2013-05-08: <ph id="change_20130508_SP">Extended the list of allowable values for
                        image handling.</ph></p>
                <p>2016-08-03: <ph id="change_20160803_jm">Added Note about xml snippets that
                        illustrate image handling. Note summarizes move from Apollo to Blobstore
                        application. UK is first LBU to move to Blobstore.</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_glp.note-Chof-figure-LxAdv-figure.dita  -->

    <xsl:template
        match="figure/glp:note[p[child::text[child::inlineobject][not(child::*[name(.) != 'inlineobject'])]][not(child::*[2])]]"
        priority="30">
        <figure xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <xsl:apply-templates select="glp:note/p/text/inlineobject"/>
        </figure>
    </xsl:template>




    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="common_rosetta_footnote">
        <title><sourcexml>footnotegrp</sourcexml> and <sourcexml>footnote</sourcexml> to
                <targetxml>footnotegroup</targetxml> and <targetxml>footnote</targetxml>
            <lnpid>id-CCCC-10322</lnpid></title>
        <body>
            <!-- McNally June 9 2014. Commented-out the CA02 rule added at end of module. See below for details. -->
            <section>
                <title>Instructions <i>[common element]</i></title>
                <p>The source document has footnote references, footnotegrps and footnotes. In the
                    NL schema, footnote references, footnotegroup and footnotes are tagged at the
                    same location where they appear in the source document. </p>
                <p>The <b>footnote</b> markup for NL schema as described below: <ul>
                        <li>
                            <p>The <sourcexml>footnotegrp/footnote</sourcexml> becomes
                                    <targetxml>footnotegroup/footnote</targetxml>
                            </p>
                            <p>The <sourcexml>footnotegrp/heading</sourcexml> becomes
                                    <targetxml>footnotegroup/heading</targetxml>. </p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is the child of
                                    <sourcexml>bodytext</sourcexml>, then it becomes
                                    <targetxml>bodytext/p/text/footnotegroup</targetxml>.</p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is the child of
                                    <sourcexml>leg:bodytext</sourcexml>, then it becomes
                                    <targetxml>primlaw:bodytext/p/text/footnotegroup</targetxml>.</p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                                    <sourcexml>level/bodytext</sourcexml>,
                                    <sourcexml>level/bodytext</sourcexml> mapped with
                                    <targetxml>seclaw:level/seclaw:bodytext</targetxml> and
                                    <targetxml>primlaw:level/primlaw:bodytext</targetxml> in
                                different content model. Then follow below listed instructions: <ul>
                                    <li><b>Regulation:</b>
                                        <targetxml>primlaw:level/primlaw:bodytext/p/text/footnotegroup</targetxml>.</li>
                                    <li><b>Commentary, Form, Precedents and Textbooks:</b>
                                        <targetxml>seclaw:level/seclaw:bodytext/p/text/footnotegroup</targetxml>
                                        and
                                            <targetxml>form:form/form:document/form:bodytext/form:p/form:text/footnotegroup</targetxml>.</li>
                                </ul>
                            </p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                                    <sourcexml>case:judgments</sourcexml>, then it becomes
                                    <targetxml>courtcase:opinions/footnotegroup</targetxml>.</p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                                    <sourcexml>case:judgmentbody</sourcexml>, then it becomes
                                    <targetxml>courtcase:opinion/bodytext/p/text/footnotegroup</targetxml>.</p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                                    <sourcexml>case:headnote</sourcexml>, then it becomes
                                    <targetxml>courtcase:head/footnotegroup</targetxml>.</p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                                    <sourcexml>case:decisionsummary</sourcexml>, then it becomes
                                    <targetxml>casesum:decisionsummary/bodytext/p/text/footnotegroup</targetxml>.</p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                                    <sourcexml>case:factsummary</sourcexml>, then it becomes
                                    <targetxml>casesum:editorialsummary/p/text/footnotegroup</targetxml>.</p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                                    <sourcexml>case:references</sourcexml>, then it becomes
                                    <targetxml>ref:relatedrefs/bodytext/p/text/footnotegroup</targetxml>.</p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                                    <sourcexml>case:typeofcase</sourcexml>, then it becomes
                                    <targetxml>casesum:overview/bodytext/p/text/footnotegroup</targetxml>.</p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                                    <sourcexml>p</sourcexml>, then it becomes
                                    <targetxml>p/text/footnotegroup</targetxml>.</p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                                    <sourcexml>glp:note</sourcexml>, then it becomes
                                    <targetxml>note/bodytext/p/text/footnotegroup</targetxml>.</p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                                    <sourcexml>blockquote</sourcexml>, then it becomes
                                    <targetxml>blockquote/p/text/footnotegroup</targetxml>.</p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                                    <sourcexml>li</sourcexml>, then it becomes
                                    <targetxml>listitem/bodytext/p/text/footnotegroup</targetxml>.</p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                                    <sourcexml>pgrp</sourcexml>, then it becomes
                                    <targetxml>pgrp/p/text/footnotegroup</targetxml>.</p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                                    <sourcexml>case:appendix</sourcexml>, then it becomes
                                    <targetxml>appendix/bodytext/p/text/footnotegroup</targetxml>.</p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                                    <sourcexml>case:consideredcases</sourcexml>, then it becomes
                                    <targetxml>ref:relatedrefs/bodytext/p/text/footnotegroup</targetxml>.</p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                                    <sourcexml>case:priorhist</sourcexml>, then it becomes
                                    <targetxml>casehist:summary/p/text/footnotegroup</targetxml>.</p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                                    <sourcexml>note</sourcexml>, then it becomes
                                    <targetxml>note/bodytext/p/text/footnotegroup</targetxml>.</p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                                    <sourcexml>prelim</sourcexml>, then it becomes
                                    <targetxml>courtcase:prelim/bodytext/p/text/footnotegroup</targetxml>.</p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                                    <sourcexml>catchwordgrp</sourcexml>, then it becomes
                                    <targetxml>classify:classification
                                    classify:classitem/classify:classitem-identifier/classify:classname/footnotegroup</targetxml>.</p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                                    <sourcexml>sigblock</sourcexml>, then it becomes
                                    <targetxml>sigblock/p/text/footnotegroup</targetxml>.</p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                                    <sourcexml>frm:body</sourcexml>, then it becomes
                                    <targetxml>form:document/form:bodytext/form:p/form:text/footnotegroup</targetxml>.</p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                                    <sourcexml>clause</sourcexml>, then it becomes
                                    <targetxml>form:clause/form:bodytext/form:p/form:text/footnotegroup</targetxml>.</p>
                            <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                                    <sourcexml>frm:div</sourcexml>, then it becomes
                                    <targetxml>form:div/form:bodytext/form:p/form:text/footnotegroup</targetxml>.</p>
                        </li>
                        <li> Create <targetxml>footnote/ref:anchor</targetxml> with
                                <targetxml>@id</targetxml> and set
                                <targetxml>footnote/ref:anchor[@id]</targetxml> to the value of
                                <sourcexml>footnote[@fntoken]</sourcexml>.
                                    <note><targetxml>ref:anchor[@id]</targetxml> that begins with a
                                number must have an underscore added at start.</note>
                            <note><p>This note is applicable only to <b>UK footnotes with a value of
                                        "0" in <sourcexml>footnote/@fntoken</sourcexml></b> (all
                                    content types within UK): For every
                                        <sourcexml>footnote[@fntoken="0"]</sourcexml>, a unique
                                    value should be placed in the target
                                        <targetxml>ref:anchor/@id</targetxml>. Numeric values in
                                        <targetxml>ref:anchor/@id</targetxml> must be prepended with
                                    "_". Any unique values are acceptable inside
                                        <targetxml>ref:anchor/@id</targetxml>, but the simplest
                                    solution is to start with <targetxml>&lt;ref:anchor
                                        id="_1"/&gt;</targetxml> for the first footnote encountered
                                    and increment the value by 1 for each subsequent footnote (e.g.
                                        <targetxml>&lt;ref:anchor id="_1"/&gt;</targetxml>,
                                        <targetxml>&lt;ref:anchor id="_2"/&gt;</targetxml>,
                                        <targetxml>&lt;ref:anchor id="_3"/&gt;</targetxml>,
                                    etc.)</p><p>If the value of
                                        <targetxml>ref:anchor/@id</targetxml> is not "0", then it
                                    should be carried through to
                                        <targetxml>ref:anchor/@id</targetxml> as is. </p></note>
                        </li>
                        <li>Drop attribute <sourcexml>@fnrtokens</sourcexml> and
                                <sourcexml>@fntoken</sourcexml> from the
                                <sourcexml>footnote</sourcexml> element, but note as described above
                            that the source <sourcexml>footnote[@fntoken]</sourcexml> value is moved
                            to the target <targetxml>footnote/ref:anchor[@id]</targetxml></li>
                        <li>Create <targetxml>ref:returnreference/reflocator</targetxml>.<ul
                                id="ul_hxl_rfn_yh">
                                <li><targetxml>@anchoridref</targetxml> is set to the id value of
                                    the first reference to this footnote. For example,
                                        <targetxml>footnote/ref:anchor[@id="_1"]</targetxml>, will
                                    use the value
                                        from<targetxml>((//footnote-ref[@anchoridref="_1"])[1])/ref:anchor/@id</targetxml>.<note>If
                                        the return reference ID cannot be located, it is not
                                        necessary to create the
                                            <targetxml>ref:returnreference</targetxml>.</note></li>
                                <li><targetxml>@anchortype</targetxml> is set to "local" </li>
                            </ul></li>
                        <li><sourcexml>footnote/fnlabel</sourcexml> becomes
                                <targetxml>footnote/label</targetxml>.</li>
                        <li><sourcexml>footnote/fnbody</sourcexml> becomes
                                <targetxml>footnote/bodytext</targetxml>.<ul>
                                <li><b>Special Canada rule to suppress indent:</b>
                                    <sourcexml>footnote/fnbody/p[@indent]</sourcexml> becomes
                                        <targetxml>footnote/bodytext/p</targetxml>. That is,
                                    suppress <sourcexml>@indent</sourcexml> for all Canada streams.
                                    (Note that attribute <sourcexml>p[@i]</sourcexml> is also
                                    suppressed, as per General Markup rules for
                                        <sourcexml>p</sourcexml>).</li>
                            </ul></li>
                        <li><sourcexml>footnote/@type</sourcexml> becomes
                                <targetxml>footnote/@role</targetxml> unless the value of
                                <sourcexml>footnote/@type</sourcexml> is "default" or "annotation",
                            in which case <sourcexml>footnote/@type</sourcexml> is suppressed and
                                <targetxml>footnote/@role</targetxml> is not generated.</li>
                        <li>
                            <p>If <sourcexml>footnote/fnbody</sourcexml> contains
                                    <sourcexml>p/refpt</sourcexml> and the value of
                                    <sourcexml>refpt/@id</sourcexml> is the same as the value of
                                    <sourcexml>footnote/@fntoken</sourcexml>, then the
                                    <sourcexml>refpt</sourcexml> should be suppressed because a
                                    <targetxml>ref:anchor</targetxml> with the same value in
                                    <targetxml>@id</targetxml> is created as child of the target
                                    <targetxml>footnote</targetxml></p>
                        </li>
                        <li>
                            <p>If <sourcexml>footnote</sourcexml> appears without
                                    <sourcexml>fnr</sourcexml> the footnote contents should still be
                                output as <targetxml>footnote</targetxml>.</p>
                        </li>
                    </ul>
                </p>
                <p>The <b>fnr</b> markup for NL schema as described below: <ul>
                        <li>
                            <sourcexml>fnr</sourcexml> becomes
                            <targetxml>footnote-ref</targetxml>.</li>
                        <li>
                            <sourcexml>@fntoken</sourcexml> becomes
                                <targetxml>@anchoridref</targetxml>. </li>
                        <li>
                            <sourcexml>@fnrtoken</sourcexml> becomes
                                <targetxml>footnote-ref/ref:anchor[@id]</targetxml> the value must
                            be unique.</li>
                        <li>The <sourcexml>fnr</sourcexml> content becomes
                                <targetxml>label</targetxml>
                        </li>
                        <li>
                            <sourcexml>fnr/@id</sourcexml> becomes
                                <targetxml>footnote-ref/@xml:id</targetxml>. <note>All
                                    <targetxml>xml:id</targetxml> attributes that begin with a
                                number must have an underscore added at start.</note>
                            <note><targetxml>@anchoridref</targetxml> that begins with a number must
                                have an underscore added at start. Also apply other identifier data
                                type format as used for <targetxml>xml:id</targetxml> and
                                    <targetxml>ref:anchor/@id</targetxml> (e.g. change colon to
                                underscore).</note>
                        </li>
                        <li><sourcexml>fnr/@alt-label</sourcexml> should be suppressed from
                            conversion because this attribute is already deprecated in the DTD
                            itself.</li>
                        <li>
                            <p>If input documents is having scenario
                                    <sourcexml>leg:bodytext/fnr</sourcexml> then it becomes
                                    <targetxml>primlaw:bodytext/textitem/footnote-ref</targetxml>.</p>
                        </li>
                    </ul>
                </p>
                <p> Use the <b>matching criteria</b> below to ensure hyperlinks are working: <ul>
                        <li>
                            <p>Use the <sourcexml>@fnrtoken</sourcexml> attribute to match the
                                source footnote reference indicated by <sourcexml>fnr</sourcexml>
                                with the actual source footnote content contained in the
                                    <sourcexml>footnote</sourcexml>.</p>
                        </li>
                        <li>
                            <p>If appears without <sourcexml>footnote</sourcexml> then conversion
                                need to put the reference <b>(fnr)</b> in an xml comment along with
                                this note: <b><i> footnote reference without footnote is a data
                                        error.</i></b>.</p>
                        </li>
                        <li>
                            <p>If <sourcexml>fnr</sourcexml> is empty, then it should be
                                suppressed.</p>
                        </li>
                        <li>
                            <b>Exceptional scenario for UK22CS:</b> Supress
                                <sourcexml>@type="editorial"</sourcexml> attribute from
                                <sourcexml>footnote</sourcexml> element in target. <note>This
                                instruction should be revisited and possibly changed if “editorial?
                                is actually used more appropriately in the future.</note>
                        </li> <li>
                            <sourcexml>lilabel/fnr</sourcexml> becomes
                                <targetxml>label/footnote-ref</targetxml></li>
                    </ul></p>
                <p>If <sourcexml>footnotegrp</sourcexml> is a child of
                        <sourcexml>legfragment</sourcexml>, then it becomes
                        <targetxml>primlaw:excerpt/primlaw:bodytext/p/text/footnotegroup</targetxml>.</p>

            </section>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;p&gt; &lt;pnum count="2"&gt;[2]&lt;/pnum&gt; &lt;refpt
                    id="20101NZLR_297_p2" type="ext"/&gt; &lt;text&gt;Part 2 of the Commerce Act
                    prohibits various restrictive practices, namely practices substantially
                    lessening competition, &lt;fnr fnrtoken="fnr-20101NZLR_297-1"
                    fntoken="fn-20101NZLR_297-1"&gt;1&lt;/fnr&gt; price fixing &lt;/text&gt;
                    &lt;/p&gt; .... &lt;footnotegrp&gt; &lt;footnote fnrtokens="fnr-20101NZLR_297-1"
                    fntoken="fn-20101NZLR_297-1"&gt; &lt;fnlabel&gt;1&lt;/fnlabel&gt; &lt;fnbody&gt;
                    &lt;p&gt; &lt;text&gt;Sections 27 &amp;#x2013; 29.&lt;/text&gt; &lt;/p&gt;
                    &lt;/fnbody&gt; &lt;/footnote&gt; &lt;/footnotegrp&gt; </codeblock>
            </example>
            <example>
                <title>Target XML</title>
                <codeblock> &lt;p&gt; &lt;ref:anchor id="_20101NZLR_297_p2" anchortype="global"/&gt;
                    &lt;desig value="2"&gt;[2]&lt;/desig&gt; &lt;text&gt;Part 2 of the Commerce Act
                    prohibits various restrictive practices, namely practices substantially
                    lessening competition, &lt;footnote-ref anchoridref="fn-20101NZLR_297-1"&gt;
                    &lt;ref:anchor id="fnr-20101NZLR_297-1"/&gt; &lt;label&gt;1&lt;/label&gt;
                    &lt;/footnote-ref&gt;price fixing &lt;/text&gt; &lt;/p&gt; &lt;footnotegroup&gt;
                    &lt;footnote&gt; &lt;ref:anchor id="fn-20101NZLR_297-1"/&gt;
                    &lt;ref:returnreference&gt; &lt;ref:locator anchoridref="fnr-20101NZLR_297-1"
                    anchortype="local"/&gt; &lt;/ref:returnreference&gt;
                    &lt;label&gt;1&lt;/label&gt; &lt;bodytext&gt; &lt;p&gt; &lt;text&gt;Sections 27
                    &amp;#x2013; 29.&lt;/text&gt; &lt;/p&gt; &lt;/bodytext&gt; &lt;/footnote&gt;
                    &lt;/footnotegroup&gt; </codeblock>
            </example>
            <example>
                <title>Source xml: more than one footnote reference points at the same
                    footnote</title>
                <codeblock> &lt;p&gt; &lt;table frame="all" pgwide="1"&gt; &lt;tgroup cols="1"
                    colsep="0" rowsep="0" align="left"&gt; &lt;colspec colwidth="50*" colname="col1"
                    colsep="0" rowsep="0"/&gt; &lt;tbody valign="top"&gt; &lt;row rowsep="0"&gt;
                    &lt;entry morerows="0" colsep="0" rowsep="0"&gt;Except for land and copyright,
                    &lt;fnr fntoken="PBEP.C5.FN51" fnrtoken="PBEP.C5.FN51-R"&gt;51&lt;/fnr&gt;
                    equitable interests can be created verbally. In undertaking an estate review,
                    care must be taken to establish the scope of equitable rights that may be
                    embedded in a person&amp;rsquo;s property at the time of review. The
                    practitioner must ensure that the existence and administration of those rights
                    are dealt with in accordance with the instruction of or legal obligations of the
                    client.&lt;/entry&gt; &lt;/row&gt; &lt;/tbody&gt; &lt;/tgroup&gt; &lt;/table&gt;
                    &lt;text&gt; &lt;fnr fntoken="PBEP.C5.FN51"
                    fnrtoken="PBEP.C5.FN51-R"&gt;51&lt;/fnr&gt; &lt;/text&gt; &lt;/p&gt;
                    &lt;footnotegrp&gt; &lt;!-- Etc. --&gt; &lt;footnote fntoken="PBEP.C5.FN51"
                    fnrtokens="PBEP.C5.FN51-R" type="default" &gt; &lt;fnlabel&gt;51&lt;/fnlabel&gt;
                    &lt;fnbody&gt; &lt;p&gt; &lt;refpt type="ext"
                    id="PBEP.C5.FN51"/&gt;&lt;text&gt;See Copyright Act 1968 (Cth) &lt;ci:cite
                    searchtype="LEG-REF"&gt; &lt;ci:content&gt; &lt;remotelink
                    refpt="IPCPY.CPA.CPA.S8" dpsi="0JVS" docidref="EFGH_9876" remotekey1="REFPTID"
                    service="DOC-ID"&gt;ss 8&lt;/remotelink&gt; &lt;/ci:content&gt;&lt;/ci:cite&gt;
                    and &lt;ci:cite searchtype="LEG-REF"&gt; &lt;ci:content&gt; &lt;remotelink
                    refpt="IPCPY.CPA.CPA.S196" dpsi="0JVS" docidref="EFGH_9876" remotekey1="REFPTID"
                    service="DOC-ID" &gt;196&lt;/remotelink&gt; &lt;/ci:content&gt;
                    &lt;/ci:cite&gt;. &lt;/text&gt; &lt;/p&gt; &lt;/fnbody&gt; &lt;/footnote&gt;
                    &lt;/footnotegrp&gt; </codeblock>
            </example>
            <example>
                <title>Target xml: more than one footnote reference points at the same
                    footnote</title>
                <codeblock> &lt;p&gt; &lt;table frame="all" pgwide="1"&gt; &lt;tgroup cols="1"
                    align="left"&gt; &lt;colspec colname="col1" colwidth="50&amp;#x002A;"/&gt;
                    &lt;tbody valign="top"&gt; &lt;row&gt; &lt;entry&gt;Except for land and
                    copyright, &lt;footnote-ref anchoridref="PBEP.C5.FN51"&gt; &lt;ref:anchor
                    id="PBEP.C5.FN51-R"/&gt; &lt;label&gt;51&lt;/label&gt; &lt;/footnote-ref&gt;
                    equitable interests can be created verbally. In undertaking an estate review,
                    care must be taken to establish the scope of equitable rights that may be
                    embedded in a person&amp;#x2019;s property at the time of review. The
                    practitioner must ensure that the existence and administration of those rights
                    are dealt with in accordance with the instruction of or legal obligations of the
                    client. &lt;/entry&gt; &lt;/row&gt; &lt;/tbody&gt; &lt;/tgroup&gt;
                    &lt;/table&gt; &lt;text&gt; &lt;footnote-ref anchoridref="PBEP.C5.FN51"&gt;
                    &lt;ref:anchor id="PBEP.C5.FN51-R_1"/&gt; &lt;label&gt;51&lt;/label&gt;
                    &lt;/footnote-ref&gt; &lt;/text&gt; &lt;/p&gt; &lt;footnotegroup&gt;
                    &lt;footnote&gt; &lt;ref:anchor id="PBEP.C5.FN51"/&gt;
                    &lt;ref:returnreference&gt; &lt;ref:locator anchoridref="PBEP.C5.FN51-R"
                    anchortype="local"/&gt; &lt;/ref:returnreference&gt;
                    &lt;label&gt;51&lt;/label&gt; &lt;bodytext&gt; &lt;p&gt; &lt;text&gt;See
                    Copyright Act 1968 &amp;#x0028;Cth&amp;#x0029; &lt;lnci:cite
                    type="legislation"&gt; &lt;lnci:content&gt; &lt;ref:crossreference
                    crossreferencetype="seeAlso"&gt; &lt;ref:content&gt;ss 8&lt;/ref:content&gt;
                    &lt;ref:locator anchoridref="IPCPY.CPA.CPA.S8"&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="DOC-ID"/&gt; &lt;ref:key-value
                    value="0JVS-EFGH_9876"/&gt; &lt;/ref:locator-key&gt; &lt;/ref:locator&gt;
                    &lt;/ref:crossreference&gt; &lt;/lnci:content&gt; &lt;/lnci:cite&gt; and
                    &lt;lnci:cite type="legislation"&gt; &lt;lnci:content&gt; &lt;ref:crossreference
                    crossreferencetype="seeAlso"&gt; &lt;ref:content&gt;196&lt;/ref:content&gt;
                    &lt;ref:locator anchoridref="IPCPY.CPA.CPA.S196"&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="DOC-ID"/&gt; &lt;ref:key-value
                    value="0JVS-EFGH_9876"/&gt; &lt;/ref:locator-key&gt; &lt;/ref:locator&gt;
                    &lt;/ref:crossreference&gt; &lt;/lnci:content&gt; &lt;/lnci:cite&gt;.
                    &lt;/text&gt; &lt;/p&gt; &lt;/bodytext&gt; &lt;/footnote&gt;
                    &lt;/footnotegroup&gt; </codeblock>
            </example>
            <example>
                <title>Source xml: <sourcexml>fnr</sourcexml> appear without
                        <sourcexml>footnote</sourcexml></title>
                <codeblock> &lt;case:factsummary&gt; &lt;p&gt; &lt;text&gt; &lt;fnr
                    fntoken="1ald095fn2" fnrtoken="1ald095fn2-r"&gt;1&lt;/fnr&gt; Crystal wine
                    glasses sent on behalf of the applicant by post from Sydney to Melbourne were
                    broken in transit. The glasses were packed in individual compartments in a box
                    made of fairly flimsy cardboard and were individually wrapped in tissue paper.
                    There was no external packaging to cushion the box and its contents against
                    damage by impact. The box was marked Fragile. The applicant claimed compensation
                    from the Australian Postal Commission for the breakage of the glasses. His claim
                    was refused on the basis that Postal by-law 292 precluded compensation where the
                    goods damaged were not adequately wrapped to protect them in the ordinary course
                    of transmission. The applicant appealed to the Tribunal asserting that the
                    marking Fragile on the goods should have indicated to the Commission that the
                    goods had to be handled with care. &lt;/text&gt; &lt;/p&gt; …
                    &lt;/case:factsummary&gt; </codeblock>
            </example>
            <example>
                <title>Target xml: <sourcexml>fnr</sourcexml> appear without
                        <sourcexml>footnote</sourcexml></title>
                <codeblock> &lt;casesum:summaries&gt; &lt;casesum:editorialsummar&gt; &lt;p&gt;
                    &lt;text&gt; &lt;!-- a footnote reference without footnote is a data error.
                    &lt;fnr fntoken="1ald095fn2" fnrtoken="1ald095fn2-r"&gt;1&lt;/fnr&gt; --&gt;
                    Crystal wine glasses sent on behalf of the applicant by post from Sydney to
                    Melbourne were broken in transit. The glasses were packed in individual
                    compartments in a box made of fairly flimsy cardboard and were individually
                    wrapped in tissue paper. There was no external packaging to cushion the box and
                    its contents against damage by impact. The box was marked Fragile. The applicant
                    claimed compensation from the Australian Postal Commission for the breakage of
                    the glasses. His claim was refused on the basis that Postal by-law 292 precluded
                    compensation where the goods damaged were not adequately wrapped to protect them
                    in the ordinary course of transmission. The applicant appealed to the Tribunal
                    asserting that the marking Fragile on the goods should have indicated to the
                    Commission that the goods had to be handled with care. &lt;/text&gt; &lt;/p&gt;
                    … &lt;/casesum:editorialsummar&gt; &lt;/casesum:summaries&gt; </codeblock>
            </example>
            <example>
                <title>Source xml: <sourcexml>leg:bodytext/fnr</sourcexml> scenario</title>
                <codeblock> &lt;leg:bodytext&gt; &lt;fnr fntoken="CPQ.QCAT.QCATPD"
                    fnrtoken="CPQ.QCAT.QCATPD-R"&gt;*&lt;/fnr&gt; &lt;/leg:bodytext&gt; ....
                    &lt;footnotegrp&gt; &lt;footnote fntoken="CPQ.QCAT.QCATPD"
                    fnrtokens="CPQ.QCAT.QCATPD-R" type="default"&gt;
                    &lt;fnlabel&gt;*&lt;/fnlabel&gt; &lt;fnbody&gt; &lt;p&gt;&lt;refpt type="ext"
                    id="CPQ.QCAT.QCATPD"/&gt; &lt;text&gt; &amp;copy; The State of Queensland
                    (Queensland Civil and Administrative Tribunal) 2010. QCAT applications fees
                    reproduced with the kind permission of the Queensland Civil and Administrative
                    Tribunal. See &lt;remotelink href="www.qcat.qld.gov.au" hrefclass="http"
                    newwindow="YES"&gt; www.qcat.qld.gov.au&lt;/remotelink&gt; &lt;/text&gt;
                    &lt;/p&gt; &lt;/fnbody&gt; &lt;/footnote&gt; &lt;/footnotegrp&gt; </codeblock>
            </example>
            <example>
                <title>Target xml: <sourcexml>leg:bodytext/fnr</sourcexml> scenario</title>
                <codeblock> &lt;primlaw:bodytext&gt; &lt;textitem&gt; &lt;footnote-ref
                    anchoridref="CPQ.QCAT.QCATPD"&gt; &lt;ref:anchor id="CPQ.QCAT.QCATPD-R"/&gt;
                    &lt;label&gt;*&lt;/label&gt; &lt;/footnote-ref&gt; &lt;/textitem&gt;
                    &lt;/primlaw:bodytext&gt; &lt;footnotegroup&gt; &lt;footnote&gt; &lt;ref:anchor
                    id="CPQ.QCAT.QCATPD"/&gt; &lt;ref:returnreference&gt; &lt;ref:locator
                    anchoridref="CPQ.QCAT.QCATPD-R" anchortype="local"/&gt;
                    &lt;/ref:returnreference&gt; &lt;label&gt;*&lt;/label&gt; &lt;bodytext&gt;
                    &lt;p&gt; &lt;text&gt; &amp;#x00A9; The State of Queensland (Queensland Civil
                    and Administrative Tribunal) 2010. QCAT applications fees reproduced with the
                    kind permission of the Queensland Civil and Administrative Tribunal. See &lt;url
                    normval="http://www.qcat.qld.gov.au"&gt; www.qcat.qld.gov.au&lt;/url&gt;
                    &lt;/text&gt; &lt;/p&gt; &lt;/bodytext&gt; &lt;/footnote&gt;
                    &lt;/footnotegroup&gt; </codeblock>
            </example>
            <example>
                <title>Source xml: <sourcexml>footnote/fnbody/p/refpt/@id</sourcexml> holds the same
                    value as <sourcexml>footnote/@fntoken</sourcexml></title>
                <codeblock> &lt;p&gt; &lt;text&gt;The purchaser's solicitor should be careful where
                    a right to rescind arises in the purchaser's favour. In conveyancing matters,
                    the solicitor's knowledge of the right to rescind or the facts giving rise to
                    that right is imputed to the client. The solicitor's conduct may, if care is not
                    taken, amount to an affirmation of the contract as still on foot or a
                    termination of it, notwithstanding the client's ignorance. &lt;fnr
                    fnrtoken="CONN.DAR.11102.ANT2-R" fntoken="CONN.DAR.11102.ANT2"&gt;2&lt;/fnr&gt;
                    &lt;/text&gt; &lt;/p&gt; &lt;!-- Etc. --&gt; &lt;footnote
                    fnrtokens="CONN.DAR.11102.ANT2-R" fntoken="CONN.DAR.11102.ANT2"
                    type="default"&gt; &lt;fnlabel&gt;2&lt;/fnlabel&gt; &lt;fnbody&gt; &lt;p&gt;
                    &lt;refpt id="CONN.DAR.11102.ANT2" type="ext"/&gt; &lt;text&gt; &lt;ci:cite
                    searchtype="CASE-REF"&gt;...&lt;/ci:cite&gt; &lt;/text&gt; &lt;/p&gt;
                    &lt;/fnbody&gt; &lt;/footnote&gt; </codeblock>
            </example>
            <example>
                <title>Target xml: <sourcexml>footnote/fnbody/p/refpt</sourcexml> has been
                    suppressed</title>
                <codeblock> &lt;p&gt; &lt;text&gt;The purchaser's solicitor should be careful where
                    a right to rescind arises in the purchaser's favour. In conveyancing matters,
                    the solicitor's knowledge of the right to rescind or the facts giving rise to
                    that right is imputed to the client. The solicitor's conduct may, if care is not
                    taken, amount to an affirmation of the contract as still on foot or a
                    termination of it, notwithstanding the client's ignorance. &lt;footnote-ref
                    anchoridref="CONN.DAR.11102.ANT2"&gt; &lt;ref:anchor
                    id="CONN.DAR.11102.ANT2-R"/&gt; &lt;label&gt;2&lt;/label&gt;
                    &lt;/footnote-ref&gt; &lt;/text&gt; &lt;/p&gt; &lt;footnote&gt; &lt;ref:anchor
                    id="CONN.DAR.11102.ANT2"/&gt; &lt;ref:returnreference&gt; &lt;ref:locator
                    anchoridref="CONN.DAR.11102.ANT2-R" anchortype="local"/&gt;
                    &lt;/ref:returnreference&gt; &lt;label&gt;2&lt;/label&gt; &lt;bodytext&gt;
                    &lt;p&gt; &lt;text&gt; &lt;lnci:cite&gt;...&lt;/lnci:cite&gt; &lt;/text&gt;
                    &lt;/p&gt; &lt;/bodytext&gt; &lt;/footnote&gt; </codeblock>
            </example>

            <example>
                <title>Source xml: <sourcexml>leg:bodytext/footnotegrp</sourcexml> scenario</title>
                <codeblock> &lt;leg:bodytext&gt; &lt;p&gt; &lt;text&gt; (a) An oil discharge
                    monitoring and control system approved by the Administration shall be fitted. In
                    considering the design of the oil content meter to be incorporated in the
                    system, the Administration shall have regard to the specification recommended by
                    the Organization. &lt;fnr fntoken="WA_ACT_1987-14_FN"
                    fnrtoken="WA_ACT_1987-14_FN-R"&gt;*&lt;/fnr&gt; .... &lt;/text&gt; &lt;/p&gt;
                    &lt;footnotegrp&gt; &lt;footnote fntoken="WA_ACT_1987-14_FN"
                    fnrtokens="WA_ACT_1987-14_FN-R" type="default"&gt;
                    &lt;fnlabel&gt;*&lt;/fnlabel&gt; &lt;fnbody&gt; &lt;p&gt; &lt;text
                    align="left"&gt; Reference is made to the Recommendation on International
                    Performance Specifications for Oily-Water Separating Equipment and Oil Content
                    Meters adopted by the Organization by Resolution A.233(VII). &lt;/text&gt;
                    &lt;/p&gt; &lt;/fnbody&gt; &lt;/footnote&gt; &lt;/footnotegrp&gt;
                    &lt;/leg:bodytext&gt; </codeblock>
            </example>

            <example>
                <title>Target xml: <sourcexml>primlaw:bodytext/p/text/footnotegroup</sourcexml>
                    scenario</title>
                <codeblock> &lt;primlaw:bodytext&gt; &lt;p&gt; &lt;text&gt;(a) An oil discharge
                    monitoring and control system approved by the Administration shall be fitted. In
                    considering the design of the oil content meter to be incorporated in the
                    system, the Administration shall have regard to the specification recommended by
                    the Organization. &lt;footnote-ref anchoridref="WA_ACT_1987-14_FN"&gt;
                    &lt;ref:anchor id="WA_ACT_1987-14_FN-R"/&gt; &lt;label&gt;*&lt;/label&gt;
                    &lt;/footnote-ref&gt; .... &lt;/text&gt; &lt;/p&gt; &lt;p&gt; &lt;text&gt;
                    &lt;footnotegroup&gt; &lt;footnote&gt; &lt;ref:anchor
                    id="WA_ACT_1987-14_FN"/&gt; &lt;ref:returnreference&gt; &lt;ref:locator
                    anchoridref="WA_ACT_1987-14_FN-R" anchortype="local"/&gt;
                    &lt;/ref:returnreference&gt; &lt;label&gt;*&lt;/label&gt; &lt;bodytext&gt;
                    &lt;p&gt; &lt;text&gt; &lt;p align="left"&gt; &lt;text&gt;Reference is made to
                    the Recommendation on International Performance Specifications for Oily-Water
                    Separating Equipment and Oil Content Meters adopted by the Organization by
                    Resolution A.233(VII). &lt;/text&gt; &lt;/p&gt; &lt;/text&gt; &lt;/p&gt;
                    &lt;/bodytext&gt; &lt;/footnote&gt; &lt;/footnotegroup&gt; &lt;/text&gt;
                    &lt;/p&gt; &lt;/primlaw:bodytext&gt; </codeblock>
            </example>

            <example>
                <title>Source xml: <sourcexml>bodytext/footnotegrp</sourcexml> scenario</title>
                <codeblock> &lt;bodytext&gt; ... &lt;entry colname="c1"&gt;Fair Work (State Referral
                    and Consequential and Other Amendments) Act 2009 No&amp;#160;54 &lt;fnr
                    fntoken="WRA.OL.ICAC06.FNT1" fnrtoken="WRA.OL.ICAC06.FNT1-R"&gt;*&lt;/fnr&gt;
                    &lt;/entry&gt; &lt;entry colname="c2"&gt;25 June 2009&lt;/entry&gt; &lt;entry
                    colname="c3"&gt;Sch 14[1]&amp;ndash;[11]: 1 July 2009&lt;/entry&gt; ...
                    &lt;footnotegrp&gt; &lt;footnote fntoken="WRA.OL.ICAC06.FNT1"
                    fnrtokens="WRA.OL.ICAC06.FNT1-R" type="default"&gt;
                    &lt;fnlabel&gt;*&lt;/fnlabel&gt; &lt;fnbody&gt; &lt;h&gt;Editor's
                    note:&lt;/h&gt; &lt;p&gt;&lt;refpt type="ext" id="WRA.OL.ICAC06.FNT1"/&gt;
                    &lt;text&gt;&lt;emph typestyle="bf"&gt;Please be aware that item 11, Schedule 14
                    of this Act provides the following:&lt;/emph&gt; &lt;/text&gt; &lt;/p&gt;
                    &lt;/fnbody&gt; &lt;/footnote&gt; &lt;/footnotegrp&gt; &lt;/bodytext&gt;
                </codeblock>
            </example>

            <example>
                <title>Target xml: <sourcexml>bodytext/p/text/footnotegroup</sourcexml>
                    scenario</title>
                <codeblock> &lt;bodytext&gt; ... &lt;entry colname="c1"&gt;Fair Work (State Referral
                    and Consequential and Other Amendments) Act 2009 No&amp;#160;54 &lt;footnote-ref
                    anchoridref="WRA.OL.ICAC06.FNT1"&gt; &lt;ref:anchor
                    id="WRA.OL.ICAC06.FNT1-R"/&gt; &lt;label&gt;*&lt;/label&gt;
                    &lt;/footnote-ref&gt; &lt;/entry&gt; &lt;entry colname="c2"&gt;25 June
                    2009&lt;/entry&gt; &lt;entry colname="c3"&gt;Sch 14[1]&amp;ndash;[11]: 1 July
                    2009&lt;/entry&gt; .... &lt;p&gt; &lt;text&gt; &lt;footnotegroup&gt;
                    &lt;footnote&gt; &lt;ref:anchor id="WRA.OL.ICAC06.FNT1"/&gt;
                    &lt;ref:returnreference&gt; &lt;ref:locator anchoridref="WRA.OL.ICAC06.FNT1-R"
                    anchortype="local"/&gt; &lt;/ref:returnreference&gt;
                    &lt;label&gt;*&lt;/label&gt; &lt;bodytext&gt; &lt;h&gt;Editor's note:&lt;/h&gt;
                    &lt;p&gt; &lt;text&gt;&lt;emph typestyle="bf"&gt;Please be aware that item 11,
                    Schedule 14 of this Act provides the following:&lt;/emph&gt; &lt;/text&gt;
                    &lt;/p&gt; &lt;/bodytext&gt; &lt;/footnote&gt; &lt;/footnotegroup&gt;
                    &lt;/text&gt; &lt;/p&gt; &lt;/bodytext&gt; </codeblock>
            </example>

            <example>
                <title>Source xml: Canada only, suppress indent from
                        <sourcexml>footnote/fnbody/p[@indent]</sourcexml></title>
                <codeblock> &lt;footnotegrp&gt; &lt;footnote fntoken="fn-1" fnrtokens="fnr-1"&gt;
                    &lt;fnlabel&gt;1&lt;/fnlabel&gt; &lt;fnbody&gt; &lt;p i="2"
                    indent="1st-line"&gt; &lt;text&gt;Decision...&lt;/text&gt; &lt;/p&gt;
                    &lt;/fnbody&gt; &lt;/footnote&gt; ... &lt;/footnotegrp&gt; </codeblock>
            </example>

            <example>
                <title>Target xml: Canada only, suppress indent from
                        <sourcexml>footnote/fnbody/p[@indent]</sourcexml></title>
                <codeblock> &lt;footnotegroup&gt; &lt;footnote&gt; &lt;ref:anchor id="fn-1"/&gt;
                    &lt;ref:returnreference&gt; &lt;ref:locator anchoridref="fnr-1"
                    anchortype="local"/&gt; &lt;/ref:returnreference&gt;
                    &lt;label&gt;1&lt;/label&gt; &lt;bodytext&gt; &lt;p&gt;
                    &lt;text&gt;Decision...&lt;/text&gt; &lt;/p&gt; &lt;/bodytext&gt;
                    &lt;/footnote&gt; ... &lt;/footnotegroup&gt; </codeblock>
            </example>

            <example>
                <title>Source xml: <sourcexml>legfragment/footnotegrp</sourcexml></title>
                <codeblock>
                    <![CDATA[
<legfragment>
    ........
    <footnotegrp>
        <footnote type="endnote" fntoken="d42e225" fnrtokens="d42e222">
            <fnlabel>(*)</fnlabel>
            <fnbody>
                <p>
                    <text>OJ L 149, 11.6.2005, p 22.’;</text>
                </p>
            </fnbody>
        </footnote>
    </footnotegrp>
</legfragment>
]]>
                </codeblock>
            </example>

            <example>
                <title>Target xml:
                        <targetxml>primlaw:excerpt/primlaw:bodytext/p/text/footnotegroup</targetxml></title>
                <codeblock>
                    <![CDATA[
<primlaw:excerpt>
    ..........
    <primlaw:bodytext>
        <p>
            <text>
                <footnotegroup>
                    <footnote>
                        <ref:anchor id="d42e225"/>
                        <ref:returnreference>
                            <ref:locator anchoridref="d42e222" anchortype="local"/>
                        </ref:returnreference>
                        <label>*</label>
                        <bodytext>
                            <p>
                                <text>OJ L 149, 11.6.2005, p 22.’;</text>
                            </p>
                        </bodytext>
                    </footnote>
                </footnotegroup>
            </text>
        </p>
    </primlaw:bodytext>
</primlaw:excerpt>
]]>
                </codeblock>
            </example>

            <!-- McNally June 9 2014. Commenting-out the following CA02 rule, example, and changelog entry. 
            Target is not valid, ...bodytext/courtcase:opinion.... 
            If only applies to CA02-CC consider adding as rule only in that CI.  -->

            <!--        <note>
            <b>Canada CA02 Only:</b> If <sourcexml>footnotegrp</sourcexml> is a child of
                <sourcexml>case:judgments</sourcexml>, then it becomes
                <targetxml>casedigest:body/casedigest:decision/casedigest:decisionsummary/bodytext/courtcase:opinion/footnotegroup</targetxml>.
            Please refer the example below for more clarification. </note>

        <example><b>Source XML</b>
            <codeblock>
&lt;case:judgments>
    &lt;footnotegrp>
        &lt;footnote fntoken="fn-1" fnrtokens="fnr-1">
            &lt;fnlabel>1&lt;/fnlabel>
            &lt;fnbody>
                &lt;p>
                    &lt;text>R.S.N.L. 1990, c. F-12.&lt;/text>
                &lt;/p>
            &lt;/fnbody>
        &lt;/footnote>
    &lt;/footnotegrp>
&lt;/case:judgments>
            </codeblock>
        </example>

        <example>
            <b>Target XML</b>
            <codeblock>
&lt;casedigest:body>
    &lt;casedigest:decision>
        &lt;casedigest:decisionsummary>
            &lt;bodytext>
                &lt;courtcase:opinion>
                    &lt;footnotegroup>
                        &lt;footnote>
                        &lt;ref:anchor id="fn-1" />
                        &lt;ref:returnreference>
                            &lt;ref:locator anchoridref="fnr-1" anchortype="local" />
                        &lt;/ref:returnreference>
                        &lt;label>1&lt;/label>
                         &lt;bodytext>
                             &lt;p>
                                &lt;text>R.S.N.L. 1990, c. F-12.&lt;/text>
                            &lt;/p>
                        &lt;/bodytext>
                        &lt;/footnote>
                    &lt;/footnotegroup>
                &lt;/courtcase:opinion>
            &lt;/bodytext>
            &lt;/casedigest:decisionsummary>
    &lt;/casedigest:decision>
&lt;/casedigest:body>
    </codeblock>
        </example>-->

            <section>
                <title>Changes</title>
                <p>2017-03-07: <ph id="change_20170307_RS">Added instructions for handling
                            <sourcexml>legfragment/footnotegrp</sourcexml>.[Webstar#6805157]</ph></p>
                <p>2016-08-08: <ph id="change_20160808_RS">Removing duplicate entry of
                            <sourcexml>lilabel/fnr</sourcexml></ph></p>
                <p>2016-08-04: <ph id="change_20160804_RS">Added note for handling
                            <sourcexml>lilabel/fnr</sourcexml> Applicable for AU05, Incident
                        #6597893</ph></p>
                <p>2016-02-29: <ph id="change_20160229_HP">Added note for handling
                            <sourcexml>@type="editorial"</sourcexml> attribute. Applicable for
                        UK22CS, RFA# 2762</ph></p>
                <p>2016-01-05: <ph id="change_20160105_jm">Added instructions for
                            <sourcexml>footnotegrp</sourcexml> within
                        <sourcexml>frm:div</sourcexml>. To generate
                            <targetxml>form:p/form:text</targetxml> wrapper for target
                            <targetxml>footnotegroup</targetxml>. Immediately affects UK12 but will
                        apply to any stream if the use case occurs. RFA 2653.</ph></p>
                <p>2015-05-14: <ph id="change_20150514_jm">Added instructions for
                            <sourcexml>footnotegrp</sourcexml> within
                            <sourcexml>frm:body</sourcexml> and <sourcexml>clause</sourcexml>. To
                        generate <targetxml>form:p/form:text</targetxml> wrapper for target
                            <targetxml>footnotegroup</targetxml>. Immediately affects UK12 but will
                        apply to any stream if the use case occurs. R4.5 Content Issues 2316 and
                        2317.</ph></p>
                <!--<p>2014-06-06: <ph id="change_20140606_AS">Canada CA02 only. Added special rule for
                        <sourcexml>case:judgements/footnotegrp</sourcexml> to map to
                        <targetxml>casedigest:body/casedigest:decision/casedigest:decisionsummary/bodytext/courtcase:opinion/footnotegroup</targetxml>
                    Phase 4 Issue 207.</ph></p>-->
                <p>2014-06-02: <ph id="change_20140602_jm">Canada only. Added special rule to
                        suppress indent from <sourcexml>footnote/fnbody/p[@indent]</sourcexml>.
                        Applies immediately to all Canada streams. R4.5 Content Issue 1609.</ph></p>
                <p>2014-04-17: <ph id="change_20140417_jm">Added instruction for
                            <sourcexml>footnotegrp</sourcexml> within
                            <sourcexml>sigblock</sourcexml>. Specifies <targetxml>p/text</targetxml>
                        wrapper for target <targetxml>sigblock/p/text/footnotegroup</targetxml>.
                        Immediately affects UK12 but will apply to any stream if the use case
                        occurs. Phase 6 UK discussion items 76 and 88.</ph></p>
                <p>2014-01-06: <ph id="change_20140106_SS">Updated target example for applying the
                        rule of "deleting extraneous instances of @morerows, @colsep and @rowsep" in
                        sample documents.</ph></p>
                <p>2013-10-02: <ph id="change_20131002_DSF">Not a rule change. Cleaned up the note
                        regarding the scenario when footnote/@fntoken has a value of "0" in an
                        attempt to make the directions clearer.</ph></p>
                <p>2013-08-22: <ph id="change_20130822_jm">Not a rule change. Second target sample
                        modified to remove attribute <targetxml>lnci:cite[@citeref]</targetxml>
                        because value captured in descendant
                            <targetxml>ref:crossreference/ref:locator[@anchoridref]</targetxml>.
                        Ancillary/illustrative within this module. Change made to promote uniformity
                        across samples.</ph></p>
                <p>2013-01-09: <ph id="change_20130109_xxx">Added instruction note for handling of
                            <sourcexml>footnote[@fntoken]</sourcexml> with value 0 for UK content
                        types.</ph></p>
                <p>2012-11-05: Added instructions for handling of <sourcexml>footnotegrp</sourcexml>
                    within <sourcexml>case:appendix</sourcexml>,
                        <sourcexml>case:consideredcases</sourcexml>,
                        <sourcexml>case:priorhist</sourcexml>, <sourcexml>note</sourcexml> and
                        <sourcexml>prelim</sourcexml>.</p>
                <p>2012-10-18: Added instructions for creating
                        <targetxml>footnote/ref:returnreference</targetxml>.</p>
                <p>2012-10-05: Added instructions for handling of
                        <sourcexml>pgrp/footnotegrp</sourcexml>.</p>
                <p>2012-10-03: Added standard note about <targetxml>@anchoridref</targetxml> format
                    and fixed a few typos.</p>
                <p>2012-09-18: Updated instructions for handling
                        <targetxml>form:form/form:document/form:bodytext/form:p/form:text/footnotegroup</targetxml>.</p>
                <p>2012-08-28: Added instructions for handling <sourcexml>footnotegrp</sourcexml>
                    when it is a child of the following elements:
                        <sourcexml>case:judgments</sourcexml>,
                        <sourcexml>case:judgmentbody</sourcexml>,
                        <sourcexml>case:headnote</sourcexml>,
                        <sourcexml>case:decisionsummary</sourcexml>,
                        <sourcexml>case:factsummary</sourcexml>,
                        <sourcexml>case:references</sourcexml>,
                        <sourcexml>case:typeofcase</sourcexml>, <sourcexml>p</sourcexml>,
                        <sourcexml>glp:note</sourcexml>, <sourcexml>blockquote</sourcexml>,
                        <sourcexml>li</sourcexml>, <sourcexml>catchwordgrp</sourcexml></p>
                <p>2012-08-28: Updated instructions for handling
                        <sourcexml>level/bodytext/footnotegrp</sourcexml>.</p>
                <p>2012-08-23: Updated sample containing
                        <sourcexml>ci:content/remotelink</sourcexml> to add target
                        <targetxml>ref:crossreference</targetxml>.</p>
                <p>2012-08-23: Updated Notes that <targetxml>@xml:id</targetxml> and
                        <targetxml>ref:anchor@id</targetxml> beginning with number should start with
                    underscore, not country code</p>
                <p>2012-08-14: Added instructions for handling
                        <sourcexml>level/bodytext/footnotegrp</sourcexml>.</p>
                <p>2012-08-14: Added instructions and example for handling
                        <sourcexml>leg:bodytext/footnotegrp</sourcexml> and
                        <sourcexml>bodytext/footnotegrp</sourcexml> scenario and renamed
                        <targetxml>footnotegrp</targetxml> to <targetxml>footnotegroup</targetxml>
                    according to schema.</p>
                <p>2012-07-31: Updated the instructions for handling
                        <sourcexml>footnotegrp</sourcexml> adding footnotegrp to footnotegrp
                    instruction. Also updated samples to include footnotegrp wrapper elements where
                    necessary </p>
                <p>2012-07-06: Updated the instructions for handling
                        <sourcexml>footnote/@type</sourcexml> with directions to supress
                        <sourcexml>@type</sourcexml> when it has a value of "annotation".</p>
                <p>2012-06-15: Removed the sample mapping for the scenario of
                        <sourcexml>footnote</sourcexml> without a corresponding
                        <sourcexml>fnr</sourcexml>.</p>
                <p>2012-05-24: Removed the instructions for handling <sourcexml>footnote</sourcexml>
                    without a corresponding <sourcexml>fnr</sourcexml>.</p>
                <p>2012-05-11: Added note that the value of <targetxml>footnote/@xml:id</targetxml>
                    should be prefixed with the lower case country code followed by an
                    underscore.</p>
                <p>2012-05-10: Updated the instructions for handling <sourcexml>footnote</sourcexml>
                    without a corresponding <sourcexml>fnr</sourcexml>.</p>
                <p>2012-05-10: Added instructions to suppress <sourcexml>fnr</sourcexml> when it is
                    empty.</p>
                <p>2012-05-07: Added instructions for handling the scenario when
                        <sourcexml>footnote/fnbody/p/refpt/@id</sourcexml> holds the same value as
                        <sourcexml>footnote/@fntoken</sourcexml></p>
                <p>2012-05-07: Instruction and example added for
                        <sourcexml>leg:bodytext/fnr</sourcexml> scenario.</p>
                <p>2012-05-04: Updated the instruction and example for handling -
                        <sourcexml>fnr</sourcexml> appears without
                    <sourcexml>footnote</sourcexml>.</p>
                <p>2012-04-27: Added instruction for handling of
                        <sourcexml>footnote/@type</sourcexml>, <sourcexml>fnr/@alt-label</sourcexml>
                    and <sourcexml>fnr/id</sourcexml>.</p>
                <p>2012-04-26: Added the instruction and example for handling -
                        <sourcexml>fnr</sourcexml> appears without
                    <sourcexml>footnote</sourcexml>.</p>
                <p>2012-04-16: Added the instruction and example for handling,
                        <sourcexml>footnote</sourcexml> appears without
                    <sourcexml>fnr</sourcexml>.</p>
                <p>2012-04-16: Added the instruction for handling of
                        <sourcexml>footnotegrp/heading</sourcexml>.</p>
                <p>2012-01-05: Add the instruction when more than one footnote reference points at
                    the same footnote.</p>
                <p>2011-12-21: <b>Fixed</b> instructions to indicate that the @fntoken value (not
                    @fnrtokens) should be used to populate ref:anchor[@id].</p>
                <p>2011-12-21: Several changes to clarify instructions.</p>
                <p>2011-12-15: Created.</p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_footnote-LxAdv-footnote.dita  -->
    <!-- JL I GIVE UP. I KNOW WE SHOULDN"T DO THIS BUT IT SHOULD  FIX EVERYTHING -->

    <!--    <xsl:include href="Rosetta_footnote-LxAdv-footnote_No-Reordering.xsl"/>-->



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_glp.note-to-LexisAdvance_note">
        <title><sourcexml>glp:note</sourcexml> to <targetxml>note</targetxml>
            <lnpid>id-CCCC-10340</lnpid></title>
        <body>
            <section>
                <p><sourcexml>glp:note</sourcexml> becomes <targetxml>note</targetxml> and attribute
                        <sourcexml>@notetype</sourcexml> becomes <targetxml>notetype</targetxml>.
                    The children of <sourcexml>glp:note</sourcexml> are handled as follows: <ul>
                        <li><sourcexml>glp:note/heading</sourcexml> becomes
                                <targetxml>note/heading</targetxml>.</li>
                        <li><sourcexml>glp:note/refpt</sourcexml> becomes
                                <targetxml>note/ref:anchor</targetxml>.</li>
                        <li><p>Other children of <sourcexml>glp:note</sourcexml> should map to
                                children of <targetxml>note/bodytext</targetxml>.</p>
                            <p>Ex.</p>
                            <ul>
                                <li><sourcexml>glp:note/p</sourcexml> becomes
                                        <targetxml>note/bodytext/p</targetxml>.</li>
                                <li><sourcexml>glp:note/pgrp</sourcexml> becomes
                                        <targetxml>note/bodytext/pgrp</targetxml>.</li>
                                <li><sourcexml>glp:note/table</sourcexml> becomes
                                        <targetxml>note/bodytext/table</targetxml>.</li>
                                <li><sourcexml>glp:note/h</sourcexml> becomes
                                        <targetxml>note/bodytext/h</targetxml>.</li>
                                <li><sourcexml>glp:note/blockquote</sourcexml> becomes
                                        <targetxml>note/bodytext/blockquote</targetxml>.</li>
                                <li><sourcexml>glp:note/page</sourcexml> becomes
                                        <targetxml>note/bodytext/ref:page</targetxml>.</li>
                                <li/>
                            </ul></li>
                        <li><sourcexml/></li>
                    </ul></p>
            </section>
            <example>
                <title>Source XML</title>
                <codeblock> &lt;glp:note&gt; &lt;refpt id="257_ALR_1_1" type="ext"/&gt;
                    &lt;/glp:note&gt; </codeblock>
                <title>Target XML</title>
                <codeblock> &lt;note&gt; &lt;ref:anchor id="au_257_ALR_1_1" anchortype="global"/&gt;
                    &lt;/note&gt; </codeblock>
            </example>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;glp:note notetype="warning"&gt; &lt;p&gt;&lt;text&gt;Editor's Note:
                    This document contains the full text of sections 1 to 70 and the Schedule. The
                    Appendices to the Act are found in a separate document. Please conduct a cite
                    search for "S.B.C. 1999, c. 2" to obtain all relevant documents.Acts Affected:
                    Adoption Act, R.S.B.C. 1996, c. 5; Child, Family and Community Service Act,
                    R.S.B.C. 1996, c. 46; Environmental Assessment Act, R.S.B.C. 1996, c. 119;
                    Estate Administration Act, R.S.B.C. 1996, c. 122;...&lt;/text&gt;&lt;/p&gt;
                    &lt;/glp:note&gt; </codeblock>
                <title>Target XML</title>
                <codeblock> &lt;note notetype="warning"&gt; &lt;bodytext&gt;
                    &lt;p&gt;&lt;text&gt;Editor's Note: This document contains the full text of
                    sections 1 to 70 and the Schedule. The Appendices to the Act are found in a
                    separate document. Please conduct a cite search for "S.B.C. 1999, c. 2" to
                    obtain all relevant documents.Acts Affected: Adoption Act, R.S.B.C. 1996, c. 5;
                    Child, Family and Community Service Act, R.S.B.C. 1996, c. 46; Environmental
                    Assessment Act, R.S.B.C. 1996, c. 119; Estate Administration Act, R.S.B.C. 1996,
                    c. 122;...&lt;/text&gt;&lt;/p&gt; &lt;/bodytext&gt; &lt;/note&gt; </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2012-11-30: Added instruction for attribute handling of
                        <sourcexml>glp:note</sourcexml>.</p>
            </section>
            <!-- SEP 2015-8-6 added -->
            <!--  <xsltinclusion>
      <xsl:stylesheet version="2.0">
        <xsl:template match="glp:note">
			<xsl:element name="note">
				<xsl:apply-templates select="@*"/>
				<xsl:apply-templates select="heading"/>
				<xsl:element name="bodytext">
					<xsl:apply-templates select="*[not(heading)]"/>
				</xsl:element>
			</xsl:element>
			<xsl:apply-templates/>
        </xsl:template>
      </xsl:stylesheet>
    </xsltinclusion>	-->
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_glp.note-LxAdv-note.dita  -->

    <!-- JD: 2017-08-08: Note that this also processes 'leg:histnote' via template name, called from this module; this was done to match DT output, which groups both under a <notes> wrapper -->
    <xsl:template match="glp:note" name="glp-note-generic">
        <note xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <xsl:if test="self::leg:histnote">
                <xsl:attribute name="notetype" select="'historical'"/>
            </xsl:if>
            <xsl:if test="$streamID = 'AU18' and child::heading/desig/designum/refpt">
                <xsl:attribute name="notetype" select="'jurisdiction-variant'"/>

            </xsl:if>
            <xsl:choose>
                <xsl:when test="$streamID = 'AU18' and ./@id = descendant::refpt/@id"/>
                <xsl:otherwise>
                    <xsl:apply-templates select="@id"/>
                </xsl:otherwise>
            </xsl:choose>
            <xsl:apply-templates select="@* except @id"/>
            <!-- from 
                DITA/ConversionInstructions/Rosetta/common_newest/Rosetta_leg.comntry-level_LEVELTYPE_GROUP-LxAdv-annot.annotations-annot.annotation-grp.dita
            and other annotation CIs-->
            <xsl:if
                test="not(@notetype) and ancestor::level[ancestor::leg:comntry] and not(descendant::inlineobject | following-sibling::inlineobject)">
                <xsl:attribute name="notetype" select="'xref'"/>
            </xsl:if>
            <xsl:apply-templates select="refpt | heading/descendant::refpt"/>
            <xsl:apply-templates select="heading"/>
            <!-- SS: template added for handling heading and h under caseinfo for NZ03 cases-->
            <xsl:if test="preceding-sibling::heading[parent::caseinfo][$streamID = 'NZ03']">
                <xsl:apply-templates select="preceding-sibling::heading[parent::caseinfo]"/>
                <xsl:apply-templates select="preceding-sibling::h[parent::caseinfo]"/>
            </xsl:if>
            <xsl:if test="child::*[not(self::heading)][not(self::refpt)]">
                <bodytext>
                    <!-- Awantika: if remotelink is the child of glp:note then p/text is required.
				        	WPK 2018-03-16: added clause for NZ05 where there is child inlineobject only (or first child).  webstar 7141513 
				        -->
                    <xsl:choose>
                        <xsl:when
                            test="
                                child::remotelink
                                or not(child::p/child::table or child::p/child::text) and $streamID = ('HK03, NZ03')
                                or (*[1][self::inlineobject] and $streamID = 'NZ05')">
                            <p>
                                <text>
                                    <xsl:apply-templates select="child::* except (heading | refpt)"
                                    />
                                </text>
                            </p>
                        </xsl:when>
                        <!--Satbir: Added condition for handling "glp:note/p/table"-->
                        <xsl:when
                            test="child::p/child::table or child::p/child::text and $streamID = 'NZ03'">

                            <xsl:apply-templates select="child::* except (heading | refpt)"/>

                        </xsl:when>
                        <xsl:otherwise>
                            <xsl:apply-templates select="child::* except (heading | refpt)"/>
                        </xsl:otherwise>
                    </xsl:choose>
                </bodytext>
            </xsl:if>
        </note>
    </xsl:template>

    <xsl:template match="glp:note/@notetype">
        <xsl:copy-of select="."/>
    </xsl:template>

    <!-- Vikas Rohilla : Updated for the streamID CA01 -->
    <xsl:template match="glp:note[parent::lilabel][$streamID = ('CA01', 'CA04')]">
        <xsl:value-of select="."/>
    </xsl:template>

    <!-- Vikas Rohilla : Updated for the streamID CA14    -->
    <xsl:template match="glp:note[parent::dig:info[parent::dig:collection]][$streamID = 'CA14']">
        <xsl:text disable-output-escaping="yes">&lt;!--</xsl:text>
        <xsl:copy-of select="." copy-namespaces="no"/>
        <xsl:text disable-output-escaping="yes">--&gt;</xsl:text>
    </xsl:template>

    <xsl:template match="glp:note[parent::case:headnote][$streamID = 'NZ04']">
        <caseinfo:caseinfo
            xmlns:caseinfo="http://www.lexisnexis.com/xmlschemas/content/legal/case-information/1/">
            <note>
                <bodytext>
                    <xsl:apply-templates/>
                </bodytext>
            </note>
        </caseinfo:caseinfo>
    </xsl:template>

    <!-- paul: this is a template that merges sibling glp:notes into <notes> wrapper.  add your stream id if you want to use it rather than the generic above 
    		JD: Note that in order to merge this must NOT be called from a for-each; see below template
    		JD: 2017-08-10: added 'leg:histnote' as well, as (at least in NZ06) these are grouped under the same <notes> wrapper.
    -->
    <xsl:template
        match="glp:note[$streamID = ('AU10', 'NZ06', 'NZ13', 'NZ18')] | leg:histnote[$streamID = ('AU10', 'NZ06', 'NZ13', 'NZ18')]"
        name="glp-note-mergesiblings" priority="2">
        <xsl:choose>
            <xsl:when test=". = ''"/>
            <xsl:when test="parent::level or parent::heading/parent::level">
                <!-- these get mapped to prelim, which can't contain notes plural wrapper -->
                <xsl:call-template name="glp-note-generic"/>
            </xsl:when>
            <!-- when this is the first note and there are following sibling notes to be included in it, create wrapper  -->
            <xsl:when
                test="not(preceding-sibling::*[1][self::glp:note or self::leg:histnote]) and (following-sibling::glp:note or following-sibling::leg:histnote)">
                <notes xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <xsl:call-template name="glp-note-generic"/>
                    <!-- JD: replacing this for-each to (a) include leg:histnote and (b) limit to immediate siblings -->
                    <!--<xsl:for-each select="following-sibling::*[name()='glp:note']/preceding-sibling::glp:note">-->
                    <xsl:for-each
                        select="
                            following-sibling::glp:note[preceding-sibling::*[1][name() = ('glp:note', 'leg:histnote')]]
                            | following-sibling::leg:histnote[preceding-sibling::*[1][name() = ('glp:note', 'leg:histnote')]]">
                        <xsl:call-template name="glp-note-generic"/>
                    </xsl:for-each>
                </notes>
            </xsl:when>
            <!-- when the immediate preceding sibling is a glp:note it will have been grouped above, do nothing -->
            <xsl:when test="preceding-sibling::*[1][self::glp:note or self::leg:histnote]"/>
            <!-- otherwise, process in generic fashion -->
            <xsl:otherwise>
                <xsl:call-template name="glp-note-generic"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>


    <!-- JD: 2017-08-08: new template to group multiple contiguous <glp:note> and <leg:histnote> under <notes> 
		   when called from a for-each-group (e.g., under <leg:bodytext> created from template priority="30" in /modules/nonamespace/Rosetta_endnote-LxAdv-endnote.xsl)
	-->
    <xsl:template
        match="
            glp:note[$streamID = ('NZ06', 'NZ13') and parent::leg:bodytext
            and not(preceding-sibling::*[1][name() = ('glp:note', 'leg:histnote')])]
            | leg:histnote[$streamID = ('NZ06', 'NZ13') and parent::leg:bodytext
            and not(preceding-sibling::*[1][name() = ('glp:note', 'leg:histnote')])]
            "
        name="glp-note-mergesiblings-from-loop" priority="3">
        <xsl:choose>
            <xsl:when test=". = ''"/>
            <!-- if no content do nothing -->
            <xsl:when test="parent::level or parent::heading/parent::level">
                <!-- these get mapped to prelim, which can't contain notes plural wrapper -->
                <xsl:call-template name="glp-note-generic"/>
            </xsl:when>
            <!-- when this is the first note and there are following sibling notes to be included in it, create wrapper  -->
            <xsl:when
                test="
                    not(preceding-sibling::*[1][self::glp:note or self::leg:histnote])
                    and (following-sibling::*[1][name() = ('glp:note', 'leg:histnote')])">
                <notes xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <!-- process the first note -->
                    <xsl:call-template name="glp-note-generic"/>
                    <!-- 
					group immediate sibling notes (logic modified from https://gist.github.com/empo/1105204 )
					-->
                    <xsl:variable name="children"
                        select="following-sibling::glp:note | following-sibling::leg:histnote"/>

                    <xsl:for-each select="following-sibling::*">
                        <xsl:variable name="index" select="position()"/>
                        <xsl:if
                            test="
                                generate-id(.) = generate-id($children[$index])">
                            <xsl:call-template name="glp-note-generic"/>
                        </xsl:if>
                    </xsl:for-each>
                </notes>
            </xsl:when>
            <!-- when the immediate preceding sibling is a glp:note it will have been grouped above, do nothing -->
            <xsl:when test="preceding-sibling::*[1][self::*[name() = ('glp:note', 'leg:histnote')]]"/>
            <!-- otherwise, process in generic fashion -->
            <xsl:otherwise>
                <xsl:call-template name="glp-note-generic"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <xsl:template match="glp:note[$streamID = ('AU14')]">
        <xsl:choose>
            <xsl:when test="self::glp:note[following-sibling::level | preceding-sibling::level]">
                <bodytext xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <xsl:call-template name="AU14-glp-note"/>
                </bodytext>
            </xsl:when>
            <xsl:otherwise>
                <xsl:call-template name="AU14-glp-note"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
    <xsl:template name="AU14-glp-note">
        <note xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <xsl:apply-templates select="@*"/>
            <xsl:apply-templates select="refpt"/>
            <xsl:apply-templates select="heading"/>
            <xsl:apply-templates select="contrib"/>
            <xsl:if test="child::*[not(self::heading)][not(self::refpt)][not(self::contrib)]">
                <bodytext>
                    <xsl:apply-templates select="child::* except (heading | refpt | contrib)"/>
                </bodytext>
            </xsl:if>
        </note>
    </xsl:template>

    <!-- Awantika:2017-10-31- added template for AU01.
		If glp:note is the child of text then glp:note becomes inlinenote with attribute @notetype="editor-note" -->
    <xsl:template match="glp:note[parent::text][$streamID = ('AU01', 'NZ03')]">
        <inlinenote>
            <xsl:attribute name="notetype" select="'editor-note'"/>
            <xsl:value-of select="."/>
        </inlinenote>
    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_glp.note_ChildOf_text-to-LexisAdvance_inlinenote">
        <title><sourcexml>text/glp:note</sourcexml> to <targetxml>text/inlinenote</targetxml>
            <lnpid>id-CCCC-10339</lnpid></title>
        <body>
            <section>
                <p>
                    <ul>
                        <li>If <sourcexml>glp:note</sourcexml> is the child of
                                <sourcexml>text</sourcexml> then <sourcexml>glp:note</sourcexml>
                            becomes <targetxml>inlinenote</targetxml> with attribute
                                <targetxml>@notetype="editor-note"</targetxml>
                        </li>
                        <li>If <sourcexml>p/text</sourcexml> is the child of
                                <sourcexml>glp:note</sourcexml> then conversion should suppress
                                <sourcexml>p/text</sourcexml> element only and PCDATA of this
                            directly goes into <targetxml>inlinenote</targetxml>.</li>
                    </ul>
                </p>
            </section>
            <example>
                <title>Source XML </title>
                <codeblock> &lt;p&gt; &lt;text&gt; &lt;glp:note&gt; &lt;p nl="0"&gt;
                    &lt;text&gt;[Editor's note: Figure 1 could not be reproduced online. Please
                    contact Quicklaw Customer Service at 1-800-387-0899 or service@quicklaw.com and
                    request the following document: 07aeub57Figure1.doc]&lt;/text&gt; &lt;/p&gt;
                    &lt;/glp:note&gt; A number of area residents expressed opposition to the
                    proposed wells, as described below. &lt;/text&gt; &lt;/p&gt; </codeblock>
                <title>Target XML</title>
                <codeblock> &lt;p&gt; &lt;text&gt; &lt;inlinenote notetype="editor-note"&gt;
                    [Editor's note: Figure 1 could not be reproduced online. Please contact Quicklaw
                    Customer Service at 1-800-387-0899 or service@quicklaw.com and request the
                    following document: 07aeub57Figure1.doc] &lt;/inlinenote&gt; A number of area
                    residents expressed opposition to the proposed wells, as described below.
                    &lt;/text&gt; &lt;/p&gt; </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2016-04-01: <ph id="change_20160401_PS">Added instruction for child elements of
                            <sourcexml>glp:note</sourcexml> element, Applicable on CA01.</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_glp.note-Chof-text-LxAdv-inlinenote.dita  -->

    <!-- Vikas Rohilla : Initial created the text/glp:note-->
    <!-- Sudhanshu Srivastava added CA02 Stream ID for converting glpnote to inline -->
    <xsl:template
        match="text/glp:note[$streamID = 'CA01' or $streamID = 'CA02CC' or $streamID = 'CA04']">
        <inlinenote>
            <xsl:attribute name="notetype">
                <xsl:text>editor-note</xsl:text>
            </xsl:attribute>
            <xsl:apply-templates/>
        </inlinenote>
    </xsl:template>




    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_glp.note_ChildOf_emph-to-LexisAdvance_inlinenote">
        <title><sourcexml>emph/glp:note</sourcexml> to <targetxml>emph/inlinenote</targetxml>
            <lnpid>id-CCCC-10329</lnpid></title>
        <body>
            <section>
                <p>
                    <ul>
                        <li> If <sourcexml>glp:note</sourcexml> is the child of
                                <sourcexml>emph</sourcexml> then <sourcexml>glp:note</sourcexml>
                            becomes <targetxml>inlinenote</targetxml> with attribute
                                <targetxml>@notetype="editor-note"</targetxml>
                        </li>
                        <li>If <sourcexml>p/text</sourcexml> is the child of
                                <sourcexml>glp:note</sourcexml> then conversion should suppress
                                <sourcexml>p/text</sourcexml> element only and PCDATA of this
                            directly goes into <targetxml>inlinenote</targetxml>.</li>
                    </ul>
                </p>
            </section>
            <example>
                <title>Source XML </title>
                <codeblock> &lt;p indent="1st-line"&gt; &lt;text&gt; &lt;emph typestyle="bf"&gt;
                    &lt;glp:note&gt; &lt;p&gt; &lt;text&gt; [Editor's note: Appendix A could not be
                    reproduced online. Please contact Quicklaw Customer Service at 1-800-387-0899 or
                    service@quicklaw.com and request the following document:
                    07bcl217.doc.]&lt;/text&gt; &lt;/p&gt; &lt;/glp:note&gt; &lt;/emph&gt;
                    &lt;/text&gt; &lt;/p&gt; </codeblock>
                <title>Target XML</title>
                <codeblock> &lt;p indent="1st-line"&gt; &lt;text&gt; &lt;emph typestyle="bf"&gt;
                    &lt;inlinenote notetype="editor-note"&gt; [Editor's note: Appendix A could not
                    be reproduced online. Please contact Quicklaw Customer Service at 1-800-387-0899
                    or service@quicklaw.com and request the following document: 07bcl217.doc.]
                    &lt;/inlinenote&gt; &lt;/emph&gt; &lt;/text&gt; &lt;/p&gt; </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2016-04-01: <ph id="change_20160401_PS">Added instruction for child elements of
                            <sourcexml>glp:note</sourcexml> element, Applicable on CA01.</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_glp.note-Chof-emph-LxAdv-inlinenote.dita  -->

    <!-- Vikas Rohilla : Initila updated -->
    <xsl:template match="emph/glp:note[$streamID = 'CA01']">

        <inlinenote>
            <xsl:attribute name="notetype">
                <xsl:text>editor-note</xsl:text>
            </xsl:attribute>
            <xsl:value-of select="."/>
        </inlinenote>

    </xsl:template>





    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_heading-to-LexisAdvance_heading">
        <title><sourcexml>heading</sourcexml> to <targetxml>heading</targetxml>
            <lnpid>id-CCCC-10349</lnpid></title>
        <body>
            <section>
                <!--   @SBy:  bodytext/heading is added based on the QC XSLT   -->
                <!--p><sourcexml>heading</sourcexml> becomes <targetxml>heading</targetxml>. The attributes of <sourcexml>heading</sourcexml> are handled as  -->
                <p><sourcexml>heading</sourcexml> becomes <targetxml>heading</targetxml> and
                        <sourcexml>bodytext/heading</sourcexml> becomes <targetxml>h</targetxml>.
                    The attributes of <sourcexml>heading</sourcexml> are handled as follows: <ul>
                        <li><sourcexml>heading/@inline</sourcexml> is suppressed if target is
                                <targetxml>h</targetxml>. Otherwise,
                                <sourcexml>heading/@inline</sourcexml> becomes
                                <targetxml>heading/@inline</targetxml>. The valid values for
                                <targetxml>@inline</targetxml> are:<ul>
                                <li>"true"</li>
                                <li>"false"</li>
                            </ul></li>
                        <li><sourcexml>heading/@align</sourcexml> becomes
                                <targetxml>heading@align</targetxml>. The valid values for
                                <targetxml>@align</targetxml> are:<ul>
                                <li>"left"</li>
                                <li>"right"</li>
                                <li>"center"</li>
                            </ul>
                        </li>
                        <li><sourcexml>heading/@searchtype</sourcexml> should be suppressed.</li>
                    </ul>
                </p>
                <note>Conversion should not create consecutive <targetxml>heading</targetxml>
                    elements. When 2 or more sibling source elements map to
                        <targetxml>heading</targetxml>, the data should be merged into a single
                        <targetxml>heading</targetxml> element unless this would interfere with
                    content ordering.</note>
            </section>
            <example>
                <title>Source XML</title>
                <codeblock> &lt;heading align="center"&gt; &lt;title&gt;Consideration&lt;/title&gt;
                    &lt;/heading&gt; </codeblock>
                <title>Target XML</title>
                <codeblock> &lt;heading align="center"&gt; &lt;title&gt;Consideration&lt;/title&gt;
                    &lt;/heading&gt; </codeblock>
            </example>
            <example>
                <title>Source XML</title>
                <codeblock> &lt;heading inline="false"&gt; &lt;title&gt;Summary&lt;/title&gt;
                    &lt;/heading&gt; </codeblock>
                <title>Target XML</title>
                <codeblock> &lt;heading inline="false"&gt; &lt;title&gt;Summary&lt;/title&gt;
                    &lt;/heading&gt; </codeblock>
            </example>
            <section>
                <title>Changes</title>
            </section>
            <p>2013-03-06: <ph id="change_20130306_raj">Removed instructions/rules for exceptional
                    desig scenario and deprecated attribute
                    <targetxml>@followstitle</targetxml>.</ph></p>
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_heading-LxAdv-heading.dita  -->

    <xsl:template match="bodytext/heading[not($streamID = 'CA14' or $streamID = 'USLPA')]">

        <!--   @SBy:  this rule added based on the QC XSLT   -->

        <h xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <xsl:choose>
                <xsl:when test="$streamID = ('UK07', 'AU14', 'HK07')">
                    <xsl:apply-templates select="title | subtitle" mode="bodytext_heading"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:apply-templates select="@* | node()"/>

                    <!--    ... When 2 or more sibling source elements map to <targetxml>heading</targetxml>, the data should be merged into a single <targetxml>heading</targetxml> element unless this would interfere with content ordering.</note>     -->
                    <xsl:for-each select="following-sibling::node()[1][self::heading]">
                        <xsl:call-template name="combineSiblingsOfSameName"/>
                    </xsl:for-each>
                </xsl:otherwise>
            </xsl:choose>
        </h>

    </xsl:template>



    <xsl:template match="heading">

        <!--  Original Target XPath:  heading   -->
        <heading xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">

            <!-- MDS 2017-05-05 - Added 'except(refpt) due to UK08CA source markup 
	JL added leg:empleg to except list - it's addressed elsewhere and not valid here ever -->
            <xsl:apply-templates select="@* | node() except (refpt | leg:empleg)"/>

            <!--    ... When 2 or more sibling source elements map to <targetxml>heading</targetxml>, the data should be merged into a single <targetxml>heading</targetxml> element unless this would interfere with content ordering.</note>     -->
            <xsl:for-each select="following-sibling::node()[1][self::heading]">
                <xsl:call-template name="combineSiblingsOfSameName"/>
            </xsl:for-each>
            <!-- BRT 3/22/18 WS7142635 moified this condition to only move note if it's a child of toc-entry -->
            <xsl:if test="$streamID = ('UK06', 'UK12') and parent::toc-entry">
                <xsl:apply-templates select="following-sibling::note"/>
            </xsl:if>
        </heading>
    </xsl:template>

    <!--		<li><sourcexml>heading/@searchtype</sourcexml> should be suppressed.</li>  -->
    <!--		<li><sourcexml>heading/@inline</sourcexml> is suppressed if target is <targetxml>h</targetxml>.  Otherwise, ...  -->
    <!--    ... When 2 or more sibling source elements map to <targetxml>heading</targetxml>, the data should be merged into a single <targetxml>heading</targetxml> element unless this would interfere with content ordering.</note>     -->
    <xsl:template
        match="heading/@searchtype | bodytext/heading/@inline | heading[preceding-sibling::node()[1][self::heading]]"/>

    <xsl:template match="heading[not(parent::bodytext)]/@inline">

        <!--  Original Target XPath:  @inline   -->
        <xsl:copy-of select="."/>

    </xsl:template>

    <xsl:template match="heading/@align">

        <!--  Original Target XPath:  @align   -->
        <xsl:copy-of select="."/>

    </xsl:template>

    <xsl:template match="title[$streamID = ('UK07', 'AU14', 'HK07')]" mode="bodytext_heading">
        <xsl:apply-templates select="@* | node()"/>
    </xsl:template>

    <xsl:template match="subtitle[$streamID = ('UK07', 'AU14', 'HK07')]" mode="bodytext_heading">
        <xsl:apply-templates select="@* | node()"/>
    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_inlineobject-to-LexisAdvance_figure_ref.inlineobject">
        <title><sourcexml>inlineobject</sourcexml> to <targetxml>figure/ref:inlineobject</targetxml>
            <lnpid>id-CCCC-10368</lnpid></title>
        <body>
            <section>
                <title>Instructions <i>[common element]</i></title>
                <note>This topic is used in numerous conversion instructions for several LBUs. It is
                    a shared topic rather than duplicated to ensure consistency and accuracy. The
                    xml snippets contained in this topic reflect markup needed for the Apollo image
                    handling application. The UK is the first LBU to move from Apollo to the
                    Blobstore application for image handling. Therefore, if this is a UK conversion
                    instruction document, please refer to the following topics for correct image
                    handling markup.<ul>
                        <li><sourcexml>lnlink[@service="ATTACHMENT"]</sourcexml> to
                                <targetxml>ref:lnlink[@service="ATTACHMENT"]</targetxml> for
                            BLOBSTORE images (id-CCCC-10542)</li>
                        <li><sourcexml>inlineobject</sourcexml> to
                                <targetxml>ref:inlineobject</targetxml> for BLOBSTORE images
                            (id-CCCC-10540)</li>
                        <li><sourcexml>link[@filename]</sourcexml> to
                                <targetxml>ref:lnlink[@service="ATTACHMENT"]</targetxml> for
                            BLOBSTORE images (id-CCCC-10541)</li>
                    </ul></note>
                <p>If the <sourcexml>inlineobject</sourcexml>
                    <i>is</i> a diagram or picture illustrating textual material (e.g. not a minor
                    icon or symbol), <sourcexml>inlineobject</sourcexml> becomes
                        <targetxml>figure/ref:inlineobject</targetxml>. </p>
                <note>When <sourcexml>inlineobject</sourcexml> is a child of
                        <sourcexml>verbatim</sourcexml> then conversion should suppress
                        <sourcexml>proc:nl</sourcexml> from before and after of
                        <targetxml>figure</targetxml> element in the target. For more clarification
                    see Example: 3.</note>
            </section>

            <example>
                <title>Source XML 1: Source @smi present</title>
                <codeblock> &lt;p&gt; &lt;text&gt; &lt;inlineobject type="image" smi="98765"
                    attachment="ln-server" filename="3S3J-WW80-003F-W39R-00000-00-98765-xmp6.gif"
                    /&gt; &lt;/text&gt; &lt;/p&gt; </codeblock>
                <title>Target XML 1: Source @smi present</title>
                <codeblock> &lt;p&gt; &lt;text&gt; &lt;figure&gt; &lt;ref:inlineobject&gt;
                    &lt;ref:locator&gt; &lt;ref:locator-key&gt; &lt;ref:key-name
                    name="object-key"/&gt; &lt;ref:key-value
                    value="3S3J-WW80-003F-W39R-00000-00-98765-xmp6"/&gt; &lt;/ref:locator-key&gt;
                    &lt;ref:locator-params&gt; &lt;proc:param name="componentseq" value="1"/&gt;
                    &lt;proc:param name="object-type" value="image"/&gt; &lt;proc:param
                    name="object-smi" value="98765"/&gt; &lt;/ref:locator-params&gt;
                    &lt;/ref:locator&gt; &lt;/ref:inlineobject&gt; &lt;/figure&gt; &lt;/text&gt;
                    &lt;/p&gt; </codeblock>
            </example>
            <example>
                <title>Source XML 2: Source @smi not present</title>
                <codeblock> &lt;p&gt; &lt;text&gt; &lt;inlineobject type="image"
                    attachment="ln-server" filename="sch2.gif" /&gt; &lt;/text&gt; &lt;/p&gt; </codeblock>
                <title>Target XML 2: Source @smi not present</title>
                <codeblock> &lt;p&gt; &lt;text&gt; &lt;figure&gt; &lt;ref:inlineobject&gt;
                    &lt;ref:locator&gt; &lt;ref:locator-key&gt; &lt;ref:key-name
                    name="object-key"/&gt; &lt;ref:key-value value="X-Y-sch2"/&gt; &lt;!-- X and Y
                    are LNI and SMI values obtained from CSSM --&gt; &lt;/ref:locator-key&gt;
                    &lt;ref:locator-params&gt; &lt;proc:param name="componentseq" value="1"/&gt;
                    &lt;proc:param name="object-type" value="image"/&gt; &lt;!-- allowable values:
                    “image?; (from .jpg, .gif, .png, .bmp)--&gt; &lt;proc:param name="object-smi"
                    value=""/&gt; &lt;!-- This @value assignment is done by conversion program
                    --&gt; &lt;/ref:locator-params&gt; &lt;/ref:locator&gt;
                    &lt;/ref:inlineobject&gt; &lt;/figure&gt; &lt;/text&gt; &lt;/p&gt; </codeblock>
            </example>

            <example>
                <title>Source XML 3: &lt;nl/&gt; before and after &lt;inlineobject&gt;</title>
                <codeblock> &lt;p&gt; &lt;text&gt; &lt;verbatim verbatimclass="future"&gt; ...
                    &lt;nl/&gt; 26. Each of the provisions of the Act listed in Column A of
                    the&lt;nl/&gt; Table to this section is amended in the manner specified for
                    the&lt;nl/&gt; provision in Column B of the Table.&lt;nl/&gt; &lt;inlineobject
                    filename="SO13_18FT-0001.jpg" type="image"
                    attachment="ln-server"/&gt;&lt;nl/&gt; &lt;inlineobject
                    filename="SO13_18FT-0002.jpg" type="image"
                    attachment="ln-server"/&gt;&lt;nl/&gt; &lt;inlineobject
                    filename="SO13_18FT-0003.jpg" type="image"
                    attachment="ln-server"/&gt;&lt;nl/&gt; SOLICITORS ACT&lt;nl/&gt; &lt;nl/&gt; 27.
                    (1) Section 1 of the Solicitors Act is amended by striking&lt;nl/&gt; out "If a
                    person, unless a party to the proceeding, commences" at the&lt;nl/&gt; beginning
                    and substituting "Subject to subsection (2), if a person&lt;nl/&gt;
                    commences".&lt;nl/&gt; &lt;/verbatim&gt; &lt;/text&gt; &lt;/p&gt; </codeblock>
                <title>Target XML 3: &lt;nl/&gt; before and after &lt;inlineobject&gt;</title>
                <codeblock> &lt;p&gt; &lt;text&gt; &lt;verbatim verbatimclass="future"&gt; ...
                    &lt;proc:nl/&gt; 26. Each of the provisions of the Act listed in Column A of
                    the&lt;proc:nl/&gt; Table to this section is amended in the manner specified for
                    the&lt;proc:nl/&gt; provision in Column B of the Table. &lt;figure&gt;
                    &lt;ref:inlineobject&gt; &lt;ref:locator&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="object-key"/&gt; &lt;ref:key-value
                    value="X-Y-SO13_18FT-0001"/&gt; &lt;!-- X and Y are LNI and SMI values obtained
                    from CSSM --&gt; &lt;/ref:locator-key&gt; &lt;ref:locator-params&gt;
                    &lt;proc:param name="componentseq" value="1"/&gt; &lt;proc:param
                    name="object-type" value="image"/&gt; &lt;!-- allowable values: “image?; (from
                    .jpg, .gif, .png, .bmp)--&gt; &lt;proc:param name="object-smi" value=""/&gt;
                    &lt;!-- This @value assignment is done by conversion program --&gt;
                    &lt;/ref:locator-params&gt; &lt;/ref:locator&gt; &lt;/ref:inlineobject&gt;
                    &lt;/figure&gt; &lt;figure&gt; &lt;ref:inlineobject&gt; &lt;ref:locator&gt;
                    &lt;ref:locator-key&gt; &lt;ref:key-name name="object-key"/&gt;
                    &lt;ref:key-value value="X-Y-SO13_18FT-0002"/&gt; &lt;!-- X and Y are LNI and
                    SMI values obtained from CSSM --&gt; &lt;/ref:locator-key&gt;
                    &lt;ref:locator-params&gt; &lt;proc:param name="componentseq" value="1"/&gt;
                    &lt;proc:param name="object-type" value="image"/&gt; &lt;!-- allowable values:
                    “image?; (from .jpg, .gif, .png, .bmp)--&gt; &lt;proc:param name="object-smi"
                    value=""/&gt; &lt;!-- This @value assignment is done by conversion program
                    --&gt; &lt;/ref:locator-params&gt; &lt;/ref:locator&gt;
                    &lt;/ref:inlineobject&gt; &lt;/figure&gt; &lt;figure&gt;
                    &lt;ref:inlineobject&gt; &lt;ref:locator&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="object-key"/&gt; &lt;ref:key-value
                    value="X-Y-SO13_18FT-0003"/&gt; &lt;!-- X and Y are LNI and SMI values obtained
                    from CSSM --&gt; &lt;/ref:locator-key&gt; &lt;ref:locator-params&gt;
                    &lt;proc:param name="componentseq" value="1"/&gt; &lt;proc:param
                    name="object-type" value="image"/&gt; &lt;!-- allowable values: “image?; (from
                    .jpg, .gif, .png, .bmp)--&gt; &lt;proc:param name="object-smi" value=""/&gt;
                    &lt;!-- This @value assignment is done by conversion program --&gt;
                    &lt;/ref:locator-params&gt; &lt;/ref:locator&gt; &lt;/ref:inlineobject&gt;
                    &lt;/figure&gt; SOLICITORS ACT&lt;proc:nl/&gt; &lt;proc:nl/&gt; 27. (1) Section
                    1 of the Solicitors Act is amended by striking&lt;proc:nl/&gt; out "If a person,
                    unless a party to the proceeding, commences" at the&lt;proc:nl/&gt; beginning
                    and substituting "Subject to subsection (2), if a person&lt;proc:nl/&gt;
                    commences".&lt;proc:nl/&gt; &lt;/verbatim&gt; &lt;/text&gt; &lt;/p&gt;
                </codeblock>
            </example>

            <section>
                <title>Changes</title>
                <p>2016-07-29: <ph id="change_20160729_jm">Added Note about xml snippets that
                        illustrate image handling. Note summarizes move from Apollo to Blobstore
                        application. UK is first LBU to move to Blobstore.</ph></p>
                <p>2014-10-13: <ph id="change_20141013_PS">Added note and example to suppress
                            <targetxml>proc:nl</targetxml> from before and after of
                            <targetxml>figure/inlineobject</targetxml> when it comes inside
                            <targetxml>verbatim</targetxml> element.</ph></p>
                <p>2013-05-24: <ph id="change_20130524_SP">Updated target example, "when <b>smi</b>
                        is present".</ph></p>
                <p>2013-05-08: <ph id="change_20130508_SP">Extended the list of allowable values for
                        image handling.</ph></p>
                <p>2013-05-02: <ph id="change_20130502_SP">Updated target example to if the SMI is
                        present then a <targetxml>ref:inliineobject/@status</targetxml> attribute is
                        set to “valid?.</ph></p>
                <p>2013-05-01: <ph id="change_20130501_SP">Removed instructions for section
                            <b>"Pre-Release 4.0"</b> because according to latest Apollo markup,
                        section <b>"Release 4.0 and after"</b> and section <b>"Pre-Release 4.0"</b>
                        now have similar conversion markup.</ph></p>
                <p>2013-04-30: <ph id="change_20130430_SP">Updated target sample according to latest
                        Apollo markup.</ph></p>
                <p>2013-02-18: <ph id="change_20130218_SP">Created two sections, one for <b>"Release
                            4.0 and after"</b> and another for <b>"Pre-Release 4.0"</b>.</ph></p>
                <p>2013-02-18: Target example updated per inlineobject instructions. </p>
                <p>2012-11-30:<ph id="change_20121203_rj"> Moved full conversion instruction to new
                        base topic <sourcexml>inlineobject</sourcexml> to
                            <targetxml>ref:inlineobject</targetxml>. This topic now specific to
                            <targetxml>figure/ref:inlineobject</targetxml> mapping.</ph></p>
                <p>2012-10-26: Changed to reflect recent requirements for attachment-type links.</p>
            </section>
        </body>
    </dita:topic>
    <dita:topic id="Rosetta_inlineobject-to-LexisAdvance_ref.inlineobject_BLOBSTORE"/>


    <!-- created 2 global parameters to be used in driver, 
        
        <xsl:param name="inlineobjBoilerplateFiles" select="('xxx.gif', 'xxx.png')"/> for boilerplate filenames that ARE
        to be converted to ref:inlineobject.
        
        <xsl:param name="inlineobjFilesToSuppress" select="('yyy.png', 'yyy.gif')"/> for filenames that are to be 
        *SUPPRESSED* from conversion but require special handling elsewhere.  That other handling is not specified in this module
        
    When the @filename attribute of inlineobject is not on either of those lists, we will output the figure wrapper in this module.    
    
    This will allow us to be LBU-specific in names of files for specific handling.
    
    
    JL
    -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_inlineobject-LxAdv-figure_ref.inlineobject.dita  -->


    <!-- <xsl:param name="inlineobjFilesToSuppress"/>
	<xsl:param name="inlineobjBoilerplateFiles" select="('1.gif', '2.gif', '3.gif', '4.gif', '5.gif', 'IconSignalPositive.gif', 'IconSignalNegative.gif', 'IconSignalNeutral.gif', 'IconSignalPossibleNegative.gif', 'IconSignalCiteInfoOnly.gif', 'cbcc.gif', 'leg1.gif', 'mb.gif', 'au_repealed.gif', 'au_exclaim.gif', '1.png', '2.png', '3.png', '4.png', '5.png', 'IconSignalPositive.png', 'IconSignalNegative.png', 'IconSignalNeutral.png', 'IconSignalPossibleNegative.png', 'IconSignalCiteInfoOnly.png', 'cbcc.png', 'leg1.png', 'mb.png', 'au_repealed.png', 'au_exclaim.png')"/>
	 -->
    <xsl:template
        match="
            inlineobject[not(@filename = $inlineobjFilesToSuppress
            or @filename = $inlineobjBoilerplateFiles
            or parent::blockquote
            or parent::dispformula
            )]">
        <!--  Paul: I removed this bodytext parent check from the not() part of the match predicate.  
            It was causing objects to get suppressed.
        "or parent::bodytext"
        FYI:
        parent::blockquote seems to be handled by 	<xsl:template match="blockquote[inlineobject and not(inlinobject/following-sibling::* or inlineobject/preceding-sibling::*)]">
        parent::dispformula is handled by 	<xsl:template match="dispformula">
-->
        <!-- Ravikant: 2018-03-09 Added the streamID 'MY01','MY02','MY03','MY04','MY05LB','MY05LL','MY06','MY07' for blobstoreStreams -->

        <xsl:variable name="blobstoreStreams"
            select="
                ('UK01', 'UK02', 'UK03', 'UK04', 'UK05', 'UK06', 'UK07', 'UK08CA', 'UK08OR', 'UK09', 'UK10', 'UK11DA', 'UK11DN', 'UK12', 'UK14', 'UK15', 'UK15', 'UK16', 'UK17', 'UK17', 'UK18', 'UK22CF', 'UK22CS', 'HK01', 'HK02', 'HK03', 'HK04', 'HK05', 'HK06', 'HK07', 'HK08', 'HK09', 'MY01', 'MY02', 'MY03', 'MY04', 'MY05LB', 'MY05LL', 'MY06', 'MY07'
                )"/>
        <!-- Paul: I removed 2 non-uk streams from the $blobstoreStreams.
            I'm pretty sure people were only doing this to get the "when" behavior below instead of the "otherwise".
            They aren't blobstore streams.  See otherwise clause comment.  I know the otherwise <figure> output is difference from DT but i think that may be incorrect.
            As of 2017-05-27, the ONLY blobstore streams are UK.  No other LBU has moved there yet.

            , 'CA19', 'AU04' 
        -->
        <xsl:choose>
            <!-- JL added to handle some UK streams that use blobstore; the test for link parent ensures the output is valid
                as figure isn't valid in ref:marker
                -->
            <xsl:when test="$streamID = $blobstoreStreams">
                <!-- JD: 2017-06-08: similar to Paul's note below, UK08CA is adding a <figure> wrapper; 
                		I assume this is because the overlapping conditions in CCCC-10540 and CCCC-10368), 
                		including this dubious instruction: 
                		"If the inlineobject is a diagram or picture illustrating textual material (e.g. not a minor icon or symbol), inlineobject becomes figure/ref:inlineobject."
                		(how are we or the XSLT processor to know whether the image is a diagram or picture illustrating textual material?)
                		
                		For now, hacking with additional xsl:when clause
                	-->
                <xsl:choose>
                    <xsl:when test="parent::h[$streamID = 'UK09']">
                        <xsl:call-template name="inlineobjblobstore"/>
                    </xsl:when>
                    <xsl:when
                        test="parent::link | parent::figure | parent::emph | parent::publication and not(parent::emph/parent::h) or (parent::text and $streamID = ('UK08CA', 'UK11DA', 'UK06'))">
                        <xsl:call-template name="inlineobjblobstore"/>
                    </xsl:when>
                    <!-- JD: 2017-10-31: when ancestor is figure the <figure> element has already been created.  
                        This may be brittle; the source is:
                      <figure>
                        <p>
                           <text>
                              <inlineobject ...>
                            </text>
                        </p>
                      </figure>
                      -->
                    <xsl:when test="$streamID = ('UK01', 'UK08OR') and ancestor::figure">
                        <xsl:call-template name="inlineobjblobstore"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:choose>
                            <!-- Awantika: Added condition when parent is case:judgements for HK03 -->
                            <xsl:when test="$streamID = 'HK03' and parent::case:judgments">
                                <attachments>
                                    <appendix>
                                        <bodytext>
                                            <figure
                                                xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                                                <xsl:call-template name="inlineobjblobstore"/>
                                            </figure>
                                        </bodytext>
                                    </appendix>
                                </attachments>
                            </xsl:when>

                            <!-- Ravikant: Added condition when parent is jrnl:articletitle for MY02 -->
                            <xsl:when test="$streamID = 'MY02' and parent::jrnl:articletitle">
                                <xsl:call-template name="inlineobjblobstore"/>
                            </xsl:when>
                            <xsl:otherwise>
                                <figure
                                    xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                                    <xsl:call-template name="inlineobjblobstore"/>
                                </figure>
                            </xsl:otherwise>
                        </xsl:choose>

                    </xsl:otherwise>
                </xsl:choose>
            </xsl:when>
            <xsl:otherwise>
                <!-- Paul: DT seems to be omitting the figure wrapper.  is this correct? -->
                <xsl:choose>
                    <xsl:when
                        test="$streamID = ('AU16') or parent::figure[$streamID = ('AU15', 'AU05', 'NZ12', 'AU18')] or parent::remotelink[(@service = 'URL' or @href) and not((contains(., 'www') or contains(., 'http') or contains(., 'mailto') or contains(., 'ftp')))]">
                        <xsl:apply-templates select="." mode="refinline"/>
                    </xsl:when>
                    <!-- 20170607:  MCJ:  Added condition for AU06.  I am not sure why this wouldn't be the default handling (to avoid a figure within a figure) but
                                              don't want to affect other streams. -->
                    <xsl:when
                        test="($streamID = 'AU06') or ($streamID = 'NZ05') or ($streamID = 'AU19_CC')">
                        <xsl:choose>
                            <!-- this condition is probably not complete in terms of preventing a double wrapper for 'figure'.  The test for an ancestor figure will
                                     cover most things but could also cause trouble if there are constructs in between the outer wrapper and the current
                                     inline object that need different handling.  This module could use some refactoring (not just for this stream area). -->
                            <xsl:when
                                test="(./parent::leg:bodytext or ./parent::li or ./parent::text or ./parent::legfragment) and not(ancestor::figure)">
                                <figure
                                    xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                                    <xsl:apply-templates select="." mode="refinline"/>
                                </figure>
                            </xsl:when>
                            <xsl:otherwise>
                                <xsl:apply-templates select="." mode="refinline"/>
                            </xsl:otherwise>
                        </xsl:choose>
                    </xsl:when>
                    <!-- JD: probably more applicable, but setting to AU11 for now.  leg:bodytext/inlineobject would need to create primlaw:bodytext/p/text/figure -->
                    <xsl:when test="$streamID = 'AU11' and parent::leg:bodytext">
                        <p xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                            <text>
                                <figure>
                                    <xsl:apply-templates select="." mode="refinline"/>
                                </figure>
                            </text>
                        </p>
                    </xsl:when>
                    <!-- JD: probably more applicable, but settting to NZ18 for now.  Do not create <figure> wrapper when under <lnci:content> -->
                    <xsl:when test="$streamID = 'NZ18' and parent::remotelink/parent::ci:content">
                        <xsl:apply-templates select="." mode="refinline"/>
                    </xsl:when>
                    <xsl:when test="$streamID = 'AU04' and preceding-sibling::*[1][self::ci:cite]">
                        <xsl:apply-templates select="." mode="refinline"/>
                    </xsl:when>
                    <xsl:when test="parent::figure">
                        <xsl:apply-templates select="." mode="refinline"/>
                    </xsl:when>
                    <!-- Awantika: 2017-12-28- Added when condition for ancestor figure as two wrappers for figure
                        were being created. Webstar # 7080120-->
                    <xsl:when test="ancestor::figure and $streamID = 'AU04'">
                        <xsl:apply-templates select="." mode="refinline"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <figure xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                            <xsl:apply-templates select="." mode="refinline"/>
                        </figure>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>


    <!-- JL Included template name inlineobjblobstore from another module with DITA instructions
    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="Rosetta_inlineobject-to-LexisAdvance_ref.inlineobject_BLOBSTORE">
    -->
    <xsl:template match="inlineobject" name="inlineobjblobstore">
        <xsl:choose>
            <xsl:when test="$streamID = ('AU04', 'AU06') and parent::blockquote">
                <p>
                    <figure>
                        <ref:inlineobject>
                            <xsl:apply-templates select="@height | @width"/>
                            <ref:locator>
                                <ref:locator-key>
                                    <ref:key-name name="object-key"/>
                                    <ref:key-value>
                                        <xsl:apply-templates select="@filename"/>
                                    </ref:key-value>
                                </ref:locator-key>
                                <ref:locator-params>
                                    <proc:param name="object-type" value="IMG"/>
                                    <proc:param name="external-or-local" value="external"/>
                                    <proc:param name="object-server" value="Blobstore"/>
                                    <proc:param name="object-pguid"
                                        value="urn:contentItem:0000-0000-0000-0000-00000-00"/>
                                    <proc:param name="componentseq" value="1"/>
                                </ref:locator-params>
                            </ref:locator>
                        </ref:inlineobject>
                    </figure>
                </p>
            </xsl:when>
            <xsl:otherwise>
                <ref:inlineobject>
                    <xsl:apply-templates select="@height | @width"/>
                    <ref:locator>
                        <ref:locator-key>
                            <ref:key-name name="object-key"/>
                            <ref:key-value>
                                <xsl:apply-templates select="@filename"/>
                            </ref:key-value>
                        </ref:locator-key>
                        <ref:locator-params>
                            <proc:param name="object-type" value="IMG"/>
                            <proc:param name="external-or-local" value="external"/>
                            <proc:param name="object-server" value="Blobstore"/>
                            <proc:param name="object-pguid"
                                value="urn:contentItem:0000-0000-0000-0000-00000-00"/>
                            <proc:param name="componentseq" value="1"/>
                        </ref:locator-params>
                    </ref:locator>
                </ref:inlineobject>
            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>

    <xsl:template match="inlineobject/@height | inlineobject/@width">
        <xsl:copy-of select="."/>
    </xsl:template>


    <xsl:template match="inlineobject/@filename">
        <xsl:attribute name="value">
            <xsl:apply-templates select="parent::inlineobject/@dpsi"/>
            <xsl:value-of select="."/>
        </xsl:attribute>
    </xsl:template>

    <xsl:template match="inlineobject/@dpsi">
        <xsl:value-of select="concat('[[DPSI:', ., ']]')"/>
    </xsl:template>


    <xsl:template match="inlineobject[$streamID = 'CA10']" priority="25">
        <figure xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <xsl:apply-templates select="." mode="refinline"/>
        </figure>
    </xsl:template>

    <xsl:template
        match="inlineobject[@filename = 'au_repeal01.png'][$streamID = 'AU04'] | inlineobject[@filename = 'au_repeal01.gif'][$streamID = 'AU04']">
        <legisinfo:status statuscode="repealed"/>
    </xsl:template>


    <xsl:template
        match="nl[following-sibling::*[1][self::inlineobject[@filename != $inlineobjFilesToSuppress]]][following-sibling::*[2][self::nl]] | nl[preceding-sibling::*[1][self::inlineobject[@filename != $inlineobjFilesToSuppress]]][following-sibling::*[2][self::nl]]"/>





    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_inlineobject-to-LexisAdvance_ref.inlineobject">
        <title><sourcexml>inlineobject</sourcexml> to <targetxml>ref:inlineobject</targetxml>
            <lnpid>id-CCCC-10369</lnpid></title>
        <body>
            <section>
                <title>Instructions <i>[common element]</i></title>
                <p>If the <sourcexml>inlineobject</sourcexml>
                    <i>is not</i> a diagram or picture illustrating textual material (e.g. a minor
                    icon or symbol that is not otherwise suppressed),
                        <sourcexml>inlineobject</sourcexml> becomes
                        <targetxml>ref:inlineobject</targetxml>. <ul>
                        <li>Create <targetxml>ref:locator</targetxml> and describe as: <ul>
                                <li>Create <targetxml>ref:locator-key</targetxml> and describe as: <ul>
                                        <li>Create <targetxml>ref:key-name</targetxml> with
                                                <targetxml>@name="object-key"</targetxml>. This line
                                            is hard coded. </li>
                                        <li>Create <targetxml>ref:key-value</targetxml> with
                                                <targetxml>@value</targetxml>, as follows: <ul>
                                                <li>If <sourcexml>inlineobject[@smi]</sourcexml> is
                                                  present, then <targetxml>@value</targetxml> is
                                                  copied from
                                                  <sourcexml>inlineobject[@filename]</sourcexml>.</li>
                                                <li>If <sourcexml>inlineobject[@smi]</sourcexml> is
                                                  not present, then
                                                  <targetxml>@value="X-Y-Z"</targetxml>, where X is
                                                  LNI, Y is SMI, and Z is filename. LNI and
                                                  SMI(retreived from CSSM) values are added by
                                                  <b>"Workflow Generic Image Handlers"</b>. The last
                                                  component "Z" is copied from
                                                  <sourcexml>inlineobject[@filename]</sourcexml>.</li>
                                                <note><!-- Added by MDS (2017-03-20) - Based on email from Roopa Singh (2017-03-17 6:19pm) -->
                                                  If <sourcexml>inlineobject[@smi]</sourcexml> still
                                                  add the <sourcexml>@filename</sourcexml> value as
                                                  the value of
                                                  <targetxml>ref:key-value/@value</targetxml>. The
                                                  correct format of the value will be established
                                                  using the Generic Image Handler process
                                                  downstream. </note>
                                                <li>If <sourcexml>inlineobject[@smi]</sourcexml> is
                                                  not present, conversion program should pass
                                                  <sourcexml>inlineobject[@filename]</sourcexml>
                                                  value to <b>“Generic Image Handler?</b> as is and
                                                  <b>“Generic Image Handler?</b> will do conversion
                                                  of filename value as noted above. <b>Conversion of
                                                  filename replaces underscore, blank, and period
                                                  with hyphen.</b></li>
                                            </ul></li>
                                    </ul></li>
                                <li>Create <targetxml>ref:locator-params</targetxml> and describe
                                    as: <ul>
                                        <li>Create <targetxml>proc:param[@name]</targetxml> and
                                                <targetxml>proc:param[@value]</targetxml> pairs as
                                            follows: <ul>
                                                <li><targetxml>proc:param[@name="componentseq"]</targetxml>
                                                  with the attribute
                                                  <targetxml>@value="1"</targetxml>. This line is
                                                  hard coded.</li>
                                                <li><targetxml>proc:param[@name="object-type"]</targetxml>
                                                  with the attribute
                                                  <targetxml>@value="image"</targetxml> if the
                                                  extension of
                                                  <sourcexml>inlineobject[@filename]</sourcexml> is
                                                  either of these values (.jpg, .gif, .png, .tiff
                                                  and .bmp).</li>
                                                <li><targetxml>proc:param[@name="object-smi"]</targetxml>
                                                  with the attribute <targetxml>@value</targetxml>.
                                                  The <targetxml>@value</targetxml> value is from
                                                  <sourcexml>inlineobject[@smi]</sourcexml>. If
                                                  <sourcexml>inlineobject[@smi]</sourcexml> is not
                                                  present, obtain SMI from CSSM. This
                                                  <targetxml>@value</targetxml> assignment is done
                                                  by conversion program.
                                                  <note><!-- Added by MDS (2017-03-20) - Based on email from Roopa Singh (2017-03-17 6:19pm) -->
                                                  If <sourcexml>inlineobject[@smi]</sourcexml> is
                                                  not present, add the following
                                                  <targetxml>proc:param</targetxml> markup: <ul>
                                                  <li>@name='external-or-local'
                                                  @value='external'</li>
                                                  <li>@name='object-server' @value='Blobstore'</li>
                                                  <li>@name='object-pguid'
                                                  @value='urn:contentitem'</li>
                                                  </ul>
                                                  </note></li>
                                            </ul></li>
                                    </ul></li>
                            </ul></li>
                        <li>The other attributes of <sourcexml>inlineobject</sourcexml> are handled
                            as follows: <ul>
                                <li><sourcexml>inlineobject/@height</sourcexml> becomes
                                        <targetxml>ref:inlineobject/@height</targetxml>.</li>
                                <li><sourcexml>inlineobject/@width</sourcexml> becomes
                                        <targetxml>ref:inlineobject/@width</targetxml>.</li>
                                <li><sourcexml>inlineobject/@attachment</sourcexml> should be
                                    suppressed.</li>
                                <li><sourcexml>inlineobject/@key</sourcexml> should be
                                    suppressed.</li>
                            </ul></li>
                    </ul></p>
                <note>
                    <p>In the case of icons or other boilerplate images, the
                            <sourcexml>inlineobject</sourcexml> shall usually be suppressed from
                        conversion and a corresponding product requirement should be created with
                        instructions to instantiate the image on retrieval based on
                        information/semantic markup in the document. This will sometimes include
                        additional attributes being added to target elements created from parent
                        source elements (such as <targetxml>ref:crossreference</targetxml> from
                            <sourcexml>remotelink</sourcexml>).</p>
                    <p>Usually, any icons encountered from the list below should be suppressed.
                        These files should be suppressed for both *.gif and *.png file types. <ul>
                            <li>1.gif</li>
                            <li>2.gif</li>
                            <li>3.gif</li>
                            <li>4.gif</li>
                            <li>5.gif</li>
                            <li>IconSignalPositive.gif</li>
                            <li>IconSignalNegative.gif</li>
                            <li>IconSignalNeutral.gif</li>
                            <li>IconSignalPossibleNegative.gif</li>
                            <li>IconSignalCiteInfoOnly.gif</li>
                            <li>cbcc.gif</li>
                            <li>leg1.gif</li>
                            <li>mb.gif</li>
                            <li>au_repealed.gif</li>
                            <li>au_exclaim.gif</li>
                        </ul></p>
                    <p>Use cases where the LBU feels the product requirement cannot be met if the
                        markup is completely suppressed shall be handled case-by-case, and as usual
                        additional topics will contain specific instructions for these scenarios
                        that override the instructions in this note.</p>
                </note>
            </section>
            <example>
                <title>Source XML. Source @smi present</title>
                <codeblock> &lt;p&gt; &lt;text&gt; &lt;inlineobject type="image" smi="98765"
                    attachment="ln-server"
                    filename="3S3J-WW80-003F-W39R-00000-00-98765-importantIcon.gif" /&gt;
                    &lt;/text&gt; &lt;/p&gt; </codeblock>
                <title>Target XML. Source @smi present</title>
                <codeblock> &lt;p&gt; &lt;text&gt; &lt;ref:inlineobject&gt; &lt;ref:locator&gt;
                    &lt;ref:locator-key&gt; &lt;ref:key-name name="object-key"/&gt;
                    &lt;ref:key-value value="3S3J-WW80-003F-W39R-00000-00-98765-importantIcon"/&gt;
                    &lt;/ref:locator-key&gt; &lt;ref:locator-params&gt; &lt;proc:param
                    name="componentseq" value="1"/&gt; &lt;proc:param name="object-type"
                    value="image"/&gt; &lt;proc:param name="object-smi" value="98765"/&gt;
                    &lt;/ref:locator-params&gt; &lt;/ref:locator&gt; &lt;/ref:inlineobject&gt;
                    &lt;/text&gt; &lt;/p&gt; </codeblock>
            </example>
            <example>
                <title>Source XML. Source @smi not present</title>
                <codeblock> &lt;p&gt; &lt;text&gt; &lt;inlineobject type="image"
                    attachment="ln-server" filename="importantIcon.gif" /&gt; &lt;/text&gt;
                    &lt;/p&gt; </codeblock>
                <title>Target XML. Source @smi not present</title>
                <codeblock> &lt;p&gt; &lt;text&gt; &lt;ref:inlineobject&gt; &lt;ref:locator&gt;
                    &lt;ref:locator-key&gt; &lt;ref:key-name name="object-key"/&gt;
                    &lt;ref:key-value value="X-Y-importantIcon"/&gt; &lt;!-- X and Y are LNI and SMI
                    values obtained from CSSM --&gt; &lt;/ref:locator-key&gt;
                    &lt;ref:locator-params&gt; &lt;proc:param name="componentseq" value="1"/&gt;
                    &lt;proc:param name="object-type" value="image"/&gt; &lt;!-- allowable values:
                    “image?; (from .jpg, .gif, .png, .bmp)--&gt; &lt;proc:param name="object-smi"
                    value=""/&gt; &lt;!-- This @value assignment is done by conversion program
                    --&gt; &lt;/ref:locator-params&gt; &lt;/ref:locator&gt;
                    &lt;/ref:inlineobject&gt; &lt;/text&gt; &lt;/p&gt; </codeblock>
            </example>

            <example>
                <title>Output example without @smi with real values - Conversion output (Input for
                    the image processor)</title>
                <codeblock>
                    <![CDATA[

<text><figure>
<ref:inlineobject>
<ref:locator>
<ref:locator-key>
<ref:key-name name="object-key"></ref:key-name>
<ref:key-value value="06-Capital-Gains-Tax-09(995-1044)-2.gif"></ref:key-value>
</ref:locator-key>
<ref:locator-params>
<proc:param name="componentseq" value="1"></proc:param>
<proc:param name="object-type" value="IMG"></proc:param>
<proc:param name="external-or-local" value="external"></proc:param>
<proc:param name="object-server" value="Blobstore"></proc:param>
<proc:param name="object-pguid" value="urn:contentItem:"></proc:param>
</ref:locator-params>
</ref:locator>
</ref:inlineobject>
</figure></text>
]]>
                </codeblock>
            </example>
            <example>
                <title>Image processor output:</title>
                <codeblock>
                    <![CDATA[


              <text>
                <figure>
                  <ref:inlineobject>
                    <ref:locator>
                      <ref:locator-key>
                        <ref:key-name name="object-key"/>
                        <ref:key-value value="5M8J-YJF1-JNCK-23YG-00000-00-12634-06-Capital-Gains-Tax-09(995-1044)-2"/>
                      </ref:locator-key>
                      <ref:locator-params>
                        <proc:param name="componentseq" value="1"/>
                        <proc:param name="object-type" value="image"/>
                        <proc:param name="external-or-local" value="external"/>
                        <proc:param name="object-server" value="Blobstore"/>
                        <proc:param name="object-pguid" value="urn:contentItem:5M8J-YJF1-JNCK-23YG-00000-00"/>
                      </ref:locator-params>
                    </ref:locator>
                  </ref:inlineobject>
                </figure>
              </text>
]]>
                </codeblock>
            </example>

            <section>
                <title>Changes</title>
                <p>2015-11-16: <ph id="change_20151116_snb">Added instruction for
                            <sourcexml>inlineobject/@key</sourcexml> to be suppressed.</ph></p>
                <p>2014-07-08: <ph id="change_20140708_JCG">Not a rule change. Clarification added
                        to note regarding suppression of <sourcexml>inlineobject</sourcexml> when
                            <sourcexml>inlineobject/@filename</sourcexml> contains certain
                        values.</ph></p>
                <p>2013-05-24: <ph id="change_20130524_SP">Updated instruction for handling of
                        inlineobject when <b>smi</b> is present and some of the verbiage is
                        changed.</ph></p>
                <p>2013-05-08: <ph id="change_20130508_SP">Extended the list of allowable values for
                        image handling.</ph></p>
                <p>2013-05-02: <ph id="change_20130502_SP">Some of the verbiage is changed and
                        updated target example to if the SMI is present then a
                            <targetxml>ref:inliineobject/@status</targetxml> attribute is set to
                        “valid?.</ph></p>
                <p>2013-05-01: <ph id="change_20130501_SP">Removed instructions for section
                            <b>"Pre-Release 4.0"</b> because according to latest Apollo markup,
                        section <b>"Release 4.0 and after"</b> and section <b>"Pre-Release 4.0"</b>
                        now have similar conversion markup.</ph></p>
                <p>2013-04-30: <ph id="change_20130430_SP">Updated target sample according to latest
                        Apollo markup.</ph></p>
                <p>2013-03-13: <ph id="change_20130313_WLL">Removed the value <b>leg1.png</b> and
                        added the statement "These files should be suppressed for both *.gif and
                        *.png file types" was added.</ph></p>
                <p>2013-03-12: <ph id="change_20130312_WLL">Added an additional value of
                            <b>leg1.png</b>to the <sourcexml>inlineobject</sourcexml>suppression
                        list</ph></p>
                <p>2013-02-18: <ph id="change_20130218_SP">Created two sections, one for <b>"Release
                            4.0 and after"</b> and another for <b>"Pre-Release 4.0"</b>.</ph></p>
                <p>2013-02-08: Updated intsructions and examples per project requirement.</p>
                <p>2012-11-30: Created .</p>
            </section>
        </body>

    </dita:topic>

    <!-- created 2 global parameters to be used in driver, 
        
        <xsl:param name="inlineobjBoilerplateFiles" select="('xxx.gif', 'xxx.png')"/> for boilerplate filenames that ARE
        to be converted to ref:inlineobject.
        
        <xsl:param name="inlineobjFilesToSuppress" select="('yyy.png', 'yyy.gif')"/> for filenames that are to be 
        *SUPPRESSED* from conversion but require special handling elsewhere.  That other handling is not specified in this module
        
        
    
    This will allow us to be LBU-specific in names of files for specific handling.
    
    ALSO REFACTORED this template to a MODE and not a named template so it works for figures as well.
    
    JL
    -->


    <!-- Awantika: Added name for the template to be used in element 'p'  -->
    <!-- JL Suppression is done when inlineobject is a child of remotelink and the grandparent of inlineobject (the parent of remotelink) is not ci:content.
    from DITA/ConversionInstructions/Rosetta/common_newest/Rosetta_AU_legistlation_courtrule_inlineobject-Chof-remotelink-LxAdv-SUPPRESS.dita-->
    <xsl:template
        match="inlineobject[@filename = $inlineobjFilesToSuppress][parent::remotelink][not(parent::remotelink/parent::ci:content) or $streamID = ('AU08', 'AU04', 'AU10', 'AU09')]"/>

    <xsl:template
        match="inlineobject[@filename = $inlineobjBoilerplateFiles][not(parent::p) and not(parent::blockquote)]">
        <xsl:apply-templates select="." mode="refinline"/>
    </xsl:template>

    <xsl:template
        match="inlineobject[$streamID = 'CA14'][not(parent::p) and not(parent::blockquote)]">
        <xsl:apply-templates select="." mode="refinline"/>
    </xsl:template>

    <!-- MDS 2017-05-17 - Found in AU04 - Suppress inlineobject that is a descendent of glp.note and has a @filename[contains(., 'leg1')] -->
    <!-- See module '/glp/Rosetta_glp.note_blockquote_p_text_inlineobject-LxAdv-note_bodytext_p_text.xsl' for documentation. -->
    <xsl:template
        match="inlineobject[@filename = 'leg1.gif' or @filename = 'leg1.png'][ancestor::blockquote/parent::glp:note]"/>

    <xsl:template match="inlineobject[@filename = $inlineobjBoilerplateFiles][parent::p]">
        <text xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <xsl:apply-templates select="." mode="refinline"/>
        </text>
    </xsl:template>
    <!--Below template is created for AU09 and not read the [$inlineobjFilesToSuppress].-->
    <xsl:template match="inlineobject[parent::pgrp | parent::p][$streamID = 'AU09']">
        <figure xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <xsl:apply-templates select="." mode="refinline"/>
        </figure>
    </xsl:template>

    <xsl:template match="inlineobject" mode="refinline">
        <xsl:param name="bpf_from_case_filenum" tunnel="yes"/>
        <ref:inlineobject>
            <xsl:choose>
                <xsl:when test="$streamID = 'USLPA'">
                    <ref:locator>
                        <ref:locator-key>
                            <!-- Awantika: ref:key-value should be the sibling of ref:key-name -->
                            <ref:key-name>
                                <xsl:attribute name="name">object-key</xsl:attribute>
                            </ref:key-name>
                            <ref:key-value>
                                <xsl:attribute name="value">
                                    <xsl:value-of select="@filename"/>
                                </xsl:attribute>
                            </ref:key-value>
                        </ref:locator-key>
                        <ref:locator-params>
                            <proc:param
                                xmlns:proc="http://www.lexisnexis.com/xmlschemas/content/shared/process-elements/1/">
                                <xsl:attribute name="name">componentseq</xsl:attribute>
                                <xsl:attribute name="value">1</xsl:attribute>
                            </proc:param>
                            <xsl:if
                                test="contains(@filename, 'jpg') or contains(@filename, 'jpeg') or contains(@filename, 'gif') or contains(@filename, 'png') or contains(@filename, 'tiff') or contains(@filename, 'bmp')">
                                <proc:param>
                                    <xsl:attribute name="name">object-type</xsl:attribute>
                                    <xsl:attribute name="value">image</xsl:attribute>
                                </proc:param>
                            </xsl:if>
                            <xsl:choose>
                                <!--
	                                Paul: Wondering if SMI should be a param just like dpsi.  Its going to get dropped unless something is done.
	                            -->
                                <xsl:when test="@smi">
                                    <proc:param>
                                        <xsl:attribute name="name">object-smi</xsl:attribute>
                                        <xsl:attribute name="value">
                                            <xsl:value-of select="@smi"/>
                                        </xsl:attribute>
                                    </proc:param>
                                </xsl:when>
                                <xsl:when
                                    test="not(@smi) and $streamID = ('AU16', 'CA05', 'CA09', 'CA06', 'AU07', 'AU09', 'USLPA')">
                                    <proc:param>
                                        <xsl:attribute name="name">object-smi</xsl:attribute>
                                        <xsl:attribute name="value"/>
                                    </proc:param>
                                    <xsl:comment>Empty @value created by 'Rosetta_inlineobject-LxAdv-ref.inlineobject.xsl'</xsl:comment>
                                </xsl:when>
                                <xsl:otherwise>
                                    <!--  Paul: commented out these params, they are for blobstore.  they should be done via this template in Rosetta_inlineobject-to-LxAdv_figure_ref.inlineobject
     <xsl:template match="inlineobject" name="inlineobjblobstore">
                                    <proc:param>
	                                    <xsl:attribute name="name">external-or-local</xsl:attribute>
	                                    <xsl:attribute name="value">external</xsl:attribute>
	                                </proc:param>
	                                <proc:param>
	                                    <xsl:attribute name="name">object-server</xsl:attribute>
	                                    <xsl:attribute name="value">Blobstore</xsl:attribute>
	                                </proc:param>
	                                <proc:param>
	                                    <xsl:attribute name="name">object-pguid</xsl:attribute>
	                                    <xsl:attribute name="value">urn:contentitem:</xsl:attribute>
	                                </proc:param>
-->
                                </xsl:otherwise>
                            </xsl:choose>
                        </ref:locator-params>
                    </ref:locator>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:apply-templates select="@*[not(name() = 'attachment' or name() = 'key')]"
                        mode="refinline"/>
                    <xsl:apply-templates select="@attachment | @key" mode="refinline"/>
                    <ref:locator>
                        <ref:locator-key>
                            <!-- Awantika: ref:key-value should be the sibling of ref:key-name -->
                            <ref:key-name>
                                <xsl:attribute name="name">
                                    <xsl:value-of
                                        select="
                                            if ($streamID = 'CA19x' or $streamID = 'AU19_CC') then
                                                'attachment-key'
                                            else
                                                'object-key'"
                                    />
                                </xsl:attribute>
                            </ref:key-name>
                            <ref:key-value>
                                <xsl:attribute name="value">
                                    <xsl:value-of select="@filename"/>
                                </xsl:attribute>
                            </ref:key-value>
                        </ref:locator-key>
                        <ref:locator-params>
                            <proc:param
                                xmlns:proc="http://www.lexisnexis.com/xmlschemas/content/shared/process-elements/1/">
                                <xsl:attribute name="name">componentseq</xsl:attribute>
                                <xsl:attribute name="value">1</xsl:attribute>
                            </proc:param>
                            <xsl:if
                                test="contains(@filename, 'jpg') or contains(@filename, 'jpeg') or contains(@filename, 'gif') or contains(@filename, 'png') or contains(@filename, 'tiff') or contains(@filename, 'bmp')">
                                <proc:param>
                                    <xsl:attribute name="name">
                                        <xsl:value-of
                                            select="
                                                if ($streamID = 'CA19x' or $streamID = 'AU19_CC') then
                                                    'attachment-type'
                                                else
                                                    'object-type'"
                                        />
                                    </xsl:attribute>
                                    <xsl:attribute name="value">image</xsl:attribute>
                                </proc:param>
                            </xsl:if>
                            <xsl:choose>
                                <!--
	                                Paul: Wondering if SMI should be a param just like dpsi.  Its going to get dropped unless something is done.
	                                JD: the CI examples state "This @value assignment is done by conversion program"
	                            -->
                                <xsl:when test="@smi">
                                    <proc:param>
                                        <xsl:attribute name="name">object-smi</xsl:attribute>
                                        <xsl:attribute name="value">
                                            <xsl:value-of select="@filename"/>
                                        </xsl:attribute>
                                    </proc:param>
                                </xsl:when>
                                <xsl:when
                                    test="not(@smi) and $streamID = 'CA19' or $streamID = 'AU19_CC' or $streamID = 'AU18'">
                                    <!--these Apollo SMI values come from a John B. email:
												PCT                  PCSI    Name         SMI
												urn:pct:444         232583 Pleadings      10909
												urn:pct:442         232585 Facta          10912
												urn:pct:443         232584 Motions        100132
												-->
                                    <proc:param>
                                        <xsl:attribute name="name">object-smi</xsl:attribute>
                                        <xsl:choose>
                                            <xsl:when test="$bpf_from_case_filenum = 'brief'">
                                                <xsl:attribute name="value">10912</xsl:attribute>
                                            </xsl:when>
                                            <xsl:when test="$bpf_from_case_filenum = 'pleading'">
                                                <xsl:attribute name="value">10909</xsl:attribute>
                                            </xsl:when>
                                            <xsl:when test="$bpf_from_case_filenum = 'motion'">
                                                <xsl:attribute name="value">100132</xsl:attribute>
                                            </xsl:when>
                                            <xsl:otherwise>
                                                <xsl:attribute name="value">
                                                  <xsl:value-of select="'unk'"/>
                                                </xsl:attribute>
                                            </xsl:otherwise>
                                        </xsl:choose>
                                    </proc:param>
                                </xsl:when>
                                <!-- Awantika:2017-11-14- Added CA01 to the streams for webstar  7044267 -->
                                <xsl:when
                                    test="not(@smi) and not(starts-with($streamID, 'UK')) and not(starts-with($streamID, 'HK'))">
                                    <proc:param>
                                        <xsl:attribute name="name">object-smi</xsl:attribute>
                                        <xsl:attribute name="value" select="$smi"/>
                                    </proc:param>
                                    <xsl:comment>Empty @value created by 'Rosetta_inlineobject-LxAdv-ref.inlineobject.xsl'</xsl:comment>
                                </xsl:when>
                                <xsl:otherwise>
                                    <!--  Paul: commented out these params, they are for blobstore.  they should be done via this template in Rosetta_inlineobject-to-LxAdv_figure_ref.inlineobject
     <xsl:template match="inlineobject" name="inlineobjblobstore">
                                    <proc:param>
	                                    <xsl:attribute name="name">external-or-local</xsl:attribute>
	                                    <xsl:attribute name="value">external</xsl:attribute>
	                                </proc:param>
	                                <proc:param>
	                                    <xsl:attribute name="name">object-server</xsl:attribute>
	                                    <xsl:attribute name="value">Blobstore</xsl:attribute>
	                                </proc:param>
	                                <proc:param>
	                                    <xsl:attribute name="name">object-pguid</xsl:attribute>
	                                    <xsl:attribute name="value">urn:contentitem:</xsl:attribute>
	                                </proc:param>
-->
                                </xsl:otherwise>
                            </xsl:choose>
                        </ref:locator-params>
                    </ref:locator>
                </xsl:otherwise>
            </xsl:choose>
            <!-- Awantika: Commented xsl:copy as it was copying the attributes of inlineobject which are not used in target -->
            <!--<xsl:copy-of select="@*[not(name()='attachment' or name()='key')]"/>-->
        </ref:inlineobject>
    </xsl:template>

    <xsl:template
        match="inlineobject/@mimetype | inlineobject/@attachment | inlineobject/@key | inlineobject/@filename | inlineobject/@type"
        mode="refinline"/>

    <xsl:template match="@*" mode="refinline">
        <xsl:copy>
            <xsl:value-of select="."/>
        </xsl:copy>
    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_l-to-LexisAdvance_list">
        <title><sourcexml>l</sourcexml> to <targetxml>list</targetxml>
            <lnpid>id-CCCC-10372</lnpid></title>
        <body>
            <section>
                <title>Instructions <i>[common element]</i></title>
                <p><sourcexml>l</sourcexml> becomes <targetxml>list</targetxml>.</p>
                <p>The child <sourcexml>li</sourcexml> becomes <targetxml>listitem</targetxml>.
                        <targetxml>bodytext</targetxml> is the required child element for
                        <targetxml>listitem</targetxml>. The child <sourcexml>lilabel</sourcexml>
                    becomes <targetxml>label</targetxml>. </p>
                <p>Any <sourcexml>h</sourcexml> children of the <sourcexml>li</sourcexml> should be
                    processed as <targetxml>h</targetxml> within the
                        <targetxml>listitem/bodytext</targetxml>. Process the children of
                        <sourcexml>h</sourcexml>.</p>

                <p>Nested lists, when a <sourcexml>li</sourcexml> contains a
                        <sourcexml>l</sourcexml> element, the mapping should appear as follows:
                    create <targetxml>list/listitem/bodytext</targetxml> followed by a
                        <sourcexml>list</sourcexml> within the <sourcexml>bodytext</sourcexml>
                    element.</p>
            </section>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;l&gt; &lt;li&gt; &lt;lilabel&gt; &lt;emph
                    typestyle="ro"&gt;(1)&lt;/emph&gt; &lt;/lilabel&gt; &lt;p&gt; &lt;text&gt;The
                    plaintiffs&amp;#x2019; application is dismissed.&lt;/text&gt; &lt;/p&gt;
                    &lt;/li&gt; &lt;li&gt; &lt;lilabel&gt; &lt;emph
                    typestyle="ro"&gt;(2)&lt;/emph&gt; &lt;/lilabel&gt; &lt;p&gt; &lt;text&gt;The
                    plaintiffs pay the defendant&amp;#x2019;s costs, including each appearance in
                    the court, as taxed, if not agreed.&lt;/text&gt; &lt;/p&gt; &lt;/li&gt;
                    &lt;/l&gt; </codeblock>
            </example>

            <example>
                <title>Target XML </title>
                <codeblock> &lt;list&gt; &lt;listitem&gt; &lt;label&gt; &lt;emph
                    typestyle="ro"&gt;(1)&lt;/emph&gt; &lt;/label&gt; &lt;bodytext&gt; &lt;p&gt;
                    &lt;text&gt;The plaintiffs&amp;#x2019; application is dismissed.&lt;/text&gt;
                    &lt;/p&gt; &lt;/bodytext&gt; &lt;/listitem&gt; &lt;listitem&gt; &lt;label&gt;
                    &lt;emph typestyle="ro"&gt;(2)&lt;/emph&gt; &lt;/label&gt; &lt;bodytext&gt;
                    &lt;p&gt; &lt;text&gt;The plaintiffs pay the defendant&amp;#x2019;s costs,
                    including each appearance in the court, as taxed, if not agreed.&lt;/text&gt;
                    &lt;/p&gt; &lt;/bodytext&gt; &lt;/listitem&gt; &lt;/list&gt; </codeblock>
            </example>

            <example>
                <title>Nested list Source(l/li/l)</title>
                <codeblock> &lt;l&gt; &lt;li&gt; &lt;lilabel&gt;&amp;#x2022;&lt;/lilabel&gt;
                    &lt;p&gt; &lt;text&gt;the health and safety of workers who are:&lt;/text&gt;
                    &lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;l&gt; &lt;li&gt;
                    &lt;lilabel&gt;&amp;#x25E6;&lt;/lilabel&gt; &lt;p&gt; &lt;text&gt;engaged by the
                    person conducting the business or undertaking;&lt;/text&gt; &lt;/p&gt;
                    &lt;/li&gt; &lt;/l&gt; &lt;/li&gt; ... </codeblock>
            </example>

            <example>
                <title>Nested list Target (list/listitem/bodytext/list)</title>
                <codeblock> &lt;list&gt; &lt;listitem&gt; &lt;label&gt;&amp;#x2022;&lt;/label&gt;
                    &lt;bodytext&gt; &lt;p&gt; &lt;text&gt;the health and safety of workers who
                    are:&lt;/text&gt; &lt;/p&gt; &lt;/bodytext&gt; &lt;/listitem&gt;
                    &lt;listitem&gt; &lt;bodytext&gt; &lt;list&gt; &lt;listitem&gt;
                    &lt;label&gt;&amp;#x25E6;&lt;/label&gt; &lt;bodytext&gt; &lt;p&gt;
                    &lt;text&gt;engaged by the person conducting the business or
                    undertaking;&lt;/text&gt; &lt;/p&gt; &lt;/bodytext&gt; &lt;/listitem&gt;
                    &lt;/list&gt; &lt;/bodytext&gt; &lt;/listitem&gt; ... </codeblock>
            </example>


            <section>
                <title>Changes</title>
                <p>2016-04-01: <ph id="change_20160401_list_1">Added mapping instruction for
                        handling h within listitem.</ph></p>
                <p>2014-01-16: <ph id="change_20140106_mlv">Added mapping instruction for nested
                        lists.</ph></p>

            </section>
        </body>
    </dita:topic>
    <!-- Done as part of ROCKET but not for any particular stream JL 2017-03-14 -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_l-LxAdv-list.dita  -->


    <!-- virtual nesting requires its own template -->
    <xsl:template match="l[not(@virtual-nesting)]">
        <xsl:choose>
            <!-- Awantika: specific for AU20 -->
            <xsl:when
                test="$streamID = 'AU20' and ancestor::source_cttr:annotations[@id = 'OI7' or @id = 'OP3']/heading/note/l">
                <xsl:for-each select="li/p/text">
                    <primlaw:subordinatelaw-item>
                        <textitem>
                            <xsl:apply-templates select="@* | node()"/>
                        </textitem>
                    </primlaw:subordinatelaw-item>
                </xsl:for-each>
            </xsl:when>
            <!-- 2017-10-17 - MDS: Added due to Webstar 7025682 -->
            <xsl:when test="parent::l">
                <xsl:apply-templates select="node()"/>
            </xsl:when>
            <xsl:otherwise>
                <!-- 2017-10-17 - MDS: Removed 'except l' because it was dropping content as found in Webstar 7025682.  See when statement 'parent::l'-->
                <xsl:element name="list">
                    <xsl:apply-templates select="@*"/>
                    <xsl:if test="$streamID = 'UK09' and note[not(preceding-sibling::li)]">
                        <listitem>
                            <bodytext/>
                        </listitem>
                    </xsl:if>
                    <xsl:apply-templates select="node()"/>
                </xsl:element>
            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>




    <xsl:template
        match="l[ancestor::frm:body][not(ancestor::footnote or ancestor::note)][$streamID = 'UK12']"
        priority="25">
        <form:list>
            <xsl:apply-templates select="@* | node() except l"/>
        </form:list>
    </xsl:template>



    <!-- Sudhanshu added this template as li and h element is not handled , so added for UK06. -->
    <!-- JD: 2017-07-10: this should be the default, not stream-specific; appears duplicate of /modules/nonamespace/Rosetta_li-LxAdv-listitem.xsl -->
    <xsl:template match="li[$streamID = 'UK06' or $streamID = 'USLPA']">
        <listitem>
            <xsl:apply-templates select="lilabel"/>
            <bodytext>
                <xsl:apply-templates select="h"/>
                <xsl:apply-templates select="@* | node() except (lilabel | h)"/>
            </bodytext>
        </listitem>
    </xsl:template>

    <!-- JD: 2017-07-10: this should be the default, not stream-specific -->
    <!--<xsl:template match="h[$streamID='UK06']">
    <h>
      <xsl:apply-templates select="@*|node()"/>
    </h>
  </xsl:template>-->

    <!--  <xsl:template match="h/@l[$streamID='UK06']"/>-->


    <!-- 
    ********************************************************************************************
    NOTE!
    from  /XSLT/ContentArch/Rosetta-to-LA/modules/nonamespace/Rosetta_refpt-LxAdv-ref.anchor.xsl
   
    this is **GENERIC** behavior. If your stream implements differently, fork template or give a streamID test
   
    <p>If <sourcexml>refpt</sourcexml> comes within <sourcexml>l/li/lilabel</sourcexml>
					then <targetxml>ref:anchor</targetxml> will become the first child of
						<targetxml>listitem</targetxml>.</p>
					-	JL
    ************************************************************************************************  -->


    <xsl:template match="lilabel">
        <xsl:choose>
            <!-- SS: Only for HK07 - Remove EMPTY label element inside list-->
            <!-- Awantika: Corrected dropping of lilabel -->
            <!-- JD: 2017-07-24: added NZ18 to streams to suppress empty <label> from; added 'replace' test to get rid of characters not handled by normalize-space(e.g., nbsp) -->
            <xsl:when
                test="$streamID = ('HK07', 'NZ18', 'AU16', 'NZ12', 'CA14', 'AU18') and normalize-space(replace(., '^[\t\p{Zs}]+$', '')) = ''">
                <!--<xsl:if test=".[normalize-space() = '']"/>-->
            </xsl:when>
            <xsl:when
                test="$streamID = ('NZ13', 'AU18') and normalize-space(replace(., '^Â $', '')) = ''"/>
            <xsl:otherwise>
                <xsl:element name="label">
                    <xsl:apply-templates select="@* | node() except (refpt)"/>
                </xsl:element>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <!-- Awantika: wrapper p to be created around list if coming in case:factsummary and case:decisionsummary for HK03 -->
    <xsl:template
        match="l[not(@virtual-nesting)][parent::case:factsummary or parent::case:decisionsummary]"
        priority="25">
        <!-- JD: 2017-06-16: removing $streamID test, as this is supposed to be the default handling.  
  	If stream-specific handling is required this should be moved to a stream-specific module. -->
        <!--<xsl:if test="$streamID='HK03'">-->
        <xsl:choose>
            <xsl:when test="$streamID = ('NZ04', 'AU13')">
                <list>
                    <xsl:apply-templates select="@* | node()"/>
                </list>
            </xsl:when>
            <!-- JD: UK02 wraps in list when a child of case:decisionsummary but not case:factsummary -->
            <xsl:when test="$streamID = ('UK02') and parent::case:decisionsummary">
                <list>
                    <xsl:apply-templates select="@* | node()"/>
                </list>
            </xsl:when>
            <xsl:otherwise>
                <p xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <list>
                        <xsl:apply-templates select="@* | node()"/>
                    </list>
                </p>
            </xsl:otherwise>
        </xsl:choose>
        <!--</xsl:if>-->
    </xsl:template>

    <!-- Vikas Rohilla : Added template for the empty lilabel   -->
    <!-- SP : don't apply this rule if child elements exist   -->
    <xsl:template match="lilabel[matches(., '^$') and not(child::*)]"/>

    <!-- MDS 207-05-17 - Exception found in AU04 There is no target attribute in <list> for l/@type -->
    <xsl:template match="l/@type"/>




    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_li_level-to-LexisAdvance_listitem">
        <title><sourcexml>li @level</sourcexml> to <targetxml>listitem</targetxml>
            <lnpid>id-CCCC-10393</lnpid></title>
        <body>
            <section>
                <p>When <sourcexml>li</sourcexml> has attribute <sourcexml>@level</sourcexml> then
                    conversion need to suppress <sourcexml>@level</sourcexml>.</p>

                <p>When <sourcexml>li</sourcexml> is immediately followed by a
                        <sourcexml>l</sourcexml> that list should be brought into the end of the
                        <targetxml>listitem/bodytext</targetxml>.</p>
            </section>
            <example>
                <title>Source XML having li/@level</title>
                <codeblock> &lt;l&gt; &lt;li level="1"&gt; &lt;lilabel&gt;(a)&lt;/lilabel&gt;
                    &lt;p&gt; &lt;text&gt;the day on which the person with the claim first
                    knew,&lt;/text&gt; &lt;/p&gt; &lt;/li&gt; &lt;/l&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;list&gt; &lt;listitem&gt; &lt;label&gt;(a)&lt;/label&gt;
                    &lt;bodytext&gt; &lt;p&gt; &lt;text&gt;the day on which the person with the
                    claim first knew,&lt;/text&gt; &lt;/p&gt; &lt;/bodytext&gt; &lt;/listitem&gt;
                    &lt;/list&gt; </codeblock>
            </example>
        </body>
    </dita:topic>

    <xsl:template match="li">
        <!--  Original Target XPath:  listitem   -->
        <listitem xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <xsl:choose>
                <xsl:when test="@id = ''"/>
                <xsl:when test="$streamID = 'AU18' and ./@id = descendant::refpt/@id"/>
                <xsl:otherwise>
                    <xsl:apply-templates select="@id"/>
                </xsl:otherwise>
            </xsl:choose>
            <xsl:apply-templates select="@* except @id"/>
            <xsl:apply-templates select="lilabel/refpt"/>
            <xsl:apply-templates select="lilabel"/>
            <bodytext xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                <!-- 
                <xsl:apply-templates select="* except lilabel"/>
-->
                <xsl:choose>
                    <xsl:when test="$streamID = ('AU10', 'NZ11')">
                        <!-- WPK 2017-12-08.  In pacific PG, "some" glp:notes can become margin notes.
                            However they are not done by creating new <p><text><marginnote> for each note.
                            The margin notes are all placed inside the preceding <p><text> (already created text node).
                            This is achieved by applying following-sibling glp:note from within the first p/text.
                            Since the following sibling is done there, applying templates here will create duplicates.
                            So this "when" clause prevents duplication of margin notes.
                            4.2.2.3. heading (id-CCCC-10182)
                            1. bodytext/glp:note[notetype="xref"] becomes seclaw:bodytext/p/text/marginnote. New p and text elements are not created;
                            instead, the newly created marginnote is placed in the p that was mapped from the preceding sibling p of glp:note[notetype="xref"]. Within
                            this p the marginnote is placed within the text element that was mapped from the preceding sibling p element's last existing child text element.
                            2. li/glp:note[notetype="xref"] becomes listitem/bodytext/p/text/marginnote. Within the listitem/bodytext, new p
                            and text elements are usually not created; instead, the newly created marginnote is placed in the p that was mapped from the preceding sibling p of
                            glp:note[notetype="xref"]. Within this p the marginnote is placed within the text element that was mapped from the preceding sibling p
                            element's last child text source element. A new text element will need to be created if and only if the glp:note[notetype="xref"] occurs in
                            an li before any sibling p in the li (because in this case there would be no li/p that precedes the li/glp:note).

2018-01-31 update WPK:
original template call:
                        <xsl:apply-templates select="* except (lilabel | glp:note[@notetype='xref'][preceding-sibling::*[1][self::p[text[not(*) and normalize-space(.)!='']] or self::glp:note[@notetype='xref']]])"/>                        
This resulted in extraneous marginnotes (sibling margin notes are merged into p within one marginnote tag) to occur in a second, duplicate marginnote.
example: EMP_GUID_210381000.xml

new template call rectifies this and omits duplicate.

Regarding p/text predicate phrases:
(not(*) and normalize-space(.)!='') :::::: prevents creation of a marginnote from a glp:note following an empty p/text (yes this needs to be handled)
(emph and normalize-space(.)!='')   :::::: allows for emph to be in the preceding text.  Tried to merge with phrase above but this was easier to read and debug.

ideally this should be in a stream specific template since its has become a monster.

                        -->
                        <xsl:apply-templates
                            select="
                                * except (lilabel | glp:note[@notetype = 'xref']
                                [
                                preceding-sibling::*[1]
                                [
                                self::p[text[not(*) and normalize-space(.) != '']] or self::glp:note[@notetype = 'xref']
                                or self::p[text[emph and normalize-space(.) != '']]
                                
                                ]
                                ])"
                        />
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:apply-templates select="* except lilabel"/>
                    </xsl:otherwise>
                </xsl:choose>
                <xsl:if test="following-sibling::*[1][self::l]">
                    <xsl:apply-templates select="following-sibling::*[1][self::l]"
                        mode="nested-list"/>
                </xsl:if>
            </bodytext>
        </listitem>
    </xsl:template>

    <!-- JL: change to handle potential multiple nested consecutive lists between lis -->

    <xsl:template match="l" mode="nested-list">
        <xsl:choose>
            <xsl:when test="ancestor::frm:body and not(ancestor::footnote or ancestor::note)">
                <form:list>
                    <xsl:apply-templates/>
                </form:list>
            </xsl:when>
            <xsl:otherwise>
                <list xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <xsl:apply-templates/>
                </list>
            </xsl:otherwise>
        </xsl:choose>
        <xsl:if test="following-sibling::*[1][self::l]">
            <xsl:apply-templates select="following-sibling::*[1][self::l]" mode="nested-list"/>
        </xsl:if>
    </xsl:template>

    <xsl:template match="li[ancestor::frm:body][not(ancestor::footnote or ancestor::note)]"
        priority="25">
        <!--  Original Target XPath:  listitem   -->
        <form:listitem>
            <xsl:apply-templates select="@*"/>
            <xsl:apply-templates select="lilabel/refpt"/>
            <xsl:apply-templates select="lilabel"/>
            <form:bodytext>
                <xsl:apply-templates select="* except lilabel"/>
                <xsl:if test="following-sibling::*[1][self::l]">
                    <xsl:apply-templates select="following-sibling::*[1][self::l]"
                        mode="nested-list"/>
                </xsl:if>
            </form:bodytext>
        </form:listitem>
    </xsl:template>

    <xsl:template match="li/@level"/>


    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_l_virtual-nesting-to-LexisAdvance_listitem">
        <title><sourcexml>l/@virtual-nesting</sourcexml> to <targetxml>list</targetxml>
            <lnpid>id-CCCC-10398</lnpid></title>
        <body>
            <section>
                <p>When <sourcexml>l</sourcexml> has attribute <sourcexml>@virtual-nesting
                    </sourcexml> then it should be converted to real list nesting (mean's creating
                    some parent nested list on basis of attribute value i.e.
                    "@virtual-nesting='3'"). Drop <sourcexml>@virtual-nesting</sourcexml> and add
                    n-1 list wrappers, where <b>n</b> is the value of
                        <sourcexml>@virtual-nesting</sourcexml>. Please refer the below input and
                    target markups for more clarification: </p>
            </section>
            <example>
                <title>Source XML having l/@virtual-nesting</title>
                <codeblock> &lt;l virtual-nesting="3"&gt; &lt;li&gt; &lt;lilabel/&gt; &lt;p&gt;
                    &lt;text&gt;&lt;emph typestyle="bf"&gt;Unless the agreement provides
                    otherwise...&lt;/emph&gt;&lt;/text&gt; &lt;/p&gt; &lt;/li&gt; &lt;/l&gt;
                </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;list&gt; &lt;listitem&gt; &lt;bodytext&gt; &lt;p&gt; &lt;list&gt;
                    &lt;listitem&gt; &lt;bodytext&gt; &lt;p&gt; &lt;list&gt; &lt;listitem&gt;
                    &lt;bodytext&gt; &lt;p&gt;&lt;text&gt;&lt;emph typestyle="bf"&gt;Unless the
                    agreement provides otherwise...&lt;/emph&gt;&lt;/text&gt;&lt;/p&gt;
                    &lt;/bodytext&gt; &lt;/listitem&gt; &lt;/list&gt; &lt;/p&gt; &lt;/bodytext&gt;
                    &lt;/listitem&gt; &lt;/list&gt; &lt;/p&gt; &lt;/bodytext&gt; &lt;/listitem&gt;
                    &lt;/list&gt; </codeblock>
            </example>
        </body>
    </dita:topic>
    <!--Vikas Rohilla : updated for the streamID CA01  -->
    <!-- Sudhanshu Srivastava : Added CA02CC for listing conversion -->
    <xsl:template
        match="l[@virtual-nesting = '1'][$streamID = 'CA01' or $streamID = 'CA02CC' or $streamID = 'CA12' or $streamID = 'CA19' or $streamID = 'CA14' or $streamID = 'CA15' or $streamID = 'CA04']"
        priority="2">
        <xsl:call-template name="virtualNesting">
            <xsl:with-param name="content" select="li"/>
            <xsl:with-param name="counter" select="number(@virtual-nesting)"/>
        </xsl:call-template>
    </xsl:template>



    <!-- Assumes @virtual-nesting is always a digit and never less than 2 -->
    <xsl:template match="l[@virtual-nesting]">
        <xsl:choose>
            <xsl:when
                test="
                    $streamID = 'CA01' and (starts-with(ancestor::case:decisionsummary/child::heading/title, 'Court Summary:') or
                    starts-with(ancestor::case:decisionsummary/child::heading/title, 'Court Summary:') or
                    starts-with(ancestor::case:decisionsummary/child::heading/title, 'Résumé de la Cour :') or
                    starts-with(ancestor::case:decisionsummary/child::heading/title, 'Commission Summary:') or
                    starts-with(ancestor::case:decisionsummary/child::heading/title, 'Board Summary:') or
                    starts-with(ancestor::case:decisionsummary/child::heading/title, 'Tribunal Summary:') or
                    starts-with(ancestor::case:decisionsummary/child::heading/title, 'Executive Summary:') or
                    starts-with(ancestor::case:decisionsummary/child::heading/title, 'Commissioner Summary:') or
                    starts-with(ancestor::case:decisionsummary/child::heading/title, 'Résumé du tribunal :') or
                    starts-with(ancestor::case:decisionsummary/child::heading/title, 'Sommaire du tribunal :') or
                    contains(ancestor::case:decisionsummary/child::heading/title, 'Subsequent History') or contains(ancestor::case:decisionsummary/child::heading/title, 'Historique subséquent') or contains(ancestor::case:decisionsummary/child::heading/title, 'Court Catchwords') or contains(ancestor::case:decisionsummary/child::heading/title, 'Indexation de la Cour') or contains(ancestor::case:decisionsummary/child::p[1]/text[1]/emph[1], 'Subsequent History') or contains(ancestor::case:decisionsummary/child::p[1]/text[1]/emph[1], 'Historique subséquent') or contains(ancestor::case:decisionsummary/child::p[1]/text[1]/emph[1], 'Court Catchwords') or contains(ancestor::case:decisionsummary/child::p[1]/text[1]/emph[1], 'Indexation de la Cour'))">
                <p>
                    <list xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                        <listitem>
                            <bodytext>
                                <p>
                                    <xsl:call-template name="virtualNesting">
                                        <xsl:with-param name="content" select="li"/>
                                        <xsl:with-param name="counter"
                                            select="number(@virtual-nesting)"/>
                                    </xsl:call-template>
                                </p>
                            </bodytext>
                        </listitem>
                    </list>
                </p>
            </xsl:when>
            <xsl:otherwise>
                <list xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <listitem>
                        <bodytext>
                            <p>
                                <xsl:call-template name="virtualNesting">
                                    <xsl:with-param name="content" select="li"/>
                                    <xsl:with-param name="counter" select="number(@virtual-nesting)"
                                    />
                                </xsl:call-template>
                            </p>
                        </bodytext>
                    </listitem>
                </list>
            </xsl:otherwise>
        </xsl:choose>

        <!--  Original Target XPath:  list   -->


    </xsl:template>

    <xsl:template name="virtualNesting">
        <xsl:param name="content"/>
        <xsl:param name="counter"/>
        <xsl:choose>
            <xsl:when test="($counter - 1) &gt; 1">
                <list xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <listitem>
                        <bodytext>
                            <p>
                                <xsl:call-template name="virtualNesting">
                                    <xsl:with-param name="content" select="$content"/>
                                    <xsl:with-param name="counter" select="$counter - 1"/>
                                </xsl:call-template>
                            </p>
                        </bodytext>
                    </listitem>
                </list>
            </xsl:when>
            <xsl:otherwise>
                <xsl:choose>
                    <xsl:when
                        test="$streamID = 'CA04' or $streamID = 'CA02CC' or $streamID = 'CA12' or $streamID = 'CA19'">
                        <xsl:choose>
                            <xsl:when
                                test="count(child::*) = 1 and (@virtual-nesting[. = '1'] or not(@virtual-nesting))">
                                <list>
                                    <listitem>
                                        <xsl:apply-templates select="$content/lilabel"/>
                                        <bodytext>
                                            <xsl:apply-templates
                                                select="$content/(* except lilabel)"/>
                                        </bodytext>
                                    </listitem>
                                </list>
                            </xsl:when>
                            <xsl:when test="count(child::*) = 1">
                                <list
                                    xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                                    <listitem>
                                        <xsl:apply-templates select="$content/lilabel"/>
                                        <bodytext>
                                            <xsl:apply-templates
                                                select="$content/(* except lilabel)"/>
                                        </bodytext>
                                    </listitem>
                                </list>
                            </xsl:when>
                            <xsl:otherwise>
                                <xsl:for-each select="child::*">
                                    <list
                                        xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                                        <xsl:apply-templates select="."/>
                                    </list>
                                </xsl:for-each>
                            </xsl:otherwise>
                        </xsl:choose>
                    </xsl:when>
                    <xsl:when test="$streamID = 'CA08'">
                        <list xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                            <listitem>
                                <bodytext>
                                    <list>
                                        <xsl:apply-templates
                                            select="$content | node() except lilabel"/>
                                    </list>
                                </bodytext>
                            </listitem>
                        </list>
                    </xsl:when>
                    <xsl:when test="$streamID = 'CA15' or $streamID = 'CA01' or $streamID = 'CA14'">
                        <list>
                            <xsl:for-each select="child::*">
                                <xsl:apply-templates select="."/>
                            </xsl:for-each>
                        </list>
                    </xsl:when>
                    <xsl:otherwise>
                        <list xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                            <listitem>
                                <bodytext>
                                    <xsl:apply-templates select="$content/*"/>
                                </bodytext>
                            </listitem>
                        </list>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>




    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_case.courtname_ln.user-displayed">
        <title>
            <sourcexml>case.courtname/@ln.user-displayed="false"</sourcexml>
            <lnpid>id-CCCC-10258</lnpid>
        </title>
        <body>
            <section>
                <note>Elements that contain the attribute
                        <sourcexml>@ln.user-displayed="false"</sourcexml> are used for certain
                    functionality in Rosetta that does not exist in Lexis Advance. Each of the
                    following elements have mappings described elsewhere in this CI for when this
                    attribute does not exist. The examples here are ONLY for when this
                        <sourcexml>@ln.user-displayed="false"</sourcexml> appears. (This attribute
                    never has a "true" value, i.e. @ln.user-displayed="true".)</note>

                <p>When <sourcexml>case:courtname</sourcexml> has attribute
                        <sourcexml>@ln.user-displayed="false"</sourcexml> (i.e.
                        <sourcexml>case:courtname/@ln.user-displayed="false"</sourcexml>), that
                    element is translated into the target but with the element content omitted. Only
                    the attributes are populated. So there is no displayable content.</p>

            </section>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;case:courtname
                    ln.user-displayed="false"&gt;XYZNOCOURTXYZ&lt;/case:courtname&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;jurisinfo:courtname normlongname="XYZNOCOURTXYZ"/&gt; </codeblock>
            </example>

        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_case.courtname_ln.user-displayed.dita  -->

    <!-- Vikas Rohilla :  -->
    <xsl:template match="case:courtname/@ln.user-displayed[. = 'false']"/>




    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_nl-to-LexisAdvance_proc.nl" ditaarch:DITAArchVersion="1.2" domains=""
        class="- topic/topic ">
        <title class="- topic/title "><sourcexml>nl</sourcexml> to <targetxml>proc:nl</targetxml>
            <lnpid>id-CCCC-10404</lnpid></title>
        <body class="- topic/body ">
            <section class="- topic/section ">
                <p class="- topic/p "><sourcexml>nl</sourcexml> becomes
                        <targetxml>proc:nl</targetxml></p>
                <note class="- topic/note "><sourcexml>nl</sourcexml> comes with
                        <sourcexml>@n</sourcexml> then <sourcexml>@n</sourcexml> will be suppressed
                    in NL conversion.</note>
                <note class="- topic/note ">MLV: NSW Law reports - preserve spacing and linebreaks
                    for licensing.</note>
            </section>
            <example class="- topic/example ">
                <title class="- topic/title ">Source XML</title>
                <codeblock> &lt;tbody&gt; &lt;row&gt; &lt;entry colname="c1" align="left"&gt;On the
                    day after this Regulation's notification
                    day.&lt;nl/&gt;(4/11/2008)&lt;/entry&gt; &lt;/row&gt; &lt;/tbody&gt;
                </codeblock>
            </example>
            <example class="- topic/example ">
                <title class="- topic/title ">Target XML</title>
                <codeblock> &lt;tbody&gt; &lt;row&gt; &lt;entry colname="c1" align="left"&gt;On the
                    day after this Regulation's notification
                    day.&lt;proc:nl/&gt;(4/11/2008)&lt;/entry&gt; &lt;/row&gt; &lt;/tbody&gt;
                </codeblock>
            </example>
            <example class="- topic/example ">
                <title class="- topic/title ">Source XML</title>
                <codeblock> &lt;p&gt; &lt;text&gt; &lt;nl n="2"/&gt; &lt;/text&gt; &lt;/p&gt;
                </codeblock>
            </example>
            <example class="- topic/example ">
                <title class="- topic/title ">Target XML</title>
                <codeblock> &lt;p&gt; &lt;text&gt; &lt;proc:nl/&gt; &lt;/text&gt; &lt;/p&gt;
                </codeblock>
            </example>
            <section class="- topic/section ">
                <title class="- topic/title ">Changes</title>
                <p class="- topic/p ">2013-03-14: <ph id="change_20130314_ab" class="- topic/ph "
                        >Add instruction and example <sourcexml>nl/@n</sourcexml>.</ph></p>
            </section>
        </body>
    </dita:topic>



    <!-- Awantika:2017-11-30- CI has differnt rule for CA02CC,DC and DS."Any nl elements that occur inside case:casename should be suppressed if they are preceded or followed by a space. Any nl elements that
are not preceded or followed by a space should be converted into a single space character. Webstar# 6994049" -->
    <xsl:template match="nl">
        <xsl:choose>
            <!-- Awantika: Commenting this for CA02CC.Webstar  6994049. CI doesn't say to create proc:nl
                "Any nl elements that occur inside case:casename should be suppressed if they are preceded or followed by a space. Any nl elements that
are not preceded or followed by a space should be converted into a single space character."
                -->
            <xsl:when test="$streamID = 'CA02CC' and parent::case:casename">

                <xsl:apply-templates/>

            </xsl:when>
            <xsl:when test="$streamID = 'AU21'">
                <xsl:choose>
                    <xsl:when
                        test="parent::text/parent::p/parent::source_dict:subtopic/@id[starts-with(., 'BOOK:')]"/>
                    <xsl:otherwise>
                        <xsl:element name="proc:nl">
                            <xsl:apply-templates/>
                        </xsl:element>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:when>
            <xsl:otherwise>
                <xsl:element name="proc:nl">
                    <xsl:apply-templates/>
                </xsl:element>
            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>

    <xsl:template match="nl/@n">
        <!-- suppress -->
    </xsl:template>


    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_p-to-LexisAdvance_p">
        <title><sourcexml>p</sourcexml> to <targetxml>p</targetxml>
            <lnpid>id-CCCC-10424</lnpid></title>
        <body>
            <section>
                <p>Except where otherwise noted, <sourcexml>p</sourcexml> becomes
                        <targetxml>p</targetxml> comes with <sourcexml>@indent</sourcexml> becomes
                        <targetxml>@indent</targetxml>. <targetxml>@indent</targetxml> has tokenized
                    value in NewLexis schema. And <sourcexml>p/@style</sourcexml> becomes
                        <targetxml>p/@align</targetxml>. <targetxml>@align</targetxml> has tokenized
                    value in NewLexis Schema. </p>
            </section>
            <example>
                <title>Source XML</title>
                <codeblock> &lt;blockquote&gt; &lt;p indent="hang"&gt; &lt;text&gt;Note: There is no
                    penalty for this Rule.&lt;/text&gt;&lt;/p&gt; &lt;/blockquote&gt; </codeblock>
            </example>
            <example>
                <title>Target XML</title>
                <codeblock> &lt;blockquote&gt; &lt;p indent="hang"&gt; &lt;text&gt;Note: There is no
                    penalty for this Rule.&lt;/text&gt; &lt;/p&gt; &lt;/blockquote&gt; </codeblock>
            </example>
            <note>
                <b>If <sourcexml>p</sourcexml> comes with <sourcexml>@i</sourcexml> then
                        <sourcexml>@i</sourcexml> will get dropped in NewLexis.</b>
            </note>
            <example>
                <title>Source XML</title>
                <codeblock> &lt;blockquote&gt; &lt;p i="3.5" indent="hang"&gt; &lt;text&gt;Note:
                    There is no penalty for this Rule.&lt;/text&gt;&lt;/p&gt; &lt;/blockquote&gt;
                </codeblock>
            </example>
            <example>
                <title>Target XML</title>
                <codeblock> &lt;blockquote&gt; &lt;p indent="hang"&gt; &lt;text&gt;Note: There is no
                    penalty for this Rule.&lt;/text&gt; &lt;/p&gt; &lt;/blockquote&gt; </codeblock>
            </example>
            <note>
                <b>If <sourcexml>p</sourcexml> comes with <sourcexml>@nl</sourcexml> this means the
                        <targetxml>p</targetxml> should start with the same number of
                        <targetxml>proc:nl</targetxml> elements before any text content in order to
                    maintain vertical white space.</b>
            </note>
            <example>
                <title>Source XML</title>
                <codeblock> &lt;p nl="1"&gt; &lt;text&gt; &lt;emph typestyle="bf"&gt;EDITORIAL
                    NOTE&lt;/emph&gt; ... &lt;/text&gt; &lt;/p&gt; </codeblock>
            </example>
            <example>
                <title>Target XML</title>
                <codeblock> &lt;p&gt; &lt;text&gt; &lt;proc:nl/&gt; &lt;emph
                    typestyle="bf"&gt;EDITORIAL NOTE&lt;/emph&gt; ... &lt;/text&gt; &lt;/p&gt;
                </codeblock>
            </example>
            <note>If <sourcexml>p</sourcexml> comes with <sourcexml>@nl=?0?</sourcexml>, this means
                the first <sourcexml>&lt;nl/&gt;</sourcexml> encountered within the
                    <sourcexml>&lt;p&gt;</sourcexml> should be omitted.</note>
            <example>
                <title>Source XML</title>
                <codeblock> &lt;p nl="0"&gt; &lt;text&gt; &lt;nl/&gt; &lt;ci:cite
                    searchtype="LEG-REF"&gt; &lt;ci:content&gt;Companies Code (NSW)
                    s129&lt;/ci:content&gt; &lt;/ci:cite&gt; &lt;/text&gt; &lt;/p&gt; </codeblock>
            </example>
            <example>
                <title>Target XML</title>
                <codeblock> &lt;p&gt; &lt;text&gt; &lt;lnci:cite&gt; &lt;lnci:content&gt;Companies
                    Code (NSW) s129&lt;/lnci:content&gt; &lt;/lnci:cite&gt; &lt;/text&gt; &lt;/p&gt;
                </codeblock>
            </example>
            <example>
                <title>Source XML</title>
                <codeblock> &lt;p style="right"&gt; &lt;text&gt;&lt;emph typestyle="it"&gt;Last
                    updated: June 2011&lt;/emph&gt;&lt;/text&gt; &lt;/p&gt; </codeblock>
            </example>
            <example>
                <title>Target XML</title>
                <codeblock> &lt;p align="right"&gt; &lt;text&gt;&lt;emph typestyle="it"&gt;Last
                    updated: June 2011&lt;/emph&gt;&lt;/text&gt; &lt;/p&gt; </codeblock>
            </example>
            <section>
                <title>Exceptional scenario for NZ07-Linxplus</title>
                <p>If <sourcexml>p</sourcexml> or <sourcexml>p/@nl="0"</sourcexml> is a child of
                        <sourcexml>references</sourcexml> element then merge all
                        <sourcexml>p</sourcexml> or <sourcexml>p/@nl="0"</sourcexml> in a single
                        <targetxml>p</targetxml> in target. Also all occurences of
                        <sourcexml>nl</sourcexml> within <sourcexml>text</sourcexml> becomes
                        <targetxml>proc:nl</targetxml>. Refer below example.</p>
            </section>
            <example>
                <title>Source XML</title>
                <codeblock> &lt;references referencetype="statutes"&gt; &lt;p&gt; &lt;text&gt;
                    &lt;process-ignore process="kwd"&gt; &lt;emph typestyle="bf"&gt;References to
                    Legislation&lt;/emph&gt; &lt;/process-ignore&gt; &lt;/text&gt; &lt;/p&gt; &lt;p
                    nl="0"&gt; &lt;text&gt;&lt;ci:cite
                    searchtype="LEG-REF"&gt;&lt;ci:content&gt;&lt;citefragment
                    searchtype="LEG-NAME-REF"&gt;&lt;remotelink service="DOC-ID" dpsi="0069"
                    remotekey1="REFPTID" refpt="2000A38"&gt;Bail Act
                    2000&lt;/remotelink&gt;&lt;/citefragment&gt;&lt;/ci:content&gt;&lt;/ci:cite&gt;
                    &lt;ci:cite searchtype="LEG-REF"&gt;&lt;ci:content&gt;&lt;citefragment
                    searchtype="LEG-PROV-REF"&gt;&lt;remotelink service="DOC-ID" dpsi="0069"
                    remotekey1="REFPTID"
                    refpt="2000A38S8"&gt;s8&lt;/remotelink&gt;&lt;/citefragment&gt;&lt;/ci:content&gt;&lt;/ci:cite&gt;,
                    &lt;ci:cite searchtype="LEG-REF"&gt;&lt;ci:content&gt;&lt;citefragment
                    searchtype="LEG-PROV-REF"&gt;&lt;remotelink service="DOC-ID" dpsi="0069"
                    remotekey1="REFPTID" refpt="2000A38S13"
                    &gt;s13&lt;/remotelink&gt;&lt;/citefragment&gt;&lt;/ci:content&gt;&lt;/ci:cite&gt;&lt;/text&gt;
                    &lt;/p&gt; &lt;p nl="0"&gt; &lt;text&gt; &lt;nl/&gt; &lt;ci:cite
                    searchtype="LEG-REF"&gt; &lt;ci:content&gt; &lt;citefragment
                    searchtype="LEG-NAME-REF"&gt; &lt;remotelink service="DOC-ID" dpsi="0069"
                    remotekey1="REFPTID" refpt="1975A116"&gt;Misuse of Drugs Act
                    1975&lt;/remotelink&gt; &lt;/citefragment&gt; &lt;/ci:content&gt;
                    &lt;/ci:cite&gt; &lt;/text&gt; &lt;/p&gt; &lt;p nl="0"&gt; &lt;text&gt;
                    &lt;nl/&gt; &lt;ci:cite searchtype="LEG-REF"&gt; &lt;ci:content&gt;
                    &lt;citefragment searchtype="LEG-NAME-REF"&gt; &lt;remotelink service="DOC-ID"
                    dpsi="0069" remotekey1="REFPTID" refpt="2002A9"&gt;Sentencing Act
                    2002&lt;/remotelink&gt; &lt;/citefragment&gt; &lt;/ci:content&gt;
                    &lt;/ci:cite&gt; &lt;ci:cite searchtype="LEG-REF"&gt; &lt;ci:content&gt;
                    &lt;citefragment searchtype="LEG-PROV-REF"&gt; &lt;remotelink service="DOC-ID"
                    dpsi="0069" remotekey1="REFPTID" refpt="2002A9S65"&gt;s65&lt;/remotelink&gt;
                    &lt;/citefragment&gt; &lt;/ci:content&gt; &lt;/ci:cite&gt; &lt;/text&gt;
                    &lt;/p&gt; &lt;/references&gt; </codeblock>
            </example>
            <example>
                <title>Target XML</title>
                <codeblock> &lt;ref:relatedrefs referencetype="statutes"&gt; &lt;bodytext&gt;
                    &lt;p&gt; &lt;text&gt; &lt;emph typestyle="bf"&gt;References to
                    Legislation&lt;/emph&gt; &lt;/text&gt; &lt;text&gt; &lt;lnci:cite
                    type="legislation"&gt; &lt;lnci:content&gt; &lt;ref:crossreference
                    crossreferencetype="seeAlso"&gt; &lt;ref:content&gt;Bail Act
                    2000&lt;/ref:content&gt; &lt;ref:locator&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="DOC-ID"/&gt; &lt;ref:key-value value="0069-2000A38"/&gt;
                    &lt;/ref:locator-key&gt; &lt;/ref:locator&gt; &lt;/ref:crossreference&gt;
                    &lt;/lnci:content&gt; &lt;/lnci:cite&gt; &lt;lnci:cite type="legislation"&gt;
                    &lt;lnci:content&gt; &lt;ref:crossreference crossreferencetype="seeAlso"&gt;
                    &lt;ref:content&gt;s8&lt;/ref:content&gt; &lt;ref:locator&gt;
                    &lt;ref:locator-key&gt; &lt;ref:key-name name="DOC-ID"/&gt; &lt;ref:key-value
                    value="0069-2000A38S8"/&gt; &lt;/ref:locator-key&gt; &lt;/ref:locator&gt;
                    &lt;/ref:crossreference&gt; &lt;/lnci:content&gt; &lt;/lnci:cite&gt;,
                    &lt;lnci:cite type="legislation"&gt;&lt;lnci:content&gt; &lt;ref:crossreference
                    crossreferencetype="seeAlso"&gt; &lt;ref:content&gt;s13&lt;/ref:content&gt;
                    &lt;ref:locator&gt; &lt;ref:locator-key&gt; &lt;ref:key-name name="DOC-ID"/&gt;
                    &lt;ref:key-value value="0069-2000A38S13"/&gt; &lt;/ref:locator-key&gt;
                    &lt;/ref:locator&gt; &lt;/ref:crossreference&gt; &lt;/lnci:content&gt;
                    &lt;/lnci:cite&gt; &lt;proc:nl/&gt; &lt;lnci:cite type="legislation"&gt;
                    &lt;lnci:content&gt; &lt;ref:crossreference crossreferencetype="seeAlso"&gt;
                    &lt;ref:content&gt;Misuse of Drugs Act 1975&lt;/ref:content&gt;
                    &lt;ref:locator&gt; &lt;ref:locator-key&gt; &lt;ref:key-name name="DOC-ID"/&gt;
                    &lt;ref:key-value value="0069-1975A116"/&gt; &lt;/ref:locator-key&gt;
                    &lt;/ref:locator&gt; &lt;/ref:crossreference&gt; &lt;/lnci:content&gt;
                    &lt;/lnci:cite&gt; &lt;proc:nl/&gt; &lt;lnci:cite type="legislation"&gt;
                    &lt;lnci:content&gt; &lt;ref:crossreference crossreferencetype="seeAlso"&gt;
                    &lt;ref:content&gt;Sentencing Act 2002&lt;/ref:content&gt; &lt;ref:locator&gt;
                    &lt;ref:locator-key&gt; &lt;ref:key-name name="DOC-ID"/&gt; &lt;ref:key-value
                    value="0069-2002A9"/&gt; &lt;/ref:locator-key&gt; &lt;/ref:locator&gt;
                    &lt;/ref:crossreference&gt; &lt;/lnci:content&gt; &lt;/lnci:cite&gt;
                    &lt;lnci:cite type="legislation"&gt; &lt;lnci:content&gt; &lt;ref:crossreference
                    crossreferencetype="seeAlso"&gt; &lt;ref:content&gt;s65&lt;/ref:content&gt;
                    &lt;ref:locator&gt; &lt;ref:locator-key&gt; &lt;ref:key-name name="DOC-ID"/&gt;
                    &lt;ref:key-value value="0069-2002A9S65"/&gt; &lt;/ref:locator-key&gt;
                    &lt;/ref:locator&gt; &lt;/ref:crossreference&gt; &lt;/lnci:content&gt;
                    &lt;/lnci:cite&gt; &lt;/text&gt; &lt;/p&gt; &lt;/bodytext&gt;
                    &lt;/ref:relatedrefs&gt; </codeblock>
            </example>

            <section>
                <p>
                    <note>If source document is having the input scenario
                            "<sourcexml>pgrp/p/leg:histnote</sourcexml>" then conversion needs to
                        drop '<sourcexml>p</sourcexml>' markup in target conversion and target
                        mapping xpath is
                        "<targetxml>pgrp/note[@notetype="historical"]</targetxml>".</note>
                </p>
            </section>
            <section>
                <note>For Stream 'HK06'</note>
                <p> When the source has <sourcexml>deflist/defitem/p/text</sourcexml> then omit
                        <sourcexml>p/text</sourcexml> and retain <sourcexml>defitem</sourcexml>.
                </p>
            </section>
            <section>
                <title>Changes</title>
                <p>2014-03-14: <ph id="change_20140414_AS">Removed Colons from Labels.. DB item
                        #1255</ph></p>
                <p>2012-10-05: Removed @i from the example.</p>
                <p>2013-03-14: <ph id="change_20130314_ab">Add instruction and example
                            <sourcexml>p/@style</sourcexml>.</ph></p>
                <p>2013-10-09: <ph id="change_20131009_PS">Added instruction and example
                            <sourcexml>p</sourcexml> comes with
                    <sourcexml>@nl=?0?</sourcexml>.</ph></p>
                <p>2013-10-25: <ph id="change_20131025_PS">Added instruction and example
                            <sourcexml>p/@nl="0"</sourcexml> comes in
                            <sourcexml>references</sourcexml>.</ph></p>
                <p>2013-11-21: <ph id="change_20131121_PS">Updated instruction and example
                            <sourcexml>p</sourcexml> or <sourcexml>p/@nl="0"</sourcexml> comes in
                            <sourcexml>references</sourcexml>, this change directly affects
                        NZ07.</ph></p>
                <p>2013-12-04: <ph id="change_20131204_PS">Updated target example when
                            <sourcexml>p</sourcexml> or <sourcexml>p/@nl="0"</sourcexml> comes in
                            <sourcexml>references</sourcexml>, this change directly affects
                        NZ07.</ph></p>
            </section>

        </body>
    </dita:topic>
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_p-LxAdv-p.dita  -->
    <!-- BRT: this template is the otherwise condition in match="p" in base.xsl. 
                 The rules in this topic for handling @nl are different than the existing XSLT, which ignores and suppresses the element. 
                 Adding template match="p[@nl!='']/text" to handle this rule. *** Also, did not address NZ07 exception scenario** 
                 
       JL: seems like the @nl handling  will not behave properly unless we move it to the text template.  
        I moved it to XSLT/ContentArch/Rosetta-to-LA/modules/nonamespace/Rosetta_text-LxAdv-text-with-test-for-whitespace-content.xsl
        PLEASE LOOK THERE!!!!!! IF YOU NEED TO ADD IT TO ANOTHER MODULE FOR ELEMENT <text> WE MIGHT WANT TO FURTHER MODULARIZE IT -->

    <xsl:template match="p">
        <xsl:variable name="docinfoidtext" select="/*/docinfo/docinfo:doc-id/text()"/>
        <xsl:choose>
            <!-- Priya Kaushal: Added below code for UK 15 -->
            <xsl:when test="parent::references[$streamID = 'UK15']">
                <bodytext xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <p>
                        <xsl:apply-templates select="@* | node()"/>
                    </p>
                </bodytext>
            </xsl:when>
            <xsl:when test="parent::in:body[$streamID = 'AU16']">
                <p xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <xsl:apply-templates select="node()"/>
                </p>
            </xsl:when>
            <xsl:when test="parent::in:body">
                <bodytext xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <p>
                        <xsl:apply-templates select="node()"/>
                    </p>
                </bodytext>
            </xsl:when>
            <!-- Vikas Rohilla : Included for the stream UK12          -->
            <xsl:when test="parent::blockquote[$streamID = 'UK12']">
                <p>
                    <xsl:apply-templates select="@* | refpt, node() except refpt"/>
                </p>
            </xsl:when>
            <xsl:when test="child::text/child::note[@notetype != 'xref'][$streamID = 'UK12']">
                <xsl:apply-templates select="@* | refpt, node() except refpt"/>
            </xsl:when>
            <xsl:when
                test="
                    (parent::frm:div
                    | parent::frm:body
                    | parent::clause[ancestor::frm:div | ancestor::frm:body]
                    | parent::li[ancestor::frm:body and not(parent::l/parent::entry)])[not(ancestor::footnote or ancestor::note)]
                    [$streamID = ('NZ11', 'AU10')]">
                <form:p>
                    <xsl:if test="not(@style) and child::text[1]/@align[. != '']">
                        <xsl:copy-of select="child::text[1]/@align"/>
                    </xsl:if>
                    <xsl:apply-templates select="@* | refpt, node() except refpt"/>
                </form:p>
            </xsl:when>
            <xsl:when
                test="(parent::frm:div | parent::frm:body | parent::clause[ancestor::frm:div | ancestor::frm:body] | parent::li[ancestor::frm:body])[not(ancestor::footnote or ancestor::note)][$streamID = 'UK12']">
                <form:p>
                    <xsl:if test="not(@style) and child::text[1]/@align[. != '']">
                        <xsl:copy-of select="child::text[1]/@align"/>
                    </xsl:if>
                    <xsl:apply-templates select="@* | refpt, node() except refpt"/>
                </form:p>
            </xsl:when>
            <xsl:when
                test="(parent::sigblock[ancestor::frm:div | ancestor::frm:body])[not(ancestor::footnote)][$streamID = 'UK12']">
                <form:line>
                    <xsl:apply-templates select="@* | node()"/>
                </form:line>
            </xsl:when>
            <!-- MDS - occurs in HK04 -  child is leg:histnote then the p element is not output and simply passed through.-->
            <!-- JL revised to handle the many scenarios when p has other children than leg:histnote
            also revised to strip the p wrapper in certain conditions when legfragment is a child
            -->
            <xsl:when
                test="leg:histnote | blockquote[legfragment and not(child::*[2])][parent::p[parent::*:bodytext or parent::pgrp or parent::li or parent::fnbody or parent::glp:note or parent::case:judgmentbody or parent::case:appendix]]">
                <!--<xsl:apply-templates select="node()"/>-->
                <xsl:for-each-group select="*"
                    group-adjacent="
                        if (self::leg:histnote or self::blockquote[legfragment and not(child::*[2])][parent::p[parent::*:bodytext or parent::pgrp or parent::li or parent::fnbody or parent::glp:note or parent::case:judgmentbody or parent::case:appendix]]) then
                            0
                        else
                            1">
                    <xsl:choose>
                        <xsl:when test="current-grouping-key() = 0">
                            <xsl:apply-templates select="current-group()"/>
                        </xsl:when>
                        <!--Satbir: Added below template for changing order of reft before desig in NZ03 only-->
                        <xsl:when test="$streamID = 'NZ03'">
                            <p xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">

                                <xsl:apply-templates
                                    select="following-sibling::refpt[preceding-sibling::pnum]"/>
                                <xsl:for-each select="current-group()">

                                    <xsl:apply-templates select="current() except self::refpt"/>
                                </xsl:for-each>
                            </p>
                        </xsl:when>
                        <xsl:otherwise>
                            <p xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                                <xsl:apply-templates select="parent::p/@*"/>
                                <xsl:if test="not(parent::p/@style)">
                                    <xsl:copy-of select="parent::p/text[1]/@align"/>
                                </xsl:if>
                                <!-- MDS 2017-08-08 Added handling for refpt to reorder in output-->
                                <xsl:apply-templates select="current-group()[self::refpt]"/>
                                <xsl:for-each select="current-group()">
                                    <xsl:apply-templates select=". except (self::refpt)"/>
                                </xsl:for-each>
                            </p>

                        </xsl:otherwise>
                    </xsl:choose>
                </xsl:for-each-group>
            </xsl:when>
            <!-- JL: funky NZ07 case where we collapse p or p[@nl='0'] element children of references 
            full logic isn't given but I assume we don't do the collapse if the reference has any non-p children or if 
            references has any p children where the @nl value is not zero or we're going to be here all year -->
            <xsl:when
                test="parent::references[not(child::*[not(self::p[@nl = '0' or not(@nl)])])] and starts-with($streamID, 'NZ07') and (not(@nl) or @nl = '0') and not(preceding-sibling::p)">
                <xsl:element name="p"
                    namespace="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <!-- JL this "if" condition that moves text align att value to the parent p is generic and cannot be used for CA -->
                    <xsl:apply-templates select="@*"/>
                    <xsl:if
                        test="not(@style) and child::text[@align[. != '']] and not(child::text[2]) and not(starts-with($streamID, 'CA'))">
                        <xsl:attribute name="align">
                            <xsl:value-of select="text/@align"/>
                        </xsl:attribute>
                    </xsl:if>
                    <!-- JL: the sample seems to indicate they want to collapse some of the text child elements too, 
                        but doesn't give the logic for doing that so I'm GUESSING based on the sample!
                        My guess at the logic used: if the @nl has the same value as (or is missing the same as) the previous p, then collapse 
                        text element children too.                          
                        This needs to be very carefully tested when we test  NZ07 data.
                    
                    -->
                    <xsl:choose>
                        <xsl:when
                            test="child::*[not(self::text)] or following-sibling::p[child::*[not(self::text)]]">
                            <xsl:apply-templates select="refpt | following-sibling::p/refpt"/>
                            <xsl:apply-templates select="*[not(self::refpt)] | text()"/>
                            <!-- if any p elements have ANY child elements other than <text>, don't merge child text nodes. cleaner -->
                            <xsl:for-each select="following-sibling::p">
                                <xsl:apply-templates select="*[not(self::refpt)] | text()"/>
                            </xsl:for-each>
                        </xsl:when>
                        <xsl:otherwise>
                            <!-- can assume p has only text children, yay! And we have also whittled the possibilities down to "p contains an nl att or not" -->
                            <xsl:for-each-group select="self::p | following-sibling::p"
                                group-adjacent="exists(@nl)">
                                <xsl:element name="text"
                                    namespace="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                                    <xsl:apply-templates select="current-group()[1]/text[1]/@*"/>
                                    <xsl:for-each select="current-group()">
                                        <xsl:apply-templates select="text/node()"/>
                                    </xsl:for-each>
                                </xsl:element>
                            </xsl:for-each-group>
                        </xsl:otherwise>
                    </xsl:choose>
                </xsl:element>
            </xsl:when>
            <!-- suppresses context nodes already accessed in previous condition -->
            <xsl:when
                test="parent::references[not(child::*[not(self::p[@nl = '0' or not(@nl)])])] and starts-with($streamID, 'NZ07') and (not(@nl) or @nl = '0') and preceding-sibling::p"/>
            <xsl:when
                test="starts-with($streamID, 'CA') and count(text) &gt; 1 and not(@style) and text[@align]">
                <xsl:for-each-group select="*" group-adjacent="concat('', @align)">
                    <xsl:element name="p"
                        namespace="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                        <xsl:apply-templates select="parent::p/@*"/>
                        <xsl:copy-of select="@align"/>
                        <xsl:for-each select="current-group()">
                            <xsl:apply-templates select="."/>
                        </xsl:for-each>
                    </xsl:element>

                </xsl:for-each-group>
            </xsl:when>

            <!-- Awantika: conditional change for AU20, using double slashes as full path is not working here  -->
            <xsl:when
                test="//source_cttr:annotations/child::heading/note/h[. = 'ActName' or . = 'Act Name'] and $streamID = 'AU20'">
                <xsl:apply-templates/>
            </xsl:when>
            <xsl:when test="parent::bodytext[$streamID = 'CA12']">
                <p>
                    <xsl:if
                        test="child::text/ci:cite[not(preceding::p/text/ci:cite)] and not(child::text/@searchtype = 'CASE-NAME')">
                        <ref:anchor>
                            <xsl:attribute name="id">dict-CASENAME-CITE</xsl:attribute>
                            <xsl:attribute name="anchortype">local</xsl:attribute>
                        </ref:anchor>
                    </xsl:if>
                    <xsl:apply-templates select="node()"/>
                </p>
            </xsl:when>
            <!-- 2017-10-17 - MDS: Added due to Webstar 7025682 -->
            <xsl:when test="parent::l[$streamID = 'UK12']">
                <listitem>
                    <bodytext>
                        <p>
                            <xsl:apply-templates select="@* | node()"/>
                        </p>
                    </bodytext>
                </listitem>
            </xsl:when>
            <xsl:when
                test="$streamID = 'UK22CF' and parent::legfragment and (preceding-sibling::leg:prelim or preceding-sibling::leg:info)">
                <xsl:element name="primlaw:bodytext">
                    <xsl:element name="p">
                        <xsl:apply-templates select="refpt"/>
                        <xsl:apply-templates select="*[not(self::refpt)] | text()"/>
                    </xsl:element>
                </xsl:element>
            </xsl:when>
            <!-- Awantika:2018-04-04- Updated to apply inlineobject. W* 7157638 -->
            <xsl:when
                test="$streamID = 'HK07' and parent::bodytext[parent::level[@leveltype = 'prec' or @leveltype = 'prec.grp' or @leveltype = 'precgrp' or @leveltype = 'precgrp1' or @leveltype = 'precgrp2' or parent::comm.chap or ancestor::level[@leveltype = 'prec.grp']]]">
                <form:p>
                    <xsl:choose>
                        <xsl:when test="child::inlineobject">
                            <form:text>
                                <xsl:apply-templates select="inlineobject"/>
                            </form:text>
                        </xsl:when>
                        <xsl:otherwise>
                            <xsl:apply-templates select="node() except inlineobject"/>
                        </xsl:otherwise>
                    </xsl:choose>
                </form:p>
            </xsl:when>
            <!--    <xsl:when test="$streamID='AU20' and contains(lower-case($docinfoidtext),'overview') and ancestor::source_cttr:annotations[not(@annotgroup='prov-al')]/heading/note[descendant::lnlink/marker['List of Provisions' or 'Defined Terms' or 'Government Website'][not(@id='OI13')]] | source_cttr:annotations[not(@annotgroup='prov-al')]/heading/remotelink">
                <xsl:apply-templates/>
            </xsl:when>-->
            <!-- Awantika:2018-02-15- mapping refpt inside <p>. Webstar # 7116564 -->
            <xsl:when test="$streamID = 'CA02CC' and preceding-sibling::heading[child::title/refpt]">
                <p>
                    <xsl:apply-templates
                        select="/CASEDOC/case:body/case:headnote/case:decisionsummary/heading/title/refpt"/>
                    <xsl:apply-templates/>
                </p>
            </xsl:when>
            <xsl:otherwise>
                <xsl:choose>
                    <!-- Awantika: 2017-10-26- Added the condition to check multiple text/@align in one p
                   as per CI instructions which is currently only for Canada applying for HK07. 
                   Creating seperate <p> for each text/@align.-->
                    <xsl:when test="count(child::text/@align) >= 1 and $streamID = 'HK07'">
                        <xsl:for-each select="child::*">
                            <xsl:element name="p">
                                <xsl:if test="self::*[1]/@align">
                                    <xsl:attribute name="align">
                                        <xsl:value-of select="self::*[1]/@align"/>
                                    </xsl:attribute>
                                </xsl:if>
                                <xsl:apply-templates select="self::*"/>
                            </xsl:element>
                        </xsl:for-each>
                    </xsl:when>
                    <!-- Awantika:2017-10-27: p/text will be converted to <textitem> for AU20 for specific scenario -->
                    <xsl:when
                        test="$streamID = 'AU20' and contains(lower-case($docinfoidtext), 'history') and /CITATORDOC/source_cttr:body/source_cttr:content/source_cttr:annotations/heading/note[@id = 'HI4'] | /CITATORDOC/source_cttr:body/source_cttr:content/source_cttr:annotations/heading/title[. = 'Assent']">
                        <xsl:apply-templates select="@* | node()"/>
                    </xsl:when>
                    <!--Satbir: Added mdule for handling glp:note under p/text-->
                    <xsl:when
                        test="$streamID = 'NZ03' and child::text/child::glp:note[not(child::node except glp:note)][ancestor::case:judgmentbody]">
                        <xsl:apply-templates select="child::text/child::glp:note"/>
                    </xsl:when>
                    <!-- Awntika: 2017-12-13- Updated for webstar# 7065522 -->
                    <xsl:when
                        test="$streamID = 'AU20' and contains(lower-case($docinfoidtext), 'overview') and parent::note[ancestor::source_cttr:annotations[@id = 'OI2']/heading/title[., 'Former Title']]">
                        <xsl:apply-templates select="node()"/>
                    </xsl:when>
                    <xsl:otherwise>


                        <p xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                            <!-- JL this "if" condition that moves text align att value to the parent p is generic and cannot be used for CA -->
                            <xsl:apply-templates select="@*"/>
                            <!-- <xsl:if
                        test="not(@style) and child::text[@align[. != '']] and not(child::text[2]) and not(starts-with($streamID, 'CA'))">
                        <xsl:attribute name="align">
                            <xsl:value-of select="text/@align"/>
                        </xsl:attribute>
                    </xsl:if>-->
                            <!--                   Chaitanya :Making the for the P/@align as CA08 require this change, Luckabaugh, Joy H. (LNG-HBE) <Joy.Luckabaugh@lexisnexis.com> has approved to change this module  -->
                            <xsl:if
                                test="not(@style) and child::text[@align[. != '']] and not(child::text[2])">
                                <xsl:attribute name="align">
                                    <xsl:value-of select="text/@align"/>
                                </xsl:attribute>
                            </xsl:if>




                            <!-- JD: 2017-07-25: modifying the above for NZ18 create @align from only the first text/align so as to not concat -->
                            <xsl:if
                                test="
                                    not(@style) and child::text[@align[. != '']]
                                    and $streamID = ('NZ18', 'AU04', 'NZ13')">
                                <xsl:attribute name="align">
                                    <!-- take the @align from the first child <text> (don't concatenate all child text/@align values) -->
                                    <xsl:value-of select="text[1]/@align"/>
                                </xsl:attribute>
                            </xsl:if>

                            <!-- Vikas Rohilla : Created desig altdesig before other element to meet schema ordering                  -->
                            <!-- create ref:anchor before other elements to meet schema ordering -->
                            <xsl:if test="not($streamID = ('UK06', 'UK07'))">
                                <xsl:apply-templates select="(refpt | text/refpt), edpnum, pnum"/>
                            </xsl:if>
                            <!-- the above is the wrong order for legis and regulation if pnum goes to desig and edpnum goes to altdesig  -->
                            <xsl:if test="$streamID = ('UK06', 'UK07')">
                                <xsl:apply-templates select="(refpt | text/refpt), pnum, edpnum"/>
                            </xsl:if>
                            <!-- JD: 2017-07-31: added loop in order to properly wrap p/link elements and proces other children when present -->
                            <xsl:for-each select="*">
                                <xsl:choose>
                                    <!--SS: Added this condition for p/link becomes p/text/ref:lnlink - HK07-->
                                    <!-- JD: 2017-07-28: this produces an extra <text> when there is a child <link> AND a child <text>;
                		adding "and not(child::text)" -->
                                    <xsl:when test="self::link">
                                        <xsl:element name="text">
                                            <!--<xsl:apply-templates />-->
                                            <xsl:call-template name="generic-link"/>
                                        </xsl:element>
                                        <!--SS: Added "except link" condition for handling p/link - HK07-->
                                        <!--<xsl:apply-templates
                					select="*[not(self::refpt | self::edpnum | self::pnum)] except link | text()"/>-->
                                    </xsl:when>
                                    <!--SS: Added template for converting images from inline to figure/inline-->
                                    <!-- Awantika: 2018-01-12- inlineobject was getting dropped when coming in text for AU01. -->
                                    <!-- Awantika: 2018-03-29- Added HK03 to create inlineobject. VSTS Bug #459196 -->
                                    <xsl:when
                                        test="child::inlineobject[$streamID = ('AU18', 'AU01', 'HK03')]">
                                        <text>
                                            <xsl:apply-templates/>
                                        </text>
                                    </xsl:when>
                                    <xsl:otherwise>
                                        <xsl:apply-templates
                                            select=".[not(self::refpt | self::edpnum | self::pnum)]"
                                        />
                                    </xsl:otherwise>
                                </xsl:choose>
                            </xsl:for-each>

                            <!-- Vikas Rohilla : Created desig altdesig before other element to meet schema ordering                  -->
                            <!-- create ref:anchor before other elements to meet schema ordering -->
                            <!--<xsl:apply-templates select="(refpt | text/refpt), edpnum, pnum"/>
                    <!-\-SS: Added "except link" condition for handling p/link - HK07-\->
                	<!-\- JD: removing 'except link' -\->
                		<xsl:apply-templates
                			select="*[not(self::refpt | self::edpnum | self::pnum)] except link | text()"/>-->

                            <xsl:if test="note[@notetype = 'xref'] and $streamID = 'UK11DN'">
                                <xsl:for-each-group select="*"
                                    group-adjacent="
                                        if (self::note) then
                                            1
                                        else
                                            0">

                                    <xsl:choose>
                                        <xsl:when test="current-grouping-key() = 1">
                                            <!--  <xsl:apply-templates select="ancestor::p/text"/>-->

                                            <text>
                                                <marginnote>
                                                  <ref:anchor>
                                                  <xsl:attribute name="id">
                                                  <xsl:value-of select="generate-id()"/>
                                                  </xsl:attribute>
                                                  <xsl:attribute name="anchortype">
                                                  <xsl:text>local</xsl:text>
                                                  </xsl:attribute>
                                                  </ref:anchor>
                                                  <bodytext>
                                                  <xsl:for-each select="current-group()">
                                                  <xsl:apply-templates select="@* | node()"/>
                                                  </xsl:for-each>
                                                  </bodytext>
                                                </marginnote>
                                            </text>
                                        </xsl:when>
                                    </xsl:choose>
                                </xsl:for-each-group>
                            </xsl:if>
                        </p>

                    </xsl:otherwise>
                </xsl:choose>
                <xsl:for-each select="following-sibling::level">
                    <xsl:call-template name="following_p_level"/>
                </xsl:for-each>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <xsl:template match="p/@i">
        <!-- suppress -->
    </xsl:template>

    <xsl:template match="p/@nl">
        <!-- suppress -->
        <!-- see module for handling text when parent p has @nl -->
    </xsl:template>

    <xsl:template match="p/@ln.nsprefix">
        <!-- suppress -->
    </xsl:template>

    <xsl:template match="p/@class">
        <!-- suppress -->
    </xsl:template>

    <xsl:template match="p/@style">
        <xsl:choose>
            <xsl:when test=". = 'right' or . = 'left' or . = 'center'">
                <xsl:attribute name="align">
                    <xsl:value-of select="."/>
                </xsl:attribute>
            </xsl:when>
            <xsl:otherwise>
                <!--<xsl:message>'p' element 'style' attribute has unexpected and unmappable value
                        <xsl:value-of select="."/> and will be omitted on output.</xsl:message>-->
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <!-- Vikas Rohilla : Added template for the streamID CA01   -->
    <!-- Sudhanshu Srivastava : Added streamID CA02CC -->
    <xsl:template
        match="p[parent::glp:note[parent::text]][$streamID = 'CA01' or $streamID = 'CA02CC' or $streamID = 'CA04']">
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="p/@indent">
        <xsl:copy-of select="."/>
    </xsl:template>

    <xsl:template match="p[parent::text][$streamID = 'UK12']">
        <xsl:apply-templates select="@* | node()"/>
    </xsl:template>

    <!-- Awantika: Added template to handle p/inlineobject in HK07 to p/text/ref:inlineobject
    JL: this isn't going to account for all scenarios; moved functionality to inlineobject templates-->




    <!-- from text dita: <note><b>(For CANADA Content Stream only )</b>Only move the <sourcexml>
        text@align</sourcexml> to the parent <targetxml>p</targetxml> if it is the only
        text in <sourcexml>p</sourcexml>, Otherwise, wrap the <sourcexml>text</sourcexml>
        with <targetxml>p</targetxml> and move the <sourcexml>@align</sourcexml> attribute
        to the newly created <targetxml> p</targetxml>.</note>
    <section>
        <codeblock> &lt;p&gt; &lt;text&gt;Dated at Calgary, Alberta this 31 day of March
            1998.&lt;/text&gt; &lt;text&gt;The Honourable W. Kenneth Moore, Chief Justice of
            the Court of Queen's Bench of Alberta&lt;/text&gt; &lt;text
            align="center"&gt;ALBERTA RULES&lt;/text&gt; &lt;text&gt;Rules of practice made
            pursuant to subsection 745.64 of the Criminal Code to reflect the changes made
            to the Criminal Code regarding applications for reduction in the number of years
            of imprisonment without eligibility for parole.&lt;/text&gt; &lt;/p&gt; </codeblock>
        <b>Becomes</b>
        <codeblock> &lt;p&gt; &lt;text&gt;Dated at Calgary, Alberta this 31 day of March
            1998.&lt;/text&gt; &lt;text&gt;The Honourable W. Kenneth Moore, Chief Justice of
            the Court of Queen's Bench of Alberta&lt;/text&gt; &lt;/p&gt; &lt;p
            align="center"&gt; &lt;text&gt;ALBERTA RULES&lt;/text&gt; &lt;/p&gt; &lt;p&gt;
            &lt;text&gt;Rules of practice made pursuant to subsection 745.64 of the Criminal
            Code to reflect the changes made to the Criminal Code regarding applications for
            reduction in the number of years of imprisonment without eligibility for
            parole.&lt;/text&gt; &lt;/p&gt; </codeblock>
    </section>-->


    <!-- JL: seems like the @nl handling  will not behave properly unless we move it to the text template.  
        I moved it to XSLT/ContentArch/Rosetta-to-LA/modules/nonamespace/Rosetta_text-LxAdv-text-with-test-for-whitespace-content.xsl
        PLEASE LOOK THERE!!!!!! IF YOU NEED TO ADD IT TO ANOTHER MODULE FOR ELEMENT <text> -->
    <!-- BRT: included this specific text match template because it's part of p[@nl]. Added this template -->
    <!--    <xsl:template match="p[@nl != '']/text">
        <xsl:element name="text">
            <xsl:apply-templates select="@*"/>           
            <!-\- BRT add number of nl that are in p/@nl -\->
            <xsl:call-template name="add_nl">
                <xsl:with-param name="length" select="parent::p/@nl"/>
                <xsl:with-param name="i" select="1"/>
            </xsl:call-template>

            <!-\- BRT remove hard-coded nl that are in source -\->
            <xsl:apply-templates select="*[not(self::nl)] | text()"/>
        </xsl:element>
    </xsl:template>



    <xsl:template name="add_nl">
        <xsl:param name="length" select="."/>
        <xsl:param name="i" select="1"/>
        <!-\- BRT: create <nl/> for each iteration of @nl value -\->
        <xsl:if test="$length &gt; 0">
            <xsl:element name="proc:nl"/>
            <xsl:call-template name="add_nl">
                <xsl:with-param name="length" select="$length - 1"/>
                <xsl:with-param name="i" select="$i + 1"/>
            </xsl:call-template>
        </xsl:if>
    </xsl:template>-->
    <xsl:template name="following_p_level">
        <xsl:choose>
            <xsl:when test="child::heading/title/refpt">
                <seclaw:level>
                    <xsl:attribute name="leveltype">
                        <xsl:value-of select="@leveltype"/>
                    </xsl:attribute>
                    <xsl:apply-templates select="child::heading/title/refpt"/>
                    <xsl:apply-templates
                        select="@* | node() except (level[preceding-sibling::bodytext])"/>
                </seclaw:level>
            </xsl:when>
        </xsl:choose>
    </xsl:template>


    <!-- JD: 2017-07-21: added trap for p containing only empty node or single whitespace to match DT output.
	e.g., 
	<p>
	  <text/>
	</p>
	-->

    <xsl:template
        match="p[text[not(node()) or (string() and not(normalize-space()) and not(*))] and count(*) = 1]"/>

    <!-- 
		JD:		match p that has at least one element child, and don't have any children not named 'text', which doesn't have any text() or children not named 'br' 
		e.g.,
 		 <p>
				<text>
					<nl/>
					<nl/>
				</text>
			</p>
		taken from https://stackoverflow.com/questions/11438787/find-an-element-that-only-has-one-other-kind-of-child
	-->
    <xsl:template
        match="p[* and not(*[not(self::text[* and not(text()) and not(*[not(self::nl)])])])]"/>


    <!-- MDS 2017-08-11 - Added supression of completely empty paragraph elements.  Only for specific streams -->
    <xsl:template match="p[not(node())][$streamID = 'AU13']"/>


    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_p-limited-to-LexisAdvance_p">
        <title><sourcexml>p-limited</sourcexml> to <targetxml>p</targetxml>
            <lnpid>id-CCCC-10419</lnpid></title>
        <body>
            <section>
                <p><sourcexml>p-limited</sourcexml> becomes <targetxml>p</targetxml>. Also create a
                    child element <targetxml>text</targetxml> within <targetxml>p</targetxml> for
                    capturing the PCDATA of <sourcexml>p-limited</sourcexml>.</p>
            </section>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;entry align="center"&gt; &lt;p-limited&gt; &lt;emph
                    typestyle="bu"&gt;AGENDA&lt;/emph&gt; &lt;/p-limited&gt; &lt;/entry&gt;
                </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;entry align="center"&gt; &lt;p&gt; &lt;text&gt; &lt;emph
                    typestyle="bu"&gt;AGENDA&lt;/emph&gt; &lt;/text&gt; &lt;/p&gt; &lt;/entry&gt;
                </codeblock>
            </example>
            <section>
                <title>Changes</title>
            </section>
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_p-limited-LxAdv-p.dita  -->

    <!-- BRT: this is the same rule as in Rosetta_p-limited_emph-LxAdv-p_text_emph.dita, and is already addressed there. 
                 The otherwise condition in match="p-limited" creates p (no text), which conflicts with this rule. -->
    <!--Satbir: Define low priority in below template for p-limited because same template created in another xsl (Rosetta_entry_p-limited-LxAdv-entry_p.xsl)-->
    <xsl:template match="p-limited" priority="10">
        <p xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <text>
                <xsl:apply-templates select="@* | node()"/>
            </text>
        </p>
    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_p-limited_emph-to-LexisAdvance_p_text_emph">
        <title><sourcexml>p-limited/emph</sourcexml> to <targetxml>p/text/emph</targetxml>
            <lnpid>id-CCCC-10421</lnpid></title>
        <body>
            <section>
                <p>When <sourcexml>emph</sourcexml> occurs as a direct child of
                        <sourcexml>p-limited</sourcexml> then <sourcexml>p-limited/emph</sourcexml>
                    becomes <targetxml>p/text/emph</targetxml>. </p>
            </section>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;entry&gt; &lt;p-limited&gt; &lt;emph
                    typestyle="caps"&gt;Box&lt;/emph&gt; &lt;/p-limited&gt; &lt;/entry&gt;
                </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;entry&gt; &lt;p&gt; &lt;text&gt; &lt;emph
                    typestyle="caps"&gt;Box&lt;/emph&gt; &lt;/text&gt; &lt;/p&gt; &lt;/entry&gt;
                </codeblock>
            </example>
            <section>
                <title>Changes</title>
            </section>
        </body>
    </dita:topic>


    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_p-limited_emph-LxAdv-p_text_emph.dita  -->

    <!-- BRT: this template is in one condition of match="p-limited" in base.xsl
             -->
    <xsl:template match="p-limited[child::emph]">
        <xsl:element name="p">
            <xsl:element name="text">
                <xsl:apply-templates/>
            </xsl:element>
        </xsl:element>

    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_entry_p-limited_glp.note-to-LexisAdvance_entry_note">
        <title><sourcexml>entry/p-limited/glp:note</sourcexml> to <targetxml>entry/note</targetxml>
            <lnpid>id-CCCC-10422</lnpid></title>
        <body>
            <section>
                <p>When <sourcexml>glp:note</sourcexml> occurs as a direct child of
                        <sourcexml>entry/p-limited</sourcexml> then
                        <sourcexml>entry/p-limited/glp:note</sourcexml> becomes
                        <targetxml>entry/note</targetxml>. The <targetxml>entry/note</targetxml>
                    will occur as a sibling to any <targetxml>p</targetxml> elements within the
                        <targetxml>entry</targetxml>. If there is any text (PC-DATA) that is part of
                    the <sourcexml>entry</sourcexml> but occurs immediately before the
                        <sourcexml>p-limited</sourcexml>, an empty <targetxml>p</targetxml> element
                    should be created immediately before the <targetxml>note</targetxml> as a
                    sibling to the <targetxml>note</targetxml>. </p>
            </section>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;entry colname="c2" colsep="0" rowsep="0"&gt;deal...
                    &lt;p-limited&gt; &lt;glp:note&gt; &lt;blockquote&gt; &lt;p indent="none"&gt;
                    &lt;text&gt;In relation to the...&lt;/text&gt; &lt;/p&gt; &lt;/blockquote&gt;
                    &lt;/glp:note&gt; &lt;/p-limited&gt; &lt;/entry&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;entry colname="c2" colsep="0" rowsep="0"&gt;deal... &lt;p/&gt;
                    &lt;note&gt; &lt;bodytext&gt; &lt;blockquote&gt; &lt;p indent="none"&gt;
                    &lt;text&gt;In relation to the...&lt;/text&gt; &lt;/p&gt; &lt;/blockquote&gt;
                    &lt;/bodytext&gt; &lt;/note&gt; &lt;/entry&gt; </codeblock>
            </example>
            <section>
                <title>Changes</title>
            </section>
        </body>
    </dita:topic>


    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_p-limited_glp.note-LxAdv-entry_note.dita  -->


    <!-- BRT: Added this template as a condition to match="p-limited" in base.xsl.
             -->
    <xsl:template match="entry/p-limited[child::glp:note]">
        <xsl:element name="p" xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/"/>
        <xsl:apply-templates/>
    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_entry_p-limited-to-LexisAdvance_p">
        <title><sourcexml>entry/p-limited</sourcexml> to <targetxml>entry/p</targetxml>
            <lnpid>id-CCCC-10319</lnpid></title>
        <body>
            <section>
                <p><sourcexml>entry/p-limited</sourcexml> becomes <targetxml>entry/p</targetxml>.
                    Also create a child element <targetxml>text</targetxml> within
                        <targetxml>entry/p</targetxml> for capturing the PCDATA of
                        <sourcexml>entry/p-limited</sourcexml>. </p>

                <p> If multiple consecutive <sourcexml>p-limited</sourcexml> elements occur within
                        <sourcexml>entry</sourcexml> then create only one <targetxml>p</targetxml>
                    within <targetxml>entry</targetxml> and multiple child
                        <targetxml>text</targetxml> elements with the single
                        <targetxml>p</targetxml>. Create one <targetxml>p/text</targetxml> element
                    for each <sourcexml>p-limited</sourcexml> element. </p>
            </section>
            <example>
                <title>Source XML</title>
                <codeblock> &lt;entry&gt; &lt;p-limited&gt;Pleaded guilty to one charge of
                    cultivating cannabis, one charge of possession for supply and one charge of
                    supply.&lt;/p-limited&gt; &lt;p-limited&gt;The appellant was the owner of a
                    horticultural property. No criminal history. Four rows of cannabis plants
                    growing in an extension to a hothouse. Maturing plants, stalks from harvested
                    plants, and traces of drying cannabis leaf found. A total of 303 cannabis plants
                    grown in a hydroponic solution.&lt;/p-limited&gt; &lt;/entry&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;entry&gt; &lt;p&gt; &lt;text&gt;Pleaded guilty to one charge of
                    cultivating cannabis, one charge of possession for supply and one charge of
                    supply.&lt;/text&gt; &lt;text&gt;The appellant was the owner of a horticultural
                    property. No criminal history. Four rows of cannabis plants growing in an
                    extension to a hothouse. Maturing plants, stalks from harvested plants, and
                    traces of drying cannabis leaf found. A total of 303 cannabis plants grown in a
                    hydroponic solution.&lt;/text&gt; &lt;/p&gt; &lt;/entry&gt; </codeblock>
            </example>
            <note>If <sourcexml>l</sourcexml> is a child of <sourcexml>entry/p-limited</sourcexml>
                then <sourcexml>entry/p-limited/l</sourcexml> becomes
                    <targetxml>entry/p/list</targetxml>. For further clarification please see the
                following example.</note>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;entry colname="col2"&gt; &lt;p-limited&gt;Act is partly in force:
                    &lt;l&gt; &lt;li&gt; &lt;p&gt; &lt;text&gt;ss. 61 (a) as it repeals the
                    definition of ...&lt;/text&gt; &lt;/p&gt; &lt;/li&gt; &lt;/l&gt;
                    &lt;/p-limited&gt; &lt;/entry&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;entry colname="col2"&gt; &lt;p&gt; &lt;text&gt;Act is partly in
                    force:&lt;/text&gt; &lt;list&gt; &lt;listitem&gt; &lt;bodytext&gt; &lt;p&gt;
                    &lt;text&gt;ss. 61 (a) as it repeals the definition of ...&lt;/text&gt;
                    &lt;/p&gt; &lt;/bodytext&gt; &lt;/listitem&gt; &lt;/list&gt; &lt;/p&gt;
                    &lt;/entry&gt; </codeblock>
            </example>

            <section>
                <title>Changes</title>
                <p>2014-11-11: <ph id="change_20141111_PS">Updated instruction when multiple
                        consecutive <sourcexml>p-limited</sourcexml> elements occur within
                            <sourcexml>entry</sourcexml>.</ph></p>
                <p>2014-10-28: <ph id="change_20141028_PS">Added note to handle scenario when
                            <sourcexml>l</sourcexml> is a child of
                            <sourcexml>entry/p-limited</sourcexml>.</ph></p>
            </section>

            <!--<xsltinclusion>
                <xsl:stylesheet version="2.0">
                    <xsl:template match="p-limited">
                        <xsl:choose>
                            <xsl:when test="child::emph">
                                <xsl:element name="p">
                                    <xsl:element name="text">
                                        <xsl:apply-templates/>
                                    </xsl:element>
                                </xsl:element>
                            </xsl:when>
                            <!-\- BRT: added the following case, result is entry/note -\->
                            <xsl:when test="parent::entry and child::glp:note">
                                <xsl:apply-templates/>    
                            </xsl:when>
                            <!-\- generalizing this condition -\->
                            <!-\- AS: As per the instructions for p-limited "p-limited becomes p. Also create a child element text within p for capturing the PCDATA of p-limited." -\->
                            <xsl:when test="parent::entry">
                                <xsl:element name="p">
                                    <xsl:element name="text">
                                        <xsl:apply-templates/>
                                    </xsl:element>
                                </xsl:element>
                            </xsl:when>
                            <!-\- BRT: added the following -\->
                            <xsl:when test="child::remotelink">
                                <xsl:element name="p">
                                    <xsl:element name="text">
                                        <xsl:apply-templates/>
                                    </xsl:element>
                                </xsl:element>
                            </xsl:when>
                            <xsl:when test="child::ci:cite">
                                <xsl:element name="p">
                                    <xsl:element name="text">
                                        <xsl:apply-templates/>
                                    </xsl:element>
                                </xsl:element>
                            </xsl:when>
                            <xsl:otherwise>
                                <xsl:element name="p">
                                    <xsl:apply-templates/>
                                </xsl:element>
                            </xsl:otherwise>
                        </xsl:choose>
                    </xsl:template>
                </xsl:stylesheet>
            </xsltinclusion>
           -->
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated (although the DITA file already has embedded XSLT).  Remove this comment after manual development complete!  (also remove the embedded XSLT within the DITA above) @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_entry_p-limited-LxAdv-entry_p.dita  -->
    <!--<xsl:message>Rosetta_entry_p-limited-LxAdv-entry_p.xsl requires manual development!</xsl:message> -->
    <!--Satbir: Define the high priority in below template for p-limited because same template created in another xsl (Rosetta_p-limited-LxAdv-p.xsl)-->
    <xsl:template match="p-limited" priority="15">
        <xsl:variable name="docinfoidtext" select="/CITATORDOC/docinfo/source_docinfo:doc-id/text()"/>
        <xsl:choose>
            <xsl:when test="parent::table and preceding-sibling::tgroup">
                <xsl:element name="note">
                    <xsl:element name="bodytext">
                        <xsl:element name="p">
                            <xsl:element name="text">
                                <xsl:apply-templates/>
                            </xsl:element>
                        </xsl:element>
                    </xsl:element>
                </xsl:element>
            </xsl:when>
            <xsl:when test="child::emph">
                <xsl:element name="p">
                    <xsl:element name="text">
                        <!-- Awantika:2017-11-24- Webstar # 7048152. If glp:note is coming in p-limited with emph then in target we need to take out glp:note target markup note
                            from p/text as schema does not allow note inside p/text.
                            entry/p-limited/glp:note to entry/note -->
                        <xsl:apply-templates select="node() except glp:note"/>
                    </xsl:element>
                </xsl:element>
                <xsl:apply-templates select="glp:note"/>
            </xsl:when>
            <!-- BRT: added the following case, result is entry/note -->
            <xsl:when test="parent::entry and child::glp:note">
                <xsl:apply-templates/>
            </xsl:when>
            <!-- generalizing this condition -->
            <!-- AS: As per the instructions for p-limited "p-limited becomes p. Also create a child element text within p for capturing the PCDATA of p-limited." -->
            <xsl:when test="parent::entry">
                <!-- Awantika: For AU20 entry/p-limited becomes textitem  -->
                <xsl:choose>
                    <xsl:when
                        test="contains(lower-case($docinfoidtext), 'history') and parent::entry and $streamID = 'AU20'">
                        <textitem>
                            <xsl:apply-templates/>
                        </textitem>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:element name="p">
                            <xsl:element name="text">
                                <xsl:apply-templates/>
                            </xsl:element>
                        </xsl:element>
                    </xsl:otherwise>
                </xsl:choose>

            </xsl:when>
            <!-- BRT: added the following -->
            <xsl:when test="child::remotelink">
                <xsl:element name="p">
                    <xsl:element name="text">
                        <xsl:apply-templates/>
                    </xsl:element>
                </xsl:element>
            </xsl:when>
            <xsl:when test="child::ci:cite">
                <xsl:element name="p">
                    <xsl:element name="text">
                        <xsl:apply-templates/>
                    </xsl:element>
                </xsl:element>
            </xsl:when>
            <xsl:otherwise>
                <xsl:element name="p">
                    <xsl:apply-templates/>
                </xsl:element>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_p-limited_ci.cite-to-LexisAdvance_p_text_lnci.cite">
        <title><sourcexml>p-limited/ci:cite</sourcexml> to <targetxml>p/text/lnci:cite</targetxml>
            <lnpid>id-CCCC-10420</lnpid></title>
        <body>
            <section>
                <p>When <sourcexml>ci:cite</sourcexml> occurs as a direct child of
                        <sourcexml>p-limited</sourcexml> then
                        <sourcexml>p-limited/ci:cite</sourcexml> becomes
                        <targetxml>p/text/lnci:cite</targetxml>. </p>
            </section>
            <example>
                <title>Source XML</title>
                <codeblock> &lt;entry&gt; &lt;p-limited&gt;Diagram drawn at August 16, 2001 hearing
                    by Mr. Yakimishyn. Location plan NW 4
                    &lt;ci:cite&gt;&lt;ci:case&gt;&lt;ci:caseref ID="cref00000588"
                    spanref="cspan00000588"&gt;&lt;ci:reporter country="US" value="N.E."
                    normpubcode="627"/&gt;&lt;ci:volume num="8"/&gt;&lt;ci:page
                    num="5"/&gt;&lt;/ci:caseref&gt;&lt;/ci:case&gt;&lt;ci:content&gt;&lt;ci:span
                    spanid="cspan00000588"&gt;8 NE
                    5&lt;/ci:span&gt;&lt;/ci:content&gt;&lt;/ci:cite&gt;-56-17-4. Submitted by Mr.
                    Yakimishyn.&lt;/p-limited&gt; &lt;/entry&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;entry&gt; &lt;p&gt;&lt;text&gt;Diagram drawn at August 16, 2001
                    hearing by Mr. Yakimishyn. Location plan NW 4
                    &lt;lnci:cite&gt;&lt;lnci:case&gt;&lt;lnci:caseref
                    ID="cref00000588"&gt;&lt;lnci:reporter country="US" value="N.E."
                    normpubcode="627"/&gt;&lt;lnci:volume num="8"/&gt;&lt;lnci:page
                    num="5"/&gt;&lt;/lnci:caseref&gt;&lt;/lnci:case&gt;&lt;lnci:content&gt;8 NE
                    5&lt;/lnci:content&gt;&lt;/lnci:cite&gt;-56-17-4. Submitted by Mr.
                    Yakimishyn.&lt;/text&gt;&lt;/p&gt; &lt;/entry&gt; </codeblock>
            </example>
            <section>
                <title>Changes</title>
            </section>
        </body>
    </dita:topic>


    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_p-limited_ci.cite-LxAdv-p_text_lnci.cite.dita  -->


    <!-- BRT: this template is in one condition of match="p-limited" in base.xsl
             -->
    <xsl:template match="p-limited[child::ci:cite]">
        <xsl:element name="p">
            <xsl:element name="text">
                <xsl:apply-templates/>
            </xsl:element>
        </xsl:element>

    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_pgrp-to-LexisAdvance_pgrp">
        <title><sourcexml>pgrp</sourcexml> to <targetxml>pgrp</targetxml>
            <lnpid>id-CCCC-10431</lnpid></title>
        <body>
            <section>
                <title>Instructions <i>[common element]</i></title>
                <p><sourcexml>pgrp</sourcexml> becomes <targetxml>pgrp</targetxml>.</p>
                <p>If <sourcexml>pgrp</sourcexml> comes with following attributes: <ul>
                        <li><sourcexml>@id</sourcexml> becomes <targetxml>@xml:id</targetxml></li>
                        <li><sourcexml>@subdoc</sourcexml> becomes
                                <targetxml>@includeintoc</targetxml></li>
                        <li><sourcexml>@toc-caption</sourcexml> becomes
                                <targetxml>@alternatetoccaption</targetxml></li>
                    </ul>
                </p>
            </section>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;pgrp&gt; &lt;heading&gt; &lt;title&gt;Background&lt;/title&gt;
                    &lt;/heading&gt; &lt;p&gt; &lt;pnum count="1"&gt;[1]&lt;/pnum&gt; &lt;text&gt;
                    The present applicants are five individuals who at one time or another were
                    engaged by Combined Insurance Company of America (Combined) as insurance agents.
                    In recent times, the five have sued Combined in the Chief Industrial
                    Magistrates&amp;#x2019; Court of New South Wales claiming entitlements both to
                    annual leave and long service leave. One of the principal issues to be resolved
                    in those proceedings is the question of whether the agents were employees of
                    Combined, as they contend, or rather independent contractors, as Combined
                    contends. No doubt the resolution of that issue will involve a close
                    consideration of a broad range of indicia. One of the matters to which Combined
                    points is a term in its contract with each agent by which each agreed, or
                    appears to have agreed, that his relationship with Combined was not one of
                    employment. &lt;/text&gt; &lt;/p&gt; &lt;p&gt; &lt;pnum
                    count="2"&gt;[2]&lt;/pnum&gt; &lt;text&gt; That question is, therefore, now
                    pending before the Chief Industrial Magistrates Court. Notwithstanding that
                    circumstance, Combined has commenced the present proceeding in this court
                    seeking three heads of relief: &lt;/text&gt; &lt;/p&gt; &lt;/pgrp&gt;
                </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;pgrp&gt; &lt;heading&gt; &lt;title&gt;Background&lt;/title&gt;
                    &lt;/heading&gt; &lt;p&gt; &lt;desig value="1"
                    inline="true"&gt;[1]&lt;/desig&gt; &lt;text&gt; The present applicants are five
                    individuals who at one time or another were engaged by Combined Insurance
                    Company of America (Combined) as insurance agents. In recent times, the five
                    have sued Combined in the Chief Industrial Magistrates&amp;#x2019; Court of New
                    South Wales claiming entitlements both to annual leave and long service leave.
                    One of the principal issues to be resolved in those proceedings is the question
                    of whether the agents were employees of Combined, as they contend, or rather
                    independent contractors, as Combined contends. No doubt the resolution of that
                    issue will involve a close consideration of a broad range of indicia. One of the
                    matters to which Combined points is a term in its contract with each agent by
                    which each agreed, or appears to have agreed, that his relationship with
                    Combined was not one of employment. &lt;/text&gt; &lt;/p&gt; &lt;p&gt; &lt;desig
                    value="2" inline="true"&gt;[2]&lt;/desig&gt; &lt;text&gt; That question is,
                    therefore, now pending before the Chief Industrial Magistrates Court.
                    Notwithstanding that circumstance, Combined has commenced the present proceeding
                    in this court seeking three heads of relief: &lt;/text&gt; &lt;/p&gt;
                    &lt;/pgrp&gt; </codeblock>
            </example>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;pgrp id="BCA.C5.CHECK"&gt; &lt;heading&gt; &lt;title&gt;Check List
                    for Lease prior to Lodgment (LPI August 2007)&lt;/title&gt; &lt;/heading&gt;
                    &lt;!-- ETC. --&gt; &lt;/pgrp&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;pgrp xml:id="BCA.C5.CHECK"&gt; &lt;heading&gt; &lt;title&gt;Check
                    List for Lease prior to Lodgment (LPI August 2007)&lt;/title&gt;
                    &lt;/heading&gt; &lt;!-- ETC. --&gt; &lt;/pgrp&gt; </codeblock>
            </example>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;pgrp subdoc="true" toc-caption="Contributors"&gt;
                    &lt;heading&gt;&lt;title&gt;Authors&lt;/title&gt;&lt;/heading&gt; &lt;!-- ETC.
                    --&gt; &lt;/pgrp&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;pgrp includeintoc="true" alternatetoccaption="Contributors"&gt;
                    &lt;heading&gt;&lt;title&gt;Authors&lt;/title&gt;&lt;/heading&gt; &lt;!-- ETC.
                    --&gt; &lt;/pgrp&gt; </codeblock>
            </example>

            <section>
                <title>Changes</title>
                <p>2015-03-17: <ph id="change_20150317_AK">An attribute
                            <targetxml>@inline</targetxml> get added with
                            <targetxml>desig</targetxml> element even when the
                            source<sourcexml>pnum</sourcexml> is not having that
                            attribute<sourcexml>@inline</sourcexml> Applicable on CA12
                    only.</ph></p>
                <p>2015-02-24: <ph id="change_20150224_AK">Example updated as per new rule an
                        attribute <targetxml>@inline</targetxml>get added with
                            <targetxml>desig</targetxml>element when the
                            source<sourcexml>pnum</sourcexml>is not having that
                            attribute<sourcexml>@inline</sourcexml>
                    </ph></p>
                <p>2011-12-15: Created.</p>
                <p>2013-03-14: <ph id="change_20130314_ab">Add instruction and example
                            <sourcexml>pgrp/@id</sourcexml>.</ph></p>
                <p>2014-02-11: <ph id="change_20140211_ab">Add instruction and example
                            <sourcexml>pgrp/@subdoc</sourcexml> and
                            <sourcexml>pgrp/@toc-caption</sourcexml>. Support Discussion Board: NZ09
                        Commentary, Form and Precedents</ph></p>
            </section>
            <!-- <xsltinclusion>
            <xsl:stylesheet version="2.0">
                <!-\- BRT: this template is in the otherwise condition in base.xsl, but added the attributes to that template. 
                    This rule is similar to a rule in another topic in which pggrp is converted to pggrp.
             -\->
                <xsl:template match="pgrp">
                    <xsl:element name="pgrp">
                        <xsl:if test="@id">
                            <xsl:attribute name="xml:id">
                                <xsl:value-of select="@id"/>
                            </xsl:attribute>
                        </xsl:if>
                        <xsl:if test="@subdoc">
                            <xsl:attribute name="includeintoc">
                                <xsl:value-of select="@subdoc"/>
                            </xsl:attribute>
                        </xsl:if>
                        <xsl:if test="@toc-caption">
                            <xsl:attribute name="alternatetoccaption">
                                <xsl:value-of select="@toc-caption"/>
                            </xsl:attribute>
                        </xsl:if>
                        <xsl:apply-templates/>
                    </xsl:element>
                </xsl:template>
            </xsl:stylesheet>
        </xsltinclusion>-->
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated (although the DITA file already has embedded XSLT).  Remove this comment after manual development complete!  (also remove the embedded XSLT within the DITA above) @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_pgrp-LxAdv-pgrp.dita  -->
    <!--<xsl:message>Rosetta_pgrp-LxAdv-pgrp.xsl requires manual development!</xsl:message> -->

    <!-- BRT: this template is in the otherwise condition in base.xsl, but added the attributes to that template. 
                    This rule is similar to a rule in another topic in which pggrp is converted to pggrp.
             -->
    <xsl:template match="pgrp">
        <xsl:element name="pgrp" xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <xsl:if test="@id">
                <xsl:apply-templates select="@id"/>
            </xsl:if>
            <xsl:if test="@subdoc">
                <xsl:attribute name="includeintoc">
                    <xsl:value-of select="@subdoc"/>
                </xsl:attribute>
            </xsl:if>
            <xsl:if test="@toc-caption">
                <xsl:attribute name="alternatetoccaption">
                    <xsl:value-of select="@toc-caption"/>
                </xsl:attribute>
            </xsl:if>
            <xsl:apply-templates/>
        </xsl:element>
    </xsl:template>



    <!-- Vikas Rohilla : Template to match the pgrp and the parrent case:constituents and the streamID UK03   -->
    <xsl:template match="pgrp[parent::case:constituents][$streamID = ('UK03', 'UK04')]">
        <courtcase:arguments>
            <bodytext>
                <pgrp>
                    <xsl:apply-templates/>
                </pgrp>
            </bodytext>
        </courtcase:arguments>
    </xsl:template>
    <!-- Satbir : Template for creating textitem as a wrapper of ref:link-->
    <xsl:template match="pgrp[child::link][$streamID = 'AU18']">
        <pgrp>
            <xsl:for-each select="node()">
                <xsl:choose>
                    <xsl:when test="self::link">
                        <textitem>
                            <xsl:apply-templates select="self::link"/>
                        </textitem>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:apply-templates select="."/>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:for-each>
        </pgrp>
    </xsl:template>

    <!-- Awantika: update to create wrapper around pgrp -->
    <!--Awantika: Removed this and added it to case:appendix -->
    <!-- <xsl:template xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" match="pgrp[parent::case:appendix and $streamID='HK03']">
        <xsl:variable name="name" select="local-name()"/>
        
        
        <xsl:if test="local-name(preceding-sibling::*[position()=1]) != $name">
            <bodytext>
            <pgrp>
                <xsl:apply-templates />
                
                <!-\- Match the next sibling if it has the same name -\->
                <xsl:apply-templates select="following-sibling::*[1][local-name()=$name]" mode="nextpg"/>
            </pgrp>
            </bodytext>
        </xsl:if>
    </xsl:template>
    
    
    <xsl:template match="pgrp" mode="nextpg">
        <xsl:variable name="name" select="local-name()"/>
        <pgrp xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/"><xsl:apply-templates /></pgrp>
        <xsl:apply-templates select="following-sibling::*[1][local-name()=$name]" mode="nextpg"/>
    </xsl:template>-->



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_pnum-to-LexisAdvance_desig_ref.para">
        <title><sourcexml>pnum</sourcexml> to <targetxml>desig/ref:para</targetxml>
            <lnpid>id-CCCC-10504</lnpid></title>
        <body>
            <section>
                <title>Instructions <i>[common element]</i></title>
                <p><sourcexml>pnum</sourcexml> becomes <targetxml>desig/ref:para</targetxml>.</p>
                <p>Attribute <sourcexml>pnum/@count</sourcexml> becomes
                        <targetxml>desig/@value</targetxml> and
                        <targetxml>desig/ref:para/@num</targetxml> and
                        <sourcexml>@inline</sourcexml> becomes <targetxml>@inline</targetxml>. </p>
                <p>Value of <targetxml>ref:para/@para-scheme</targetxml> is
                        <sourcexml>ci:reporter</sourcexml> value from (<b><i>first</i></b>)
                        <sourcexml>ci:cite/[@type=?cite4thisdoc?]/ci:case/ci:caseref/ci:reporter</sourcexml>.</p>
                <p><targetxml>ref:para/@para-scheme-type="reporter-abbrev"</targetxml> is hardcoded
                    value.</p>
            </section>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;p&gt; &lt;pnum count="1"&gt;[1]&lt;/pnum&gt;
                    &lt;text&gt;...&lt;/text&gt; &lt;/p&gt; <b>and</b> &lt;ci:cite
                    type="cite4thisdoc"&gt; &lt;ci:case&gt; &lt;ci:caseref&gt; &lt;ci:reporter
                    value="urj" /&gt; &lt;ci:refnum num="BC200000011" /&gt; &lt;/ci:caseref&gt;
                    &lt;/ci:case&gt; &lt;ci:content&gt; &lt;citefragment
                    searchtype="CASE-CITE-REF"&gt;BC200000011&lt;/citefragment&gt; &lt;refpt
                    id="BC200000011" type="ext"&gt;&lt;/refpt&gt; &lt;/ci:content&gt;
                    &lt;/ci:cite&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;p&gt; &lt;desig value="1"&gt;&lt;ref:para num="1" para-scheme="urj"
                    para-scheme-type="reporter-abbrev"&gt;[1]&lt;/ref:para&gt;&lt;/desig&gt;
                    &lt;text&gt;...&lt;/text&gt; &lt;/p&gt; </codeblock>
            </example>

            <section>
                <title>Changes</title>
                <p>2017-05-15: <ph id="change_20170515_RS">The same rule is applicable on
                    CA10.</ph></p>
                <p>2014-09-12: <ph id="change_20140912_PS">Created, Applicable on AU01, AU13, NZ03,
                        CA01 and CA04.</ph></p>
            </section>
            <!--  <xsltinclusion>
        <xsl:stylesheet version="2.0">
            <!-\- BRT: This rule is stream-specific and doesn't below in common -\-></xsl:stylesheet>
    </xsltinclusion>-->
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated (although the DITA file already has embedded XSLT).  Remove this comment after manual development complete!  (also remove the embedded XSLT within the DITA above) @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_pnum-to-LexisAdvance_desig_ref.para.dita  -->
    <!--<xsl:message>Rosetta_pnum-to-LexisAdvance_desig_ref.para.xsl requires manual development!</xsl:message> -->

    <!-- BRT: This rule is stream-specific and doesn't below in common -->
    <!-- Awantika: Created this template, one can add streamID if same xpath is required -->
    <xsl:template match="pnum">
        <xsl:if test="$streamID = ('HK03', 'AU01', 'NZ03', 'CA04', 'CA01', 'CA10')">
            <desig>
                <xsl:attribute name="value">
                    <xsl:value-of select="@count"/>
                </xsl:attribute>
                <ref:para>
                    <xsl:attribute name="num">
                        <xsl:value-of select="@count"/>
                    </xsl:attribute>
                    <xsl:if
                        test="//ci:cite[position() = 1]/ci:case/ci:caseref/ci:reporter/@value[1]">
                        <xsl:attribute name="para-scheme">
                            <!--<xsl:value-of select="(//ci:cite[position()=1]/ci:case/ci:caseref/ci:reporter/@value)[1]"/>-->
                            <!-- Awantika:2017-10-30- translated to remove the space and create underscore to get the valid attribute value-->
                            <xsl:value-of
                                select="translate((//ci:cite[position() = 1]/ci:case/ci:caseref/ci:reporter/@value)[1], ' ', '_')"
                            />
                        </xsl:attribute>
                    </xsl:if>
                    <xsl:attribute name="para-scheme-type">reporter-abbrev</xsl:attribute>
                    <xsl:apply-templates/>
                </ref:para>
                <!-- Awantika: Duplicate ref:para if case:courtcite/ci:cite/@type="cite4thisdoc" in AU01 and NZ03-->
                <xsl:if
                    test="$streamID = ('AU01', 'NZ03') and //case:courtcite[ci:cite[@type = 'cite4thisdoc']]">
                    <ref:para>
                        <xsl:attribute name="num">
                            <xsl:value-of select="@count"/>
                        </xsl:attribute>
                        <!--Satbir: Added choose condition for ci:nz because NZ03 contet is not having ci:au markup in source-->
                        <xsl:choose>
                            <xsl:when test="not((//ci:nz/@courtcode)[1])"/>
                            <xsl:otherwise>
                                <xsl:attribute name="para-scheme">
                                    <xsl:value-of select="(//ci:nz/@courtcode)[1]"/>
                                </xsl:attribute>
                            </xsl:otherwise>
                        </xsl:choose>
                        <xsl:attribute name="para-scheme-type">
                            <xsl:text>court-code</xsl:text>
                        </xsl:attribute>
                    </ref:para>
                </xsl:if>
            </desig>
        </xsl:if>
    </xsl:template>


    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_remotelink-to-LexisAdvance_ref.crossreference">
        <title><sourcexml>remotelink</sourcexml> to <targetxml>ref:crossreference</targetxml>
            <lnpid>id-CCCC-10465</lnpid></title>
        <body>
            <section>
                <title>Instructions <i>[common element]</i></title>
                <note>This topic is used in numerous conversion instructions for several LBUs. It is
                    a shared topic rather than duplicated to ensure consistency and accuracy. The
                    xml snippets contained in this topic reflect markup needed for the Apollo image
                    handling application. The UK is the first LBU to move from Apollo to the
                    Blobstore application for image handling. Therefore, if this is a UK conversion
                    instruction document, please refer to the following topics for correct image
                    handling markup.<ul>
                        <li><sourcexml>lnlink[@service="ATTACHMENT"]</sourcexml> to
                                <targetxml>ref:lnlink[@service="ATTACHMENT"]</targetxml> for
                            BLOBSTORE images (id-CCCC-10542)</li>
                        <li><sourcexml>inlineobject</sourcexml> to
                                <targetxml>ref:inlineobject</targetxml> for BLOBSTORE images
                            (id-CCCC-10540)</li>
                        <li><sourcexml>link[@filename]</sourcexml> to
                                <targetxml>ref:lnlink[@service="ATTACHMENT"]</targetxml> for
                            BLOBSTORE images (id-CCCC-10541)</li>
                    </ul></note>
                <p>Regardless of which of the use cases described below occurs, the attribute
                        <sourcexml>remotelink/@status</sourcexml> is always suppressed, it is never
                    output to the target document.</p>
                <ul>
                    <li>Use case: <sourcexml>remotelink[@service='SEARCH']</sourcexml>. The service
                        type "SEARCH" is not supported in New Lexis. Unless
                            <sourcexml>remotelink[@hrefclass='http']</sourcexml> it is recommended
                        that such remotelink elements be copied into an xml comment. This retains
                        the content for future analysis without creating unsupported target markup.
                        The risk of this approach is the loss of ref:marker text content from
                        display to the user. If there is a
                            <sourcexml>remotelink/@hrefclass]</sourcexml> attribute equal to "http"
                        then the remotelink is <b>not</b> copied into a comment but is instead
                        converted to either a <targetxml>url</targetxml> or
                            <targetxml>ref:lnlink</targetxml>, see below for details. </li>
                    <li>Use case: <sourcexml>remotelink[@service='QUERY']</sourcexml>: <ul>
                            <li>In General, convert the pcdata, but suppress the
                                    <sourcexml>remotelink</sourcexml> tag and its attributes.</li>
                            <li>
                                <p>For the following exceptional contexts, do not convert the pcdata
                                    of <sourcexml>remotelink[@service="QUERY"]</sourcexml>. Instead,
                                    suppress both the pcdata and <sourcexml>remotelink</sourcexml>
                                    markup: <ul>
                                        <li>
                                            <p> docinfo:assoc-links/remotelink[@service="QUERY"] </p>
                                            <note>For CA05-CA07 please follow <xref
                                                  href="../common_newest/Rosetta_docinfo.assoc-links-LxAdv-doc.related-content.dita"
                                                  ><sourcexml>docinfo:assoc-links/remotelink[@service="QUERY"]</sourcexml></xref></note>
                                        </li>
                                        <li>
                                            <p> docinfo:assoc-links-grp/remotelink[@service="QUERY"]
                                            </p>
                                        </li>
                                        <li>
                                            <p> NZ-Cases
                                                only:   glp:note/remotelink[@service="QUERY"]</p>
                                        </li>
                                    </ul></p>
                            </li>
                        </ul><p>A corresponding product requirement shall be created with an
                            instruction to build the link on retrieval based on semantic markup in
                            the document. </p></li>
                    <li>Use case: <sourcexml>remotelink[@service='DOC-ID']</sourcexml> becomes
                            <targetxml>ref:crossreference</targetxml> with required child
                            <targetxml>ref:content</targetxml> and attribute
                            <sourcexml>remotelink/@xml:lang</sourcexml> becomes
                            <targetxml>ref:content/@xml:lang</targetxml>. For multiple, immediate,
                        sibling occurrences without intermediary text, group within a
                            <targetxml>ref:crossreferencegroup</targetxml> parent except for
                            <targetxml>lnci:content</targetxml> and <targetxml>title</targetxml>.<ul>
                            <li>The value of
                                    <targetxml>ref:crossreference/@crossreferencetype</targetxml>
                                should be set to "seeAlso".</li>
                            <li>
                                <p> Create
                                        <targetxml>ref:crossreference/ref:locator/ref:locator-key</targetxml>
                                    with attributes and children as follows: <ul>
                                        <li>If <sourcexml>@remotekey1="DOC-ID"</sourcexml> or
                                                <sourcexml>@remotekey1="DOCID"</sourcexml> then <ul>
                                                <li><targetxml>ref:key-name/@name</targetxml> will
                                                  have the value "DOC-ID".</li>
                                                <li><targetxml>key-value/@value</targetxml> will be
                                                  the value of <sourcexml>@dpsi</sourcexml> followed
                                                  by hyphen and concatenated with
                                                  <sourcexml>@refpt</sourcexml> or
                                                  <sourcexml>@remotekey2</sourcexml>, which ever is
                                                  present (if both are present, use
                                                  <sourcexml>@remotekey2</sourcexml>).</li>
                                            </ul></li>
                                        <li>If <sourcexml>@remotekey1="REFPTID"</sourcexml> or
                                                <sourcexml>@remotekey1="REFPT"</sourcexml> then <ul>
                                                <li><targetxml>ref:key-name/@name</targetxml> will
                                                  have the value "DOC-ID".</li>
                                                <li><targetxml>ref:key-value/@value</targetxml> will
                                                  be the value of <sourcexml>@dpsi</sourcexml>
                                                  followed by hyphen and concatenated with
                                                  <sourcexml>@docidref</sourcexml>.</li>
                                                <li>Create
                                                  <targetxml>ref:locator/@anchoridref</targetxml>
                                                  with value from <sourcexml>@refpt</sourcexml> or
                                                  <sourcexml>@remotekey2</sourcexml>, which ever is
                                                  present (if both are present, use
                                                  <sourcexml>@refpt</sourcexml>). If
                                                  <sourcexml>@refpt</sourcexml> is empty or only
                                                  whitespace, do not output a
                                                  <targetxml>@anchoridref</targetxml>.</li>
                                            </ul></li>
                                    </ul>
                                </p>
                                <note>If <sourcexml>remotelink/@dpsi</sourcexml> is not present, use
                                    value from <sourcexml>docinfo:dpsi/@id-string</sourcexml> or
                                    capture value from the LBU manifest file.</note>
                                <note><targetxml>ref:locator/@anchoridref</targetxml> that begins
                                    with a number must have an underscore added at start. Also apply
                                    other identifier data type format as used for
                                        <targetxml>xml:id</targetxml> and
                                        <targetxml>ref:anchor/@id</targetxml> (e.g. change colon to
                                    underscore). Refer to the section titled "Identifiers to ID Data
                                    Type - Handling Pattern Restrictions", if that section exists in
                                    this CI.</note>
                            </li>
                        </ul>
                    </li>
                    <li>Use case: <sourcexml>remotelink[@service='URL']</sourcexml> or
                            <sourcexml>remotelink[@hrefclass='http'][@href]</sourcexml> or
                            <sourcexml>remotelink[@href]</sourcexml>
                        <!-- SP: added 2013-10-03 -->
                        <b>and</b> the data content of the remotelink is a URL. That is, the data
                        content of <sourcexml>remotelink</sourcexml> starts with text such as
                        "http://...", "https://...", "www.some.domain", or is of type (http | https
                        | nohttp | mailto | ftp). In this case, <sourcexml>remotelink</sourcexml>
                        becomes <targetxml>url</targetxml>, and populated as follows:<ul>
                            <li>
                                <p>If the <sourcexml>remotelink/@hrefclass</sourcexml> attribute is
                                    present in the source document, the
                                        <sourcexml>remotelink[@hrefclass="http"]</sourcexml> becomes
                                        <targetxml>url</targetxml> and <sourcexml>@href</sourcexml>
                                    becomes <targetxml>@normval</targetxml>. The value of the
                                    attribute <sourcexml>@hrefclass</sourcexml> is prepended to the
                                    value of <sourcexml>@href</sourcexml> with the addition of '://'
                                    to form the <targetxml>@normval</targetxml>.</p><ul>
                                    <li>Exception: If content of <sourcexml>@hrefclass</sourcexml>
                                        is already present in <sourcexml>@href</sourcexml> then do
                                        not concatenate. Populate <targetxml>@normval</targetxml>
                                        with content of <sourcexml>@href</sourcexml>.</li>
                                </ul>
                            </li>
                            <li>
                                <p>When <sourcexml>remotelink/@hrefclass</sourcexml> does not exist
                                    in <sourcexml>remotelink</sourcexml> then nothing will be
                                    prepended to the <sourcexml>@href</sourcexml> value. That is,
                                        <sourcexml>remotelink</sourcexml> with
                                        <sourcexml>@href</sourcexml> attribute but no
                                        <sourcexml>@hrefclass</sourcexml> attribute converts to
                                        <targetxml>url</targetxml> where the
                                        <targetxml>@normval</targetxml> attribute is set to
                                        <sourcexml>remotelink/@href</sourcexml>. </p>
                            </li>
                        </ul>
                    </li>
                    <li>Use case: <sourcexml>remotelink[@service='URL']</sourcexml> or
                            <sourcexml>remotelink[@hrefclass='http'][@href]</sourcexml>
                        <b>but</b> the data content of the remotelink is <b>not</b> a URL. That is,
                        the data content of <sourcexml>remotelink</sourcexml>
                        <b>does not</b> start with text such as "http://...", "https://...",
                        "www.some.domain", nor is it of type (http | https | nohttp | mailto | ftp).
                        In this case, <sourcexml>remotelink</sourcexml> becomes
                            <targetxml>ref:lnlink</targetxml> with children
                            <targetxml>ref:marker</targetxml> and
                        <targetxml>ref:locator</targetxml>, populated as follows: <ol>
                            <li>The <targetxml>ref:lnlink/@service</targetxml> attribute is set to
                                "URL".</li>
                            <li>The contents of <sourcexml>remotelink</sourcexml> becomes the
                                contents of child <targetxml>ref:lnlink/ref:marker</targetxml>. Any
                                subelements (such as <sourcexml>emph</sourcexml> and
                                    <sourcexml>inlineobject</sourcexml>) are converted as described
                                elsewhere by instructions given for those specific elements. </li>
                            <li>The child <targetxml>ref:lnlink/ref:locator</targetxml> is created,
                                and within it the child
                                    <targetxml>ref:lnlink/ref:locator/ref:locator-key</targetxml> is
                                created, and within it the children
                                    <targetxml>ref:lnlink/ref:locator/ref:locator-key/ref:key-name</targetxml>
                                and
                                    <targetxml>ref:lnlink/ref:locator/ref:locator-key/ref:key-value</targetxml>
                                are created.</li>
                            <li>The <targetxml>ref:key-name/@name</targetxml> attribute is set to
                                "URL".</li>
                            <li>If the <sourcexml>remotelink/@hrefclass</sourcexml> attribute is
                                present, <targetxml>ref:key-value/@value</targetxml> is set to the
                                combined value of <sourcexml>remotelink/@hrefclass</sourcexml>,
                                followed by "://", followed by the value of
                                    <sourcexml>remotelink/@href</sourcexml>.<ul>
                                    <li>Exception: If content of <sourcexml>@hrefclass</sourcexml>
                                        is already present in <sourcexml>@href</sourcexml> then do
                                        not concatenate. Populate <targetxml>@value</targetxml> with
                                        content of <sourcexml>@href</sourcexml>.</li>
                                </ul></li>
                            <li>If the <sourcexml>remotelink/@hrefclass</sourcexml> attribute is
                                    <b>not</b> present, <targetxml>ref:key-value/@value</targetxml>
                                is set to the value of <sourcexml>remotelink/@href</sourcexml>.</li>
                        </ol>
                    </li>
                    <li>Use case: <sourcexml>remotelink[@href]</sourcexml>
                    </li>
                    <li>If <sourcexml>remotelink</sourcexml> doesn't have any attributes, then
                            <sourcexml>remotelink</sourcexml> should be suppressed, but any elements
                        contained within <sourcexml>remotelink</sourcexml> should be processed
                        according to the appropriate instructions.</li>
                </ul>
                <note>
                    <p>In the source documents, <sourcexml>remotelink</sourcexml> is used for two
                        distinct purposes:</p>
                    <ul>
                        <li>To create an inter-document link; a link to a location outside the
                            containing document.</li>
                        <li>To create link for a traditional URL.</li>
                    </ul>
                </note>
                <p>If <sourcexml>refpt</sourcexml> and <sourcexml>remotelink</sourcexml> occurs as
                    adjacent siblings then refer to the instructions for converting
                        <sourcexml>endnote</sourcexml>.</p>

                <note>
                    <b>Exception for NZ17CC:</b> When <sourcexml>remotelink</sourcexml> is a child
                    of <sourcexml>emph</sourcexml> then conversion should suppress
                        <sourcexml>emph</sourcexml> element only and process
                        <sourcexml>remotelink</sourcexml> as per above instruction. See example
                    17.</note>
            </section>
            <example>
                <title>Source XML 1: showing service type "DOC-ID" converted to
                    ref:crossreference.</title>
                <codeblock> &lt;remotelink service="DOC-ID" remotekey1="DOC-ID" dpsi="0062"
                    refpt="QLD_ACT_1992-48_20050831"&gt;31/8/2005 to 18/11/2005&lt;/remotelink&gt;
                </codeblock>
            </example>
            <example>
                <title>Target XML 1</title>
                <codeblock> &lt;ref:crossreference crossreferencetype="seeAlso"&gt;
                    &lt;ref:content&gt;31/8/2005 to 18/11/2005&lt;/ref:content&gt;
                    &lt;ref:locator&gt; &lt;ref:locator-key&gt; &lt;ref:key-name name="DOC-ID"/&gt;
                    &lt;ref:key-value value="0062-QLD_ACT_1992-48_20050831"/&gt;
                    &lt;/ref:locator-key&gt; &lt;/ref:locator&gt; &lt;/ref:crossreference&gt;
                </codeblock>
            </example>
            <example>
                <title>Source XML 2: showing <sourcexml>remotelink/@xml:lang</sourcexml>.</title>
                <codeblock> &lt;remotelink dpsi="03JC" remotekey1="DOC-ID" remotekey2="currentness"
                    service="DOC-ID"
                    xml:lang="en"&gt;Current&amp;#x20;to&amp;#x20;June&amp;#x20;23,&amp;#x20;2012&lt;/remotelink&gt;
                </codeblock>
            </example>
            <example>
                <title>Target XML 2</title>
                <codeblock> &lt;ref:crossreference&gt; &lt;ref:content
                    xml:lang="en"&gt;Current&amp;#x20;to&amp;#x20;June&amp;#x20;23,&amp;#x20;2012&lt;/ref:content&gt;
                    &lt;ref:locator&gt; &lt;ref:locator-key&gt; &lt;ref:key-name name="DOC-ID"/&gt;
                    &lt;ref:key-value value="03JC-currentness"/&gt; &lt;/ref:locator-key&gt;
                    &lt;/ref:locator&gt; &lt;/ref:crossreference&gt; </codeblock>
            </example>
            <example>
                <title>Source XML 3: showing service type "DOC-ID" converted to ref:crossreference
                    (multiple, immediate siblings).</title>
                <codeblock> &lt;remotelink service="DOC-ID" remotekey1="REFPTID" dpsi="0062"
                    docidref="ABCD_5641" refpt="QLD_ACT_1992-48_20050831"&gt;31/8/2005 to
                    18/11/2005&lt;/remotelink&gt; &lt;remotelink service="DOC-ID"
                    remotekey1="DOC-ID" dpsi="0000" refpt="QLD_ACT_1992-48_00000000"&gt;31/8/2005 to
                    18/11/2005&lt;/remotelink&gt; &lt;remotelink service="DOC-ID"
                    remotekey1="REFPTID" dpsi="1111" docidref="EFGH_2468"
                    refpt="QLD_ACT_1992-48_11111111"&gt;31/8/2005 to 18/11/2005&lt;/remotelink&gt;
                </codeblock>
            </example>
            <example>
                <title>Target XML 3</title>
                <codeblock> &lt;ref:crossreferencegroup&gt; &lt;ref:crossreference
                    crossreferencetype="seeAlso"&gt; &lt;ref:content&gt;31/8/2005 to
                    18/11/2005&lt;/ref:content&gt; &lt;ref:locator
                    anchoridref="QLD_ACT_1992-48_20050831"&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="DOC-ID"/&gt; &lt;ref:key-value
                    value="0062-ABCD_5641"/&gt; &lt;/ref:locator-key&gt; &lt;/ref:locator&gt;
                    &lt;/ref:crossreference&gt; &lt;ref:crossreference
                    crossreferencetype="seeAlso"&gt; &lt;ref:content&gt;31/8/2005 to
                    18/11/2005&lt;/ref:content&gt; &lt;ref:locator&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="DOC-ID"/&gt; &lt;ref:key-value
                    value="0000-QLD_ACT_1992-48_00000000"/&gt; &lt;/ref:locator-key&gt;
                    &lt;/ref:locator&gt; &lt;/ref:crossreference&gt; &lt;ref:crossreference
                    crossreferencetype="seeAlso"&gt; &lt;ref:content&gt;31/8/2005 to
                    18/11/2005&lt;/ref:content&gt; &lt;ref:locator
                    anchoridref="QLD_ACT_1992-48_11111111"&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="DOC-ID"/&gt; &lt;ref:key-value
                    value="1111-EFGH_2468"/&gt; &lt;/ref:locator-key&gt; &lt;/ref:locator&gt;
                    &lt;/ref:crossreference&gt; &lt;/ref:crossreferencegroup&gt; </codeblock>
            </example>
            <example>
                <title>Source XML 4: showing remotelink/sup</title>
                <codeblock> &lt;remotelink remotekey1="REFPTID" service="DOC-ID" dpsi="0062"
                    docidref="ABCD_5641" refpt="VIC_ACT_6231_FN31"&gt; &lt;sup&gt;31&lt;/sup&gt;
                    &lt;/remotelink&gt; </codeblock>
            </example>
            <example>
                <title>Target XML 4</title>
                <codeblock> &lt;ref:crossreferencegroup&gt; &lt;ref:crossreference
                    crossreferencetype="seeAlso"&gt;
                    &lt;ref:content&gt;&lt;sup&gt;31&lt;/sup&gt;&lt;/ref:content&gt; &lt;ref:locator
                    anchoridref="VIC_ACT_6231_FN31"&gt; &lt;ref:locator-key&gt; &lt;ref:key-name
                    name="DOC-ID"/&gt; &lt;ref:key-value value="0062-ABCD_5641"/&gt;
                    &lt;/ref:locator-key&gt; &lt;/ref:locator&gt; &lt;/ref:crossreference&gt;
                    &lt;/ref:crossreferencegroup&gt; </codeblock>
            </example>
            <example>
                <title>Source XML 5: for link to URL, with URL as content</title>
                <codeblock> &lt;remotelink href="www.statedevelopment.qld.gov.au" hrefclass="http"
                    newwindow="YES"&gt;www.statedevelopment.qld.gov.au&lt;/remotelink&gt; &lt;!--
                    The following illustrates scenario where content of @hrefclass is already
                    present in @href and so values are not concatenated for target --&gt;
                    &lt;remotelink href="http://www.acmecorp.com" hrefclass="http"
                    newwindow="YES"&gt;www.acmecorp.com&lt;/remotelink&gt; </codeblock>
            </example>
            <example>
                <title>Target XML 5: for link to URL, with URL as content</title>
                <codeblock> &lt;url
                    normval="http://www.statedevelopment.qld.gov.au"&gt;www.statedevelopment.qld.gov.au&lt;/url&gt;
                    &lt;url normval="http://www.acmecorp.com"&gt;www.acmecorp.com&lt;/url&gt;
                </codeblock>
            </example>
            <note>As shown here in Example 6, the use of an @href attribute without @hrefclass,
                where the @href attribute does not itself contain an hrefclass, ("http://" for
                example), is not advised because the resulting @normval would not contain the
                hrefclass. Normalized values should be consistent in providing the href class. The
                link to the target may not work.</note>
            <example>
                <title>Source XML 6: for link to URL with no hrefclass attribute, and with URL as
                    content</title>
                <codeblock> &lt;remotelink href="www.asx.com" newwindow="YES"
                    service="SEARCH"&gt;www.asx.com&lt;/remotelink&gt; </codeblock>
            </example>
            <example>
                <title>Target XML 6: for link to URL with no hrefclass attribute, and with URL as
                    content</title>
                <codeblock> &lt;url normval="www.asx.com"&gt;www.asx.com&lt;/url&gt; </codeblock>
            </example>
            <example>
                <title>Source XML 7: for link to URL, with non-URL text content</title>
                <codeblock> &lt;remotelink href="www.asx.com" hrefclass="http" newwindow="YES"
                    service="SEARCH" status="valid"&gt;Australian Securities Exchange
                    (ASX)&lt;/remotelink&gt; &lt;!-- The following illustrates scenario where
                    content of @hrefclass is already present in @href and so values are not
                    concatenated for target --&gt; &lt;remotelink href="http://www.acmecorp.com"
                    hrefclass="http" newwindow="YES"&gt;Acme Corporation&lt;/remotelink&gt;
                </codeblock>
            </example>
            <example>
                <title>Target XML 7: for link to URL, with non-URL text content</title>
                <codeblock> &lt;ref:lnlink service="URL"&gt; &lt;ref:marker&gt;Australian Securities
                    Exchange (ASX)&lt;/ref:marker&gt; &lt;ref:locator&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="URL"/&gt; &lt;ref:key-value
                    value="http://www.asx.com"/&gt; &lt;/ref:locator-key&gt; &lt;/ref:locator&gt;
                    &lt;/ref:lnlink&gt; &lt;ref:lnlink service="URL"&gt; &lt;ref:marker&gt;Acme
                    Corporation&lt;/ref:marker&gt; &lt;ref:locator&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="URL"/&gt; &lt;ref:key-value
                    value="http://www.acmecorp.com"/&gt; &lt;/ref:locator-key&gt;
                    &lt;/ref:locator&gt; &lt;/ref:lnlink&gt; </codeblock>
            </example>
            <note>Please note that XML comments need to be added around markup <targetxml>ref:marker
                </targetxml> if it is in <targetxml>ref:lnlink@service=?URL?</targetxml>and the
                    <targetxml>ref:key-value@value</targetxml> starts-with
                    (<b>'http://www.lexisnexis.com/au/legal/api'</b>). Please see the below target
                xml for more details. </note>

            <example>
                <title>Source XML 7a: for link to URL, with non-URL text content</title>
                <codeblock> &lt;remotelink
                    href=?www.lexisnexis.com/au/legal/api/version1/sr?csi=357205&amp;sr=FILE%2DCODE(%28%23LL00093CF%23+OR+%23LL000CQNJ%23%29)&amp;shr=T&amp;oc=00254"
                    hrefclass="http" newwindow="YES" service="SEARCH" status="valid"&gt;Search
                    LexisNexisAU&lt;/remotelink&gt; </codeblock>
            </example>

            <example>
                <title>Target XML 7a: for link to URL, with non-URL text content</title>
                <codeblock> &lt;ref:lnlink service="URL"&gt; &lt;!--&lt;ref:marker&gt;Search
                    LexisNexisAU&lt;/ref:marker&gt;--&gt; &lt;ref:locator&gt;
                    &lt;ref:locator-key&gt; &lt;ref:key-name name="URL"/&gt; &lt;ref:key-value
                    value="http://www.lexisnexis.com/au/legal/api/version1/sr?csi=357205&amp;sr=FILE%2DCODE(%28%23LL00093CF%23+OR+%23LL000CQNJ%23%29)&amp;shr=T&amp;oc=00254"/&gt;
                    &lt;/ref:locator-key&gt; &lt;/ref:locator&gt; &lt;/ref:lnlink&gt; </codeblock>
            </example>

            <example>
                <title>Source XML 8: for link to URL with no hrefclass attribute, and with non-URL
                    text content</title>
                <codeblock> &lt;remotelink
                    href="http://www.legislation.vic.gov.au/Domino/Web_Notes/LDMS/PubStatbook.nsf/b05145073fa2a882ca256da4001bc4e7/DDB2D286D7B9C8E2CA2578C6001CCC82/$FILE/11-058sr%20authorised.pdf"
                    service="URL" newwindow="YES"&gt;Government Website&lt;/remotelink&gt;
                </codeblock>
            </example>
            <example>
                <title>Target XML 8: for link to URL with no hrefclass attribute, and with non-URL
                    text content</title>
                <codeblock> &lt;ref:lnlink service="URL"&gt; &lt;ref:marker&gt;Government
                    Website&lt;/ref:marker&gt; &lt;ref:locator&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="URL"/&gt; &lt;ref:key-value
                    value="http://www.legislation.vic.gov.au/Domino/Web_Notes/LDMS/PubStatbook.nsf/b05145073fa2a882ca256da4001bc4e7/DDB2D286D7B9C8E2CA2578C6001CCC82/$FILE/11-058sr%20authorised.pdf"/&gt;
                    &lt;/ref:locator-key&gt; &lt;/ref:locator&gt; &lt;/ref:lnlink&gt; </codeblock>
            </example>
            <example>
                <p>
                    <ul>
                        <li>If <sourcexml>remotelink[@service= ‘DOC-ID’]</sourcexml> is a child of
                                <sourcexml>glp:note</sourcexml>; glp:note becomes
                                <targetxml>note/bodytext/p/text</targetxml>,
                                <sourcexml>remotelink[@service= ‘DOC-ID’]</sourcexml> becomes
                                <targetxml>ref:crossreference</targetxml> (see conversion rules in
                            remotelink section). </li>
                    </ul>
                </p>
                <title>Source XML 9:</title>
                <codeblock> &lt;glp:note&gt; &lt;remotelink dpsi="006P" refpt="AFL.FL.FLA75.PT1_2"
                    remotekey1="REFPTID" service="DOC-ID" docidref="ABCD_5641" status="unval"&gt;
                    Next page in this legislation &lt;/remotelink&gt; &lt;/glp:note&gt; </codeblock>
                <title>Target XML 9</title>
                <codeblock> &lt;note&gt; &lt;bodytext&gt; &lt;p&gt; &lt;text&gt;
                    &lt;ref:crossreference crossreferencetype="seeAlso"&gt; &lt;ref:content&gt;Next
                    page in this legislation&lt;/ref:content&gt; &lt;ref:locator
                    anchoridref="AFL.FL.FLA75.PT1_2"&gt; &lt;ref:locator-key&gt; &lt;ref:key-name
                    name="DOC-ID"/&gt; &lt;ref:key-value value="006P-ABCD_5641"/&gt;
                    &lt;/ref:locator-key&gt; &lt;/ref:locator&gt; &lt;/ref:crossreference&gt;
                    &lt;/text&gt; &lt;/p&gt; &lt;/bodytext&gt; &lt;/note&gt; </codeblock>
            </example>
            <example>
                <title>Source XML 10: <sourcexml>remotelink</sourcexml> as a child of
                        <sourcexml>ci:cite/ci:content</sourcexml></title>
                <codeblock> &lt;ci:cite searchtype="LEG-REF"&gt; &lt;ci:content&gt; &lt;remotelink
                    refpt="CTH_ACT_1993-80" dpsi="005X" docidref="ABCD_9876" remotekey1="REFPTID"
                    service="DOC-ID" alttext="Click to link to LawNow Legislation"&gt;Superannuation
                    (Resolution of Complaints) Act 1993&lt;/remotelink&gt;. &lt;/ci:content&gt;
                    &lt;/ci:cite&gt; </codeblock>
                <title>Target XML 10: <sourcexml>remotelink</sourcexml> as a child of
                        <sourcexml>ci:cite/ci:content</sourcexml></title>
                <codeblock> &lt;lnci:cite type="legislation"&gt; &lt;lnci:content&gt;
                    &lt;ref:crossreference crossreferencetype="seeAlso"&gt;
                    &lt;ref:content&gt;Superannuation (Resolution of Complaints) Act
                    1993&lt;/ref:content&gt; &lt;ref:locator anchoridref="CTH_ACT_1993-80"&gt;
                    &lt;ref:locator-key&gt; &lt;ref:key-name name="DOC-ID"/&gt; &lt;ref:key-value
                    value="005X-ABCD_9876"/&gt; &lt;/ref:locator-key&gt; &lt;/ref:locator&gt;
                    &lt;/ref:crossreference&gt; &lt;/lnci:content&gt; &lt;/lnci:cite&gt;
                </codeblock>
            </example>
            <example>
                <title>Source XML 11: <sourcexml>remotelink</sourcexml> as a child of
                        <sourcexml>title</sourcexml></title>
                <codeblock> &lt;level id="ACLPP_C1.SGM_ACLP.1.2.0015" leveltype="para0"
                    toc-caption="[1.2.0015] Interpretation rules applicable to the Corporations Act:
                    Pt&amp;#x00A0;1.2" subdoc="true"&gt; &lt;!-- ETC. --&gt; &lt;heading
                    searchtype="COMMENTARY"&gt; &lt;edpnum&gt; &lt;refpt type="ext"
                    id="ACLP.1.2.0015"&gt;&lt;/refpt&gt;[1.2.0015]&lt;/edpnum&gt;
                    &lt;title&gt;Interpretation rules applicable to the Corporations Act:
                    &lt;remotelink refpt="ACLL.CL.PT1-2" dpsi="006K" remotekey1="REFPTID"
                    service="DOC-ID" docidref="EFGH_2468"&gt;Pt&amp;#x00A0;1.2&lt;/remotelink&gt;
                    &lt;/title&gt; &lt;/heading&gt; &lt;bodytext searchtype="COMMENTARY"&gt; &lt;!--
                    ETC. --&gt; &lt;/bodytext&gt; &lt;/level&gt; </codeblock>
            </example>
            <example>
                <title>Target XML 11: <sourcexml>remotelink</sourcexml> as a child of
                        <sourcexml>title</sourcexml></title>
                <codeblock> &lt;seclaw:level xml:id="ACLPP_C1.SGM_ACLP.1.2.0015"
                    leveltype="paragraph" alternatetoccaption="&amp;#x005B;1.2.0015&amp;#x005D;
                    Interpretation rules applicable to the Corporations Act: Pt&amp;#x00A0;1.2"
                    includeintoc="true"&gt; &lt;ref:anchor id="ACLP.1.2.0015"
                    anchortype="global"/&gt; &lt;heading&gt;
                    &lt;desig&gt;&amp;#x005B;1.2.0015&amp;#x005D;&lt;/desig&gt;
                    &lt;title&gt;Interpretation rules applicable to the Corporations Act:
                    &lt;ref:crossreferencegroup&gt; &lt;ref:crossreference
                    crossreferencetype="seeAlso"&gt;
                    &lt;ref:content&gt;Pt&amp;#x00A0;1.2&lt;/ref:content&gt; &lt;ref:locator
                    anchoridref="ACLL.CL.PT1-2"&gt; &lt;ref:locator-key&gt; &lt;ref:key-name
                    name="DOC-ID"/&gt; &lt;ref:key-value value="006K-EFGH_2468"/&gt;
                    &lt;/ref:locator-key&gt; &lt;/ref:locator&gt; &lt;/ref:crossreference&gt;
                    &lt;/ref:crossreferencegroup&gt;&lt;/title&gt; &lt;/heading&gt; &lt;!-- ETC.
                    --&gt; &lt;seclaw:bodytext&gt; &lt;!-- ETC. --&gt; &lt;/seclaw:bodytext&gt;
                    &lt;/seclaw:level&gt; </codeblock>
            </example>
            <example>
                <title>Source XML 12: <sourcexml>remotelink</sourcexml> with no attributes</title>
                <codeblock> &lt;remotelink&gt;&lt;emph
                    typestyle="smcaps"&gt;agency&lt;/emph&gt;&lt;/remotelink&gt; </codeblock>
            </example>
            <example>
                <title>Target XML 12: <sourcexml>remotelink</sourcexml> with no attributes</title>
                <codeblock> &lt;emph typestyle="smcaps"&gt;agency&lt;/emph&gt; </codeblock>
            </example>

            <example>
                <title>Source XML 13: for link to URL with inlineobject as content</title>
                <codeblock> &lt;remotelink href="www.kpmg.com.au/default.aspx?tabid=145"
                    hrefclass="http" newwindow="YES"&gt; &lt;inlineobject type="image"
                    attachment="ln-server" filename="kpmglogo.gif"/&gt; &lt;/remotelink&gt;
                </codeblock>
            </example>
            <example>
                <title>Target XML 13: for link to URL with inlineobject as content</title>
                <codeblock> &lt;ref:lnlink service="URL"&gt; &lt;ref:marker&gt;
                    &lt;ref:inlineobject&gt; &lt;ref:locator&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="object-key"/&gt; &lt;ref:key-value
                    value="X-Y-kpmglogo"/&gt; &lt;!-- X and Y are LNI and SMI values obtained from
                    CSSM --&gt; &lt;/ref:locator-key&gt; &lt;ref:locator-params&gt; &lt;proc:param
                    name="componentseq" value="1"/&gt; &lt;proc:param name="object-type"
                    value="image"/&gt; &lt;!-- allowable values: “image?; (from .jpg, .gif, .png,
                    .bmp)--&gt; &lt;proc:param name="object-smi" value=""/&gt; &lt;!-- This @value
                    assignment is done by conversion program --&gt; &lt;/ref:locator-params&gt;
                    &lt;/ref:locator&gt; &lt;/ref:inlineobject&gt; &lt;/ref:marker&gt;
                    &lt;ref:locator&gt; &lt;ref:locator-key&gt; &lt;ref:key-name name="URL"/&gt;
                    &lt;ref:key-value value="http://www.kpmg.com.au/default.aspx?tabid=145"/&gt;
                    &lt;/ref:locator-key&gt; &lt;/ref:locator&gt; &lt;/ref:lnlink&gt; </codeblock>
            </example>
            <example>
                <title>Source XML 14: <sourcexml>emph</sourcexml> as child of
                        <sourcexml>remotelink</sourcexml>
                </title>
                <codeblock> &lt;remotelink service="DOC-ID" remotekey1="REFPTID"
                    refpt="04M2_1_1662:HTCOMM-PARAGRAPH" dpsi="04M2"&gt; HEC &lt;emph
                    typestyle="bf"&gt;[1662]&lt;/emph&gt; &lt;/remotelink&gt; </codeblock>
            </example>
            <example>
                <title>Source XML 14: <sourcexml>emph</sourcexml> as child of
                        <sourcexml>remotelink</sourcexml>
                </title>
                <codeblock> &lt;ref:crossreference crossreferencetype="seeAlso"&gt;
                    &lt;ref:content&gt;HEC &lt;emph
                    typestyle="bf"&gt;[1662]&lt;/emph&gt;&lt;/ref:content&gt; &lt;ref:locator
                    anchoridref="04M2_1_1662:HTCOMM-PARAGRAPH"&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="DOC-ID"/&gt; &lt;ref:key-value value="04M2-ABC"/&gt;
                    &lt;/ref:locator-key&gt; &lt;/ref:locator&gt; &lt;/ref:crossreference&gt;
                </codeblock>
            </example>
            <example>
                <title>Source XML 15: <sourcexml>remotelink</sourcexml> occurs as multiple,
                    immediate siblings and without intermediary text within
                        <sourcexml>title</sourcexml></title>
                <codeblock> &lt;leg:level&gt; &lt;leg:level-vrnt leveltype="prov1"&gt;
                    &lt;leg:heading&gt; &lt;title&gt;&lt;refpt id="EU_LEGISLATION:31998L0096R_02:"
                    type="ext"/&gt;Corrigendum to Council &lt;remotelink service="DOC-ID"
                    remotekey1="REFPTID" refpt="EU_LEGISLATION:Directive_98_96_EC_" dpsi="08LU"
                    docidref="08LU_EU_LEGISLATION:Directive_98_96_EC_"&gt;Directive
                    98/96/EC&lt;/remotelink&gt; of 14 December 1998 amending, inter alia, as regards
                    unofficial field inspections under &lt;remotelink service="DOC-ID"
                    remotekey1="REFPTID" refpt="EU_LEGISLATION:Directives_66_400_EEC__" dpsi="08LU"
                    docidref="08LU_EU_LEGISLATION:Directives_66_400_EEC__"&gt;Directives 66/400/EEC,
                    &lt;/remotelink&gt;66/401/EEC, 66/402/EEC, 66/403/EEC, 69/208/EEC, 70/457/EEC
                    and 70/458/EEC on the marketing of beet seed, fodder plant seed, cereal seed,
                    seed potatoes, seed of oil and fibre plants and vegetable seed and on the common
                    catalogue of varieties of agricultural plant species (OJ L 25 of 1.2
                    &lt;remotelink service="DOC-ID" remotekey1="REFPTID"
                    refpt="EU_LEGISLATION:_EEC__66_401" dpsi="08LU"
                    docidref="08LU_EU_LEGISLATION:_EEC__66_401"&gt;/EEC, 66/401&lt;/remotelink&gt;
                    &lt;remotelink service="DOC-ID" remotekey1="REFPTID"
                    refpt="EU_LEGISLATION:_EEC__66_402" dpsi="08LU"
                    docidref="08LU_EU_LEGISLATION:_EEC__66_402"&gt;/EEC, 66/402&lt;/remotelink&gt;
                    &lt;remotelink service="DOC-ID" remotekey1="REFPTID"
                    refpt="EU_LEGISLATION:_EEC__66_403" dpsi="08LU"
                    docidref="08LU_EU_LEGISLATION:_EEC__66_403"&gt;/EEC, 66/403&lt;/remotelink&gt;
                    &lt;remotelink service="DOC-ID" remotekey1="REFPTID"
                    refpt="EU_LEGISLATION:_EEC__69_208" dpsi="08LU"
                    docidref="08LU_EU_LEGISLATION:_EEC__69_208"&gt;/EEC, 69/208&lt;/remotelink&gt;
                    &lt;remotelink service="DOC-ID" remotekey1="REFPTID"
                    refpt="EU_LEGISLATION:_EEC__70_457" dpsi="08LU"
                    docidref="08LU_EU_LEGISLATION:_EEC__70_457"&gt;/EEC,
                    70/457&lt;/remotelink&gt;/EEC and &lt;remotelink service="DOC-ID"
                    remotekey1="REFPTID" refpt="EU_LEGISLATION:_70_458" dpsi="08LU"
                    docidref="08LU_EU_LEGISLATION:_70_458"&gt; 70/458&lt;/remotelink&gt;/EEC on the
                    marketing of beet seed, fodder plant seed, cereal seed, seed potatoes, seed of
                    oil and fibre plants and vegetable seed and on the common catalogue of varieties
                    of agricultural plant species (OJ L 25 of 1.2.1999)&lt;/title&gt;
                    &lt;/leg:heading&gt; &lt;!-- ETC. --&gt; &lt;/leg:level-vrnt&gt;
                    &lt;/leg:level&gt; </codeblock>
            </example>
            <example>
                <title>Target XML 15: <sourcexml>remotelink</sourcexml> occurs as multiple,
                    immediate siblings and without intermediary text within
                        <sourcexml>title</sourcexml></title>
                <codeblock> &lt;primlaw:level leveltype="section"&gt; &lt;heading&gt;
                    &lt;title&gt;Corrigendum to Council &lt;ref:crossreference
                    crossreferencetype="seeAlso"&gt;&lt;ref:content&gt;Directive 98/96/EC
                    &lt;/ref:content&gt;&lt;ref:locator
                    anchoridref="EU_LEGISLATION_Directive_98_96_EC_"&gt;&lt;ref:locator-key&gt;&lt;ref:key-name
                    name="DOC-ID"/&gt;&lt;ref:key-value
                    value="08LU-08LU_EU_LEGISLATION_Directive_98_96_EC_"/&gt;&lt;/ref:locator-key&gt;&lt;/ref:locator&gt;&lt;/ref:crossreference&gt;
                    of 14 December 1998 amending, inter alia, as regards unofficial field
                    inspections under &lt;ref:crossreference
                    crossreferencetype="seeAlso"&gt;&lt;ref:content&gt;Directives 66/400/EEC,
                    &lt;/ref:content&gt;&lt;ref:locator
                    anchoridref="EU_LEGISLATION_Directives_66_400_EEC__"&gt;&lt;ref:locator-key&gt;&lt;ref:key-name
                    name="DOC-ID"/&gt;&lt;ref:key-value
                    value="08LU-08LU_EU_LEGISLATION_Directives_66_400_EEC__"/&gt;&lt;/ref:locator-key&gt;&lt;/ref:locator&gt;&lt;/ref:crossreference&gt;66/401/EEC,
                    66/402/EEC, 66/403/EEC, 69/208/EEC, 70/457/EEC and 70/458/EEC on the marketing
                    of beet seed, fodder plant seed, cereal seed, seed potatoes, seed of oil and
                    fibre plants and vegetable seed and on the common catalogue of varieties of
                    agricultural plant species (OJ L 25 of 1.2 &lt;ref:crossreference
                    crossreferencetype="seeAlso"&gt; &lt;ref:content&gt;/EEC,
                    66/401&lt;/ref:content&gt; &lt;ref:locator
                    anchoridref="EU_LEGISLATION__EEC__66_401"&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="DOC-ID"/&gt; &lt;ref:key-value
                    value="08LU-08LU_EU_LEGISLATION__EEC__66_401"/&gt; &lt;/ref:locator-key&gt;
                    &lt;/ref:locator&gt; &lt;/ref:crossreference&gt; &lt;ref:crossreference
                    crossreferencetype="seeAlso"&gt; &lt;ref:content&gt;/EEC,
                    66/402&lt;/ref:content&gt; &lt;ref:locator
                    anchoridref="EU_LEGISLATION__EEC__66_402"&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="DOC-ID"/&gt; &lt;ref:key-value
                    value="08LU-08LU_EU_LEGISLATION__EEC__66_402"/&gt; &lt;/ref:locator-key&gt;
                    &lt;/ref:locator&gt; &lt;/ref:crossreference&gt; &lt;ref:crossreference
                    crossreferencetype="seeAlso"&gt; &lt;ref:content&gt;/EEC,
                    66/403&lt;/ref:content&gt; &lt;ref:locator
                    anchoridref="EU_LEGISLATION__EEC__66_403"&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="DOC-ID"/&gt; &lt;ref:key-value
                    value="08LU-08LU_EU_LEGISLATION__EEC__66_403"/&gt; &lt;/ref:locator-key&gt;
                    &lt;/ref:locator&gt; &lt;/ref:crossreference&gt; &lt;ref:crossreference
                    crossreferencetype="seeAlso"&gt; &lt;ref:content&gt;/EEC,
                    69/208&lt;/ref:content&gt; &lt;ref:locator
                    anchoridref="EU_LEGISLATION__EEC__69_208"&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="DOC-ID"/&gt; &lt;ref:key-value
                    value="08LU-08LU_EU_LEGISLATION__EEC__69_208"/&gt; &lt;/ref:locator-key&gt;
                    &lt;/ref:locator&gt; &lt;/ref:crossreference&gt; &lt;ref:crossreference
                    crossreferencetype="seeAlso"&gt; &lt;ref:content&gt;/EEC,
                    70/457&lt;/ref:content&gt; &lt;ref:locator
                    anchoridref="EU_LEGISLATION__EEC__70_457"&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="DOC-ID"/&gt; &lt;ref:key-value
                    value="08LU-08LU_EU_LEGISLATION__EEC__70_457"/&gt; &lt;/ref:locator-key&gt;
                    &lt;/ref:locator&gt; &lt;/ref:crossreference&gt;/EEC and &lt;ref:crossreference
                    crossreferencetype="seeAlso"&gt; &lt;ref:content&gt; 70/458&lt;/ref:content&gt;
                    &lt;ref:locator anchoridref="EU_LEGISLATION__70_458"&gt; &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="DOC-ID"/&gt; &lt;ref:key-value
                    value="08LU-08LU_EU_LEGISLATION__70_458"/&gt; &lt;/ref:locator-key&gt;
                    &lt;/ref:locator&gt; &lt;/ref:crossreference&gt;/EEC on the marketing of beet
                    seed, fodder plant seed, cereal seed, seed potatoes, seed of oil and fibre
                    plants and vegetable seed and on the common catalogue of varieties of
                    agricultural plant species (OJ L 25 of 1.2.1999)&lt;/title&gt; &lt;/heading&gt;
                    &lt;!-- ETC. --&gt; &lt;/primlaw:level&gt; </codeblock>
            </example>

            <example>
                <title>Source XML 16: <sourcexml>remotelink[@service="QUERY"]</sourcexml>
                </title>
                <codeblock> &lt;p&gt; &lt;text&gt;Consultation Paper: The Award of Costs from
                    Central Funds in Criminal Cases - &lt;remotelink service="QUERY"
                    remotekey1="DIGEST-CITATION(LNB News 06/11/2008 25)" remotekey2="All Subscribed
                    Current Awareness Sources" cmd="f:exp" alttext="References to"&gt;LNB News
                    06/11/2008 25&lt;/remotelink&gt;; &lt;/text&gt; &lt;/p&gt; </codeblock>
            </example>
            <example>
                <title>Target XML 16: <sourcexml>remotelink[@service="QUERY"]</sourcexml></title>
                <codeblock> &lt;p&gt; &lt;text&gt;Consultation Paper: The Award of Costs from
                    Central Funds in Criminal Cases - LNB News 06/11/2008 25; &lt;/text&gt;
                    &lt;/p&gt; </codeblock>
            </example>

            <example>
                <title>Source XML 17: <sourcexml>remotelink</sourcexml> as a child of
                        <sourcexml>emph</sourcexml></title>
                <codeblock> &lt;ci:cite searchtype="LEG-REF"&gt; &lt;ci:content&gt; &lt;citefragment
                    searchtype="LEG-NAME-REF"&gt; &lt;emph typestyle="it"&gt; &lt;remotelink
                    dpsi="0069" remotekey1="REFPTID" service="DOC-ID" refpt="1952A52"
                    docidref="1952A52.BODY"&gt;Land Transfer Act 1952&lt;/remotelink&gt;
                    &lt;/emph&gt; &lt;/citefragment&gt; &lt;emph typestyle="it"&gt;, ss 62, 105 and
                    119&lt;/emph&gt; &lt;/ci:content&gt; &lt;/ci:cite&gt; </codeblock>
            </example>
            <example>
                <title>Target XML 17: <sourcexml>remotelink</sourcexml> as a child of
                        <sourcexml>emph</sourcexml></title>
                <codeblock> &lt;lnci:cite type="legislation"&gt; &lt;lnci:content&gt;
                    &lt;ref:crossreference crossreferencetype="seeAlso"&gt; &lt;ref:content&gt;Land
                    Transfer Act 1952&lt;/ref:content&gt; &lt;ref:locator anchoridref="_1952A52"&gt;
                    &lt;ref:locator-key&gt; &lt;ref:key-name name="DOC-ID"/&gt; &lt;ref:key-value
                    value="0069-1952A52.BODY"/&gt; &lt;/ref:locator-key&gt; &lt;/ref:locator&gt;
                    &lt;/ref:crossreference&gt; &lt;emph typestyle="it"&gt;, ss 62, 105 and
                    119&lt;/emph&gt; &lt;/lnci:content&gt; &lt;/lnci:cite&gt; </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2016-11-16: <ph id="change_20161116_snb">Added to note regarding applying any
                        rules related to <targetxml>@anchoridref</targetxml>, referring specifically
                        to section for "Identifiers to ID Data Type - Handling Pattern
                        Restrictions".</ph>
                </p>
                <p>2011-12-16: Created. </p>
                <p>2011-12-16: Changed URL/Email link instructions and example to map to url target
                    element. </p>
                <p>2011-12-22: Defined a rule for glp:note/remotelink, per linking strategy.</p>
                <p>2011-12-22: Removed reference to Email links, these do not happen in AU nor NZ
                    data. </p>
                <p>2011-12-22: Fixed formating of a sublist. </p>
                <p>2011-12-22: Updated to match linking strategy. </p>
                <p>2012-01-17: Updated instruction and example for handling
                    remotelink[@service="DOC-ID"].</p>
                <p>2012-01-17: Added example for handling of remotelink/sup.</p>
                <p>2012-02-23: Added conversion instructions and the NL example for /remotelink
                    @dpsi for the use case - remotelink @service='DOC-ID'.</p>
                <p>2012-02-28: Instruction update for handling <sourcexml>remotelink</sourcexml>
                    appear in <sourcexml>title</sourcexml>.</p>
                <p>2012-02-28: Example added for handling <sourcexml>remotelink</sourcexml> appear
                    in <sourcexml>title</sourcexml>.</p>
                <p>2012-02-29: Added instruction and example when <sourcexml>remotelink</sourcexml>
                    has no <sourcexml>@hrefclass</sourcexml>.</p>
                <p>2012-03-12: Added instruction and example for handling of scenario
                    glp:note/remotelink in AU legislation/Courtrule.</p>
                <p>2012-03-15: Added instruction for single versus multiple, sibling occurrences of
                        <sourcexml>remotelink</sourcexml>.</p>
                <p>2012-03-16: Corrected target markup for <targetxml>ref:key-name/@name</targetxml>
                    value. Changed from "DOC-ID" to "REFPTID.</p>
                <p>2012-04-26: Modified the instructions for the use case:
                        <sourcexml>remotelink[@service='DOC-ID']</sourcexml> to include the text
                    -'without intermediary text'.</p>
                <p>2012-04-27: Made fundemental modifications the instructions regarding
                        <sourcexml>remotelink[@service='URL']</sourcexml>. This is now usually
                    converted to <targetxml>ref:lnlink</targetxml> and only converted to
                        <targetxml>url</targetxml> under certain conditions as described in the
                    instructions. </p>
                <p>2012-05-09: Removed the reference to AU Legislation/Courtrule: for the rule when
                        <sourcexml>remotelink</sourcexml> is the child of <sourcexml>glp:note
                    </sourcexml>. This instruction is common across content types and not just AU
                    Legis/Courtrule</p>
                <p>2012-05-14: Removed a note for handling <sourcexml>remotelink</sourcexml> appear
                    in <sourcexml>title</sourcexml>.</p>
                <p>2012-05-14: Example updated for handling
                    <sourcexml>title/remotelink</sourcexml>.</p>
                <p>2012-05-24: Instructions updated for handling
                        <sourcexml>glp:note/remotelink/@service='QUERY'</sourcexml>.</p>
                <p>2012-06-06: Updated the instruction The ref:marker/@service attribute is set to
                    "URL" <b>to</b> The ref:lnlink/@service attribute is set to "URL".</p>
                <p>2012-06-12: Updated the instructions for use case:
                        <sourcexml>remotelink[@service='DOC-ID']</sourcexml>. Described exactly how
                    to obtain a value for <targetxml>ref:key-value/@value</targetxml> depending on
                    what other attributes and values are present.</p>
                <p>2012-07-04: Added instructions for the situation when
                        <sourcexml>remotelink</sourcexml> doesn't have any attributes.</p>
                <p>2012-07-12: modified instruction for glp:note/remotelink handling when
                    remotelink@service="DOC-ID".</p>
                <p>2012-07-31: Replaced the instruction "some other form of a URL" with dtd values
                    (http | https | nohttp | mailto | ftp).</p>
                <p>2012-07-31: Updated the instructions for use case
                        <sourcexml>remotelink[@service='DOC-ID']</sourcexml> with directions to set
                    the value of <targetxml>ref:crossreference/@crossreferencetype</targetxml> to
                    "seeAlso".</p>
                <p>2012-08-17: Updated the instructions for use case
                        <sourcexml>remotelink[@service='DOC-ID']</sourcexml> with new instructions
                    for <targetxml>ref:crossreference/ref:locator/ref:locator-key</targetxml>.</p>
                <p>2012-08-17: Moved handling for NZ Cases to a separate module.</p>
                <p>2012-09-05: Added to note for <targetxml>ref:locator/@anchoridref</targetxml>
                    that begins with a number... Also apply other identifier data type format as
                    used for <targetxml>xml:id</targetxml> and <targetxml>ref:anchor/@id</targetxml>
                    (e.g. change colon to underscore).</p>
                <p>2012-12-03: Instruction and example added for
                        <sourcexml>remotelink/@xml:lang</sourcexml>.</p>
                <p>2013-01-22: Instruction and example added for
                        <sourcexml>ci:cite/ci:content/remotelink</sourcexml> specifying that the
                        <sourcexml>remotelink</sourcexml> is to be converted to
                        <targetxml>ref:crossreference</targetxml> but the containing elements'
                    start-tags and end-tags (<sourcexml>ci:cite</sourcexml> and
                        <sourcexml>ci:content</sourcexml>) are dropped.</p>
                <p>2013-02-18: Target example updated per inlineobject instructions. </p>
                <p>2013-02-18: <ph id="change_20130218_SP">Created two sections, one for <b>"Release
                            4.0 and after"</b> and another for <b>"Pre-Release 4.0"</b>.</ph></p>
                <p>2013-03-11: <ph id="change_20130311_RPX">Instruction and example added on how to
                        handle <targetxml>ref:marker </targetxml> if it is in
                            <targetxml>ref:lnlink@service=?URL?</targetxml>and the
                            <targetxml>ref:key-value@value</targetxml> starts-with (.,
                            <b>'http://www.lexisnexis.com/au/legal/api'</b>)</ph></p>
                <p>2013-04-10: <ph id="change_20130410_MLV">Added Source XML 7a: for link to URL,
                        with non-URL text content because it was previously missing, only the target
                        example was here.</ph></p>
                <p>2013-04-30: <ph id="change_20130430_SP">Updated target sample according to latest
                        Apollo markup.</ph></p>
                <p>2013-05-01: <ph id="change_20130501_SP">Removed instructions for section
                            <b>"Pre-Release 4.0"</b> because according to latest Apollo markup,
                        section <b>"Release 4.0 and after"</b> and section <b>"Pre-Release 4.0"</b>
                        now have similar conversion markup.</ph></p>
                <p>2013-05-01: <ph id="change_20130501_PY">"Instruction added for
                            <sourcexml>ci:cite/ci:content/remotelink</sourcexml> specifying that the
                            <sourcexml>remotelink</sourcexml> is to be converted to
                            <targetxml>ref:crossreference</targetxml> but the containing elements'
                        start-tags and end-tags (<sourcexml>ci:cite</sourcexml> and
                            <sourcexml>ci:content</sourcexml>) are dropped", has been removed from
                        the instructions and now <sourcexml>remotelink</sourcexml> will be converted
                        to the resulting mapping where it is. For more details you can see example:
                            <b>Source XML 10: <sourcexml>remotelink</sourcexml> as a child of
                                <sourcexml>ci:cite/ci:content</sourcexml></b></ph></p>
                <p>2013-05-08: <ph id="change_20130508_SP">Extended the list of allowable values for
                        image handling.</ph></p>
                <p>2013-06-03: <ph id="change_20130603_VV">Updated the Target XML 2 by removing the
                            <targetxml>@crossreferencetype</targetxml> for Canada example.</ph></p>
                <p>2013-08-22: <ph id="change_20130822_jm">Not a rule change. Modified Sample #10 on
                            <sourcexml>ci:cite/ci:content/remotelink</sourcexml>. Removed target
                        attribute <targetxml>lnci:cite[@citeref]</targetxml> because value captured
                        in
                    <targetxml>ref:crossreference/ref:locator[@anchoridref]</targetxml>.</ph></p>
                <p>2013-10-03: <ph id="change_20131003_sp">Added use case where remotelink contains
                        @href which is a URL but does not contain @hrefclass='http'.</ph></p>
                <p>2013-10-23: <ph id="change_20131023_ssx">Added Example when
                            <sourcexml>remotelink</sourcexml> having child
                            <sourcexml>emph</sourcexml>. Webteam # 239816</ph>
                </p>
                <p>2014-02-03: <ph id="change_20140203_AB">Instruction updated if
                            <sourcexml>remotelink</sourcexml> occurs as multiple, immediate siblings
                        and without intermediary text within <sourcexml>title</sourcexml>. Also
                        added a example for the same scenario. Phase 5 UK discussion-defect tracking
                        issue #161</ph></p>
                <p>2014-02-25: <ph id="change_20140225_BRT">Updated instruction and created new
                        example (#16) for handling
                            <sourcexml>remotelink[@service="QUERY"]</sourcexml>. New instruction
                        preserves pcdata but suppresses <sourcexml>remotelink</sourcexml> markup.
                        Webstar #250335. Change applies immediately to all Pacific streams, and in
                        the long run to all streams.</ph></p>
                <p>2014-10-27: <ph id="change_20141027_jm">Minor. Within use case for
                            <sourcexml>@service="DOC-ID"</sourcexml>, rule for
                            <sourcexml>@remotekey1="REFPTID"</sourcexml> now also applies when
                            <sourcexml>@remotekey1="REFPT"</sourcexml>. That is, the condition is
                        expanded to include value <sourcexml>"REFPT"</sourcexml>; the mapping is
                        unchanged. The value <sourcexml>"REFPT"</sourcexml> is new in Oct 2014
                        redelivery of UK11-DN but the rule applies to any stream where
                            <sourcexml>@remotekey1="REFPT"</sourcexml> may occur. R4.5 Content Issue
                        2003.</ph></p>
                <p>2015-01-09: <ph id="change_20150109_jm">For the two use cases associated with url
                        (target <targetxml>url</targetxml> or <targetxml>ref:lnlink</targetxml>):
                        Added exceptional rule to not concatenate values when
                            <sourcexml>@hrefclass</sourcexml> content is already present in
                            <sourcexml>@href</sourcexml>. Expanded examples 5 and 7 to illustrate
                        the scenario. Responds to data for UK10 Dictionaries but applies in general.
                        R4.5 Content Issue 2120.</ph></p>
                <p>2015-05-22: <ph id="change_20150522_JCG">Added an instruction to explicitly
                        indicate <sourcexml>remotelink/@status</sourcexml> is always dropped
                        (suppressed). This is a very low-priority change and has been added for
                        technical correctness, particularly with respect to new CIs. Existing
                        scripts do not have to implement this change unless needed since prior to
                        the change <targetxml>remotelink/@status</targetxml> handling was not
                        explicitly specified.</ph></p>
                <p>2015-06-24: <ph id="change_20150624_SEP">Added clarification note about url,
                        @normval, and @hrefclass. Webstar 302055.</ph></p>
                <p>2016-02-05: <ph id="change_20160205_PS">Added note and example when
                            <sourcexml>remotelink</sourcexml> is a child of
                            <sourcexml>emph</sourcexml>. Applicable on NZ17CC, Webstar: 319232 and
                        318735.</ph></p>
                <p>2016-08-03: <ph id="change_20160803_jm">Added Note about xml snippets that
                        illustrate image handling. Note summarizes move from Apollo to Blobstore
                        application. UK is first LBU to move to Blobstore.</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_remotelink-LxAdv-ref.crossreference.dita  -->

    <xsl:template match="remotelink/@status"/>

    <!-- JL: suppressing attributes as templates because they are used in more complex ways below -->
    <xsl:template match="remotelink/@refpt"/>
    <xsl:template match="remotelink/@dpsi"/>
    <xsl:template match="remotelink/@service"/>
    <xsl:template match="remotelink/@remotekey1"/>

    <xsl:template match="remotelink[@hrefclass ne 'http' and @service = 'SEARCH']">
        <xsl:comment>
			<xsl:copy-of select="."/>
		</xsl:comment>
    </xsl:template>

    <xsl:template
        match="remotelink[@service = 'QUERY'][not(ancestor::docinfo:assoc-links or parent::glp:note[not(starts-with($streamID, 'NZ'))])]">
        <!--  Original Target XPath:  ref:crossreference   -->
        <!-- Suppress remotelink and retain the content -->
        <xsl:apply-templates/>
    </xsl:template>
    <xsl:template
        match="remotelink[ancestor::docinfo:assoc-links][@service = 'QUERY'][not($streamID = ('CA03', 'CA05', 'CA06', 'CA07', 'CA08'))]"/>
    <!--Commeted below line for stop the warning of duplicate rule of glp:note/remotelink-->
    <!--<xsl:template match="glp:note/remotelink[ @service = 'QUERY' ][ starts-with( $streamID , 'NZ' ) ]"/>-->

    <xsl:template name="remotelinkDOCID">
        <!--  Original Target XPath:  ref:crossreference   -->

        <ref:crossreference>
            <!-- following atts and inlineobject template from modules/cttr/HK08k_subseqcases_cttr.annot.xsl -->

            <!-- Sudhanshu Srivastava : Added condition for parent cttr:annot and streamID CA03. -->
            <!-- Awantika: Added inlineobject for AU01 -->
            <xsl:attribute name="crossreferencetype"
                select="
                    if (((parent::source_cttr:annot or parent::source_cttr:annot or ancestor::citefragment[ancestor::case:references]) and $streamID = ('HK08', 'AU02', 'AU04', 'UK05', 'CA03')) or (ancestor::citefragment and inlineobject and $streamID = ('NZ09', 'AU17')) or (parent::ci:content and $streamID = 'AU20') or inlineobject and $streamID = 'AU01') then
                        'citatorAlert'
                    else
                        'seeAlso'"/>
            <xsl:if
                test="(parent::source_cttr:annot or parent::source_cttr:annot and $streamID = ('HK08', 'AU02', 'AU04', 'UK05', 'CA03')) or (ancestor::citefragment and inlineobject and $streamID = ('NZ09', 'AU17')) or (parent::ci:content and $streamID = 'AU20') or inlineobject and $streamID = 'AU01'">
                <xsl:attribute name="referencedresourcetype" select="'citator'"/>
                <xsl:apply-templates select="inlineobject" mode="citator-ref"/>
            </xsl:if>
            <!-- JD: 20170525: (from UK05) following if test for att 'referencedresourcesentiment' from modules/cttr/UK05_Citator_annotations_cttr.annot-LxAdv-cttr.refs.xsl -->

            <xsl:if
                test="parent::source_cttr:annot/@signal or parent::source_cttr:annot/@signal and $streamID = ('UK05', 'CA03')">
                <xsl:attribute name="referencedresourcesentiment">
                    <xsl:choose>
                        <xsl:when test="parent::source_cttr:annot/@signal = 'citation'">
                            <xsl:value-of select="'none'"/>
                        </xsl:when>
                        <xsl:when
                            test="not(parent::source_cttr:annot/@signal = 'citation') and parent::source_cttr:annot/@signal">
                            <xsl:value-of select="parent::source_cttr:annot/@signal"/>
                        </xsl:when>

                        <xsl:when test="parent::source_cttr:annot/@signal = 'citation'">
                            <xsl:value-of select="'none'"/>
                        </xsl:when>

                        <xsl:otherwise>
                            <xsl:copy-of select="parent::source_cttr:annot/@signal"/>
                        </xsl:otherwise>
                    </xsl:choose>
                </xsl:attribute>
            </xsl:if>

            <xsl:if test="ancestor::citefragment and inlineobject and $streamID = ('AU17')">
                <xsl:attribute name="referencedresourcesentiment">
                    <xsl:value-of select="lower-case(substring-before(inlineobject/@alttext, ' '))"
                    />
                </xsl:attribute>
            </xsl:if>

            <!-- JL: Ok to output empty ref:content as ref:content is a required element -->
            <!-- Awantika:24-07-2017: for AU20 added parent::ci:content -->
            <ref:content>
                <xsl:if test="$streamID = 'AU19_CC'">
                    <xsl:attribute name="xml:lang">
                        <xsl:value-of select="/CASEDOC/docinfo/docinfo:doc-lang/@lang"/>
                    </xsl:attribute>
                </xsl:if>
                <xsl:copy-of select="@xml:lang"/>
                <xsl:apply-templates
                    select="
                        if ($streamID = 'UK12') then
                            @* except (@xml:lang, @refpt)
                        else
                            @* except @xml:lang"/>
                <xsl:if
                    test="parent::source_cttr:annot and $streamID = ('HK08', 'AU02', 'AU04') or parent::ci:content and $streamID = 'AU20'">
                    <xsl:value-of
                        select="
                            if (contains(inlineobject/@alttext, ' - Click for CaseBase entry')) then
                                substring-before(inlineobject/@alttext, ' - Click for CaseBase entry')
                            else
                                inlineobject/@alttext"
                    />
                </xsl:if>
                <xsl:if test="$streamID = ('NZ09', 'AU17', 'AU01', 'NZ11', 'AU10', 'HK07')">
                    <xsl:value-of
                        select="
                            if (contains(inlineobject/@alttext, ' - Click for CaseBase entry')) then
                                substring-before(inlineobject/@alttext, ' - Click for CaseBase entry')
                            else
                                inlineobject/@alttext"
                    />
                </xsl:if>
                <!-- Sudhanshu Srivastava: Added if condition for getting ref content for CA03 -->
                <xsl:if test="parent::source_cttr:annot and $streamID = ('CA03')">
                    <xsl:value-of
                        select="
                            if (contains(inlineobject/@alttext, 'QuickCITE - ')) then
                                substring-after(inlineobject/@alttext, 'QuickCITE - ')
                            else
                                inlineobject/@alttext"
                    />
                </xsl:if>

                <!-- Awantika:24-07-2017: blobstore mapping was getting created therefore added 'except' for AU20 not to create that instead create the 
					below ref:locator-->
                <!--05-04-2018:Ravikant:  blobstore mapping was getting created therefore added 'except' for NZ09 not to create that instead create the 
					below ref:locator-->
                <xsl:apply-templates
                    select="node() except inlineobject[parent::remotelink[parent::ci:content][$streamID = ('AU20', 'HK07')]] except inlineobject[$streamID = 'AU01'] except inlineobject[parent::remotelink[parent::citefragment[parent::ci:content][$streamID = ('NZ09')]]]"
                />
            </ref:content>

            <ref:locator>
                <xsl:for-each
                    select="
                        if (@refpt) then
                            @refpt
                        else
                            @remotekey2">
                    <!-- MDS - 2017-05-12 - Created choose statement to deal with empty @refpt in source resulting in empty @anchoridref in target. -->
                    <xsl:choose>
                        <xsl:when test="normalize-space(.) = ''"/>
                        <xsl:otherwise>
                            <!-- JD: 2017-05-26: adding 'if' to prevent @anchoridref being added from markup like this:
							<remotelink remotekey1="DOC-ID" service="DOC-ID" remotekey2="a1baecf6-dc1f-4bd0-ba0c-a91177f0efe6" dpsi="03W6" status="valid"/>
							so as to match DT output.
							-->
                            <!-- Sudhanshu Srivastava: addrd StreamID CA03, no need to generate anchoridref attribute. -->
                            <!-- Paul: this is often the case.  May want "and @remotekey1="REFPTID" in this somewhere.
								I'm getting it with DOC-ID in the attribute.  AU08
								PS2017042700263627135LNIAUCOURTRULES_input_VIC_REG_2008-14810000.xml
			                    <remotelink dpsi="03AP" remotekey1="DOC-ID" remotekey2="LAWNOW_LEG_LAUNCH_VIC" service="DOC-ID">LawNow Home Page</remotelink>
							If @remotekey1="REFPTID" then
								– Create ref:locator/@anchoridref with value from @refpt or @remotekey2, which ever is present (if both are present, use
								@refpt).-->
                            <xsl:if
                                test="not($streamID = 'UK05' or $streamID = 'CA03' or $streamID = 'AU19_CC') and parent::remotelink/@remotekey1 = 'REFPTID'">
                                <xsl:attribute name="anchoridref">
                                    <xsl:call-template name="normalizeIdString"/>
                                </xsl:attribute>
                            </xsl:if>
                        </xsl:otherwise>
                    </xsl:choose>
                </xsl:for-each>
                <ref:locator-key>
                    <xsl:choose>
                        <!-- Awantika: Added choose as it is required to capture URL in ref:key-name while creating ref:crossreference for p/remotelink in AU20 -->
                        <xsl:when test="parent::p[parent::note][$streamID = 'AU20']">
                            <ref:key-name name="URL"/>
                        </xsl:when>
                        <xsl:otherwise>
                            <ref:key-name name="DOC-ID"/>
                        </xsl:otherwise>
                    </xsl:choose>

                    <ref:key-value>
                        <xsl:attribute name="value">
                            <!-- Awantika: Added choose as it is required to capture value of @href while creating ref:crossreference for p/remotelink in AU20 -->
                            <xsl:choose>
                                <xsl:when test="@dpsi">
                                    <xsl:value-of select="@dpsi"/>
                                </xsl:when>
                                <xsl:when test="parent::p[parent::note][$streamID = 'AU20']">
                                    <xsl:value-of select="@href"/>
                                </xsl:when>
                                <xsl:when test="not(@dpsi) and //docinfo/docinfo:dpsi/@id-string">
                                    <xsl:value-of select="//docinfo/docinfo:dpsi/@id-string"/>
                                </xsl:when>
                                <xsl:when
                                    test="not(@dpsi) and not(//docinfo/docinfo:dpsi/@id-string)">
                                    <xsl:value-of select="$dpsi"/>
                                </xsl:when>

                                <!-- JL if @dpsi isn't present, use DPSI from document or LBU manifest file as in CI above. 
									Verified with Pacific LBU 2017-11-06 -->
                                <!-- JL : dpsi may be validly missing if the link is invalid -->
                                <xsl:when test="@status = ('unval', 'invalid')"
                                    ><!-- no @dpsi however status is unvalidated or invalid so don't throw error  --></xsl:when>

                                <xsl:otherwise>
                                    <!--<xsl:value-of select="$dpsi"/>-->
                                    <xsl:call-template name="outputErrorMessage">
                                        <xsl:with-param name="messageText" as="xs:string"
                                            select="'remotelink/@dpsi is missing and link cannot be correctly completed'"/>
                                        <xsl:with-param name="errorType" as="xs:string"
                                            select="'ICCE'"/>
                                        <xsl:with-param name="errorCode" as="xs:string*"
                                            select="'TBD'"/>
                                        <xsl:with-param name="context" as="xs:string">
                                            <xsl:value-of select="base-uri()"/>
                                        </xsl:with-param>
                                    </xsl:call-template>
                                </xsl:otherwise>
                            </xsl:choose>

                            <xsl:text>-</xsl:text>

                            <xsl:choose>

                                <xsl:when test="$streamID = 'AU19_CC'">
                                    <xsl:value-of select="@refpt"/>
                                </xsl:when>
                                <!-- CSN - 2017/11/06 - Backing this change out from the last SVN Version becuase it may fix AU08 but it breaks links for the other Conversions
								<xsl:when test=" @remotekey1 = 'DOC-ID' or @remotekey1 = 'DOCID' or @service='DOC-ID'">
								-->
                                <xsl:when test="@remotekey1 = 'DOC-ID' or @remotekey1 = 'DOCID'">
                                    <xsl:value-of
                                        select="
                                            if (@remotekey2) then
                                                @remotekey2
                                            else
                                                @refpt"
                                    />
                                </xsl:when>
                                <xsl:when test="@remotekey1 = 'REFPTID' or @remotekey1 = 'REFPT'">

                                    <xsl:choose>
                                        <xsl:when test="@docidref">
                                            <xsl:value-of select="@docidref"/>
                                        </xsl:when>
                                        <xsl:when test="@status = ('unval', 'invalid')"
                                            ><!-- no @docidref however status is unvalidated or invalid so don't throw error  --></xsl:when>
                                        <xsl:otherwise>
                                            <!-- This should be an error message -->
                                            <xsl:text>XXXX</xsl:text>
                                            <xsl:call-template name="outputErrorMessage">
                                                <xsl:with-param name="messageText" as="xs:string"
                                                  select="'remotelink/@docidref is missing and link cannot be correctly completed'"/>
                                                <xsl:with-param name="errorType" as="xs:string"
                                                  select="'ICCE'"/>
                                                <xsl:with-param name="errorCode" as="xs:string*"
                                                  select="'403'"/>
                                                <!--SNB: 2017-10-27 adding the XPATH of problem link to error output instead of previous base:uri() -->
                                                <xsl:with-param name="context" as="xs:string">
                                                  <xsl:call-template name="generateXPath"/>
                                                </xsl:with-param>
                                                <!--<xsl:with-param name="context" as="xs:string"><xsl:value-of select="base-uri()"/> </xsl:with-param>-->
                                            </xsl:call-template>
                                        </xsl:otherwise>
                                    </xsl:choose>
                                </xsl:when>
                            </xsl:choose>

                        </xsl:attribute>
                    </ref:key-value>
                </ref:locator-key>
            </ref:locator>

        </ref:crossreference>

    </xsl:template>


    <!--  multiple immediate sibling remotelinks will get grouped, see further below  -->
    <xsl:template
        match="remotelink[not(ancestor::docinfo:assoc-links)][@service = 'DOC-ID'][preceding-sibling::node()[1][self::remotelink[@service = 'DOC-ID']]]"/>

    <!--  process immediate sibling remotelink elements one by one  -->
    <xsl:template match="remotelink[not(ancestor::docinfo:assoc-links)][@service = 'DOC-ID']"
        mode="combineSiblingRemotelinks">

        <!--  output  ref:crossreference for the current remotelink  -->
        <xsl:call-template name="remotelinkDOCID"/>
        <!--  process immediate sibling remotelink elements one by one  -->
        <xsl:apply-templates
            select="following-sibling::node()[1][self::remotelink[not(ancestor::docinfo:assoc-links)][@service = 'DOC-ID']]"
            mode="combineSiblingRemotelinks"/>

    </xsl:template>

    <!-- JD: 2017-10-13: trap remotelink as child of <li>  -->
    <xsl:template
        match="
            remotelink[not(ancestor::docinfo:assoc-links)][@service = 'DOC-ID'][not(preceding-sibling::node()[1][self::remotelink[@service = 'DOC-ID']])]
            [parent::li]"
        priority="1">
        <p>
            <text>
                <xsl:choose>
                    <xsl:when
                        test="following-sibling::node()[1][self::remotelink[@service = 'DOC-ID']] and not(parent::ci:content)">
                        <!--  multiple immediate sibling remotelinks, so group in ref:crossreferencegroup  -->
                        <ref:crossreferencegroup>
                            <!--  output  ref:crossreference for the current remotelink  -->
                            <xsl:call-template name="remotelinkDOCID"/>
                            <!--  process immediate sibling remotelink elements one by one  -->
                            <xsl:apply-templates
                                select="following-sibling::node()[1][self::remotelink[@service = 'DOC-ID']]"
                                mode="combineSiblingRemotelinks"/>
                        </ref:crossreferencegroup>
                    </xsl:when>
                    <xsl:otherwise>
                        <!--  no grouping needed, so just output  ref:crossreference for the current remotelink  -->
                        <xsl:call-template name="remotelinkDOCID"/>
                    </xsl:otherwise>
                </xsl:choose>
            </text>
        </p>
    </xsl:template>

    <!-- For multiple, immediate, sibling
			  occurrences without intermediary text, group within a
				<targetxml>ref:crossreferencegroup</targetxml> parent except for
				<targetxml>lnci:content</targetxml> and <targetxml>title</targetxml>.<ul>  -->
    <!--  @@@ SBy:  I do not understand what is meant by "except for lnci:content and title" since the examples have those under ref:crossreferencegroup even if there is only one remotelink[ @service = 'DOC-ID' ] sibling !!!  -->

    <!-- JL: seems like lnci:content/ref:crossreferencegroup is not schema valid -->

    <xsl:template
        match="remotelink[not(ancestor::docinfo:assoc-links)][@service = 'DOC-ID'][not(preceding-sibling::node()[1][self::remotelink[@service = 'DOC-ID']])]"
        priority="2">

        <xsl:choose>
            <!-- BRT 1/30/17 fix issue with missing p element -->
            <xsl:when test="parent::bodytext and $streamID = ('UK15_DS')">
                <p>
                    <text>
                        <xsl:call-template name="remotelinkDOCID"/>
                    </text>
                </p>
            </xsl:when>
            <xsl:when
                test="$streamID = ('AU10', 'NZ11') and ancestor::level/@leveltype = 'landingpage'">
                <!--  no grouping needed, it becomes seclaw:subjectmatterreference 
					which doesn't allow groupings so just output  ref:crossreference for the current remotelink  -->
                <xsl:call-template name="remotelinkDOCID"/>

            </xsl:when>

            <xsl:when
                test="following-sibling::node()[1][self::remotelink[@service = 'DOC-ID']] and not(parent::ci:content)">
                <!--  multiple immediate sibling remotelinks, so group in ref:crossreferencegroup  -->

                <ref:crossreferencegroup>

                    <!--  output  ref:crossreference for the current remotelink  -->
                    <xsl:call-template name="remotelinkDOCID"/>
                    <!--  process immediate sibling remotelink elements one by one  -->
                    <xsl:apply-templates
                        select="following-sibling::node()[1][self::remotelink[@service = 'DOC-ID']]"
                        mode="combineSiblingRemotelinks"/>

                </ref:crossreferencegroup>

            </xsl:when>
            <xsl:otherwise>
                <!--  no grouping needed, so just output  ref:crossreference for the current remotelink  -->
                <xsl:call-template name="remotelinkDOCID"/>

            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>

    <!--  If there is a
				<sourcexml>remotelink/@hrefclass]</sourcexml> attribute equal to "http" then the
			  remotelink is <b>not</b> copied into a comment but is instead converted to either a
				<targetxml>url</targetxml> or <targetxml>ref:lnlink</targetxml>   -->
    <!-- remotelink[@service='URL'] or remotelink[@hrefclass='http'][@href] or remotelink[@href] and the data content of the remotelink is a URL -->
    <!--  @@@ SBy:  how does one check for "... or is of type (http | https | nohttp | mailto | ftp ..."  ??? using contains...  -->
    <xsl:template
        match="remotelink[(@service = 'URL' or @href) and (contains(., 'www') or contains(., 'http') or contains(., 'mailto') or contains(., 'ftp'))][not(parent::ci:content)]"
        name="remotelink-url-urltext">

        <!--   @@@TODO:  perhaps fix type (http | https | nohttp | mailto | ftp handling.  Probably @hrefclass ?  also check for case insensitivity  -->

        <!-- <li>Use case: <sourcexml>remotelink[@service='URL']</sourcexml> or
				<sourcexml>remotelink[@hrefclass='http'][@href]</sourcexml> or
				<sourcexml>remotelink[@href]</sourcexml>
			  <b>and</b> the data content of the remotelink is a URL. That is, the data content of
				<sourcexml>remotelink</sourcexml> starts with text such as "http://...", "https://...",
			  "www.some.domain", or is of type (http | https | nohttp | mailto | ftp). In this case,
				<sourcexml>remotelink</sourcexml> becomes <targetxml>url</targetxml>		-->



        <url xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <xsl:attribute name="normval">
                <xsl:if test="@hrefclass and not(contains(@href, @hrefclass))">
                    <xsl:value-of select="@hrefclass"/>
                    <xsl:text>://</xsl:text>
                </xsl:if>
                <xsl:value-of select="normalize-space(@href)"/>
            </xsl:attribute>

            <xsl:apply-templates/>

        </url>

    </xsl:template>

    <!-- JL emph is invalid as a child of url, so adding this: -->

    <xsl:template
        match="emph[parent::remotelink[(@service = 'URL' or @href) and (contains(., 'www') or contains(., 'http') or contains(., 'mailto') or contains(., 'ftp'))][not(parent::ci:content)]]"
        priority="35">
        <xsl:apply-templates/>
    </xsl:template>

    <!--Awantika: If lnci:content/remotelink have the following scenarios:if it's href,url,or www.... then retain the content of remotelink and suppress the element-->
    <!-- Awantika:11-07-2017: Added priority to resolve the conflict on template "remotelink[not(ancestor::docinfo:assoc-links)][ @service = 'DOC-ID' ][ not( preceding-sibling::node()[1][self::remotelink[ @service = 'DOC-ID' ] ] ) ]" -->
    <xsl:template
        match="remotelink[(@service = 'URL' or @href) and (contains(., 'www') or contains(., 'http') or contains(., 'mailto') or contains(., 'ftp'))][parent::ci:content]"
        priority="5">
        <xsl:apply-templates/>
    </xsl:template>

    <!-- 2017-11-28 - MDS: person/remotelink output does not allow for ref:lnlink.  url is sufficient for UK12 stream -->
    <xsl:template match="person/remotelink[$streamID = 'UK12']" priority="25">
        <url>
            <xsl:attribute name="normval">
                <xsl:value-of select="@hrefclass"/>
                <xsl:text>://</xsl:text>
                <xsl:value-of select="@href"/>
            </xsl:attribute>
            <xsl:apply-templates select="node()"/>
        </url>
    </xsl:template>

    <!-- remotelink[@service='URL'] or remotelink[@hrefclass='http'][@href] but the data content of the remotelink is not a URL. -->
    <!--  @@@ SBy:  how does one check for "... nor is it of type (http | https | nohttp | mailto | ftp ..."  ??? using contains...  -->
    <xsl:template
        match="remotelink[(@service = 'URL' or @href) and not((contains(., 'www') or contains(., 'http') or contains(., 'mailto') or contains(., 'ftp')))]"
        name="remotelink-url">

        <!--   @@@TODO:  perhaps fix type (http | https | nohttp | mailto | ftp handling.  Probably @hrefclass ?  also check for case insensitivity  -->

        <!-- <li>Use case: <sourcexml>remotelink[@service='URL']</sourcexml> or
				<sourcexml>remotelink[@hrefclass='http'][@href]</sourcexml>
			  <b>but</b> the data content of the remotelink is <b>not</b> a URL. That is, the data
			  content of <sourcexml>remotelink</sourcexml>
			  <b>does not</b> start with text such as "http://...", "https://...", "www.some.domain",
			  nor is it of type (http | https | nohttp | mailto | ftp). In this case,
				<sourcexml>remotelink</sourcexml> becomes <targetxml>ref:lnlink</targetxml> with
			  children <targetxml>ref:marker</targetxml> and <targetxml>ref:locator</targetxml>	-->

        <ref:lnlink service="URL">

            <ref:marker>
                <xsl:apply-templates/>
            </ref:marker>

            <ref:locator>
                <ref:locator-key>
                    <ref:key-name name="URL"/>
                    <ref:key-value>

                        <xsl:attribute name="value">
                            <xsl:if test="@hrefclass and not(contains(@href, @hrefclass))">
                                <xsl:value-of select="@hrefclass"/>
                                <xsl:text>://</xsl:text>
                            </xsl:if>
                            <xsl:value-of select="normalize-space(@href)"/>
                        </xsl:attribute>

                    </ref:key-value>
                </ref:locator-key>
            </ref:locator>
        </ref:lnlink>

    </xsl:template>
    <xsl:template match="remotelink/@href"/>
    <!-- suppress remotelink and retain its content as text -->
    <xsl:template match="remotelink[not(@*)]">
        <xsl:apply-templates/>
    </xsl:template>

    <!-- @@@  SBy:  TODO, need to coordinate with Mark S footnote/endote logic:   <p>If <sourcexml>refpt</sourcexml> and <sourcexml>remotelink</sourcexml> occurs as adjacent
				siblings then refer to the instructions for converting <sourcexml>endnote</sourcexml>.</p>  

				There's another separate module for this... -->

    <xsl:template match="emph[remotelink and $streamID = 'NZ17-CCD']">
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="remotelink/@remotekey2"/>
    <!-- it doesn't seem like we use this att -->
    <xsl:template match="remotelink/@newwindow"/>
    <xsl:template match="remotelink/@docidref"/>

    <xsl:template match="remotelink[parent::in:entry-text][$streamID = 'AU16']" priority="25">
        <index:locator>
            <!-- <in:entry-text>
          <remotelink dpsi="009K" remotekey1="REFPTID" service="DOC-ID" refpt="CTH_BIL_2017-74"
            status="unval">ASIC SUPERVISORY COST RECOVERY LEVY BILL 2017</remotelink>
        </in:entry-text> -->
            <ref:lnlink>
                <xsl:attribute name="service">DOCUMENT</xsl:attribute>
                <ref:marker>
                    <xsl:apply-templates select="node()"/>
                </ref:marker>
                <ref:locator>
                    <xsl:choose>
                        <xsl:when test="not(@refpt)">
                            <xsl:attribute name="anchoridref">
                                <xsl:choose>
                                    <xsl:when
                                        test="string(number(substring(@remotekey2, 1, 1))) = 'NaN'">
                                        <xsl:value-of select="@remotekey2"/>
                                    </xsl:when>
                                    <xsl:otherwise>
                                        <xsl:value-of select="concat('_', @remotekey2)"/>
                                    </xsl:otherwise>
                                </xsl:choose>
                            </xsl:attribute>
                        </xsl:when>
                        <xsl:otherwise>
                            <xsl:attribute name="anchoridref">
                                <xsl:choose>
                                    <xsl:when test="string(number(substring(@refpt, 1, 1))) = 'NaN'">
                                        <xsl:value-of select="@refpt"/>
                                    </xsl:when>
                                    <xsl:otherwise>
                                        <xsl:value-of select="concat('_', @refpt)"/>
                                    </xsl:otherwise>
                                </xsl:choose>
                            </xsl:attribute>
                        </xsl:otherwise>
                    </xsl:choose>
                    <ref:locator-key>
                        <ref:key-name name="DOC-ID"/>
                        <ref:key-value>
                            <xsl:attribute name="value">
                                <xsl:choose>
                                    <!-- <in:entry-text>Insurance Premiums Order (January-June) 2014 <remotelink dpsi="005Y"
              remotekey1="REFPTID" service="DOC-ID" refpt="NSW_REG_2013-622_WA"
              docidref="NSW_REG_2013-622_SCH11">SCH11CL1SUB1</remotelink></in:entry-text> -->
                                    <xsl:when test="@remotekey1 = 'DOC-ID'">
                                        <xsl:value-of select="concat(@dpsi, '-')"/>
                                        <xsl:choose>
                                            <xsl:when test="not(@remotekey2)">
                                                <xsl:value-of select="@refpt"/>
                                            </xsl:when>
                                            <xsl:otherwise>
                                                <xsl:value-of select="@remotekey2"/>
                                            </xsl:otherwise>
                                        </xsl:choose>
                                    </xsl:when>
                                    <xsl:when test="@remotekey1 = 'REFPTID'">
                                        <xsl:value-of select="concat(@dpsi, '-')"/>
                                        <xsl:choose>
                                            <xsl:when test="@docidref">
                                                <xsl:value-of select="@docidref"/>
                                            </xsl:when>
                                            <xsl:otherwise>
                                                <xsl:text>XXXX</xsl:text>
                                            </xsl:otherwise>
                                        </xsl:choose>
                                    </xsl:when>
                                </xsl:choose>
                            </xsl:attribute>
                        </ref:key-value>
                    </ref:locator-key>
                </ref:locator>
            </ref:lnlink>
        </index:locator>
    </xsl:template>

    <!--Vikas Rohilla : Template to match the remotelink-->
    <xsl:template
        match="remotelink[(@service = 'URL' or @href) and not((contains(., 'www') or contains(., 'http') or contains(., 'mailto') or contains(., 'ftp')))][$streamID = 'UK11DA']"
        priority="20">
        <url>
            <xsl:attribute name="normval">
                <xsl:if test="@hrefclass and not(contains(@href, @hrefclass))">
                    <xsl:value-of select="@hrefclass"/>
                    <xsl:text>://</xsl:text>
                </xsl:if>
                <xsl:value-of select="normalize-space(@href)"/>
            </xsl:attribute>
            <xsl:apply-templates/>
        </url>
    </xsl:template>

    <xsl:template match="remotelink/@alttext"/>

    <!-- Priya Kaushal added below for UK15 -->

    <xsl:template
        match="remotelink[(ancestor::docinfo:assoc-links) | (ancestor::docinfo:assoc-links-grp)][parent::text][@service = 'DOC-ID'][not(preceding-sibling::node()[1][self::remotelink[@service = 'DOC-ID']])][$streamID = 'UK15' or $streamID = 'UK12' or $streamID = 'UK14']"
        priority="40">

        <xsl:choose>
            <xsl:when
                test="following-sibling::node()[1][self::remotelink[@service = 'DOC-ID']] and not(parent::ci:content)">
                <!--  multiple immediate sibling remotelinks, so group in ref:crossreferencegroup  -->
                <!--<doc:related-content-item>
					<doc:related-content-desc>
						<p>
							<text>-->
                <ref:crossreferencegroup>

                    <!--  output  ref:crossreference for the current remotelink  -->
                    <xsl:call-template name="remotelinkDOCID"/>
                    <!--  process immediate sibling remotelink elements one by one  -->
                    <xsl:apply-templates
                        select="following-sibling::node()[1][self::remotelink[@service = 'DOC-ID']][not($streamID = 'UK15')]"
                        mode="combineSiblingRemotelinks"/>

                </ref:crossreferencegroup>


                <!--</text>
											</p>
											</doc:related-content-desc>
				</doc:related-content-item>-->
            </xsl:when>
            <xsl:otherwise>

                <!--  no grouping needed, so just output  ref:crossreference for the current remotelink  -->
                <xsl:call-template name="remotelinkDOCID"/>

            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>

    <xsl:template
        match="remotelink[(ancestor::docinfo:assoc-links) | (ancestor::docinfo:assoc-links-grp)][parent::text][preceding-sibling::node()[1][self::remotelink[@service = 'DOC-ID']]][$streamID = 'UK15']"
        priority="2">
        <xsl:call-template name="remotelinkDOCID"/>
    </xsl:template>

    <!-- Vikas Rohilla : included for the UK12	-->
    <xsl:template match="remotelink[@refpt = ''][$streamID = 'UK12']" priority="25">
        <ref:lnlink>
            <ref:marker>
                <xsl:apply-templates select="node()"/>
            </ref:marker>
            <ref:locator>
                <xsl:apply-templates select="@refpt"/>
            </ref:locator>
        </ref:lnlink>
    </xsl:template>
    <xsl:template match="remotelink/@refpt[$streamID = 'UK12']" priority="25">
        <xsl:choose>
            <xsl:when test="normalize-space(.) != ''">
                <xsl:attribute name="anchoridref">
                    <xsl:call-template name="normalizeIdString"/>
                </xsl:attribute>
            </xsl:when>
            <xsl:otherwise>
                <xsl:comment>Mandatory element according to the CI</xsl:comment>
                <xsl:call-template name="outputErrorMessage">
                    <xsl:with-param name="messageText" as="xs:string"
                        select="'remotelink/@refpt is missing and link cannot be correctly completed'"/>
                    <xsl:with-param name="errorType" as="xs:string" select="'ICCE'"/>
                    <xsl:with-param name="errorCode" as="xs:string*" select="'TBD'"/>
                    <xsl:with-param name="context" as="xs:string">
                        <xsl:value-of select="base-uri()"/>
                    </xsl:with-param>
                </xsl:call-template>
            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>

    <!--SS 28-11-2017: Added handling of remotelink/@refpt='dummy' value comes in HK07.-->
    <xsl:template match="remotelink[@refpt = 'dummy' and @status = 'unval'][$streamID = 'HK07']">
        <xsl:apply-templates/>
    </xsl:template>


    <!-- @@@  SBy:  below is from Awntika and likely from QC code base, but not mentioned in DITA so commenting out for now -->

    <!--xsl:template match="remotelink[@service=ATTACHMENT]">
		<!-/-  Original Target XPath:  ref:lnlink[@service="ATTACHMENT"]   -/->
		<xsl:element name="ref:lnlink">
			<xsl:attribute name="service"><xsl:text>URL</xsl:text></xsl:attribute>
			<xsl:element name="ref:marker">
				<xsl:apply-templates/>
			</xsl:element>
			<xsl:element name="ref:locator">
				<xsl:element name="ref:locator-key">
					<xsl:element name="ref:key-name">
						<xsl:attribute name="name"><xsl:value-of select="@remotekey1='DOC-ID' or @remotekey1='DOCID'"/></xsl:attribute>
					</xsl:element>
					<xsl:element name="ref:key-value">
						<xsl:attribute name="value"><xsl:value-of select="@dpsi"/><xsl:text>_</xsl:text><xsl:choose><xsl:when test="@docidref"><xsl:value-of select="./@docidref"/></xsl:when><xsl:otherwise><xsl:value-of select="./@refpt"/></xsl:otherwise></xsl:choose></xsl:attribute>
					</xsl:element>
				</xsl:element>
			</xsl:element>
		</xsl:element>
	</xsl:template>

	<xsl:template match="remotelink[parent::glp:note]">
		<xsl:element name="note">
			<xsl:element name="bodytext">
				<xsl:element name="p">
					<xsl:element name="text">
						<ref:crossreference>
							<xsl:attribute name="crossreferencetype">See Also</xsl:attribute>
							<ref:content>
								<xsl:if test="remotelink[@xml:lang]">
									<xsl:attribute name="xml:lang"><xsl:value-of select="@xml:lang"/></xsl:attribute>
								</xsl:if>
								<xsl:apply-templates/>
							</ref:content>
							<xsl:element name="ref:locator">
								<xsl:choose>
									<xsl:when test="@remotekey1='DOC-ID' or @remotekey1='DOCID'">
										<xsl:element name="ref:locator-key">
											<xsl:element name="ref:key-name">
												<xsl:attribute name="name"><xsl:text>DOC-ID</xsl:text></xsl:attribute>
											</xsl:element>
											<xsl:element name="ref:key-value">
												<xsl:attribute name="value"><xsl:choose><xsl:when test="@dpsi"><xsl:value-of select="@dpsi"/><xsl:text>-</xsl:text></xsl:when><xsl:when test="../docinfo:dpsi/@id-string"><xsl:value-of select="../docinfo:dpsi/@id-string"/></xsl:when><xsl:otherwise>***no dpsi</xsl:otherwise></xsl:choose><xsl:choose><xsl:when test="@remotekey2"><xsl:value-of select="@remotekey2"/></xsl:when><xsl:otherwise><xsl:value-of select="@refpt"/></xsl:otherwise></xsl:choose></xsl:attribute>
											</xsl:element>
										</xsl:element>
									</xsl:when>
									<xsl:when test="@remotekey1='REFPTID'">
										<xsl:attribute name="anchoridref"><xsl:choose><xsl:when test="contains('0123456789', substring(@refpt,1,1))"><xsl:text>_</xsl:text><xsl:value-of select="@refpt or @remotelink2"/></xsl:when><xsl:otherwise><xsl:value-of select="@refpt"/></xsl:otherwise></xsl:choose></xsl:attribute>
									</xsl:when>
								</xsl:choose>
							</xsl:element>
						</ref:crossreference>
					</xsl:element>
				</xsl:element>
			</xsl:element>
		</xsl:element>
	</xsl:template>

	<xsl:template match="remotelink[child::inlineobject]">
		<xsl:element name="ref:lnlink">
			<xsl:attribute name="service"><xsl:text>URL</xsl:text></xsl:attribute>
			<xsl:element name="ref:marker">
				<xsl:apply-templates/>
			</xsl:element>
			<xsl:element name="ref:locator">
				<xsl:element name="ref:locator-key">
					<xsl:element name="ref:key-name">
						<xsl:attribute name="name"><xsl:text>URL</xsl:text></xsl:attribute>
					</xsl:element>
					<xsl:element name="ref:key-value">
						<xsl:attribute name="value"><xsl:value-of select="normalize-space(@href)"/></xsl:attribute>
					</xsl:element>
				</xsl:element>
			</xsl:element>
		</xsl:element>
	</xsl:template>

	<xsl:template match="docinfo:assoc-links/remotelink[@service='DOC-ID']">
		<!-/-  Original Target XPath:  ref:crossreference   -/->
		<xsl:element name="doc:related-content">
			<xsl:element name="doc:related-content-item">
				<xsl:element name="doc:related-content-link">
					<xsl:element name="ref:lnlink">
						<xsl:attribute name="service"><xsl:text>DOCUMENT</xsl:text></xsl:attribute>
						<xsl:element name="ref:marker">
							<xsl:value-of select="./remotelink[@service='DOC-ID']"/>
						</xsl:element>
						<xsl:element name="ref:locator">
							<xsl:attribute name="anchoridref"><xsl:choose><xsl:when test="./remotelink[@service='DOC-ID']/@refpt"><xsl:value-of select="./remotelink[@service='DOC-ID']/@refpt"/></xsl:when><xsl:otherwise><xsl:value-of select="./remotelink[@service='DOC-ID']/@remotekey2"/></xsl:otherwise></xsl:choose></xsl:attribute>
							<xsl:element name="ref:locator-key">
								<xsl:element name="ref:key-name">
									<xsl:attribute name="name"><xsl:value-of select="./remotelink[@service='DOC-ID']/@service"/></xsl:attribute>
								</xsl:element>
								<xsl:element name="ref:key-value">
									<xsl:attribute name="value"><xsl:value-of select="./remotelink[@service='DOC-ID']/@dpsi"/><xsl:text>-</xsl:text><xsl:value-of select="remotelink[@service='DOC-ID']/@remotekey2"/></xsl:attribute>
								</xsl:element>
							</xsl:element>
						</xsl:element>
					</xsl:element>
				</xsl:element>
			</xsl:element>
		</xsl:element>
	</xsl:template-->




    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_remotelink-self-inter-document-link-LxAdv-intra-document-link">
        <title><sourcexml>remotelink</sourcexml> (self inter-document link) to
                <targetxml>ref:lnlink</targetxml> (intra-document link)
            <lnpid>id-CCCC-10468</lnpid></title>
        <body>
            <section>
                <p>If a <sourcexml>remotelink</sourcexml> is created as an
                        <i><b>inter</b>-document</i> link in the source file, yet its target is
                    contained within the same source file, the <sourcexml>remotelink</sourcexml>
                    must be converted to an <i><b>intra</b>-document</i> link.</p>
                <p>For any given <sourcexml>remotelink</sourcexml> where its
                        <sourcexml>@refpt</sourcexml> value is equivalent to an
                        <sourcexml>refpt/@id</sourcexml> value within the same soure file, create an
                            <i><b>intra</b>-document</i> link.</p>
                <p>
                    <ul>
                        <li><sourcexml>remotelink</sourcexml> becomes
                                <targetxml>ref:lnlink</targetxml>.</li>
                        <li>The attribute <sourcexml>remotelink/@status</sourcexml> is always
                            suppressed, it is never output to the target document.</li>
                        <li>The content of <sourcexml>remotelink</sourcexml> becomes
                                <targetxml>ref:marker</targetxml>.</li>
                        <li>Create <targetxml>ref:locator</targetxml> and populate the attribute
                                <targetxml>ref:locator/@anchoridref</targetxml> with the value of
                                <sourcexml>remotelink/@refpt</sourcexml>.</li>
                    </ul>
                </p>
                <note><targetxml>ref:locator/@anchoridref</targetxml> that begins with a number must
                    have an underscore added at start. Also apply other identifier data type format
                    as used for <targetxml>xml:id</targetxml> and
                        <targetxml>ref:anchor/@id</targetxml> (e.g. change colon to
                    underscore).</note>
            </section>
            <example>
                <title>Source XML</title>
                <codeblock> ... &lt;remotelink refpt="CTH_ACT_1958-62_PROVLIST" remotekey1="REFPTID"
                    service="DOC-ID"&gt;List of Provisions&lt;/remotelink&gt; ...
                    &lt;leg:heading&gt; &lt;title&gt;&lt;refpt id="CTH_ACT_1958-62_PROVLIST"
                    type="ext"/&gt;List of provisions&lt;/title&gt; &lt;leg:heading&gt; ...
                </codeblock>
            </example>
            <example>
                <title>Target XML</title>
                <codeblock> ... &lt;ref:lnlink&gt; &lt;ref:marker&gt;List of
                    Provisions&lt;/ref:marker&gt; &lt;ref:locator
                    anchoridref="CTH_ACT_1958-62_PROVLIST"/&gt; &lt;/ref:lnlink&gt; ...
                    &lt;ref:anchor id="CTH_ACT_1958-62_PROVLIST" anchortype="global"/&gt;
                    &lt;heading&gt; &lt;title&gt;List of provisions&lt;/title&gt; &lt;heading&gt;
                    ... </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2015-05-22: <ph id="change_20150522_JCG">Added an instruction to explicitly
                        indicate <sourcexml>remotelink/@status</sourcexml> is always dropped
                        (suppressed). This is a very low-priority change and has been added for
                        technical correctness, particularly with respect to new CIs. Existing
                        scripts do not have to implement this change unless needed since prior to
                        the change <targetxml>remotelink/@status</targetxml> handling was not
                        explicitly specified.</ph></p>
                <p>2013-08-12: <ph id="change_20130812_cn">Changed module heading from
                        ref:crossreference to ref:lnlink. NO instructions are changed. WebTeam #
                        230229. Affects all streams.</ph></p>
                <p>2013-08-07: <ph id="change_20130807_jm">Changed target to
                            <targetxml>ref:lnlink</targetxml>; formerly
                            <targetxml>ref:crossreference</targetxml>. Changed because the only
                        supported markup for intradoc linking is <targetxml>ref:lnlink</targetxml>,
                        as per Bency Thomas. WebTeam # 230229. Affects all streams.</ph></p>
                <p>2012-11-01: <ph id="change_20121101_xx">Created.</ph></p>
            </section>
            <!--<section>
            <title>Changes</title>
            <p>2012-11-01: Created.</p>
        </section>-->
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_remotelink-self-inter-document-link-LxAdv-intra-document-link.dita  -->


    <!-- keys for standalone testing below. These keys need to be in the driver file for this module to work. -->

    <!--    <xsl:key name="idTypeValue" match="*[@id]" use="@id"/>
    <xsl:key name="idTypeValue" match="*[@ID]" use="@ID"/>-->

    <!-- Awantika: 2017-12-29: Added not(parent::docinfo:assoc-links-grp and $streamID='AU04') for webstar  #7078784 -->

    <xsl:template
        match="
            remotelink[key('idTypeValue', @refpt)[self::refpt]][not(ancestor::ci:content)][not(parent::source_cttr:annot and $streamID = ('HK08', 'AU02', 'AU04', 'UK05', 'CA03'))]
            [not(parent::docinfo:assoc-links-grp and $streamID = 'AU04')]"
        priority="26">
        <ref:lnlink>
            <ref:marker>
                <xsl:apply-templates select="node()"/>
            </ref:marker>
            <ref:locator>
                <xsl:attribute name="anchoridref">
                    <xsl:apply-templates select="@refpt" mode="intradoc"/>
                </xsl:attribute>
            </ref:locator>
        </ref:lnlink>
    </xsl:template>

    <xsl:template match="remotelink/@refpt" mode="intradoc">
        <xsl:call-template name="normalizeIdString"/>
    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_sup_to-LexisAdvance_sup">
        <title><sourcexml>sup</sourcexml> to <targetxml>sup</targetxml>
            <lnpid>id-CCCC-10474</lnpid></title>
        <body>
            <section>
                <title>Instructions <i>[common element]</i></title>
                <p><sourcexml>sup</sourcexml> becomes <targetxml>sup</targetxml>
                </p>
            </section>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;emph typestyle="it"&gt; &lt;sup&gt;*&lt;/sup&gt; &lt;/emph&gt;
                </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;emph typestyle="it"&gt; &lt;sup&gt;*&lt;/sup&gt; &lt;/emph&gt;
                </codeblock>
            </example>

            <section>
                <title>Changes</title>
                <p>2011-12-15: Created. </p>
            </section>
        </body>
    </dita:topic>

    <xsl:template match="sup">
        <sup xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <xsl:apply-templates select="@* | node()"/>
        </sup>

    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_table_to-LexisAdvance_table">
        <title><sourcexml>table</sourcexml> to <targetxml>table</targetxml>
            <lnpid>id-CCCC-10475</lnpid></title>
        xmlns:primlawhist="http://www.lexisnexis.com/xmlschemas/content/legal/primarylaw-history/1/" <body>
            <section>
                <title>Instructions <i>[common element]</i></title>
                <p>Contains the titling content for a table, and titled groups that contain rows of
                    cells ("entries"). Table now allows an optional heading element, which contains
                    the titling content as well. The titling elements directly within table - title
                    and subtitle - are deprecated in favor of using these elements inside the
                    heading. </p>
                <ul>
                    <li><sourcexml>table</sourcexml> becomes <targetxml>table</targetxml> comes with
                            <sourcexml>@frame</sourcexml> becomes <targetxml>@frame</targetxml> and
                            <sourcexml>@tablealign </sourcexml> becomes
                            <targetxml>@lntbl:table-align</targetxml> which has tokenized values as
                        (top | bottom | topbot | all | sides | none) and required child element is
                        described below: <ul>
                            <li>
                                <sourcexml>tgroup</sourcexml> becomes <targetxml>tgroup</targetxml>
                                with attributes <sourcexml>@cols</sourcexml> becomes
                                    <targetxml>@cols</targetxml> is the required attribute.
                                    <sourcexml>@colsep</sourcexml> becomes
                                    <targetxml>@colsep</targetxml>
                                <sourcexml>@rowsep</sourcexml> becomes
                                    <targetxml>@rowsep</targetxml> and child element includes: <ul>
                                    <li><sourcexml>colspec</sourcexml> becomes
                                            <targetxml>colspec</targetxml> and attributes are
                                        converted as follows: <ul>
                                            <li><sourcexml>@align</sourcexml> becomes
                                                  <targetxml>@align</targetxml></li>
                                            <li><sourcexml>@char</sourcexml> becomes
                                                  <targetxml>@char</targetxml></li>
                                            <li><sourcexml>@charoff</sourcexml> becomes
                                                  <targetxml>@charoff</targetxml></li>
                                            <li><sourcexml>@colname</sourcexml> becomes
                                                  <targetxml>@colname</targetxml></li>
                                            <li><sourcexml>@colnum</sourcexml> becomes
                                                  <targetxml>@colnum</targetxml></li>
                                            <li><sourcexml>@colsep</sourcexml> becomes
                                                  <targetxml>@colsep</targetxml></li>
                                            <li><sourcexml>@colwidth</sourcexml> becomes
                                                  <targetxml>@colwidth</targetxml></li>
                                            <li><sourcexml>@id</sourcexml> may be dropped or may
                                                require special handling. It may become
                                                  <targetxml>@ref:anchor</targetxml> and if so is
                                                moved to the parent or higher ancestor element. This
                                                will be specified in the the particular CI as it
                                                will be done on a stream by stream basis and will
                                                depend on the particular XPath of the table element.
                                                In the absence of specific instructions elsewhere in
                                                the CI, <sourcexml>@id</sourcexml> is dropped.</li>
                                            <li><sourcexml>@rowsep</sourcexml> becomes
                                                  <targetxml>@rowsep</targetxml></li>
                                            <li><sourcexml>@searchtype</sourcexml> is dropped</li>
                                            <li><sourcexml>@xml:lang</sourcexml> becomes
                                                  <targetxml>@xml:lang</targetxml></li>
                                        </ul>
                                        <note>
                                            <p>CALS table markup allows for units to be embedded in
                                                the column width. Lexis Advance only recognizes an
                                                integer in pixels and proportional, identified by a
                                                number ending with "*".</p>
                                            <p>If a non-Lexis Advance format is discovered a warning
                                                should be raised.</p>
                                            <p>If the LBU requires a conversion of CALS units to LA
                                                accepted units, some of the conversions are detailed
                                                below.</p>
                                            <p>If colspec@colwidth ends in “in? (inch) them remove
                                                “in? and multiply the value by 96 to convert to
                                                pixel. Only keep the integer portion of the result.
                                                These are not valid: 0.1, 12.86. These are valid:
                                                12, 185</p>
                                            <p>cm; follow the inches example above but use a
                                                conversion value of 37.7952755904</p>
                                            <p>mm; follow the inches example above but use a
                                                conversion value of 3.77952755904</p>
                                            <p>pt; follow the inches example above but use a
                                                conversion value of 1.0</p>
                                        </note></li>
                                </ul>
                                <p>The following instructions apply to all table markup (table
                                    element and its decendents) with @morerows, @colsep, and @rowsep
                                        attributes:<ul id="ul_udb_cce_ml">
                                        <li>Remove any instances of @morerows=0</li>
                                        <li>If ALL occurrences of @colsep in one table have a value
                                            of zero, remove them all from that table. </li>
                                        <li>If ALL occurrences of @rowsep in one table have a value
                                            of zero, remove them all from that table. </li>
                                    </ul>
                                    <note>Although these instructions apply to all content streams,
                                        only the UK content streams and AU18 are known to have these
                                        issues.</note>
                                </p>
                                <ul>
                                    <li>
                                        <sourcexml>thead</sourcexml> becomes
                                            <targetxml>thead</targetxml> below is the required child
                                        element: <ul>
                                            <li>
                                                <sourcexml>row</sourcexml> becomes
                                                  <targetxml>row</targetxml> below is the required
                                                child element: <ul>
                                                  <li>
                                                  <sourcexml>entry</sourcexml> becomes
                                                  <targetxml>entry</targetxml> and comes with
                                                  <sourcexml>@nameend</sourcexml> becomes
                                                  <targetxml>@nameend</targetxml>
                                                  <sourcexml>@namest</sourcexml> becomes
                                                  <targetxml>@namest</targetxml>
                                                  <sourcexml>@align</sourcexml> becomes
                                                  <targetxml>@align</targetxml> with tokenized
                                                  values as (left | right | center | justify | char)
                                                  </li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                                <ul>
                                    <li><sourcexml>tbody</sourcexml> becomes
                                            <targetxml>tbody</targetxml> and child element includes: <ul>
                                            <li><sourcexml>row</sourcexml> becomes
                                                  <targetxml>row</targetxml> and child element
                                                includes: <ul>
                                                  <li><sourcexml>entry</sourcexml> becomes
                                                  <targetxml>entry</targetxml> and comes with
                                                  <sourcexml>@nameend</sourcexml> becomes
                                                  <targetxml>@nameend</targetxml>
                                                  <sourcexml>@namest</sourcexml> becomes
                                                  <targetxml>@namest</targetxml>
                                                  <sourcexml>@char</sourcexml> becomes
                                                  <targetxml>@char</targetxml>
                                                  <sourcexml>@align</sourcexml> becomes
                                                  <targetxml>@align</targetxml> with tokenized
                                                  values as (left | right | center | justify | char)
                                                  </li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
                <note> Multiple <sourcexml>tgroup</sourcexml> are retained for conversion.</note>
            </section> <example>
                <title>Source XML</title>
                <codeblock> &lt;table frame="none"&gt; &lt;tgroup cols="3" colsep="0" rowsep="0"&gt;
                    &lt;colspec colname="col1" colnum="1" colwidth="5*"/&gt; &lt;colspec
                    colname="col2" colnum="2" colwidth="83*"/&gt; &lt;colspec align="left"
                    colname="col3" colnum="3" colwidth="12*"/&gt; &lt;thead&gt; &lt;row&gt;
                    &lt;entry align="center" nameend="col3" namest="col1"&gt;&lt;emph
                    typestyle="bf"&gt;Table of contents&lt;/emph&gt;&lt;/entry&gt; &lt;/row&gt;
                    &lt;row&gt; &lt;entry/&gt;&lt;entry/&gt; &lt;entry align="right"
                    colname="col3"&gt;&lt;emph typestyle="bf"&gt;Para no&lt;/emph&gt;&lt;/entry&gt;
                    &lt;/row&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;row&gt; &lt;entry align="left"
                    nameend="col2" namest="col1"&gt;Introduction&lt;/entry&gt; &lt;entry
                    align="right" colname="col3"&gt;[1]&lt;/entry&gt; &lt;/row&gt; &lt;row&gt;
                    &lt;entry align="left" nameend="col2" namest="col1"&gt;Mental health legislation
                    concerning informal patients&lt;/entry&gt; &lt;entry align="right"
                    colname="col3"&gt;[6]&lt;/entry&gt; &lt;/row&gt; &lt;row&gt; &lt;entry
                    align="left" nameend="col2" namest="col1"&gt;Procedural background&lt;/entry&gt;
                    &lt;entry align="right" colname="col3"&gt;[15]&lt;/entry&gt; &lt;/row&gt;
                    &lt;row&gt; &lt;entry align="left" nameend="col2" namest="col1"&gt;Applicable
                    statutory provisions&lt;/entry&gt; &lt;entry align="right"
                    colname="col3"&gt;[22]&lt;/entry&gt; &lt;/row&gt; &lt;row&gt; &lt;entry
                    align="left" nameend="col2" namest="col1"&gt;The English position&lt;/entry&gt;
                    &lt;entry align="right" colname="col3"&gt;[33]&lt;/entry&gt; &lt;/row&gt;
                    &lt;row&gt; &lt;entry align="left" nameend="col2" namest="col1"&gt;Submissions
                    of parties&lt;/entry&gt; &lt;entry align="right"
                    colname="col3"&gt;[39]&lt;/entry&gt; &lt;/row&gt; &lt;row&gt; &lt;entry
                    align="left" nameend="col2" namest="col1"&gt;Protective provisions&lt;/entry&gt;
                    &lt;entry align="right" colname="col3"&gt;[43]&lt;/entry&gt; &lt;/row&gt;
                    &lt;row&gt; &lt;entry align="left" nameend="col2" namest="col1"&gt;The 1961 Act:
                    Crown authority to treat informal patients&lt;/entry&gt; &lt;entry align="right"
                    colname="col3"&gt;[45]&lt;/entry&gt; &lt;/row&gt; &lt;row&gt; &lt;entry
                    align="left" nameend="col2" namest="col1"&gt;Leave requirements&lt;/entry&gt;
                    &lt;entry align="right" colname="col3"&gt;[50]&lt;/entry&gt; &lt;/row&gt;
                    &lt;row&gt; &lt;entry align="left" nameend="col2" namest="col1"&gt;The 1969
                    Act&lt;/entry&gt; &lt;entry align="right" colname="col3"&gt; &lt;/entry&gt;
                    &lt;/row&gt; &lt;row&gt; &lt;entry/&gt; &lt;entry align="left"
                    colname="col2"&gt;(a) Crown authority to treat informal patients&lt;/entry&gt;
                    &lt;entry align="right" colname="col3"&gt;[54]&lt;/entry&gt; &lt;/row&gt;
                    &lt;row&gt; &lt;entry/&gt; &lt;entry align="left" colname="col2"&gt;(b)
                    Authority of hospital boards to treat informal patients&lt;/entry&gt; &lt;entry
                    align="right" colname="col3"&gt;[56]&lt;/entry&gt; &lt;/row&gt; &lt;row&gt;
                    &lt;entry align="left" nameend="col2" namest="col1"&gt;Conclusion&lt;/entry&gt;
                    &lt;entry align="right" colname="col3"&gt;[75]&lt;/entry&gt; &lt;/row&gt;
                    &lt;/tbody&gt; &lt;/tgroup&gt; &lt;/table&gt; </codeblock>
            </example> <example>
                <title>Target XML</title>
                <codeblock> &lt;table frame="none"&gt; &lt;tgroup cols="3"&gt; &lt;colspec
                    colname="col1" colnum="1" colwidth="5*"/&gt; &lt;colspec colname="col2"
                    colnum="2" colwidth="83*"/&gt; &lt;colspec align="left" colname="col3"
                    colnum="3" colwidth="12*"/&gt; &lt;thead&gt; &lt;row&gt; &lt;entry
                    align="center" nameend="col3" namest="col1"&gt;&lt;emph typestyle="bf"&gt;Table
                    of contents&lt;/emph&gt;&lt;/entry&gt; &lt;/row&gt; &lt;row&gt;
                    &lt;entry/&gt;&lt;entry/&gt; &lt;entry align="right" colname="col3"&gt;&lt;emph
                    typestyle="bf"&gt;Para no&lt;/emph&gt;&lt;/entry&gt; &lt;/row&gt; &lt;/thead&gt;
                    &lt;tbody&gt; &lt;row&gt; &lt;entry align="left" nameend="col2"
                    namest="col1"&gt;Introduction&lt;/entry&gt; &lt;entry align="right"
                    colname="col3"&gt;[1]&lt;/entry&gt; &lt;/row&gt; &lt;row&gt; &lt;entry
                    align="left" nameend="col2" namest="col1"&gt;Mental health legislation
                    concerning informal patients&lt;/entry&gt; &lt;entry align="right"
                    colname="col3"&gt;[6]&lt;/entry&gt; &lt;/row&gt; &lt;row&gt; &lt;entry
                    align="left" nameend="col2" namest="col1"&gt;Procedural background&lt;/entry&gt;
                    &lt;entry align="right" colname="col3"&gt;[15]&lt;/entry&gt; &lt;/row&gt;
                    &lt;row&gt; &lt;entry align="left" nameend="col2" namest="col1"&gt;Applicable
                    statutory provisions&lt;/entry&gt; &lt;entry align="right"
                    colname="col3"&gt;[22]&lt;/entry&gt; &lt;/row&gt; &lt;row&gt; &lt;entry
                    align="left" nameend="col2" namest="col1"&gt;The English position&lt;/entry&gt;
                    &lt;entry align="right" colname="col3"&gt;[33]&lt;/entry&gt; &lt;/row&gt;
                    &lt;row&gt; &lt;entry align="left" nameend="col2" namest="col1"&gt;Submissions
                    of parties&lt;/entry&gt; &lt;entry align="right"
                    colname="col3"&gt;[39]&lt;/entry&gt; &lt;/row&gt; &lt;row&gt; &lt;entry
                    align="left" nameend="col2" namest="col1"&gt;Protective provisions&lt;/entry&gt;
                    &lt;entry align="right" colname="col3"&gt;[43]&lt;/entry&gt; &lt;/row&gt;
                    &lt;row&gt; &lt;entry align="left" nameend="col2" namest="col1"&gt;The 1961 Act:
                    Crown authority to treat informal patients&lt;/entry&gt; &lt;entry align="right"
                    colname="col3"&gt;[45]&lt;/entry&gt; &lt;/row&gt; &lt;row&gt; &lt;entry
                    align="left" nameend="col2" namest="col1"&gt;Leave requirements&lt;/entry&gt;
                    &lt;entry align="right" colname="col3"&gt;[50]&lt;/entry&gt; &lt;/row&gt;
                    &lt;row&gt; &lt;entry align="left" nameend="col2" namest="col1"&gt;The 1969
                    Act&lt;/entry&gt; &lt;entry align="right" colname="col3"&gt; &lt;/entry&gt;
                    &lt;/row&gt; &lt;row&gt; &lt;entry/&gt; &lt;entry align="left"
                    colname="col2"&gt;(a) Crown authority to treat informal patients&lt;/entry&gt;
                    &lt;entry align="right" colname="col3"&gt;[54]&lt;/entry&gt; &lt;/row&gt;
                    &lt;row&gt; &lt;entry/&gt; &lt;entry align="left" colname="col2"&gt;(b)
                    Authority of hospital boards to treat informal patients&lt;/entry&gt; &lt;entry
                    align="right" colname="col3"&gt;[56]&lt;/entry&gt; &lt;/row&gt; &lt;row&gt;
                    &lt;entry align="left" nameend="col2" namest="col1"&gt;Conclusion&lt;/entry&gt;
                    &lt;entry align="right" colname="col3"&gt;[75]&lt;/entry&gt; &lt;/row&gt;
                    &lt;/tbody&gt; &lt;/tgroup&gt; &lt;/table&gt; </codeblock>
            </example> <section>
                <title>Changes</title>
                <p>2014-07-08: <ph id="change_20140708_SS">Updated instruction for added the
                        following rarely occurring attributes <sourcexml>@char</sourcexml> inside
                        the <sourcexml>entry</sourcexml>.</ph></p>
                <p>2014-06-04: <ph id="change_20140604_JCG">For completeness, added instructions for
                        the following rarely occurring attributes of
                            <sourcexml>table/tgroup/colspec</sourcexml>:
                            <sourcexml>@align</sourcexml>, <sourcexml>@char</sourcexml>,
                            <sourcexml>@charoff</sourcexml>, <sourcexml>@colsep</sourcexml>,
                            <sourcexml>@id</sourcexml>, <sourcexml>@rowsep</sourcexml>,
                            <sourcexml>@searchtype</sourcexml>, and
                        <sourcexml>@xml:lang</sourcexml>. This is in response to various minor
                        questions on message boards that have been asked and answered over the past
                        two years. These instructions should not trigger changes to existing
                        conversion programs, as the programs have already been changed in response
                        to previous message board answers. These instructions have been added so
                        this topic is up-to-date with respect to current conversion program behavior
                        for these rarely occuring attributes.</ph></p>
                <p>2013-09-16: <ph id="change_20130916_JCG">Removed an obsolete note regarding
                        visual styling of tables.</ph></p>
                <!--SP: 2013-09-16 added ph element so auto change log catches grabs it. Added webteam numbers 235130, 235126.-->
                <p>2013-09-12: <ph id="change_20130912_Rosetta_table_to-LexisAdvance_table_SP"
                        >WebTeam #s 235116, 235130, 235126: Added instructions for deleting
                        extraneous instances of @morerows, @colsep and @rowsep. These instructions
                        apply immediately to all UK streams and also to AU18.</ph></p>
                <p>2012-01-12: Added a note for handling multiple tgroup. </p>
                <p>2011-12-15: Created. </p>
            </section>
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_table-LxAdv-table.dita  -->

    <!--  @SBy:  this is from QC XSLT.  Should it appear here?  -->
    <!-- BRT: process table with page elements (break table in row before each row//page, create ref:page, create another table starting from row//page -->
    <xsl:template match="table[descendant::entry/descendant::page]" priority="15">
        <!-- BRT create a separate table before the start of a row that contains entry/descendant::page -->
        <xsl:for-each-group select=".//row" group-starting-with="row[entry/descendant::page]">
            <!-- BRT: If there is a ref:page in the current-group(), create the ref:page first -->
            <xsl:if test="current-group()//page">
                <xsl:element name="ref:page">
                    <xsl:attribute name="num">
                        <xsl:value-of select="translate(current-group()//page/@count, ',', '')"/>
                    </xsl:attribute>
                    <xsl:if test="current-group()//page/@reporter">
                        <xsl:attribute name="page-scheme">
                            <xsl:value-of
                                select="translate(current-group()//page/@reporter, ' ', '_')"/>
                        </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="current-group()//page/@subdoc">
                        <xsl:attribute name="includeintoc">
                            <xsl:value-of select="current-group()//page/@subdoc"/>
                        </xsl:attribute>
                    </xsl:if>
                    <xsl:attribute name="page-scheme-type">
                        <xsl:text>reporter-abbreviation</xsl:text>
                    </xsl:attribute>
                </xsl:element>
            </xsl:if>
            <!-- BRT create separate table for each group -->
            <xsl:element name="table"
                namespace="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                <!-- BRT: Convert table, tgroup, and colspec  -->
                <xsl:copy-of select="ancestor::table/(@* except @id)"/>
                <xsl:if test="ancestor::table/@id">
                    <xsl:variable name="count" select="position()"/>
                    <xsl:for-each select="ancestor::table/@id">
                        <xsl:attribute name="xml:id">
                            <xsl:value-of select="concat(ancestor::table/@id, '_', $count)"/>
                        </xsl:attribute>
                    </xsl:for-each>
                </xsl:if>
                <xsl:element name="tgroup"
                    namespace="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <xsl:copy-of select="ancestor::table[1]/tgroup/@*"/>
                    <xsl:for-each select="ancestor::table[1]//colspec">
                        <xsl:element name="colspec"
                            namespace="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                            <xsl:copy-of select="@*"/>
                            <xsl:apply-templates/>
                        </xsl:element>
                    </xsl:for-each>
                    <xsl:for-each select="ancestor::table[1]//thead">
                        <xsl:element name="thead"
                            namespace="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                            <xsl:copy-of select="@*"/>
                            <xsl:apply-templates/>
                        </xsl:element>
                    </xsl:for-each>
                    <xsl:element name="tbody"
                        namespace="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                        <xsl:copy-of select="ancestor::table[1]//tbody/@*"/>
                        <!-- apply all the rows of the current group to the current table -->
                        <xsl:apply-templates select="current-group()"/>
                    </xsl:element>
                </xsl:element>
            </xsl:element>
        </xsl:for-each-group>
    </xsl:template>

    <!--  @SBy:  modified from QC XSLT  -->
    <!-- 2017-10-17 - MDS: Added choose statment due to webstar 7025682.   -->
    <!-- 2017-11-16 - CSN: Added UK03|case:dicisionsummary to existing 'when'.  webstar 7050317.   -->
    <xsl:template match="table" name="table">
        <xsl:choose>
            <xsl:when
                test="parent::entry or ((parent::case:decisionsummary or parent::case:typeofcase) and $streamID = 'UK03')">
                <p>
                    <table xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                        <xsl:copy-of select="@frame | @pgwide"/>
                        <!--  @SBy:  only @frame is in DITA  -->

                        <!--  @SBy:  note @colsep | @rowsep addressed specifically in other template rules below  -->
                        <xsl:apply-templates select="@* except (@frame, @pgwide)"/>
                        <xsl:apply-templates/>

                    </table>
                </p>
            </xsl:when>
            <!-- MDS - 2018-02-09 - Added to handle those otherwise empty tables that seem to be in the development data.  STREAM SPECIFIC -->
            <!-- Awantika- 2018-10-04- Added choose for NZ14 to create table inside bodytext/p. W* 7136101 -->
            <xsl:when
                test="$streamID = 'AU16' and not(tgroup/tbody/row/entry[2]) and not(tgroup/tbody/row[2]) and tgroup/tbody/row/entry[contains(normalize-space(.), 'Â')]"/>
            <xsl:otherwise>
                <xsl:choose>
                    <xsl:when test="parent::p[parent::bodytext/parent::level][$streamID = 'NZ14']">
                        <bodytext>
                            <p>
                                <table
                                    xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                                    <!--Ravikant: tablealign attribute handling webstar no 7046647  -->
                                    <xsl:if test="./@tablealign">
                                        <xsl:attribute name="lntbl:table-align">
                                            <xsl:value-of select="./@tablealign"/>
                                        </xsl:attribute>
                                    </xsl:if>
                                    <xsl:copy-of select="@frame"/>
                                    <!-- BRT 11/16/17 added special handling for @pgwide in UK content. If value is '0', output is '0', otherwise, the output is '1' -->
                                    <xsl:choose>
                                        <xsl:when
                                            test="$streamID = ('UK01', 'UK02', 'UK05', 'UK08CA', 'UK08OR', 'UK09', 'UK10', 'UK15', 'UK17', 'UK18', 'UK20', 'UK22LF')">
                                            <xsl:if test="@pgwide">
                                                <xsl:attribute name="pgwide">
                                                  <xsl:choose>
                                                  <xsl:when test="@pgwide = '0'">
                                                  <xsl:value-of select="'0'"/>
                                                  </xsl:when>
                                                  <xsl:otherwise>
                                                  <xsl:value-of select="'1'"/>
                                                  </xsl:otherwise>
                                                  </xsl:choose>
                                                </xsl:attribute>
                                            </xsl:if>
                                        </xsl:when>

                                        <xsl:otherwise>
                                            <xsl:copy-of select="@pgwide"/>
                                        </xsl:otherwise>

                                    </xsl:choose>
                                    <xsl:copy-of select="@frame"/>
                                    <!--  @SBy:  only @frame is in DITA  -->

                                    <!--  @SBy:  note @colsep | @rowsep addressed specifically in other template rules below  -->
                                    <xsl:apply-templates
                                        select="@* except (@frame, @pgwide, @tablealign)"/>
                                    <xsl:apply-templates/>

                                </table>
                            </p>
                        </bodytext>
                    </xsl:when>
                    <xsl:otherwise>
                        <table xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                            <!--Ravikant: tablealign attribute handling webstar no 7046647  -->
                            <xsl:if test="./@tablealign">
                                <xsl:attribute name="lntbl:table-align">
                                    <xsl:value-of select="./@tablealign"/>
                                </xsl:attribute>
                            </xsl:if>
                            <xsl:copy-of select="@frame"/>
                            <!-- BRT 11/16/17 added special handling for @pgwide in UK content. If value is '0', output is '0', otherwise, the output is '1' -->
                            <xsl:choose>
                                <xsl:when
                                    test="$streamID = ('UK01', 'UK02', 'UK05', 'UK08CA', 'UK08OR', 'UK09', 'UK10', 'UK15', 'UK17', 'UK18', 'UK20', 'UK22LF')">
                                    <xsl:if test="@pgwide">
                                        <xsl:attribute name="pgwide">
                                            <xsl:choose>
                                                <xsl:when test="@pgwide = '0'">
                                                  <xsl:value-of select="'0'"/>
                                                </xsl:when>
                                                <xsl:otherwise>
                                                  <xsl:value-of select="'1'"/>
                                                </xsl:otherwise>
                                            </xsl:choose>
                                        </xsl:attribute>
                                    </xsl:if>
                                </xsl:when>

                                <xsl:otherwise>
                                    <xsl:copy-of select="@pgwide"/>
                                </xsl:otherwise>

                            </xsl:choose>
                            <xsl:copy-of select="@frame"/>
                            <!--  @SBy:  only @frame is in DITA  -->

                            <!--  @SBy:  note @colsep | @rowsep addressed specifically in other template rules below  -->
                            <xsl:apply-templates select="@* except (@frame, @pgwide, @tablealign)"/>
                            <xsl:apply-templates/>

                        </table>
                    </xsl:otherwise>
                </xsl:choose>

            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>


    <xsl:template match="tgroup">

        <tgroup xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <xsl:copy-of select="@cols"/>

            <!--  @SBy:  note @colsep | @rowsep addressed specifically in other template rules below  -->
            <xsl:apply-templates select="@* except @cols"/>
            <xsl:apply-templates/>

        </tgroup>

    </xsl:template>

    <xsl:template match="tgroup/@align">
        <xsl:copy-of select="."/>
    </xsl:template>

    <xsl:template match="colspec">
        <colspec xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <xsl:copy-of select="@align | @char | @charoff | @colname | @colnum | @xml:lang"/>

            <!--  @SBy:  note @colsep | @rowsep addressed specifically in other template rules below  -->
            <xsl:apply-templates
                select="@* except (@align, @char, @charoff, @colname, @colnum, @xml:lang)"/>
            <xsl:apply-templates/>

            <!--  ***NOTE  -  see DITA regarding conversions of @colwidth values; does the DT code do any of that?  ***  -->

        </colspec>

    </xsl:template>

    <xsl:template match="colspec/@colwidth">
        <xsl:attribute name="colwidth">
            <!--<xsl:value-of select="."/>-->
            <xsl:analyze-string select="." regex="([0-9]+)([*]|[a-z]+)">
                <xsl:matching-substring>
                    <xsl:choose>
                        <xsl:when test="regex-group(2) = 'in'">
                            <xsl:variable name="var1">
                                <xsl:value-of select="number(regex-group(1)) * 96"/>
                            </xsl:variable>
                            <xsl:value-of select="$var1"/>
                            <xsl:value-of select="concat($var1, '*')"/>
                        </xsl:when>
                        <xsl:when test="regex-group(2) = 'cm'">
                            <xsl:variable name="var1">
                                <xsl:value-of select="number(regex-group(1)) * 37.7952755904"/>
                            </xsl:variable>
                            <xsl:value-of select="concat(substring-before($var1, '.'), '*')"/>
                        </xsl:when>
                        <xsl:when test="regex-group(2) = 'mm'">
                            <xsl:variable name="var1">
                                <xsl:value-of select="number(regex-group(1)) * 3.77952755904"/>
                            </xsl:variable>
                            <xsl:value-of select="concat(substring-before($var1, '.'), '*')"/>
                        </xsl:when>
                        <xsl:when test="regex-group(2) = 'pt'">
                            <xsl:variable name="var1">
                                <xsl:value-of select="number(regex-group(1)) * 1"/>
                            </xsl:variable>
                            <xsl:value-of select="concat($var1, '*')"/>
                        </xsl:when>
                        <xsl:otherwise>
                            <xsl:value-of select="concat(regex-group(1), '*')"/>
                        </xsl:otherwise>
                    </xsl:choose>
                </xsl:matching-substring>
            </xsl:analyze-string>
        </xsl:attribute>

    </xsl:template>

    <!-- SNB 2017-10-17 creating a new template that I think probably oght to be the template for all rosetta conversions for colwidth... 
		the above template creates flat out WRONG rarget markup when here's a decimal ( colwidth="78.50pt" resulted in 
		  colwidth="50*", and  colwidth="80.00pt" resulted in  colwidth="0*"), and catching an empty column width seems wise in general. 
		  For LPA, we need to catch numbers with no * or units, which none of these templates do. The ones below for NZ111 and AU10 catch 
		  decimal numbers well, but not the case of no units or *. -->
    <xsl:template match="colspec[$streamID = ('USLPA')]/@colwidth" priority="3">
        <xsl:attribute name="colwidth">

            <xsl:choose>
                <!-- empty colwidth -->
                <xsl:when test="normalize-space(.) = ''">
                    <!-- converts empty colwidth to "*" -->
                    <xsl:value-of select="'*'"/>
                </xsl:when>
                <!-- only a number, no decimal, no units, add * at end -->
                <xsl:when test="(not(matches(., '[a-z\.*]+', 'i')))">
                    <xsl:value-of select="concat(., '*')"/>
                </xsl:when>
                <!-- only a DECIMAL number, no units, strip decimal and following numbers and add * at end -->
                <xsl:when test="(not(matches(., '[a-z*]+', 'i')))">
                    <xsl:analyze-string select="." regex="([0-9]+)(\.+)([0-9]+)">
                        <xsl:matching-substring>
                            <!--Dont need to choose; just use regex-group(1) and throw rest away-->
                            <xsl:value-of select="concat(regex-group(1), '*')"/>
                        </xsl:matching-substring>
                        <xsl:non-matching-substring/>
                    </xsl:analyze-string>
                </xsl:when>
                <!-- number with decimal, with units, strip decimal, convert to specified unit, and add * at end -->
                <xsl:when test="(matches(., '[0-9]+[\.][0-9]*([*]|[a-z]+)', 'i'))">
                    <xsl:analyze-string select="." regex="([0-9\.]+)([*]|[a-zA-Z]+)">
                        <xsl:matching-substring>
                            <xsl:variable name="wholenumber"
                                select="number(substring-before(regex-group(1), '.'))"/>
                            <xsl:choose>
                                <xsl:when test="lower-case(regex-group(2)) = 'in'">
                                    <xsl:variable name="var1">
                                        <xsl:value-of select="number($wholenumber) * 96"/>
                                    </xsl:variable>
                                    <xsl:value-of select="concat($var1, '*')"/>
                                </xsl:when>
                                <xsl:when test="lower-case(regex-group(2)) = 'cm'">
                                    <xsl:variable name="var1">
                                        <xsl:value-of select="number($wholenumber) * 37.7952755904"
                                        />
                                    </xsl:variable>
                                    <xsl:value-of select="concat(substring-before($var1, '.'), '*')"
                                    />
                                </xsl:when>
                                <xsl:when test="lower-case(regex-group(2)) = 'mm'">
                                    <xsl:variable name="var1">
                                        <xsl:value-of select="number($wholenumber) * 3.77952755904"
                                        />
                                    </xsl:variable>
                                    <xsl:value-of select="concat(substring-before($var1, '.'), '*')"
                                    />
                                </xsl:when>
                                <xsl:when test="lower-case(regex-group(2)) = 'pt'">
                                    <xsl:variable name="var1">
                                        <xsl:value-of select="number($wholenumber) * 1"/>
                                    </xsl:variable>
                                    <xsl:value-of select="concat($var1, '*')"/>
                                </xsl:when>
                                <xsl:otherwise>
                                    <xsl:value-of select="concat($wholenumber, '*')"/>
                                </xsl:otherwise>
                            </xsl:choose>
                        </xsl:matching-substring>
                    </xsl:analyze-string>
                </xsl:when>
                <!-- number without decimal, with units, convert to specified unit, and add * at end -->
                <xsl:when test="(matches(., '[0-9]+([*]|[a-z]+)', 'i'))">
                    <xsl:analyze-string select="." regex="([0-9]+)([*]|[a-zA-Z]+)">
                        <xsl:matching-substring>
                            <xsl:choose>
                                <xsl:when test="lower-case(regex-group(2)) = 'in'">
                                    <xsl:variable name="var1">
                                        <xsl:value-of select="number(regex-group(1)) * 96"/>
                                    </xsl:variable>
                                    <xsl:value-of select="concat($var1, '*')"/>
                                </xsl:when>
                                <xsl:when test="lower-case(regex-group(2)) = 'cm'">
                                    <xsl:variable name="var1">
                                        <xsl:value-of
                                            select="number(regex-group(1)) * 37.7952755904"/>
                                    </xsl:variable>
                                    <xsl:value-of select="concat(substring-before($var1, '.'), '*')"
                                    />
                                </xsl:when>
                                <xsl:when test="lower-case(regex-group(2)) = 'mm'">
                                    <xsl:variable name="var1">
                                        <xsl:value-of
                                            select="number(regex-group(1)) * 3.77952755904"/>
                                    </xsl:variable>
                                    <xsl:value-of select="concat(substring-before($var1, '.'), '*')"
                                    />
                                </xsl:when>
                                <xsl:when test="lower-case(regex-group(2)) = 'pt'">
                                    <xsl:variable name="var1">
                                        <xsl:value-of select="number(regex-group(1)) * 1"/>
                                    </xsl:variable>
                                    <xsl:value-of select="concat($var1, '*')"/>
                                </xsl:when>
                                <xsl:otherwise>
                                    <xsl:value-of select="concat(regex-group(1), '*')"/>
                                </xsl:otherwise>
                            </xsl:choose>
                        </xsl:matching-substring>
                    </xsl:analyze-string>
                </xsl:when>
                <!-- unsupported format -->
                <xsl:otherwise>
                    <!-- output whatever was in colwidth -->
                    <xsl:value-of select="."/>
                    <!-- generate warning -->
                    <xsl:call-template name="outputErrorMessage">
                        <xsl:with-param name="messageText" as="xs:string"
                            select="concat('ERROR: unexpected format for @colwidth: ', .)"/>
                        <xsl:with-param name="errorType" as="xs:string" select="'ROCKET'"/>
                        <xsl:with-param name="errorCode" as="xs:string*" select="'405'"/>
                        <xsl:with-param name="context" as="xs:string">
                            <xsl:call-template name="generateXPath"/>
                        </xsl:with-param>
                    </xsl:call-template>
                </xsl:otherwise>
            </xsl:choose>

        </xsl:attribute>
    </xsl:template>

    <xsl:template match="colspec[$streamID = ('NZ11', 'AU10')]/@colwidth[. = '']" priority="2">
        <!-- converts empty colwidth to "*" -->
        <xsl:attribute name="colwidth">*</xsl:attribute>
    </xsl:template>
    <xsl:template match="colspec[$streamID = ('NZ11', 'AU10')]/@colwidth[contains(., '.')]"
        priority="2">
        <!-- for use when there is a decimal value in @colwidth.  it truncates the whole number and passes it through -->
        <xsl:attribute name="colwidth">
            <!--<xsl:value-of select="."/>-->
            <xsl:analyze-string select="." regex="([0-9\.]+)([*]|[a-z]+)">
                <xsl:matching-substring>
                    <xsl:variable name="wholenumber"
                        select="number(substring-before(regex-group(1), '.'))"/>
                    <xsl:choose>
                        <xsl:when test="regex-group(2) = 'in'">
                            <xsl:variable name="var1">
                                <xsl:value-of select="number($wholenumber) * 96"/>
                            </xsl:variable>
                            <xsl:value-of select="$var1"/>
                            <xsl:value-of select="concat($var1, '*')"/>
                        </xsl:when>
                        <xsl:when test="regex-group(2) = 'cm'">
                            <xsl:variable name="var1">
                                <xsl:value-of select="number($wholenumber) * 37.7952755904"/>
                            </xsl:variable>
                            <xsl:value-of select="concat(substring-before($var1, '.'), '*')"/>
                        </xsl:when>
                        <xsl:when test="regex-group(2) = 'mm'">
                            <xsl:variable name="var1">
                                <xsl:value-of select="number($wholenumber) * 3.77952755904"/>
                            </xsl:variable>
                            <xsl:value-of select="concat(substring-before($var1, '.'), '*')"/>
                        </xsl:when>
                        <xsl:when test="regex-group(2) = 'pt'">
                            <xsl:variable name="var1">
                                <xsl:value-of select="number($wholenumber) * 1"/>
                            </xsl:variable>
                            <xsl:value-of select="concat($var1, '*')"/>
                        </xsl:when>
                        <xsl:otherwise>
                            <xsl:value-of select="concat($wholenumber, '*')"/>
                        </xsl:otherwise>
                    </xsl:choose>
                </xsl:matching-substring>
            </xsl:analyze-string>

        </xsl:attribute>

    </xsl:template>

    <xsl:template match="colspec/@searchtype"/>

    <!--	  .... In the absence of specific instructions elsewhere
			  in the CI, <sourcexml>@id</sourcexml> is dropped.</li>  -->
    <!--  ***NOTE  -  NEED TO ADD TO THE $streamID LIST ALL STREAMS THAT HAVE SPECIFIC INSTRUCTIONS ON colspec/@id HANDLING!!!  ***  -->
    <xsl:template match="colspec/@id[not($streamID = ('XX', 'YY', 'ZZ'))]"/>

    <xsl:template
        match="*[self::table or self::tgroup or self::colspec or self::thead or self::tbody or self::row or self::entry]/@morerows[. = '0']"/>

    <!-- I think we want to preserve morerows if they're not 0, otherwise we lose formatting -->
    <xsl:template
        match="*[self::table or self::tgroup or self::colspec or self::thead or self::tbody or self::row or self::entry]/@morerows[. != '0']">
        <xsl:copy-of select="."/>
    </xsl:template>

    <!--  <li>If ALL occurrences of @colsep in one table have a value of
						zero, remove them all from that table.
				</li>
				<li>If ALL occurrences of @rowsep in one table have a value of zero,
					remove them all from that table. </li>  -->
    <xsl:template
        match="*[self::table or self::tgroup or self::colspec or self::thead or self::tbody or self::row or self::entry]/@colsep[. = '0'][not(ancestor-or-self::table//@colsep[. != '0'])]"/>
    <xsl:template
        match="*[self::table or self::tgroup or self::colspec or self::thead or self::tbody or self::row or self::entry]/@rowsep[. = '0'][not(ancestor-or-self::table//@rowsep[. != '0'])]"/>
    <xsl:template
        match="*[self::table or self::tgroup or self::colspec or self::thead or self::tbody or self::row or self::entry]/@colsep[ancestor-or-self::table//@colsep[. != '0']]">
        <xsl:copy-of select="."/>
    </xsl:template>
    <xsl:template
        match="*[self::table or self::tgroup or self::colspec or self::thead or self::tbody or self::row or self::entry]/@rowsep[ancestor-or-self::table//@rowsep[. != '0']]">
        <xsl:copy-of select="."/>
    </xsl:template>

    <xsl:template match="thead">

        <thead xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <xsl:apply-templates select="@* | node()"/>
        </thead>

    </xsl:template>

    <xsl:template match="row">

        <row xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <xsl:apply-templates select="@* | node()"/>
        </row>

    </xsl:template>

    <xsl:template match="entry">
        <!-- Awantika: For AU20 entry becomes  primlawhist:histitemdiv/textitem for different @id-->
        <xsl:variable name="docinfoidtext" select="/*/docinfo/docinfo:doc-id/text()"/>
        <xsl:choose>
            <xsl:when test="contains(lower-case($docinfoidtext), 'history') and $streamID = 'AU20'">
                <!--<primlawhist:histitem>-->
                <xsl:if test="@id = 'HI5'">
                    <primlawhist:histitemdiv>
                        <xsl:attribute name="divtype">heading</xsl:attribute>
                        <xsl:attribute name="status">assent</xsl:attribute>
                        <textitem>
                            <xsl:apply-templates/>
                        </textitem>
                    </primlawhist:histitemdiv>
                </xsl:if>
                <xsl:if test="@id = 'HI7'">
                    <primlawhist:histitemdiv>
                        <xsl:attribute name="divtype">text</xsl:attribute>
                        <xsl:attribute name="status">assent</xsl:attribute>
                        <textitem>
                            <date>
                                <xsl:apply-templates/>
                            </date>
                        </textitem>
                    </primlawhist:histitemdiv>
                </xsl:if>
                <xsl:if test="@id = 'HI6'">
                    <primlawhist:histitemdiv>
                        <!-- Awantika:2017-11-02: Updated for entry/p-limited to create only one textitem -->
                        <xsl:choose>
                            <xsl:when test="child::p-limited">
                                <xsl:apply-templates/>
                            </xsl:when>
                            <xsl:otherwise>
                                <textitem>
                                    <xsl:apply-templates/>
                                </textitem>
                            </xsl:otherwise>
                        </xsl:choose>

                    </primlawhist:histitemdiv>
                </xsl:if>
                <xsl:if test="normalize-space(.) = 'Date of assent'">
                    <primlawhist:histitemdiv>
                        <textitem>
                            <xsl:apply-templates/>
                        </textitem>
                    </primlawhist:histitemdiv>
                </xsl:if>
                <!--</primlawhist:histitem>-->
            </xsl:when>
            <xsl:when test="contains(lower-case($docinfoidtext), 'cases') and $streamID = 'AU20'">
                <xsl:apply-templates/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:choose>
                    <xsl:when
                        test="$streamID = 'AU20' and contains(lower-case($docinfoidtext), 'overview')">
                        <xsl:apply-templates/>
                    </xsl:when>
                    <xsl:otherwise>
                        <entry xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                            <!-- NOTE: @colsep and @rowsep should be handled above -->
                            <xsl:copy-of
                                select="@align | @char | @charoff | @colname | @nameend | @namest | @valign"/>

                            <xsl:apply-templates
                                select="@* except (@align, @char, @charoff, @colname, @nameend, @namest, @valign)"/>
                            <xsl:apply-templates/>

                        </entry>
                    </xsl:otherwise>
                </xsl:choose>

            </xsl:otherwise>
        </xsl:choose>


    </xsl:template>

    <xsl:template match="tbody">

        <tbody xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <xsl:apply-templates select="@* | node()"/>
        </tbody>

    </xsl:template>

    <xsl:template match="tbody/@valign">
        <xsl:copy-of select="."/>
    </xsl:template>

    <xsl:template match="row/@valign">
        <xsl:copy-of select="."/>
    </xsl:template>

    <!-- Suppressed the highlight 	-->
    <xsl:template match="entry/@highlight"/>



    <!-- JD: 2017-06-13: added to "entry" above -->
    <!--	<xsl:template match="entry/@valign">
		<xsl:copy-of select="."/>
	</xsl:template>
	
	<xsl:template match="entry/@align">
		<xsl:copy-of select="."/>
	</xsl:template>
-->
    <!--JL Got an error due to not dealing with thead/@valign -->

    <xsl:template match="thead/@valign">
        <xsl:copy-of select="."/>
    </xsl:template>

    <xsl:template match="table/@frame">
        <xsl:copy-of select="."/>
    </xsl:template>

    <xsl:template match="table/@pgwide"/>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_text_to-LexisAdvance_text">
        <title><sourcexml>text</sourcexml> to <targetxml>text</targetxml>
            <lnpid>id-CCCC-10477</lnpid></title>
        <body>
            <section>
                <title>Instructions <i>[common element]</i></title>
                <p><sourcexml>text</sourcexml> becomes <targetxml>text</targetxml>, and optional
                    attributes <sourcexml>@cont</sourcexml> should be suppressed from conversion,
                        <sourcexml>@align</sourcexml> becomes <targetxml>@align</targetxml> must
                    only be used to preserve mandated horizontal spacing and
                        <targetxml>@align</targetxml> will be moved in parent
                        <targetxml>p</targetxml> in New Lexis conversion. <codeblock>
                        &lt;p&gt;&lt;text align="right"&gt;TOBY HALLIGAN&lt;/text&gt;&lt;/p&gt; </codeblock>
                    <b>Becomes</b>
                    <codeblock> &lt;p align="right"&gt;&lt;text&gt;TOBY
                        HALLIGAN&lt;/text&gt;&lt;/p&gt; </codeblock>
                </p>
            </section>
            <note><b>(For CANADA Content Stream only )</b>Only move the <sourcexml>
                    text@align</sourcexml> to the parent <targetxml>p</targetxml> if it is the only
                text in <sourcexml>p</sourcexml>, Otherwise, wrap the <sourcexml>text</sourcexml>
                with <targetxml>p</targetxml> and move the <sourcexml>@align</sourcexml> attribute
                to the newly created <targetxml> p</targetxml>.</note>
            <section>
                <codeblock> &lt;p&gt; &lt;text&gt;Dated at Calgary, Alberta this 31 day of March
                    1998.&lt;/text&gt; &lt;text&gt;The Honourable W. Kenneth Moore, Chief Justice of
                    the Court of Queen's Bench of Alberta&lt;/text&gt; &lt;text
                    align="center"&gt;ALBERTA RULES&lt;/text&gt; &lt;text&gt;Rules of practice made
                    pursuant to subsection 745.64 of the Criminal Code to reflect the changes made
                    to the Criminal Code regarding applications for reduction in the number of years
                    of imprisonment without eligibility for parole.&lt;/text&gt; &lt;/p&gt; </codeblock>
                <b>Becomes</b>
                <codeblock> &lt;p&gt; &lt;text&gt;Dated at Calgary, Alberta this 31 day of March
                    1998.&lt;/text&gt; &lt;text&gt;The Honourable W. Kenneth Moore, Chief Justice of
                    the Court of Queen's Bench of Alberta&lt;/text&gt; &lt;/p&gt; &lt;p
                    align="center"&gt; &lt;text&gt;ALBERTA RULES&lt;/text&gt; &lt;/p&gt; &lt;p&gt;
                    &lt;text&gt;Rules of practice made pursuant to subsection 745.64 of the Criminal
                    Code to reflect the changes made to the Criminal Code regarding applications for
                    reduction in the number of years of imprisonment without eligibility for
                    parole.&lt;/text&gt; &lt;/p&gt; </codeblock>
            </section>
            <section>
                <title>Changes</title>
                <p>2011-12-21: Added instruction for attribute align. </p>
                <p>2011-04-28: Added instruction for attribute cont. </p>
                <p>2012-08-30: Moved form/bodytext/text scenario to
                    Rosetta_form_bodytext_text-to-LexisAdvance_form.text.dita.</p>
                <p>2014-01-31: <ph id="change_20140131_AB">Updated instruction,
                            <targetxml>align</targetxml> will be moved in <targetxml>p</targetxml>
                        in NL conversion. NZ09 commentary discussion board issue for handling
                            <sourcexml>text/@align</sourcexml></ph></p>
                <p>2014-08-12: <ph id="change_20140811_SSX">For CANADA Content Stream: Only move the
                            <sourcexml> text@align</sourcexml> to the parent
                            <targetxml>p</targetxml> if it is the only text in
                            <sourcexml>p</sourcexml>, Otherwise, wrap the
                            <sourcexml>text</sourcexml> with <targetxml>p</targetxml> and move the
                            <sourcexml>@align</sourcexml> attribute to the newly created <targetxml>
                            p</targetxml>.</ph></p>
            </section>
        </body>
    </dita:topic>


    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_text-LxAdv-text.dita  -->


    <!-- *****************************************************************************
         * NOTE: @align handling including CA exception is addressed in              *
         * /XSLT/ContentArch/Rosetta-to-LA/modules/nonamespace/Rosetta_p-LxAdv-p.xsl *
         * because it can't be run from p/text context node.                         *
         * NOTE: @nl is addressed here and not in                                    *
         * /XSLT/ContentArch/Rosetta-to-LA/modules/nonamespace/Rosetta_p-LxAdv-p.xsl *
         * because it can't be run from p context node.                              *
          ****************************************************************************-->

    <!-- JD: 2017-07-21: added trap for empty node or single whitespace to match DT output.  -->
    <xsl:template
        match="text[not(node()) or string() and normalize-space(replace(., '^[\t\p{Zs}]+$', '')) = '']"
        priority="2"/>



    <xsl:template match="text">
        <xsl:variable name="docinfoidtext" select="/*/docinfo/docinfo:doc-id/text()"/>
        <!--  Original Target XPath:  text   -->
        <xsl:choose>
            <xsl:when test="parent::p[@nl]">
                <xsl:call-template name="insert-vertical-space"/>
            </xsl:when>
            <xsl:otherwise>
                <!-- Awantika: For AU20 history text becomes textitem -->
                <xsl:choose>
                    <xsl:when
                        test="$streamID = 'AU20' and parent::p[parent::note[@notetype = 'xref'][parent::heading]] and contains(lower-case($docinfoidtext), 'history')">
                        <textitem>
                            <xsl:apply-templates/>
                        </textitem>
                    </xsl:when>
                    <xsl:when
                        test="$streamID = 'AU20' and parent::p[ancestor::source_cttr:annotations[@annotgroup = 'prov-am']] and contains(lower-case($docinfoidtext), 'history')">
                        <textitem>
                            <xsl:apply-templates/>
                        </textitem>
                    </xsl:when>
                    <!-- Awantika:2017-10-27: p/text will be converted to <textitem> for AU20 for specific scenario -->
                    <xsl:when
                        test="$streamID = 'AU20' and contains(lower-case($docinfoidtext), 'history') and parent::p[ancestor::source_cttr:annotations/heading/note[@id = 'HI4']] | child::heading/title[. = 'Assent']">
                        <textitem>
                            <xsl:apply-templates/>
                        </textitem>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:choose>
                            <xsl:when
                                test="$streamID = 'AU20' and contains(lower-case($docinfoidtext), 'overview') and ancestor::source_cttr:annotations[@id = 'OP3' or @id = 'OI7']/heading/note/l/li">
                                <xsl:apply-templates/>
                            </xsl:when>
                            <xsl:when
                                test="$streamID = 'AU20' and contains(lower-case($docinfoidtext), 'overview') and ancestor::source_cttr:annotations[@id = 'OP15']">
                                <xsl:apply-templates/>
                            </xsl:when>
                            <!-- Vikas Rohilla : Updated for the UK12                            -->
                            <xsl:when test="child::note[@notetype != 'xref'][$streamID = 'UK12']">
                                <xsl:apply-templates/>
                            </xsl:when>
                            <!--Ravikant:2017-12-12: p/inlineobject move in form:p/from:text/figure for hk07  -->
                            <xsl:when
                                test="$streamID = 'HK07' and parent::p[parent::bodytext[parent::level[@leveltype = 'prec' or @leveltype = 'prec.grp' or @leveltype = 'precgrp' or @leveltype = 'precgrp1' or @leveltype = 'precgrp2' or parent::comm.chap or ancestor::level[@leveltype = 'prec.grp']]]]">
                                <form:text>
                                    <xsl:apply-templates select="node()"/>
                                    <xsl:apply-templates
                                        select="following-sibling::inlineobject[parent::p]"/>
                                </form:text>
                            </xsl:when>
                            <!-- Awantika:2017-11-02: p/text will be converted to <textitem> for AU20 for specific scenario -->
                            <xsl:when
                                test="$streamID = 'AU20' and contains(lower-case($docinfoidtext), 'overview') and parent::p[ancestor::source_cttr:annotations[child::heading/note/h[. = 'Former Title'] or child::heading/title[. = 'Former Title']]/source_cttr:annot/leg:info/note]">
                                <xsl:apply-templates/>
                            </xsl:when>
                            <xsl:when
                                test="$streamID = 'AU20' and contains(lower-case($docinfoidtext), 'overview') and parent::p[ancestor::heading[child::title[starts-with(lower-case(.), 'international equivalents') or starts-with(lower-case(.), 'uniform equivalents')]]/note/l/li]">
                                <xsl:apply-templates/>
                            </xsl:when>
                            <xsl:otherwise>
                                <text
                                    xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                                    <!-- <xsl:apply-templates select="node() except refpt"/>-->
                                    <!-- Awantika: Updated, as refpt should not be created in the text element -->
                                    <!-- Priya Bardhan: Added ci:cite[@type='cite4thisdoc'] in except condition. Since, not required inside text -->
                                    <xsl:apply-templates select="@*"/>
                                    <xsl:apply-templates
                                        select="node() except (refpt, ci:cite[@type = 'cite4thisdoc'], copyright[$streamID = 'UK06'])"/>

                                    <!-- Awantika: UK11DN- Need to merge the adjacent notes and move them to the end of the existing text  -->
                                    <xsl:if
                                        test="parent::p[note[@notetype = 'xref']] and $streamID = 'UK11DN'">
                                        <xsl:for-each-group
                                            select="parent::p[note[@notetype = 'xref']]/node()"
                                            group-adjacent="
                                                if (self::note) then
                                                    0
                                                else
                                                    1">

                                            <xsl:choose>
                                                <xsl:when test="current-grouping-key() = 0">
                                                  <!--  <xsl:apply-templates select="ancestor::p/text"/>-->
                                                  <marginnote>
                                                  <ref:anchor>
                                                  <xsl:attribute name="id">
                                                  <xsl:value-of select="generate-id()"/>
                                                  </xsl:attribute>
                                                  <xsl:attribute name="anchortype">
                                                  <xsl:text>local</xsl:text>
                                                  </xsl:attribute>
                                                  </ref:anchor>
                                                  <bodytext>
                                                  <xsl:for-each select="current-group()">
                                                  <xsl:apply-templates select="@* | node()"/>
                                                  </xsl:for-each>
                                                  </bodytext>
                                                  </marginnote>
                                                </xsl:when>
                                            </xsl:choose>
                                        </xsl:for-each-group>
                                    </xsl:if>
                                </text>
                            </xsl:otherwise>
                        </xsl:choose>

                    </xsl:otherwise>
                </xsl:choose>

            </xsl:otherwise>
        </xsl:choose>


    </xsl:template>
    <!-- it doesn't make sense to address @align here, but to address it at the paragraph level.
        What do we do for <p> elements that get emptied by having now-empty text? Right now they remain, 
        as passively specified through omission of use case. -->
    <!--    Updated by Chaitanya foe the text Alignment-->
    <xsl:template match="text/@align[$streamID != 'CA09']"/>
    <!--<xsl:copy-of select="."></xsl:copy-of>-->

    <xsl:template match="text/@cont"/>
    <xsl:template match="text/@ln.nsprefix"/>

    <xsl:template match="text[$streamID = 'CA12']/@searchtype"/>

    <xsl:template name="insert-vertical-space">
        <xsl:element name="text"
            namespace="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <xsl:apply-templates select="@*"/>
            <!--- BRT add number of nl that are in p/@nl -->
            <xsl:call-template name="add_nl">
                <xsl:with-param name="length" select="parent::p/@nl"/>
                <xsl:with-param name="i" select="1"/>
            </xsl:call-template>
            <!-- BRT remove hard-coded nl that are in source -->
            <xsl:apply-templates select="*[not(self::nl or self::refpt)] | text()"/>
        </xsl:element>
    </xsl:template>



    <xsl:template name="add_nl">
        <xsl:param name="length" select="."/>
        <xsl:param name="i" select="1"/>
        <!-- BRT: create <nl/> for each iteration of @nl value -->
        <xsl:if test="$length &gt; 0">
            <xsl:element name="proc:nl"/>
            <xsl:call-template name="add_nl">
                <xsl:with-param name="length" select="$length - 1"/>
                <xsl:with-param name="i" select="$i + 1"/>
            </xsl:call-template>
        </xsl:if>
    </xsl:template>

    <!-- Vikas Rohilla : Added the template for the streamID CA01    -->
    <!-- Sudhanshu Srivastava : Added StreamID for passthrough. -->
    <xsl:template
        match="text[parent::p[parent::glp:note[parent::text]]][$streamID = 'CA01' or $streamID = 'CA02CC' or $streamID = 'CA04']">
        <xsl:apply-templates/>
    </xsl:template>

    <!--Satbir: Set the low priority in below template because this is common template which is already define in "Rosetta_strike-LxAdv-strike.xsl"-->
    <!-- JD: 2017-07-14: just use common template "Rosetta_strike-LxAdv-strike.xsl"; removing this version because: 
				1) this is the module for the <text> element, not the <strike> element 
				2) the handling is nearly identical
				3) this version generates an empty @typestyle attribute, which causes validation errors.
		-->
    <!--<xsl:template match="strike" priority="10">
        <strike>
            <xsl:attribute name="typestyle">
                <xsl:value-of select="@typestyle"/>   
            </xsl:attribute>
            <xsl:apply-templates select="node()"/>
        </strike>
    </xsl:template>-->

    <!-- <!-\- Vikas Rohilla :Added template for the streamID CA01-\->
    <xsl:template match="text[matches(.,'^ARRÊT') or matches(.,'^HELD:') or matches(.,'^DISPOSITIF :')]">
        <xsl:element name="text">
            <xsl:choose>
                <xsl:when test="child::*">
                    <xsl:apply-templates/>
                </xsl:when>
                <xsl:when test="contains(.,'- ')">
                    <xsl:value-of select="substring-after(.,'- ')"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="substring-after(.,'. ')"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:element>
    </xsl:template>-->

    <!-- Vikas Rohilla : created the template for text when ancestor frm:div    -->
    <xsl:template
        match="
            text[parent::p[parent::frm:div |
            parent::frm:body |
            parent::li[ancestor::frm:body] |
            parent::clause[ancestor::frm:div or ancestor::frm:body]]][not(ancestor::footnote or ancestor::note)][$streamID = 'UK12']">
        <form:text>
            <xsl:apply-templates select="@* | node()"/>
        </form:text>
    </xsl:template>

    <!-- Vikas Rohilla : created the template for text when ancestor frm:div    -->
    <xsl:template
        match="text[parent::p[parent::sigblock[ancestor::frm:div or ancestor::frm:body]]][$streamID = 'UK12']">
        <xsl:apply-templates select="@* | node()"/>
    </xsl:template>

    <xsl:template match="text[parent::p[parent::text]][$streamID = 'UK12']" priority="25">
        <xsl:apply-templates select="@* | node()"/>
    </xsl:template>


    <xsl:template match="text[preceding-sibling::note[@notetype = 'xref']]">
        <text>
            <xsl:apply-templates select="@* | node()"/>
            <xsl:if test="$streamID = 'UK12'">
                <xsl:apply-templates select="preceding-sibling::note[@notetype = 'xref']"
                    mode="note-xref"/>
            </xsl:if>
        </text>
    </xsl:template>

    <!-- suppress the empty text    -->
    <xsl:template match="text[normalize-space(.) = ''][$streamID = ('UK12', 'UK03')]"/>

    <xsl:template match="text[matches(., '^&#x2009;$')][$streamID = 'NZ13']" priority="25">
        <text>
            <xsl:text xml:space="preserve"> </xsl:text>
        </text>
    </xsl:template>




    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_form_bodytext_p_text-to-LexisAdvance_form.text">
        <title><sourcexml>form/bodytext/p/text</sourcexml> to <targetxml>form:text</targetxml>
            <lnpid>id-CCCC-10326</lnpid></title>
        <body>
            <section>
                <p><sourcexml>form/bodytext/p/text</sourcexml> becomes
                        <targetxml>form:text</targetxml>.</p>
            </section>
            <example>
                <title>Source XML</title>
                <codeblock> &lt;form&gt; &lt;bodytext searchtype="FORM"&gt; &lt;p&gt; &lt;text&gt;
                    &lt;emph typestyle="bf"&gt;THIS AGREEMENT&lt;/emph&gt; is made
                    on&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;
                    &amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;
                    &amp;#160;&amp;#160; 2010 &lt;/text&gt; &lt;/p&gt; ....... ....... &lt;h
                    align="center"&gt;
                    1.&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160; The
                    Independent Expert has been appointed by the parties under clause .. of the
                    Agreement to assist in resolving the dispute or to resolve the dispute by
                    determining the meaning of clause &amp;hellip;&amp;#160; of the Agreement and
                    also to determine which party or parties should pay the costs of and incidental
                    to the resolution of the dispute. &lt;/h&gt; &lt;h align="center"&gt;
                    2.&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160; The
                    Independent Expert has accepted the appointment, and will assist in determining
                    or will determine the dispute in accordance with the terms of this agreement.
                    &lt;/h&gt; ........ ........ &lt;h align="center"&gt;&amp;#160;&lt;/h&gt;
                    &lt;/bodytext&gt; &lt;/form&gt; </codeblock>
            </example>
            <example>
                <title>Target XML</title>
                <codeblock> &lt;form:form&gt; &lt;form:document annotated="false" official="false"
                    typeofdoc="unnamed"&gt; &lt;form:bodytext&gt; &lt;form:p&gt; &lt;form:text&gt;
                    &lt;emph typestyle="bf"&gt;THIS AGREEMENT&lt;/emph&gt; is made
                    on&amp;#x00A0;&amp;#x00A0;&amp;#x00A0;&amp;#x00A0;&amp;#x00A0;&amp;#x00A0;&amp;#x00A0;
                    &amp;#x00A0;&amp;#x00A0;&amp;#x00A0;&amp;#x00A0;&amp;#x00A0;&amp;#x00A0;&amp;#x00A0;&amp;#x00A0;
                    &amp;#x00A0;&amp;#x00A0;&amp;#x00A0;&amp;#x00A0;&amp;#x00A0; 2010
                    &lt;/form:text&gt; &lt;/form:p&gt; ...... ...... &lt;form:h align="center"&gt;
                    1.&amp;#x00A0;&amp;#x00A0;&amp;#x00A0;&amp;#x00A0;&amp;#x00A0;&amp;#x00A0;&amp;#x00A0;
                    The Independent Expert has been appointed by the parties under clause .. of the
                    Agreement to assist in resolving the dispute or to resolve the dispute by
                    determining the meaning of clause &amp;#x2026;&amp;#x00A0;  of the Agreement and
                    also to determine which party or parties should pay the costs of and incidental
                    to the resolution of the dispute. &lt;/form:h&gt; &lt;form:h align="center"&gt;
                    2.&amp;#x00A0;&amp;#x00A0;&amp;#x00A0;&amp;#x00A0;&amp;#x00A0;&amp;#x00A0;&amp;#x00A0;
                    The Independent Expert has accepted the appointment, and will assist in
                    determining or will determine the dispute in accordance with the terms of this
                    agreement. &lt;/form:h&gt; ...... ...... &lt;form:h
                    align="center"&gt;&amp;#x00A0;&lt;/form:h&gt; &lt;/form:bodytext&gt;
                    &lt;/form:document&gt; &lt;/form:form&gt; </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2012-08-30: Created. </p>
            </section>
        </body>
    </dita:topic>
    <!--RS: 02-01-2018 Added Choose Condition for blockquote/p/text Webstar #7078783 -->
    <xsl:template
        match="text[parent::p[(parent::blockquote | parent::bodytext)[not(ancestor::fnbody)][ancestor::form[ancestor::COMMENTARYDOC | ancestor::LEGDOC]]]]">
        <xsl:choose>
            <xsl:when test="parent::p[parent::blockquote]">
                <text>
                    <xsl:apply-templates select="@* | node()"/>
                </text>
            </xsl:when>
            <xsl:otherwise>
                <!--  Original Target XPath:  form:text   -->
                <form:text>
                    <xsl:apply-templates select="@* | node()"/>
                </form:text>
            </xsl:otherwise>
        </xsl:choose>



    </xsl:template>

    <xsl:template
        match="text[$streamID = ('UK14', 'UK12')][parent::p[(parent::blockquote)[ancestor::form[ancestor::COMMENTARYDOC]]]]"
        priority="2">
        <!-- WPK: form:text is not schema valid within blockquote/p -->

        <text xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
            <xsl:apply-templates select="@* | node()"/>
        </text>

    </xsl:template>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_title_to-LexisAdvance_title">
        <title><sourcexml>title</sourcexml> to <targetxml>title</targetxml>
            <lnpid>id-CCCC-10479</lnpid></title>
        <body>
            <section>
                <title>Instructions <i>[common element]</i></title>
                <p><sourcexml>title</sourcexml> becomes <targetxml>title</targetxml> with
                    attributes: <ul>
                        <li><sourcexml>@inline</sourcexml> becomes <targetxml>@inline</targetxml>
                            with tokenized values of "true" and "false"</li>
                        <li><sourcexml>@align</sourcexml> becomes <targetxml>@align</targetxml> with
                            tokenized values and populated as: <ul>
                                <li><targetxml>title[@align="left"]</targetxml></li>
                                <li><targetxml>title[@align="right"]</targetxml></li>
                                <li><targetxml>title[@align="center"]</targetxml></li>
                            </ul>
                        </li>
                    </ul>
                </p>
                <p> If the input document has title/defterm scenario then
                        <sourcexml>defterm</sourcexml> within a title can be dropped, but the
                    content of the tag is retained and no text is dropped. </p>

                <p>Exceptional scenario for <b>CA Indices</b> and <b>CA06 Regs</b>:
                        <sourcexml>title/nl</sourcexml> becomes <targetxml>title</targetxml>.
                        <sourcexml>nl</sourcexml> will be replaces by a white space in the
                    target.</p>

                <p>Exceptional scenario for CA Indices: When <sourcexml>title</sourcexml> is an
                    child of <sourcexml>docinfo:hierlev/heading</sourcexml> and contains word
                        <b>TITLE: </b> or <b>NAME: </b> or <b>SITE: </b> then conversion should drop
                    the word <b>TITLE: </b> or <b>NAME: </b> or <b>SITE: </b> from conversion.</p>

            </section>

            <example>
                <title>Source XML</title>
                <codeblock> &lt;heading&gt; &lt;title align="center"&gt;Consideration&lt;/title&gt;
                    &lt;/heading&gt; .... .... &lt;heading&gt; &lt;title
                    inline="false"&gt;Summary&lt;/title&gt; &lt;/heading&gt; </codeblock>
            </example>

            <example>
                <title>Target XML</title>
                <codeblock> &lt;heading&gt; &lt;title align="center"&gt;Consideration&lt;/title&gt;
                    &lt;/heading&gt; .... .... &lt;heading&gt; &lt;title
                    inline="false"&gt;Summary&lt;/title&gt; &lt;/heading&gt; </codeblock>
            </example>

            <example>
                <title>Source XML having <sourcexml>title/nl</sourcexml></title>
                <codeblock> &lt;title&gt; English-French&lt;nl/&gt;Trade-mark Lexicon&lt;/title&gt;
                </codeblock>
            </example>

            <example>
                <title>Target XML </title>
                <codeblock> &lt;title&gt; English-French Trade-mark Lexicon&lt;/title&gt;
                </codeblock>
            </example>


            <example>
                <title>Source XML contains word "TITLE: " in <sourcexml>title</sourcexml></title>
                <codeblock> &lt;docinfo:hierlev role="me"&gt; &lt;heading&gt; &lt;title&gt;TITLE:
                    Criminal Code French/English consolidation 2010 / Code criminal codification
                    bilingue 2010. 2010 ed. &lt;/title&gt; &lt;/heading&gt; &lt;/docinfo:hierlev&gt;
                </codeblock>
            </example>

            <example>
                <title>Target XML </title>
                <codeblock> &lt;doc:hierlev&gt; &lt;heading&gt; &lt;title&gt;Criminal Code
                    French/English consolidation 2010 / Code criminal codification bilingue 2010.
                    2010 ed. &lt;/title&gt; &lt;/heading&gt; &lt;/doc:hierlev&gt; </codeblock>
            </example>


            <section>
                <title>Changes</title>
                <p>2011-12-15: <ph id="20111215_xx">Created.</ph></p>
                <p>2013-01-08: <ph id="20130108_xx_1">Removed CR number to allow <targetxml
                            class="+ topic/keyword xml-d/targetxml ">ref:crossreference</targetxml>
                        to the content model of <targetxml class="+ topic/keyword xml-d/targetxml "
                            >title</targetxml> and <targetxml
                            class="+ topic/keyword xml-d/targetxml ">subtitle</targetxml>.</ph></p>
                <p>2013-01-08: <ph id="20130108_xx_2">Added Instruction for
                            <sourcexml>title/@searchtype="DIGEST-SUBJECT"</sourcexml>.</ph></p>
                <p>2013-04-10: <ph id="20130410_xx_3">Added Instruction for
                            <sourcexml>title/nl</sourcexml>.</ph></p>
                <p>2013-07-05: <ph id="change_20130705_PS_1">Added Instruction when
                            <sourcexml>title</sourcexml> contains word <b>"TITLE: "</b>.</ph></p>
                <p>2013-07-30: <ph id="change_20130730_PS_1">Updated Instruction when
                            <sourcexml>title</sourcexml> contains word <b>"TITLE: "</b> or <b>"NAME:
                            "</b>.</ph></p>
                <p>2013-09-03: <ph id="change_20130903_PS_1">Updated Instruction when
                            <sourcexml>title</sourcexml> contains word <b>"TITLE: "</b> or <b>"NAME:
                            "</b> or <b>"SITE: "</b>.</ph></p>
                <p>2014-10-07: <ph id="change_20141007_PS">Removed instruction and example to
                        convert attribute <sourcexml>@searchtype="DIGEST-SUBJECT"</sourcexml>.
                        Applicable to CA12.</ph></p>
                <p>2014-12-19: <ph id="20141219_SS">Added <b>CA06-Regs</b> stream name inside the
                        existing instruction for handling <sourcexml>title/nl</sourcexml>.</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_title-LxAdv-title.dita  -->
    <!-- JD: 2017-07-24: added 'replace()' function to get rid of characters not handled by normalize-space(e.g., nbsp) -->
    <xsl:template match="title[not(normalize-space(replace(., '^[\t\p{Zs}]+$', '')) = '')]">
        <!--<xsl:param name="titleStringsToRemove" as="xs:string*" select="( 'TITLE:' , 'NAME:' , 'SITE:' ,':' )"/>	-->
        <!-- these are regular expressions  -->
        <!--pawan:added for CA15-->
        <xsl:param name="titleStringsToRemove" as="xs:string*"
            select="
                if ($streamID = 'CA15') then
                    ('TITLE: ', 'TITRE: ', 'TITLE/TITRE:', 'TITRE/TITLE:', 'CITED/CITÉ: ', 'CITÉ/CITED: ', 'CITE/CITED: ', 'CITED: ')
                else
                    ('TITLE:', 'NAME:', 'SITE:', ':')"/>

        <xsl:variable name="outputText" as="xs:string*">
            <xsl:apply-templates/>
        </xsl:variable>

        <xsl:variable name="subtitletext"/>

        <!--  Original Target XPath:  title   -->
        <xsl:choose>
            <!-- Due to jrnl:prelim outputting as nitf:hedline/nitf:h1, which does not have a child title. - See HK02_Articles for example -->
            <xsl:when test="parent::heading/parent::jrnl:prelim">
                <xsl:apply-templates/>
            </xsl:when>
            <!-- do not output empty element title when it only contains refpt and is a child of heading -->
            <xsl:when test="parent::heading and refpt and not(text()) and not(child::*[2])"/>
            <!--SNB 2017-10-17 add title child of transcript for new embedded video content. Note that transcript 
				is a new element, so this cant interfere with any other processing-->
            <xsl:when test="parent::transcript">
                <h xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <xsl:apply-templates select="@*"/>
                    <!-- refpts can't be output in title elements in target schemas -->
                    <xsl:apply-templates select="node() except refpt"/>
                </h>
            </xsl:when>
            <xsl:otherwise>
                <title xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
                    <xsl:apply-templates select="@*"/>

                    <xsl:choose>
                        <xsl:when
                            test="$streamID = 'CA11' or $streamID = 'CA15' and parent::heading[parent::docinfo:hierlev]">

                            <!--  remove any occurrence of $titleStringsToRemove strings but assume case sensitive   -->
                            <xsl:sequence
                                select="lnf:removeSequenceOfStrings(string-join($outputText, ''), $titleStringsToRemove, false())"/>

                        </xsl:when>
                        <!-- Vikas Rohilla : Added for the streamID CA01	-->
                        <xsl:when test="$streamID = 'CA01' and ancestor::case:constituents">
                            <xsl:sequence
                                select="lnf:removeSequenceOfStrings(string-join($outputText, ''), $titleStringsToRemove, false())"
                            />
                        </xsl:when>
                        <!-- Awantika: Added for AU20 -->
                        <xsl:when test="$streamID = 'AU20' and following-sibling::subtitle">
                            <xsl:value-of
                                select="concat(., ' ', '(', following-sibling::subtitle, ')')"/>
                        </xsl:when>
                        <xsl:otherwise>
                            <!-- refpts can't be output in title elements in target schemas -->
                            <xsl:apply-templates select="node() except refpt"/>
                        </xsl:otherwise>
                    </xsl:choose>
                </title>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <!--    From Rosetta_Elements-LxAdv-Empty_Elements.dita / .xsl   -->
    <!--<xsl:template match="title[ normalize-space(string-join( . , '') ) = '' ]"/>-->

    <!-- JD: 2017-07-24: could probably be combined with above, but shouldn't hurt -->
    <xsl:template match="title[normalize-space(replace(., '^[\t\p{Zs}]+$', '')) = '']"/>

    <xsl:template match="title/@inline">

        <!--  Original Target XPath:  @inline   -->
        <xsl:copy-of select="."/>

    </xsl:template>

    <xsl:template match="title/@align">

        <!--  Original Target XPath:  @align   -->
        <xsl:copy-of select="."/>

    </xsl:template>

    <xsl:template match="title/defterm">

        <!--  Original Target XPath:  title   -->
        <xsl:apply-templates select="@* | node()"/>

    </xsl:template>

    <xsl:template match="title/nl[$streamID = ('CA11')]">

        <!--  output a space.  Note that otherwise nl becomes proc:nl which is allowed under title   -->
        <xsl:text> </xsl:text>

    </xsl:template>

    <!-- JL suppress searchtype -->
    <xsl:template match="title/@searchtype"/>
    <xsl:template match="title/num[$streamID = 'CA09']/@searchtype" priority="30"/>





    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_link-to-LexisAdvance_ref.lnlink">
        <title><sourcexml>link</sourcexml> to
                <targetxml>ref:lnlink[@service="ATTACHMENT"]</targetxml>
            <lnpid>id-CCCC-10394</lnpid></title>
        <body>
            <section>
                <p><sourcexml>link</sourcexml> becomes
                        <targetxml>ref:lnlink[@service="ATTACHMENT"]</targetxml> and children can be
                    converted as follows: <ul>
                        <li>The attribute <sourcexml>link/@status</sourcexml> is always suppressed,
                            it is never output to the target document.</li>
                        <li><sourcexml>link</sourcexml> content becomes
                                <targetxml>ref:marker</targetxml>. </li>
                        <li>Create <targetxml>ref:locator</targetxml> and describe as: <ul>
                                    <li>Create <targetxml>ref:locator-key</targetxml> and describe
                                    as: <ul> <li>Create <targetxml>ref:key-name</targetxml> with
                                                <targetxml>@name="attachment-key"</targetxml>. This
                                            line is hard coded. </li> <li>Create
                                                <targetxml>ref:key-value</targetxml> with
                                                <targetxml>@value</targetxml>, as follows: <ul>
                                                <li>If <sourcexml>link[@smi]</sourcexml> is present,
                                                  copy <sourcexml>link[@filename]</sourcexml> to
                                                  <targetxml>@value</targetxml></li>
                                                <li>If <sourcexml>link[@smi]</sourcexml> is not
                                                  present, then
                                                  <targetxml>@value="X-Y-Z"</targetxml>, where X is
                                                  LNI, Y is SMI, and Z is filename. LNI and SMI
                                                  (retreived from CSSM) values are added by
                                                  <b>"Workflow Generic Image Handlers</b>. The last
                                                  component "Z" is copied from
                                                  <sourcexml>link[@filename]</sourcexml>.</li>
                                                <li>If <sourcexml>link[@smi]</sourcexml> is not
                                                  present, then conversion program should pass
                                                  <sourcexml>link[@filename]</sourcexml> value to
                                                  <b>“Workflow Generic Image Handler?</b> as is and
                                                  “Workflow Generic Image Handler? will do
                                                  conversion of filename value as noted above.
                                                  <b>Conversion of filename replaces underscore,
                                                  blank, and period with hyphen.</b></li>
                                            </ul></li>
                                    </ul></li> <li>Create <targetxml>ref:locator-params</targetxml>
                                    and describe as: <ul>
                                        <li><targetxml>ref:locator-params</targetxml> element
                                            contains locator parameters. It provides a parameter
                                            (identified as a name/value pair) passing mechanism for
                                            link services. Each parameter is expressed as a
                                                <targetxml>@name</targetxml> and
                                                <targetxml>@value</targetxml> pair in
                                                <targetxml>proc:param</targetxml> element. It is
                                            used to identify the attachment type and component
                                            sequence. </li> <li>Create
                                                <targetxml>proc:param</targetxml> with
                                                <targetxml>@name</targetxml> and
                                                <targetxml>@value</targetxml>.
                                                <targetxml>@name</targetxml> and
                                                <targetxml>@value</targetxml> are required
                                            attributes in <targetxml>proc:param</targetxml>. </li>
                                            <li>Three <targetxml>proc:param[@name]</targetxml> and
                                                <targetxml>proc:param[@value]</targetxml> pairs are
                                            described below: <ul>
                                                <li><targetxml>proc:param[@name="componentseq"]</targetxml>
                                                  with the attribute
                                                  <targetxml>@value="1"</targetxml>. This line is
                                                  hard coded. </li>
                                                <li><targetxml>proc:param[@name="attachment-type"]</targetxml>
                                                  with the attribute <targetxml>@value</targetxml>.
                                                  The <targetxml>@value</targetxml> value is from
                                                  <targetxml>link[@type]</targetxml>. Allowable
                                                  values: “image?; “PDF?; “spreadsheet?; “audio?;
                                                  “HTML?; “video?; “hotdoc?; “wordprocess?. </li>
                                                <li><targetxml>proc:param[@name="attachment-smi"]</targetxml>
                                                  with the attribute <targetxml>@value</targetxml>.
                                                  The <targetxml>@value</targetxml> value is from
                                                  <sourcexml>link[@smi]</sourcexml>. If
                                                  <sourcexml>link[@smi]</sourcexml> is not present,
                                                  obtain SMI from CSSM. This
                                                  <targetxml>@value</targetxml> assignment is done
                                                  by conversion program.</li>
                                            </ul></li></ul></li>
                            </ul></li></ul>
                </p>
            </section>

            <example>
                <title>Source XML. Source @smi present</title>
                <codeblock> &lt;link type="pdf" smi="98765" filename="xmpl-c1.pdf"
                    status="valid"&gt;Download in PDF&lt;/link&gt; </codeblock>
            </example>

            <example>
                <title>Target XML. Source @smi present</title>
                <codeblock> &lt;ref:lnlink service="ATTACHMENT"&gt; &lt;ref:marker
                    role="label"&gt;Download in PDF&lt;/ref:marker&gt; &lt;ref:locator&gt;
                    &lt;ref:locator-key&gt; &lt;ref:key-name name="attachment-key"/&gt;
                    &lt;ref:key-value value="xmpl-c1"/&gt; &lt;/ref:locator-key&gt;
                    &lt;ref:locator-params&gt; &lt;proc:param name="componentseq" value="1"/&gt;
                    &lt;proc:param name="attachment-type" value="PDF"/&gt; &lt;proc:param
                    name="attachment-smi" value="98765"/&gt; &lt;/ref:locator-params&gt;
                    &lt;/ref:locator&gt; &lt;/ref:lnlink&gt; </codeblock>
            </example>

            <example>
                <title>Source XML. Source @smi not present</title>
                <codeblock> &lt;link type="pdf" filename="pbap-c1.pdf" status="valid"&gt;Download in
                    PDF&lt;/link&gt; </codeblock>
            </example>

            <example>
                <title>Target XML. Source @smi not present</title>
                <codeblock> &lt;ref:lnlink service="ATTACHMENT"&gt; &lt;ref:marker
                    role="label"&gt;Download in PDF&lt;/ref:marker&gt; &lt;ref:locator&gt;
                    &lt;ref:locator-key&gt; &lt;ref:key-name name="attachment-key"/&gt;
                    &lt;ref:key-value value="X-Y-pbap-c1"/&gt; &lt;!-- X and Y are LNI and SMI
                    values obtained from CSSM --&gt; &lt;/ref:locator-key&gt;
                    &lt;ref:locator-params&gt; &lt;proc:param name="componentseq" value="1"/&gt;
                    &lt;proc:param name="attachment-type" value="PDF"/&gt; &lt;proc:param
                    name="attachment-smi" value=""/&gt; &lt;!-- @value populated with SMI obtained
                    from CSSM --&gt; &lt;!-- This @value assignment is done by conversion program
                    --&gt; &lt;/ref:locator-params&gt; &lt;/ref:locator&gt; &lt;/ref:lnlink&gt;
                </codeblock>
            </example>

            <section>
                <title>Changes</title>
                <p>2015-09-08: <ph id="change_20150908_SNB">Minor XPATH correction in title to
                        change <targetxml>ref:lnlink/@service="ATTACHMENT"</targetxml> to be
                            <targetxml>ref:lnlink[@service="ATTACHMENT"]</targetxml>.</ph></p>
                <p>2015-05-22: <ph id="change_20150522_JCG">Changed the instructions to indicate
                            <sourcexml>link/@status</sourcexml> is always dropped and removed
                            <targetxml>ref:lnlink/@status</targetxml> from target example. This is a
                        very low-priority change and has been added for technical correctness,
                        particularly with respect to new CIs. Existing scripts do not have to
                        implement this change since <targetxml>ref:lnlink/@status</targetxml> is
                        ignored by LexisAdvance if it is present.</ph></p>
                <p>2013-09-24: <ph id="change_20130924_jm">Not a rule change. Modified examples to
                        illustrate when <sourcexml>@status</sourcexml> suppressed and when
                        retained.</ph></p>
                <p>2013-08-21: <ph id="change_20130821_raj">Added instruction for when to suppress
                            <sourcexml>@status</sourcexml>.</ph></p>
                <p>2013-05-24: <ph id="change_20130524_SP">Updated instruction for handling of link
                        when <b>smi</b> is present and some of the verbiage is changed.</ph></p>
                <p>2013-05-02: <ph id="change_20130502_SP">Some of the verbiage is changed and
                        updated target example to if the SMI is present then a
                            <targetxml>ref:lnlink/@status</targetxml> attribute is set to
                        “valid?.</ph></p>
                <p>2013-05-01: <ph id="change_20130501_SP">Updated instructions and target example
                        per latest Apollo markup.</ph></p>
                <p>2013-02-26: <ph id="change_20130226_SP">Updated target example per project
                        requirement.</ph></p>
                <p>2012-10-26: Changed to reflect recent requirements for attachment-type links.</p>
            </section>

            <section>
                <!-- Added from /Rosetta-to-LA/modules/nonamespace/Rosetta_ci.cite-LxAdv-lnci.cite.xsl -->
                <p><b>Exception: When <sourcexml>link</sourcexml> is used as intra-document linking
                        within <sourcexml>ci:content</sourcexml></b>.</p>
                <p>If the <sourcexml>ci:content</sourcexml> contains a <sourcexml>link</sourcexml>
                    child, the <sourcexml>link</sourcexml> wrapper markup (not its content) shall be
                    removed (omit tag and retain content) and the <sourcexml>link/@refpt</sourcexml>
                    value shall be moved to <targetxml>lnci:cite/@citeref</targetxml>.</p>
            </section>
        </body>
    </dita:topic>

    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_link-LxAdv-ref.lnlink.dita  -->


    <!--   
        
        *****PLEASE READ*****
        
Image handling background note 2017-11-30:
        
Please use $streamID in Rosetta_link-LxAdv-ref.lnlink.xsl due to notation below.  

It was originally intended that Apollo jurisdictions would use these (when first introduced in the DITA):

\svn\dataArch\XSLT\ContentArch\Rosetta-to-LA\modules\nonamespace\Rosetta_lnlink_service_ATTACHMENT-LxAdv-ref.lnlink.xsl
\svn\dataArch\XSLT\ContentArch\Rosetta-to-LA\modules\nonamespace\Rosetta_link-LxAdv-ref.lnlink.xsl
\svn\dataArch\XSLT\ContentArch\Rosetta-to-LA\modules\nonamespace\Rosetta_inlineobject-LxAdv-ref.inlineobject.xsl

And blobstore jurisdictions would use these (notice BLOBSTORE in the file name):

\svn\dataArch\XSLT\ContentArch\Rosetta-to-LA\modules\nonamespace\Rosetta_lnlink_service_ATTACHMENT-LxAdv-ref.lnlink_BLOBSTORE.xsl
\svn\dataArch\XSLT\ContentArch\Rosetta-to-LA\modules\nonamespace\Rosetta_link-LxAdv-ref.lnlink_BLOBSTORE.xsl
\svn\dataArch\XSLT\ContentArch\Rosetta-to-LA\modules\nonamespace\Rosetta_inlineobject-LxAdv-ref.inlineobject_BLOBSTORE.xsl

They were originally meant to be mutually exclusive.

Ditamap includes (and subsequently xsl drivers) may have included both blobstore and Apollo handling during the transition from one to the other even though only one image handling 
is done in an LBU.  Image handling is LBU wide and not individual stream specific.

Very importantly, there is a named template (@name="generic-link") in Rosetta_link-LxAdv-ref.lnlink.xsl which is called by both "Rosetta_p-LxAdv-p.xsl" and "Rosetta_bodytext-link-LxAdv-seclaw.bodytext-p-text-ref.lnlink.xsl".   Both of these common modules are not LBU specific.  . 
This effectively, although unintentionally, crossed the original exclusivity described above.

Current fix is to use $streamID indicating HK and UK which are currently the only blobstore jurisdictions.  Ultimately, goal is to re-establish these image handling files are mutually exclusive.
-->


    <xsl:template
        match="link[not(parent::docinfo:assoc-links or parent::docinfo:assoc-links-grp or parent::text[parent::docinfo:assoc-links or parent::docinfo:assoc-links-grp])]"
        name="generic-link">
        <xsl:choose>
            <!-- Awantika:2017-11-07: updated for NZ12 for webstar #7039775 and #7076843 -->
            <xsl:when test="$streamID = 'NZ12' and parent::pgrp or parent::li">
                <p>
                    <text>
                        <ref:lnlink service="ATTACHMENT">
                            <ref:marker role="label">
                                <xsl:apply-templates/>
                            </ref:marker>
                            <ref:locator>
                                <ref:locator-key>
                                    <ref:key-name name="attachment-key"/>
                                    <ref:key-value>
                                        <xsl:attribute name="value">
                                            <xsl:choose>
                                                <!-- JL: 20170526: Per Roopa and Selva, we should output the filename extension for image links to work -->
                                                <xsl:when test="@smi">
                                                  <xsl:value-of select="@filename"/>
                                                </xsl:when>
                                                <xsl:otherwise>
                                                  <xsl:value-of select="@filename"/>
                                                </xsl:otherwise>
                                            </xsl:choose>
                                        </xsl:attribute>
                                    </ref:key-value>
                                </ref:locator-key>
                                <ref:locator-params>
                                    <proc:param name="componentseq" value="1"/>
                                    <proc:param>
                                        <xsl:attribute name="name">attachment-type</xsl:attribute>
                                        <xsl:attribute name="value">
                                            <xsl:apply-templates select="@type"/>
                                        </xsl:attribute>
                                    </proc:param>
                                    <proc:param>
                                        <xsl:attribute name="name">attachment-smi</xsl:attribute>
                                        <xsl:attribute name="value">
                                            <xsl:choose>
                                                <xsl:when test="@smi">
                                                  <xsl:value-of select="@smi"/>
                                                </xsl:when>
                                                <xsl:otherwise>
                                                  <xsl:value-of select="$smi"/>
                                                </xsl:otherwise>
                                            </xsl:choose>
                                        </xsl:attribute>
                                    </proc:param>
                                </ref:locator-params>
                            </ref:locator>
                        </ref:lnlink>
                    </text>
                </p>
            </xsl:when>
            <xsl:otherwise>
                <ref:lnlink service="ATTACHMENT">
                    <ref:marker role="label">
                        <xsl:apply-templates/>
                    </ref:marker>
                    <ref:locator>
                        <ref:locator-key>
                            <ref:key-name name="attachment-key"/>
                            <ref:key-value>
                                <xsl:attribute name="value">
                                    <xsl:choose>
                                        <!-- JL: 20170526: Per Roopa and Selva, we should output the filename extension for image links to work -->
                                        <xsl:when test="@smi">
                                            <xsl:value-of select="@filename"/>
                                        </xsl:when>
                                        <xsl:otherwise>
                                            <xsl:value-of select="@filename"/>
                                        </xsl:otherwise>
                                    </xsl:choose>
                                </xsl:attribute>
                            </ref:key-value>
                        </ref:locator-key>
                        <ref:locator-params>
                            <!--SS - 2017-11-26: Added the below condition for added blobstore when link comes under 'paragraph' p.-->
                            <!-- JL: 2017-11-30: this module is supposed to be for Apollo but has been included in some blobstore LBUs (HK, UK). 
                                Using streamID to make sure Blobstore information goes to Blobstore LBUs. -->
                            <xsl:choose>
                                <xsl:when
                                    test="contains(./@type, 'wordprocess') and (starts-with($streamID, 'HK') or starts-with($streamID, 'UK'))">
                                    <xsl:choose>
                                        <xsl:when test="contains(./@type, 'wordprocess')">
                                            <proc:param name="attachment-type" value="wordprocess"/>
                                        </xsl:when>
                                        <xsl:otherwise>
                                            <proc:param name="attachment-type" value="IMG"/>
                                        </xsl:otherwise>
                                    </xsl:choose>
                                    <proc:param name="external-or-local" value="external"/>
                                    <proc:param name="attachment-server" value="BlobStore"/>
                                    <proc:param name="attachment-pguid"
                                        value="urn:contentItem:0000-0000-0000-0000-00000-00"/>
                                    <proc:param name="componentseq" value="1"/>
                                </xsl:when>
                                <!-- Vikas Rohilla : 02/04/2018 Added the Condtion for the MY streams.                                -->
                                <xsl:when test="./@type = 'pdf' and starts-with($streamID, 'MY')">
                                    <proc:param name="attachment-type" value="PDF"/>
                                    <proc:param name="external-or-local" value="external"/>
                                    <proc:param name="attachment-server" value="BlobStore"/>
                                    <proc:param name="attachment-pguid"
                                        value="urn:contentItem:0000-0000-0000-0000-00000-00"/>
                                    <proc:param name="componentseq" value="1"/>
                                </xsl:when>
                                <xsl:otherwise>
                                    <!--SS: end here-->
                                    <proc:param name="componentseq" value="1"/>
                                    <proc:param>
                                        <xsl:attribute name="name">attachment-type</xsl:attribute>
                                        <xsl:attribute name="value">
                                            <xsl:apply-templates select="@type"/>
                                        </xsl:attribute>
                                    </proc:param>
                                    <proc:param>
                                        <xsl:attribute name="name">attachment-smi</xsl:attribute>
                                        <xsl:attribute name="value">
                                            <xsl:choose>
                                                <xsl:when test="@smi">
                                                  <xsl:value-of select="@smi"/>
                                                </xsl:when>
                                                <xsl:otherwise>
                                                  <xsl:value-of select="$smi"/>
                                                </xsl:otherwise>
                                            </xsl:choose>
                                        </xsl:attribute>
                                    </proc:param>
                                </xsl:otherwise>
                            </xsl:choose>
                        </ref:locator-params>
                    </ref:locator>
                </ref:lnlink>
            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>

    <xsl:template match="link/@status"/>

    <xsl:template match="link/@smi"/>

    <xsl:template match="link/@filename"/>

    <xsl:template match="link/@type">
        <xsl:choose>
            <xsl:when test=". = ('para', 'page', 'ed-pnum', 'refpt', 'logo')">
                <xsl:message>attachment-type is invalid, cannot be determined.</xsl:message>
            </xsl:when>
            <xsl:when test=". = ('pdf', 'pdf-fillable')">PDF</xsl:when>
            <xsl:when test=". = 'hotdoc-nonfillable'">hotdoc</xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="."/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <!-- MDS - 2017-03-14 - Passes through children of link if parent is ci:content
        This is taken from /Rosetta-to-LA/modules/nonamespace/Rosetta_ci.cite-LxAdv-lnci.cite.xsl documentation.  Also copied to documentation in this module.-->
    <xsl:template match="link[parent::ci:content]">
        <xsl:apply-templates/>
    </xsl:template>

    <!-- Vikas Rohilla : Template to match the link[@refpt]-->
    <!-- JL removing status att because it's not valid in output schema and some modules copy it -->
    <xsl:template match="link[@refpt][not($streamID = 'AU21' or 'USLPA')]" priority="25">
        <ref:lnlink>
            <ref:marker>
                <xsl:apply-templates/>
            </ref:marker>
            <ref:locator>
                <xsl:apply-templates select="@* except @status"/>
            </ref:locator>
        </ref:lnlink>
    </xsl:template>

    <!-- Vikas Rohilla : Handle the empty link having no attributes and the content webstar #7045989 -->
    <xsl:template match="link[not(@*)][. = '']" priority="10"/>

    <!-- MDS - 2017-09-07 Unhandled in NZ07-DN Examples in CI show the @alttext dropped.  There are no obviously matching structures in the ref:lnlink or ref:marker elements for LA.-->
    <xsl:template match="link/@alttext"/>



    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="Rosetta_lnlink_service_ATTACHMENT-to-LexisAdvance_ref.lnlink">
        <title><sourcexml>lnlink[@service="ATTACHMENT"]</sourcexml> to
                <targetxml>ref:lnlink[@service="ATTACHMENT"]</targetxml>
            <lnpid>id-CCCC-10396</lnpid></title>
        <body>
            <section>
                <p><sourcexml>lnlink[@service="ATTACHMENT"]</sourcexml> becomes
                        <targetxml>ref:lnlink[@service="ATTACHMENT"]</targetxml>, and its child
                    elements are transformed as follows: <ul>
                        <li>The attribute <sourcexml>lnlink/@status</sourcexml> is always
                            suppressed, it is never output to the target document.</li>
                        <li><sourcexml>lnlink/marker</sourcexml> becomes
                                <targetxml>ref:lnlink/ref:marker</targetxml>, with attribute
                                <sourcexml>marker/@role</sourcexml> becoming
                                <targetxml>ref:marker/@role</targetxml> if present</li>
                        <li>create <targetxml>ref:lnlink/ref:locator</targetxml> and populate as follows:<ul>
                                <li><b><u>if and only if</u></b> there is an
                                        <sourcexml>lnlink/api-params/param</sourcexml> where
                                        <sourcexml>param/@name="attachment-key"</sourcexml>, then
                                    this <sourcexml>param</sourcexml> becomes
                                        <targetxml>ref:locator/ref:key-name/@name="attachment-key"</targetxml>,
                                    then a <targetxml>ref:key-value</targetxml> element is also
                                    created, and the attribute <sourcexml>param/@value</sourcexml>
                                    becomes
                                    <targetxml>ref:locator/ref:key-value/@value</targetxml>.</li>
                                <li>otherwise <sourcexml>lnlink/api-params</sourcexml>&gt; becomes
                                        <targetxml>ref:locator/ref:locator-params</targetxml>, and
                                    its child elements are transformed as follows:<ul>
                                        <li>all other <sourcexml>api-params/param</sourcexml>
                                            elements (<b><u>with the exception of</u></b>
                                            <sourcexml>param/@name="attachment-key"</sourcexml>)
                                            become
                                                <targetxml>ref:locator-params/proc:param</targetxml>,
                                            with attribute <sourcexml>param/@name</sourcexml>
                                            becoming <targetxml>proc:param/@name</targetxml> and
                                            attribute <sourcexml>param/@value</sourcexml> becoming
                                                <targetxml>proc:param/@value</targetxml>.</li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </p>
            </section>
            <example>
                <title>Source XML</title>
                <codeblock> &lt;lnlink service="ATTACHMENT" status="valid"&gt; &lt;marker
                    role="content"&gt;PDF Format&lt;/marker&gt; &lt;api-params&gt; &lt;param
                    name="attachment-key"
                    value="application_for_apportionment-xxxx-xxxx-xxxxx-xx"/&gt; &lt;param
                    name="attachment-type" value="pdf"/&gt; &lt;param name="attachment-smi"
                    value="4364"/&gt; &lt;param name="componentseq" value="1"/&gt;
                    &lt;/api-params&gt; &lt;/lnlink&gt; </codeblock>
            </example>
            <example>
                <title>Target XML 3</title>
                <codeblock> &lt;ref:lnlink service="ATTACHMENT"&gt; &lt;ref:marker
                    role="content"&gt;PDF Format&lt;/ref:marker&gt; &lt;ref:locator&gt;
                    &lt;ref:locator-key&gt; &lt;ref:key-name name="attachment-key"/&gt;
                    &lt;ref:key-value value="application_for_apportionment-xxxx-xxxx-xxxxx-xx"/&gt;
                    &lt;/ref:locator-key&gt; &lt;ref:locator-params&gt; &lt;proc:param
                    name="componentseq" value="1"/&gt; &lt;proc:param name="attachment-type"
                    value="PDF"/&gt; &lt;proc:param name="attachment-smi" value="4364"/&gt;
                    &lt;/ref:locator-params&gt; &lt;/ref:locator&gt; &lt;/ref:lnlink&gt;
                </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2015-09-08: <ph id="change_20150908_SNB">Minor XPATH correction in instruction
                        title and body to change <sourcexml>lnlink/@service="ATTACHMENT"</sourcexml>
                        to be <sourcexml>lnlink[@service="ATTACHMENT"]</sourcexml>,
                            <targetxml>ref:lnlink</targetxml> to be
                            <targetxml>ref:lnlink[@service="ATTACHMENT"]</targetxml>, and
                            <targetxml>ref:lnlink/@service="ATTACHMENT"</targetxml> to be
                            <targetxml>ref:lnlink[@service="ATTACHMENT"]</targetxml>.</ph></p>
                <p>2015-05-22: <ph id="change_20150522_JCG">Added an instruction to explicitly
                        indicate <sourcexml>lnlink/@status</sourcexml> is always dropped
                        (suppressed). This is a very low-priority change and has been added for
                        technical correctness, particularly with respect to new CIs. Existing
                        scripts do not have to implement this change unless needed since prior to
                        the change <targetxml>lnlink/@status</targetxml> handling was not explicitly
                        specified.</ph></p>
                <p>2014-10-15: <ph id="change_20141015_JCG">Rewrote instructions, including the
                        correction of a typographic error, and added an example.</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_lnlink_service_ATTACHMENT-LxAdv-ref.lnlink.dita  -->


    <xsl:template match="lnlink[@service = 'ATTACHMENT']/marker" priority="2">
        <ref:marker>
            <xsl:apply-templates select="@* | node()"/>
        </ref:marker>
    </xsl:template>

    <xsl:template match="lnlink[@service = 'ATTACHMENT']/marker/@role" priority="2">
        <xsl:copy-of select="."/>
    </xsl:template>

    <xsl:template match="lnlink[@service = 'ATTACHMENT']/@status"/>

    <!-- SNB: 2017-11-02 add LPA to the NZ11/AU10 fix; looks to me like the general template rule above 
   (xsl:template match="lnlink[@service='ATTACHMENT'][not(parent::docinfo:assoc-links or parent::docinfo:assoc-links-grp)])
   is WRONG for all other streams because it doesnt create api-params, and the general template rule for api-params is wrong 
   because it results in 2 smi values, and this fix really should be for all streams, but I'd be afraid to do it :) -->
    <xsl:template
        match="lnlink[@service = 'ATTACHMENT'][not(parent::docinfo:assoc-links or parent::docinfo:assoc-links-grp)]">
        <ref:lnlink service="ATTACHMENT">
            <xsl:apply-templates select="marker"/>
            <ref:locator>
                <xsl:choose>
                    <xsl:when test="api-params/param[@name = 'attachment-key']">
                        <ref:locator-key>
                            <ref:key-name>
                                <xsl:attribute name="name">attachment-key</xsl:attribute>
                            </ref:key-name>
                            <ref:key-value>
                                <xsl:attribute name="value">
                                    <xsl:value-of
                                        select="api-params/param[@name = 'attachment-key']/@value"/>
                                </xsl:attribute>
                            </ref:key-value>
                        </ref:locator-key>
                        <xsl:if test="$streamID = ('NZ11', 'AU10', 'USLPA')">
                            <xsl:apply-templates select="api-params"/>
                        </xsl:if>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:apply-templates select="api-params"/>
                    </xsl:otherwise>
                </xsl:choose>
            </ref:locator>
        </ref:lnlink>
    </xsl:template>

    <!-- SNB: 2017-11-02 add LPA to this fix; looks to me like the general template rule above 
   (xsl:template match="lnlink[@service='ATTACHMENT'][not(parent::docinfo:assoc-links or parent::docinfo:assoc-links-grp)])
   is WRONG for all other streams because it doesnt create api-params, and the general template rule for api-params is wrong 
   because it results in 2 smi values, and this fix really should be for all streams, but I'd be afraid to do it :) -->
    <xsl:template
        match="lnlink[@service = 'ATTACHMENT'][not(parent::docinfo:assoc-links or parent::docinfo:assoc-links-grp)][$streamID = ('NZ11', 'AU10', 'USLPA')]/api-params"
        priority="2">
        <ref:locator-params>
            <xsl:for-each select="param[not(@name = 'attachment-key')]">
                <proc:param name="{@name}" value="{@value}"/>
            </xsl:for-each>
        </ref:locator-params>
    </xsl:template>

    <xsl:template match="lnlink[@service = 'ATTACHMENT']/api-params">
        <ref:locator-params>
            <xsl:apply-templates/>
            <xsl:if test="parent::lnlink[@service = 'ATTACHMENT']">
                <proc:param>
                    <xsl:attribute name="name">attachment-smi</xsl:attribute>
                    <xsl:attribute name="value"/>
                    <xsl:message>need SMI from CSSM? Is this a parameter?</xsl:message>
                </proc:param>
            </xsl:if>
        </ref:locator-params>
    </xsl:template>

    <xsl:template match="lnlink[@service = 'ATTACHMENT']/api-paramsparam">
        <xsl:if test="@name != 'attachment-key'">
            <proc:param>
                <xsl:apply-templates select="@name | @value"/>
            </proc:param>
        </xsl:if>
    </xsl:template>

    <xsl:template
        match="lnlink[@service = 'ATTACHMENT']/api-paramsparam/@name | lnlink[@service = 'ATTACHMENT']/api-paramsparam/@value">
        <xsl:copy-of select="."/>
    </xsl:template>




    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="Admindecisions_Change-Log">
        <title>Change Log for Administrative Decisions</title>
        <body>
            <section>
                <title>admindoc 4.5_PROD</title>
                <p>2015-06-24: <ul>
                        <li>
                            <xref href="case.courtcite.dita">2015-06-24 - case.courtcite
                                id-CA04-13416: case:courtcite will be mapped to
                                admindecision:decisioninfo/admindecision:caseinfo/ref:citations/ref:parallelcite.
                                The value of ref:parallelcite/@citetype should be set to "court".
                                .WebTeam # 302381.</xref>
                        </li>
                    </ul>
                </p>
                <p>2015-02-09: <ul>
                        <li>
                            <xref href="case.juris.dita">2015-02-05 - case:juris id-CA04-13429:
                                Remove UK PGUID value from table (CA01, CA02 (all streams), CA03 and
                                CA04). R45 RFA #2133.</xref>
                        </li>
                        <li>
                            <xref href="case.juris.dita">2015-02-02 - case:juris id-CA04-13429:
                                Added instructions to apply CA in guid for country code "UK". Db
                                issue #407 </xref>
                        </li>
                        <li>
                            <xref
                                href="../../../Rosetta/common_newest/Rosetta_CAN_docinfo.custom-metafields-LxAdv-doc.legacy-metadata_metadatasource_lbu-meta.meta.metaitem.dita"
                                >2015-01-27 - docinfo:custom-metafields to
                                doc:legacy-metadata[@metadatasource="lbu-meta"]/meta/metaitem
                                id-CCCC-10251: For CA05,CA06,CA07 and CA08 Existing topic CA first
                                document in "current" material (id-CCCC-10517) removed and added a
                                note here to handle firstActDocument</xref>
                        </li>
                        <li>
                            <xref
                                href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                                >2015-01-26 - ref:cite4thisresource with ref:parallelcite and
                                doc:related-content id-CCCC-10497: Update proc:param
                                name="normprotocol" from value="jcite" to value="CAEditorial"; for
                                CA01, CA02, CA04, CA05, CA06, CA07 and CA08. R4.5 RFA #1873.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../../Rosetta/common_newest/Rosetta_docinfo.assoc-links-LxAdv-doc.related-content.dita"
                                >2015-01-19 - docinfo:assoc-links to doc:related-content
                                id-CCCC-10284: For CA05 - CA08- Updated Instruction and included
                                    "<targetxml>related-content-grp</targetxml>" markup inside the
                                target Example 8 for conversion of QUERY link to
                                doc:related-content.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../../Rosetta/common_newest/Rosetta_docinfo.assoc-links-LxAdv-doc.related-content.dita"
                                >2015-01-15 - docinfo:assoc-links to doc:related-content
                                id-CCCC-10284: For CA03- Convert the QUERY link to
                                doc:related-content. Refer Example 10. R4.5 RFA #2099.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../../Rosetta/common_newest/Rosetta_docinfo.assoc-links-LxAdv-doc.related-content.dita"
                                >2015-01-13 - docinfo:assoc-links to doc:related-content
                                id-CCCC-10284: For CA05 - CA08 Conversion Needs to split multiple
                                ORs into a separate <targetxml>doc:related-content-item</targetxml>.
                                Refer Example 9</xref>
                        </li>
                        <li>
                            <xref
                                href="../../../Rosetta/common_newest/Rosetta_remotelink-LxAdv-ref.crossreference.dita"
                                >2015-01-09 - remotelink to ref:crossreference id-CCCC-10465: For
                                the two use cases associated with url (target
                                    <targetxml>url</targetxml> or
                                <targetxml>ref:lnlink</targetxml>): Added exceptional rule to not
                                concatenate values when <sourcexml>@hrefclass</sourcexml> content is
                                already present in <sourcexml>@href</sourcexml>. Expanded examples 5
                                and 7 to illustrate the scenario. Responds to data for UK10
                                Dictionaries but applies in general. R4.5 Content Issue 2120.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../../Rosetta/common_newest/Rosetta_docinfo.assoc-links-LxAdv-doc.related-content.dita"
                                >2015-01-02 - docinfo:assoc-links to doc:related-content
                                id-CCCC-10284: Added
                                    <sourcexml>docinfo:assoc-links/remotelink[@service="QUERY"]</sourcexml>
                                and
                                    <sourcexml>docinfo:assoc-links-grp/remotelink[@service="QUERY"]</sourcexml>
                                to generate <targetxml>doc:related-content</targetxml> markup.
                                Applicable on CA05.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                                >2014-12-19 - ref:cite4thisresource with ref:parallelcite and
                                doc:related-content id-CCCC-10497: Updated citation from [2000]
                                A.C.F. No. 1985 to [2000] A.C.F. no 1985, for CA01.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../../Rosetta/common_newest/Rosetta_docinfo.assoc-links-LxAdv-doc.related-content.dita"
                                >2014-12-19 - docinfo:assoc-links to doc:related-content
                                id-CCCC-10284: Updated target mapping for CA05 for handling
                                    <sourcexml>docinfo:assoc-links/remotelink[@service="QUERY"]</sourcexml>.
                                Applicable on CA05.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../../Rosetta/common_newest/Rosetta_docinfo.assoc-links-LxAdv-doc.related-content.dita"
                                >2014-12-17 - docinfo:assoc-links to doc:related-content
                                id-CCCC-10284: Added a Note for CA05, CA06, CA07 and CA08 for
                                handling
                                    <sourcexml>docinfo:assoc-links-grp/remotelink[@service="QUERY"]
                                </sourcexml>
                            </xref>
                        </li>
                        <li>
                            <xref
                                href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                                >2014-12-16 - ref:cite4thisresource with ref:parallelcite and
                                doc:related-content id-CCCC-10497: Added note for conversion of
                                short term citations and it's come any combinations with the
                                mandatory (primary or alternative citation) citations then short
                                terms ciatation should be converetd according to short table.
                                Applicable on CA06-CA07.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                                >2014-12-16 - ref:cite4thisresource with ref:parallelcite and
                                doc:related-content id-CCCC-10497: Added note to identify primary
                                and alternate language when primary and alternate citation are same.
                                Applicable on CA05-CA08.</xref>
                        </li>
                    </ul>
                </p>
                <p>2014-12-16: <ul>
                        <li>
                            <xref href="case.juris.dita">2014-12-15 - case:juris id-CA04-13429:
                                Updated mapping. Db R4.5 issue #2047</xref>
                        </li>
                    </ul>
                </p>
            </section>
            <section>
                <title>admindoc 4.4_PROD</title>
                <p>2014-11-19: <ul>
                        <li>
                            <xref
                                href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/case.courtcode.dita"
                                >2014-11-19 - case:courtcode id-CA04-13417: Updated the mapping for
                                case:courtcode, schema issue for jurisinfo:alternatecourtcode....Db
                                issue #368 and #367</xref>
                        </li>
                        <li>
                            <xref
                                href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                                >2014-11-18 - ref:cite4thisresource with ref:parallelcite and
                                doc:related-content id-CCCC-10497: For CA02- Updated instructions
                                for "proc:param name="targetdoclang" value="" for both English and
                                French. P4, Db issue #365</xref>
                        </li>
                        <li>
                            <xref
                                href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                                >2014-11-11 - ref:cite4thisresource with ref:parallelcite and
                                doc:related-content id-CCCC-10497: Added note and table "Terms
                                conversion for CA05" for terms translation, Applicable on
                                CA05.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../../Rosetta/common_newest/Rosetta_entry_p-limited-LxAdv-entry_p.dita"
                                >2014-11-11 - entry/p-limited to entry/p id-CCCC-10319: Updated
                                instruction when multiple consecutive
                                    <sourcexml>p-limited</sourcexml> elements occur within
                                    <sourcexml>entry</sourcexml>.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                                >2014-11-06 - ref:cite4thisresource with ref:parallelcite and
                                doc:related-content id-CCCC-10497: Added some english to french
                                terms for translation of the citation and also update c. to ch. in
                                CA06 and CA07 table</xref>
                        </li>
                        <li>
                            <xref
                                href="../../../Rosetta/common_newest/Rosetta_figure-LxAdv-figure.dita"
                                >2014-10-28 - figure to figure id-CCCC-10320: Moved instruction
                                regarding the XPath XPath <sourcexml>caption/note</sourcexml> into a
                                separate topic. Not a rule change, just a minor reorganization of
                                the instructions.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../../Rosetta/common_newest/Rosetta_entry_p-limited-LxAdv-entry_p.dita"
                                >2014-10-28 - entry/p-limited to entry/p id-CCCC-10319: Added note
                                to handle scenario when <sourcexml>l</sourcexml> is a child of
                                    <sourcexml>entry/p-limited</sourcexml>.</xref>
                        </li>
                    </ul>
                </p>
            </section>
            <section>
                <title>admindoc 4.4_PROD</title>
                <ul>
                    <li>
                        <xref
                            href="../../common_newest/Rosetta_pnum-to-LexisAdvance_desig_ref.para.dita"
                            >2014-10-27 - updated instructions for pnum... Db issue..356</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/case.references.dita"
                            >2014-10-27 - case:references id-CA04-13434: update the List of terms in
                            CA04 CI with the terms listed in the CA01 CI where the CI mentions
                            admindecision:representation and ref:relatedrefs Db issue #355</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/case.constituents.dita"
                            >2014-10-27 - case:constituents id-CA04-13414: update the List of terms
                            in CA04 CI with the terms listed in the CA01 CI where the CI mentions
                            admindecision:representation and ref:relatedrefs Db issue #355</xref>
                    </li>
                    <li>
                        <xref href="../../../Rosetta/common_newest/Rosetta_figure-LxAdv-figure.dita"
                            >2014-10-24 - figure to figure id-CCCC-10320: Added instructions and
                            example to handle the new XPath <sourcexml>caption/note</sourcexml>.
                            (R4.5 Content Issue List #1993)</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/abbrvname.dita"
                            >2014-10-22 - abbrvname id-CA04-13407: Updated CI for
                                <targetxml>jurisinfo:courtname@normshortname</targetxml> to also be
                            placed in
                                <targetxml>jurisinfo:alternatecourtcode@alternatecourtcode</targetxml>...R4.5
                            Db issue #1987</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                            >2014-10-20 - ref:cite4thisresource with ref:parallelcite and
                            doc:related-content id-CCCC-10497: Updated the old citation inside the
                            table for CA08 stream i.e. appendice II to Appendix II.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                            >2014-10-20 - ref:cite4thisresource with ref:parallelcite and
                            doc:related-content id-CCCC-10497: Updated instruction to remove english
                            version and add french version. P4 Db issue #324</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/Rosetta_inlineobject-LxAdv-figure_ref.inlineobject.dita"
                            >2014-10-13 - inlineobject to figure/ref:inlineobject id-CCCC-10368:
                            Added note and example to suppress <targetxml>proc:nl</targetxml> from
                            before and after of <targetxml>figure/inlineobject</targetxml> when it
                            comes inside <targetxml>verbatim</targetxml> element.</xref>
                    </li>
                    <li>
                        <xref href="../../../Rosetta/common_newest/Rosetta_title-LxAdv-title.dita"
                            >2014-10-07 - title to title id-CCCC-10479: Removed instruction and
                            example to convert attribute
                                <sourcexml>@searchtype="DIGEST-SUBJECT"</sourcexml>. Applicable to
                            CA12.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                            >2014-10-01 - ref:cite4thisresource with ref:parallelcite and
                            doc:related-content id-CCCC-10497: Added the new citation inside the
                            table for CA08 stream i.e. Annexe abrogratives to Repeal
                            Schedules.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                            >2014-10-01 - ref:cite4thisresource with ref:parallelcite and
                            doc:related-content id-CCCC-10497: Updated CA05 table for "s." to "art."
                            and "art." to "s." for citation "L.R.C." and "R.S.C.". Also updated the
                            citation "L.N.B." to generate ch. to c.. Applicable on CA05.</xref>
                    </li>
                </ul>
            </section>
            <section>
                <title>admindoc 4.1_PROD</title>
                <ul>

                    <li>
                        <xref
                            href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/catchwordgrp.dita"
                            >2014-09-26 - catchwordgrp: Updated instructions to map
                                <sourcexml>catchwordgrp</sourcexml> to
                                <targetxml>admindoc:head/classify:classification/heading</targetxml>
                        </xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_caselaw/Rosetta_refnum.refnumtype.UCN-LxAdv_ref.groupid.dita"
                            >2014-09-26 - refnum[@refnumtype="UCN"] - ref:groupid id-CCCC-12047:
                            updated Instructions. Db issue# 1913</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                            >2014-09-23 - ref:cite4thisresource with ref:parallelcite and
                            doc:related-content id-CCCC-10497: Added English <sourcexml>Enactment
                                Clause</sourcexml> To <targetxml>Formule d'édiction </targetxml>,
                                <sourcexml>Long Title</sourcexml> To <targetxml>Titre
                                intégral</targetxml>, <sourcexml>Short Title</sourcexml> To
                                <targetxml>Titre abrégé</targetxml>,<sourcexml>Preamble</sourcexml>
                            To <targetxml>Préambule </targetxml> and vice versa in CA06-CA07
                            Table</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_caselaw/Rosetta_refnum.refnumtype.UCN-LxAdv_ref.groupid.dita"
                            >2014-09-17 - refnum[@refnumtype="UCN"] - ref:groupid id-CCCC-12047:
                            updated example. P4- Db issue# 338</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/Rosetta_docinfo.assoc-links-LxAdv-doc.related-content.dita"
                            >2014-09-16 - docinfo:assoc-links to doc:related-content id-CCCC-10284:
                            Added a note to create
                                <targetxml>proc:param/@name="attachment-smi"</targetxml> and
                                <targetxml>proc:param/@value</targetxml> as these was there in the
                            snippet but was missing in instruction and also added a note in to
                            simplify in output <targetxml>ref:key-value/@value</targetxml>
                        </xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_caselaw/Rosetta_refnum.refnumtype.UCN-LxAdv_ref.groupid.dita"
                            >2014-09-15 - refnum[@refnumtype="UCN"] - ref:groupid id-CCCC-12047:
                            update target mapping of
                                <sourcexml>refnum[@refnumtype="UCN"]</sourcexml> from Head to
                                <targetxml>doc:docinfo/doc:membership/ref:groupid[@group-type="ucn-1"]</targetxml>.
                            Db issue #1893 and 338</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/Rosetta_CAN_docinfo.custom-metafields-LxAdv-doc.legacy-metadata_metadatasource_lbu-meta.meta.metaitem.dita"
                            >2014-09-15 - docinfo:custom-metafields to
                            doc:legacy-metadata[@metadatasource="lbu-meta"]/meta/metaitem
                            id-CCCC-10251: update target mapping of
                                <sourcexml>docinfo:custom-metafields/docinfo:custom-metafield[@name="act-id"]</sourcexml>
                            from Head to
                                <targetxml>doc:docinfo/doc:membership/ref:groupid[@group-type="leg-id-1"]/ref:resourceid</targetxml>
                        </xref>
                    </li>
                </ul>
            </section>
            <section>
                <title>admindoc 4.0_PROD</title>
                <ul>
                    <li>
                        <xref href="case.references.dita">2014-09-04 - case:references
                            id-CA04-13434: Remove colon from case:references. Applicable to CA01 and
                            CA04... Db issue #335</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                            >2014-09-03 - ref:cite4thisresource with ref:parallelcite and
                            doc:related-content id-CCCC-10497: Added instructions for proc:param
                            name="targetdoclang". R4.5 #1873.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/Rosetta_desig-LxAdv-desig_ref.para.dita"
                            >2014-09-03 - desig to desig/ref:para id-CCCC-10501: The same rule is
                            applicable on CA01 and CA04.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/Rosetta_desig-LxAdv-desig_ref.para.dita"
                            >2014-08-29 - desig to desig/ref:para id-CCCC-10501: Updated instruction
                            and example for handling <targetxml>desig/@value</targetxml> and it's
                            mapped with <targetxml>desig@value/ref:para@num</targetxml> (means
                                <targetxml>ref:para</targetxml> should be placed inside of
                                <targetxml>desig</targetxml> markup).</xref>
                    </li>
                    <li>
                        <xref href="case.decisionsummary.dita">2014-08-27 - case:decisionsummary
                            id-CA04-13421: Updated instruction for case:decisionsummary to place the
                            period sign after completion of sentence ... P4 Issue #323</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                            >2014-08-27 - ref:cite4thisresource with ref:parallelcite and
                            doc:related-content id-CCCC-10497: Added the new rule for CA02 content
                            streams for alternate language. P4 issue #324.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                            >2014-08-25 - ref:cite4thisresource with ref:parallelcite and
                            doc:related-content id-CCCC-10497: Added the new citation inside the
                            table for CA08 i.e. R.S.C. 1985, Appendix II, No. 4, s. L.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                            >2014-08-25 - ref:cite4thisresource with ref:parallelcite and
                            doc:related-content id-CCCC-10497: Added Schedule to Annexe and vice a
                            versa in C.R.C citation, Applicable for CA06 and CA07.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                            >2014-08-21 - ref:cite4thisresource with ref:parallelcite and
                            doc:related-content id-CCCC-10497: Updated C.O.M.C. with "no" and
                            T.M.O.B. "No." for CA04- Db issue #326</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/Rosetta_docinfo.assoc-links-LxAdv-doc.related-content.dita"
                            >2014-08-21 - docinfo:assoc-links to doc:related-content id-CCCC-10284:
                            Added instructions and an example for converting
                                <sourcexml>lnlink[@service="ATTACHMENT"]</sourcexml> to
                                <targetxml>ref:lnlink</targetxml>. Applicable on CA05-CA08.</xref>
                    </li>
                    <li>
                        <xref href="case.casename.dita">2014-08-20 - case:casename id-CA04-13413:
                            Update rule for <sourcexml>nl</sourcexml> inside
                                <sourcexml>case:casename</sourcexml> where there is a newline after
                                <sourcexml>nl</sourcexml>. Db issue no. #329</xref>
                    </li>
                    <li>
                        <xref href="case.dates.dita">2014-08-19 - case:dates id-CA04-13420: Updated
                            example for nl. Multiple argued date will not be created, multiple
                            date-text will be created. Db issue #328</xref>
                    </li>
                </ul>
            </section>
            <section>
                <title>admindoc 3.14: PROD</title>
                <ul>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                            >2014-08-11 - ref:cite4thisresource with ref:parallelcite and
                            doc:related-content id-CCCC-10497: Added alternate citation for
                            corresponding primary LNCRTCF and LNCRTCE citation as provided in
                            alternate and primary format for CA04- Db issue #321</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                            >2014-08-11 - ref:cite4thisresource with ref:parallelcite and
                            doc:related-content id-CCCC-10497: Updated references in the table of
                            L.R.N.-B. to L.R.N.B. and L.N.-B. to L.N.B. for CA05.</xref>
                    </li>
                    <li>
                        <xref href="case.judgmentbody.dita">2014-08-11 - case:judgmentbody
                            id-CA04-13427: Remove leading spaces from admindecision:opinionby. P4
                            item# 300</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/Rosetta_docinfo.lbu.juris-LxAdv-classify.classification_classscheme_docinfolbu-juris.dita"
                            >2014-08-11 - docinfo:lbu-juris to
                            classify:classification[@classscheme="docinfo:lbu-juris"] id-CCCC-10301:
                            Added a special scenario for all Canada streams to handle
                                <sourcexml>docinfo:lbu-juris</sourcexml> to
                                <targetxml>classify:classification@classscheme="docinfo:lbu-juris"/classify:classitem/classify:classitem-identifier/classify:classname</targetxml>.
                            Db P4 issue #305</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/Rosetta_CAN_docinfo.custom-metafields-LxAdv-doc.legacy-metadata_metadatasource_lbu-meta.meta.metaitem.dita"
                            >2014-08-11 - docinfo:custom-metafields to
                            doc:legacy-metadata[@metadatasource="lbu-meta"]/meta/metaitem
                            id-CCCC-10251: Added identifier
                                <sourcexml>docinfo:custom-metafields/docinfo:custom-metafield[@searchtype="act-id"]</sourcexml>
                            to generate
                                <targetxml>*:head/ref:groupid/ref:resourceid/@ref:resourcekey=urn:leg-id-1:X</targetxml>.</xref>
                    </li>
                    <li>
                        <xref href="../../../Rosetta/common_newest/Rosetta_text-LxAdv-text.dita"
                            >2014-08-11 - text to text id-CCCC-10477: For CANADA Content Stream:
                            Only move the <sourcexml> text@align</sourcexml> to the parent
                                <targetxml>p</targetxml> if it is the only text in
                                <sourcexml>p</sourcexml>, Otherwise, wrap the
                                <sourcexml>text</sourcexml> with <targetxml>p</targetxml> and move
                            the <sourcexml>@align</sourcexml> attribute to the newly created
                                <targetxml> p</targetxml>.</xref>
                    </li>
                    <li>
                        <xref href="case.decisionsummary.dita">2014-08-08 - case:decisionsummary
                            id-CA04-13421: Updated instruction for case:decisionsummary having l as
                            its child element... P4 Issue #314</xref>
                    </li>
                    <li>
                        <xref href="case.decisionsummary.dita">2014-08-07 - case:decisionsummary
                            id-CA04-13421: Updated instruction for casesum:disposition - Space
                            appearing before the "." .. P4 Issue #302</xref>
                    </li>
                    <li>
                        <xref href="case.dates.dita">2014-08-01 - case:dates id-CA04-13420: Added
                            instruction to suppress <sourcexml>nl</sourcexml> in target.. P4 Issue
                            #301 and 297</xref>
                    </li>
                    <li>
                        <xref
                            href="../../common_caselaw/Rosetta_refnum.refnumtype.UCN-LxAdv_ref.groupid.dita"
                            >2014-08-01 - refnum[@refnumtype="UCN"] - ref:groupid id-CCCC-12047:
                            Updated target mapping specific to CA04.... P4 Db issue 312</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                            >2014-08-06 - ref:cite4thisresource with ref:parallelcite and
                            doc:related-content id-CCCC-10497: Updated Primary and Alternate
                            Languages for C.B.D,D.B.D.A,LNCRTCE and 2009 LNCRTCF 41... Db issue
                            P4.313</xref>
                    </li>
                </ul>
            </section>
            <section>
                <title>admindoc 3.13: PROD</title>
                <ul>
                    <li>
                        <xref href="case.courtcite.dita">2014-07-28 - case:courtcite id-CA04-13416:
                            Updated instruction and example for grouping of citations under one
                                <targetxml>ref:citations</targetxml>. R4.5 DB Item #1768.</xref>
                    </li>
                    <li>
                        <xref href="case.decisionsummary.dita">2014-07-28 - case:decisionsummary
                            id-CA04-13421: Added instruction to handle "HELD:" keyword in
                            case:decisionsummary.. R4.5 Issue #1584</xref>
                    </li>
                    <li>
                        <xref href="case.references.dita">2014-07-28 - case:references
                            id-CA04-13434: Added LEGISLATION: to the table with @referencetype value
                            legislation. R4.5 DB Item #1278.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                            >2014-07-24 - ref:cite4thisresource with ref:parallelcite and
                            doc:related-content id-CCCC-10497: Added new rule for conversion of
                            CA01, CA02, CA04 and updated instruction for CA05-CA08.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                            >2014-07-21 - ref:cite4thisresource with ref:parallelcite and
                            doc:related-content id-CCCC-10497: Updated CA01 citation [1986] A.C.A.C.
                            no 1 and snippet.</xref>
                    </li>
                    <li>
                        <xref href="case.pubinfo.dita">2014-07-17 - case:pubinfo id-CA04-13433:
                            Added the list of values when <sourcexml>case:pubinfo</sourcexml> needs
                            to be suppressed.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                            >2014-07-09 - ref:cite4thisresource with ref:parallelcite and
                            doc:related-content id-CCCC-10497: Added primary and alternate language
                            for CA04- Db issue #250</xref>
                    </li>
                    <li>
                        <xref href="case.decisionsummary.dita">2014-07-08 - case:decisionsummary
                            id-CA04-13421: Added the additional phrases from the attached Word
                            document in addition to "Court Summary:"R4.5 Issue #1584</xref>
                    </li>
                    <li>
                        <xref href="../../../Rosetta/common_newest/Rosetta_table-LxAdv-table.dita"
                            >2014-07-08 - table to table id-CCCC-10475: Updated instruction for
                            added the following rarely occurring attributes
                                <sourcexml>@char</sourcexml> inside the
                            <sourcexml>entry</sourcexml>.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                            >2014-07-07 - ref:cite4thisresource with ref:parallelcite and
                            doc:related-content id-CCCC-10497: Added R and Sch alternatives in CA06
                            and CA07 table</xref>
                    </li>
                </ul>
            </section>
            <section>
                <title>admindoc 3.12: PROD</title>
                <ul>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/LxAdv_CA-ref.cite4thisresource-LxAdv-ref.parallelcite-doc.related-content.dita"
                            >2014-06-27 - ref:cite4thisresource with ref:parallelcite and
                            doc:related-content id-CCCC-10497: Added table for CA04....Db issue
                            #1552</xref>
                    </li>
                    <li>
                        <xref
                            href="../../common_caselaw/Rosetta_refnum.refnumtype.UCN-LxAdv_ref.groupid.dita"
                            >2014-06-26 - refnum[@refnumtype="UCN"] - ref:groupid id-CCCC-12047:
                            Make <targetxml>ref:resourcekey</targetxml> UCN value urn conform to
                            PGUID registry, e.g. "urn:ucn-1:00180609".</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/case.references.dita"
                            >2014-06-25 - case:references id-CA04-13434: Removed note to suppress
                            pnum.Db Item #233.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/case.parallelcite.dita"
                            >2014-06-23 - case:parallelcite id-CA04-13431: Instructions for multiple
                            occurance of <sourcexml>ci:cite</sourcexml> under
                                <targetxml>case:parallelcite</targetxml>... Db issue #234</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/case.references.dita"
                            >2014-06-23 - case:references id-CA04-13434: Attribute @referencetype
                            all lower case for "legislation" and "consideredcases". R4.5 DB Item
                            #1278.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/Rosetta_docinfo.doc-id-LxAdv-dcidentifier_lnmetaidentifier-scheme.dita"
                            >2014-06-23 - docinfo:doc-id to dc:identifier[@lnmeta:identifier-scheme]
                            id-CCCC-10293: Note and Example removed - For CA05 Acts and Bills-
                            Mapping in dc:identifier for act-no and chunk-no. Db issue #1464</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/Rosetta_CAN_docinfo.custom-metafields-LxAdv-doc.legacy-metadata_metadatasource_lbu-meta.meta.metaitem.dita"
                            >2014-06-23 - docinfo:custom-metafields to
                            doc:legacy-metadata[@metadatasource="lbu-meta"]/meta/metaitem
                            id-CCCC-10251: Added Rule for mapping
                                <sourcexml>docinfo:custom-metafields/docinfo:custom-metafield/@act-id</sourcexml>
                            in HEAD Section in target, this is applicable for CA05-CA08 only</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/case.constituents.dita"
                            >2014-06-19 - case:constituents id-CA04-13414: Remove colon from
                            case:constituents title Appearances:... Db issue #1649</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/case.judgmentbody.dita"
                            >2014-06-18 - case:judgmentbody id-CA04-13427: Add note and example
                            about creating multiple <targetxml>admindecision:opinion</targetxml>.
                            Phase 4B item# 232</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/Rosetta_docinfo.assoc-links-LxAdv-doc.related-content.dita"
                            >2014-06-18 - docinfo:assoc-links to doc:related-content id-CCCC-10284:
                            Corrected minor typos in
                                <sourcexml>lnlink[@service="QUERYLINK"]</sourcexml>
                            instructions.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/Rosetta_docinfo.assoc-links-LxAdv-doc.related-content.dita"
                            >2014-06-13 - docinfo:assoc-links to doc:related-content id-CCCC-10284:
                            Added instructions and an example for converting
                                <sourcexml>lnlink[@service="QUERYLINK"]</sourcexml> to
                                <targetxml>ref:lnlink</targetxml>.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../common_caselaw/Rosetta_refnum.refnumtype.UCN-LxAdv_ref.groupid.dita"
                            >2014-06-12 - refnum[@refnumtype="UCN"] - ref:groupid id-CCCC-12047:
                            Created this instruction.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/case.parallelcite.dita"
                            >2014-06-11 - case:parallelcite id-CA04-13431: Updated instruction and
                            example to add attribute
                                <targetxml>ref:parallelcite/@citetype="parallel"</targetxml> in
                            target.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/case.decisionsummary.dita"
                            >2014-06-10 - case:decisionsummary id-CA04-13421: Loosened instruction
                            to convert <sourcexml>p/text</sourcexml> beginning with "HELD:" into
                                <targetxml>casesum:disposition/p/text</targetxml>. Allow dash to end
                            first sentence. Allow <sourcexml>emph</sourcexml> around HELD text.
                            Allow space before colon. Allow French language version. Convert
                            preceding and following space dash dash with a period. Add example.R4.5
                            Issue #1588</xref>
                    </li>

                </ul>
            </section>

            <section>
                <title>admindoc 3.10: PROD</title>
                <ul>
                    <li>
                        <xref
                            href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/case.references.dita"
                            >2014-06-05 - case:references id-CA04-13434: Removed nested
                            ref:relatedrefs.Db Item #214.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/case.judgmentbody.dita"
                            >2014-06-05 - case:judgmentbody id-CA04-13427: Discerning Opinion By
                            from Text. R4.5 item# 1592</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/case.references.dita"
                            >2014-06-04 - case:references id-CA04-13434: Updates Canada-only
                            instruction and examples for where <targetxml>@referencetype</targetxml>
                            value generated based on table value. R4.5 Item #1587.</xref>
                    </li>
                    <li>
                        <xref href="../../../Rosetta/common_newest/Rosetta_table-LxAdv-table.dita"
                            >2014-06-04 - table to table id-CCCC-10475: For completeness, added
                            instructions for the following rarely occurring attributes of
                                <sourcexml>table/tgroup/colspec</sourcexml>:
                                <sourcexml>@align</sourcexml>, <sourcexml>@char</sourcexml>,
                                <sourcexml>@charoff</sourcexml>, <sourcexml>@colsep</sourcexml>,
                                <sourcexml>@id</sourcexml>, <sourcexml>@rowsep</sourcexml>,
                                <sourcexml>@searchtype</sourcexml>, and
                                <sourcexml>@xml:lang</sourcexml>. This is in response to various
                            minor questions on message boards that have been asked and answered over
                            the past two years. These instructions should not trigger changes to
                            existing conversion programs, as the programs have already been changed
                            in response to previous message board answers. These instructions have
                            been added so this topic is up-to-date with respect to current
                            conversion program behavior for these rarely occuring attributes.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/common_newest/Rosetta_footnote-LxAdv-footnote.dita"
                            >2014-06-02 - footnotegrp and footnote to footnotegrp and footnote
                            id-CCCC-10322: Canada only. Added special rule to suppress indent from
                                <sourcexml>footnote/fnbody/p[@indent]</sourcexml>. Applies
                            immediately to all Canada streams. R4.5 Content Issue 1609.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/case.references.dita"
                            >2014-05-30 - Instructions provided on how to handle the mandatory
                            sequence order.Db Item #203.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/case.references.dita"
                            >2014-04-29 - case:references id-CA04-13434: Modify instruction to
                            better preserve document order.R4.5 Item #1368.</xref>
                    </li>
                </ul>
            </section>
            <section>
                <title>admindoc 3.8: PROD</title>
                <ul>
                    <li>
                        <xref
                            href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/case.decisionsummary.dita"
                            >2014-04-24 - case:decisionsummary: Updated instruction to convert
                                <sourcexml>p/text</sourcexml> beginning with "HELD:" into
                                <targetxml>casesum:disposition/p/text</targetxml>R4.5 Issue
                            #1355</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/case.decisionsummary.dita"
                            >2014-04-24 - case:decisionsummary: Provide a "Jump To Link" for Court
                            Summary by use of target <targetxml>casesum:courtsummary</targetxml>
                            instead of <targetxml>casesum:decisionsummary</targetxml>R4.5 Issue
                            #1355</xref>
                    </li>
                    <li>
                        <xref
                            href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/case.references.dita"
                            >2014-04-24 - case:references: Add instruction and two examples for
                            where <targetxml>@referencetype</targetxml> becomes "consideredcases" or
                            "legislation".R4.5 Item #1355.</xref>
                    </li>
                </ul>
            </section>

            <section>
                <title>admindoc 3.8: PROD</title>
                <ul>
                    <li>
                        <xref
                            href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/case.length.dita"
                            >2014-04-22 - case:length: Added list of abbreviated values for
                                <targetxml>@unit</targetxml> attribute, R4.5 Content Issue #:1402.
                            This change immediately applies to CA04-Admindoc.</xref>
                    </li>
                </ul>
            </section>
            <section>
                <title>admindoc 3.8: PROD</title>
                <ul>
                    <li>
                        <xref
                            href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/case.length.dita"
                            >2014-04-18 - case:length: Added note and example for Canada content to
                            add period (.) in <targetxml>@unit</targetxml> attribute, R4.5 Content
                            Issue #:1402. This change immediately applies to CA04-Admindoc.</xref>
                    </li>
                </ul>
            </section>
            <section>
                <title>admindoc 3.8: PROD</title>
                <p>
                    <ul>
                        <li>
                            <xref
                                href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/case.parallelcite.dita"
                                >2014-04-16 - case:parallelcite: Update target mapping and target
                                example for <sourcexml>case:parallelcite</sourcexml>.</xref>
                        </li>
                        <li>
                            <xref href="../../../Rosetta/common_newest/Rosetta_p-LxAdv-p.dita"
                                >2014-04-14 - p to p: Removed Colons from Labels.. DB item
                                #1255</xref>
                        </li>
                        <li>
                            <xref
                                href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/case.casename.dita"
                                >2014-04-01 - case:casename: Update rule for
                                    <sourcexml>nl</sourcexml> inside
                                    <sourcexml>case:casename</sourcexml>. These changes immediate
                                applies to CA04 - Administrative Decisions.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../../Rosetta/common_newest/Rosetta_docinfo.assoc-links-LxAdv-doc.related-content.dita"
                                >2014-03-25 - docinfo:assoc-links to doc:related-content: Added rule
                                and example for
                                    <sourcexml>docinfo:assoc-links/docinfo:assoc-links-grp/ci:cite</sourcexml>.
                                R4.5 Content issue #1125</xref>
                        </li>
                        <li>
                            <xref
                                href="../../../Rosetta/common_newest/Rosetta_remotelink-LxAdv-ref.crossreference.dita"
                                >2014-02-25 - remotelink to ref:crossreference: Updated instruction
                                and created new example (#16) for handling
                                    <sourcexml>remotelink[@service="QUERY"]</sourcexml>. New
                                instruction preserves pcdata but suppresses
                                    <sourcexml>remotelink</sourcexml> markup. Webstar #250335.
                                Change applies immediately to all Pacific streams, and in the long
                                run to all streams.</xref>
                        </li>
                    </ul>
                </p>

            </section>
            <section>
                <title>admindoc 3.8: PROD</title>
                <p>2014-04-01 <ul>
                        <li>
                            <xref
                                href="../../../Rosetta/DITA-CAN/CA04-Administrative_Decisions/case.casename.dita"
                                >2014-04-01 - case:casename: Update rule for
                                    <sourcexml>nl</sourcexml> inside
                                    <sourcexml>case:casename</sourcexml>. These changes immediate
                                applies to CA04 - Administrative Decisions.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../../Rosetta/common_newest/Rosetta_docinfo.assoc-links-LxAdv-doc.related-content.dita"
                                >2014-03-25 - docinfo:assoc-links to doc:related-content: Added rule
                                and example for
                                    <sourcexml>docinfo:assoc-links/docinfo:assoc-links-grp/ci:cite</sourcexml>.
                                R4.5 Content issue #1125</xref>
                        </li> </ul></p>
            </section>
            <section>
                <title>admindoc 3.8: PROD</title>
                <p>2014-01-31</p>
                <ul>
                    <li>
                        <xref href="../../DITA-CAN/CA04-Administrative_Decisions/case.appendix.dita"
                            >2014-01-31 - Added instruction for handling
                                <sourcexml>case:appendix/p</sourcexml>. Phase 4 Canada content
                            stream defect list: issue #161.</xref>
                    </li>
                    <li>
                        <xref href="../../common_newest/Rosetta_Elements-LxAdv-Empty_Elements.dita"
                            >2014-01-16 - Suppress each empty element unless otherwise stated: Added
                            list of elements to suppress if empty.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../common_newest/Rosetta_date-Chof-docinfo.load-date-LxAdv-dc.date_lnmeta.datetype_load-date-scheme.dita"
                            >2014-01-07 - docinfo:load-date/date to
                            dc:date[@lnmeta:datetype="load-date"]: Added a note along with example
                            which contains "00" value in <sourcexml>@day="00"</sourcexml> and
                                <sourcexml>@month="00"</sourcexml> attributes encountered in CANADA
                            contents.</xref>
                    </li>
                    <li>
                        <xref href="../../common_newest/Rosetta_footnote-LxAdv-footnote.dita"
                            >2014-01-06 - footnotegrp and footnote to footnotegrp and footnote:
                            Updated target example for applying the rule of "deleting extraneous
                            instances of @morerows, @colsep and @rowsep" in sample documents.</xref>
                    </li>
                    <li>
                        <xref href="../../common_newest/Rosetta_l-LxAdv-list.dita">2014-01-06 - l to
                            list: Added mapping instruction for nested lists.</xref>
                    </li>
                    <li>
                        <xref href="../../common_newest/Rosetta_text-LxAdv-text.dita">2014-01-31:
                            Updated instruction, <targetxml>align</targetxml> will be moved in
                                <targetxml>p</targetxml> in NL conversion. NZ09 commentary
                            discussion board issue for handling
                            <sourcexml>text/@align</sourcexml></xref>
                    </li>
                    <li>
                        <xref href="../../common_newest/Rosetta_ci.cite-LxAdv-lnci.cite.dita"
                            >2013-12-30 - ci.cite to lnci.cite: Minor illustrative change. Added
                            "(AU Journals/Newsitem)" to headings for last example to clarify that
                            retention of <sourcexml>@type="cite4thisdoc"</sourcexml> is an exception
                            for that content, as already described in narrative rules.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../common_newest/Rosetta_CAN_docinfo.custom-metafields-LxAdv-doc.legacy-metadata_metadatasource_lbu-meta.meta.metaitem.dita"
                            >2013-12-04 - docinfo:custom-metafields to
                            doc:legacy-metadata[@metadatasource="lbu-meta"]/meta/metaitem: Updated
                            target example for retaining "date" and "court" in target
                            example.</xref>
                    </li>
                    <li>
                        <xref href="../../common_newest/Rosetta_p-LxAdv-p.dita">2013-12-04 - p to p:
                            Updated target example when <sourcexml>p</sourcexml> or
                                <sourcexml>p/@nl="0"</sourcexml> comes in
                                <sourcexml>references</sourcexml>, this change directly affects
                            NZ07.</xref>
                    </li>
                    <li>
                        <xref href="../../common_newest/Rosetta_p-LxAdv-p.dita">2013-11-21 - p to p:
                            Updated instruction and example <sourcexml>p</sourcexml> or
                                <sourcexml>p/@nl="0"</sourcexml> comes in
                                <sourcexml>references</sourcexml>, this change directly affects
                            NZ07.</xref>
                    </li>
                    <li>
                        <xref href="../../common_newest/Rosetta_p-LxAdv-p.dita">2013-10-25 - p to p:
                            Added instruction and example <sourcexml>p/@nl="0"</sourcexml> comes in
                                <sourcexml>references</sourcexml>.</xref>
                    </li>
                    <li>
                        <xref href="../../common_newest/Rosetta_figure-LxAdv-figure.dita">2013-10-23
                            - figure to figure: Added instruction for handling
                            figure/p/text/inlineobject Webteam # 239816</xref>
                    </li>
                    <li>
                        <xref
                            href="../../common_newest/Rosetta_remotelink-LxAdv-ref.crossreference.dita"
                            >2013-10-23 - remotelink to ref:crossreference: Added Example when
                                <sourcexml>remotelink</sourcexml> having child
                                <sourcexml>emph</sourcexml>. Webteam # 239816</xref>
                    </li>
                    <li>
                        <xref
                            href="../../common_newest/Rosetta_docinfo.doc-heading-LxAdv-dc.title.dita"
                            >2013-10-18 - docinfo:doc-heading to dc:title: Updated Instruction when
                                <sourcexml>docinfo:doc-heading</sourcexml> contains word RULE: " or
                            STATUTE: .</xref>
                    </li>
                    <li>
                        <xref href="../../common_newest/Rosetta_Elements-LxAdv-Empty_Elements.dita"
                            >2013-10-14 - Suppress each empty element unless otherwise stated:
                            Changed antecedent to singular to match instructions.</xref>
                    </li>
                    <li>
                        <xref href="../../common_newest/Rosetta_p-LxAdv-p.dita">2013-10-09 - p to p:
                            Added instruction and example <sourcexml>p</sourcexml> comes with
                                <sourcexml>@nl=?0?</sourcexml>.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../common_newest/Rosetta_remotelink-LxAdv-ref.crossreference.dita"
                            >2013-10-03 - remotelink to ref:crossreference: Added use case where
                            remotelink contains @href which is a URL but does not contain
                            @hrefclass='http'.</xref>
                    </li>
                    <li>
                        <xref href="../../common_newest/Rosetta_footnote-LxAdv-footnote.dita"
                            >2013-10-02 - footnotegrp and footnote to footnotegrp and footnote: Not
                            a rule change. Cleaned up the note regarding the scenario when
                            footnote/@fntoken has a value of "0" in an attempt to make the
                            directions clearer.</xref>
                    </li>
                    <li>
                        <xref href="../../common_newest/Rosetta_table-LxAdv-table.dita">2013-09-16 -
                            table to table: Removed an obsolete note regarding visual styling of
                            tables.</xref>
                    </li>
                    <li>
                        <xref href="../../common_newest/Rosetta_table-LxAdv-table.dita">2013-09-12 -
                            table to table: WebTeam #s 235116, 235130, 235126: Added instructions
                            for deleting extraneous instances of @morerows, @colsep and @rowsep.
                            These instructions apply immediately to all UK streams and also to
                            AU18.</xref>
                    </li>
                    <li>
                        <xref href="../../common_newest/Rosetta_title-LxAdv-title.dita">2013-09-03 -
                            title to title: Updated Instruction when <sourcexml>title</sourcexml>
                            contains word "TITLE: " or "NAME: " or "SITE: ".</xref>
                    </li>
                    <li>
                        <xref
                            href="../../common_newest/Rosetta_docinfo.doc-heading-LxAdv-dc.title.dita"
                            >2013-09-03 - docinfo:doc-heading to dc:title: Updated Instruction when
                                <sourcexml>docinfo:doc-heading</sourcexml> contains word "TITLE: "
                            or NAME: or SITE: or SUBJECT:.</xref>
                    </li>
                    <li>
                        <xref href="../../common_newest/Rosetta_footnote-LxAdv-footnote.dita"
                            >2013-08-22 - footnotegrp and footnote to footnotegrp and footnote: Not
                            a rule change. Second target sample modified to remove attribute
                                <targetxml>lnci:cite[@citeref]</targetxml> because value captured in
                            descendant
                                <targetxml>ref:crossreference/ref:locator[@anchoridref]</targetxml>.
                            Ancillary/illustrative within this module. Change made to promote
                            uniformity across samples.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../common_newest/Rosetta_remotelink-LxAdv-ref.crossreference.dita"
                            >2013-08-22 - remotelink to ref:crossreference: Not a rule change.
                            Modified Sample #10 on
                                <sourcexml>ci:cite/ci:content/remotelink</sourcexml>. Removed target
                            attribute <targetxml>lnci:cite[@citeref]</targetxml> because value
                            captured in
                                <targetxml>ref:crossreference/ref:locator[@anchoridref]</targetxml>.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../common_newest/Rosetta_docinfo.lbu-meta-LxAdv-doc.legacy-metadata_metadatasource_lbu-meta-scheme.dita"
                            >2013-08-12 - docinfo:lbu-meta to
                            doc:legacy-metadata[@metadatasource="lbu-meta"]: We removed the
                            docinfo:lbu-meta "include" list so now there is only a "drop" list.
                            Anything not on the "drop" list should be passed through. Webteam
                            230557.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../common_newest/Rosetta_remotelink-self-inter-document-link-LxAdv-intra-document-link.dita"
                            >2013-08-12 - remotelink (self inter-document link) to ref:lnlink
                            (intra-document link): Changed module heading from ref:crossreference to
                            ref:lnlink. NO instructions are changed. WebTeam # 230229. Affects all
                            streams.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../common_newest/Rosetta_docinfo-LxAdv-doc.metadata_doc.docinfo.dita"
                            >2013-08-09 - docinfo to doc:metadata/doc:docinfo: Added instruction for
                            creating
                                <targetxml>dc:date[@lnmeta:datetype="conversion-date"]</targetxml>.
                            Previously, "conversion-date" was created only if "load-date" was not
                            present. Going forward, conversion should always create
                            "conversion-date". This is not a retroactive change. It should be
                            applied only to streams developed after Aug. 9 2013.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../common_newest/Rosetta_XML_Character_Entities-LxAdv-Unicode.dita"
                            >2013-08-08 - XML Character Entities to Unicode code points: This change
                            does not represent a change to conversion but rather documentation of
                            the existing behavior.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../common_newest/Rosetta_date-Chof-docinfo.load-date-LxAdv-dc.date_lnmeta.datetype_load-date-scheme.dita"
                            >2013-08-07 - docinfo:load-date/date to
                            dc:date[@lnmeta:datetype="load-date"]: Removed instructions for creating
                                <targetxml>dc:date[@lnmeta:datetype="conversion-date"]</targetxml>.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../common_newest/Rosetta_remotelink-self-inter-document-link-LxAdv-intra-document-link.dita"
                            >2013-08-07 - remotelink (self inter-document link) to ref:lnlink
                            (intra-document link): Changed target to
                                <targetxml>ref:lnlink</targetxml>; formerly
                                <targetxml>ref:crossreference</targetxml>. Changed because the only
                            supported markup for intradoc linking is
                                <targetxml>ref:lnlink</targetxml>, as per Bency Thomas. WebTeam #
                            230229. Affects all streams.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../common_newest/Rosetta_docinfo.lbu-meta-LxAdv-doc.legacy-metadata_metadatasource_lbu-meta-scheme.dita"
                            >2013-08-02 - docinfo:lbu-meta to
                            doc:legacy-metadata[@metadatasource="lbu-meta"]: Added
                                <sourcexml>@name="selection_criteria_variant"</sourcexml> to the
                            list of values in docinfo:metaitem/@name that should be retained. And
                            added a example.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../common_newest/Rosetta_docinfo.doc-heading-LxAdv-dc.title.dita"
                            >2013-08-01 - docinfo:doc-heading to dc:title: For Canada Content
                            streams: Added a note and examples, when
                                <sourcexml>docinfo:doc-heading</sourcexml> contains
                                <sourcexml>nl</sourcexml> as a child element.</xref>
                    </li>
                    <li>
                        <xref
                            href="../../common_newest/Rosetta_CAN_docinfo.custom-metafields-LxAdv-doc.legacy-metadata_metadatasource_lbu-meta.meta.metaitem.dita"
                            >2013-08-01 - docinfo:custom-metafields to
                            doc:legacy-metadata[@metadatasource="lbu-meta"]/meta/metaitem: Updated
                            target example for retaining "JURIS-SORT", "COURT-SORT" and "TERM-SORT"
                            in target example.</xref>
                    </li>
                    <li>
                        <xref href="../../common_newest/Rosetta_title-LxAdv-title.dita">2013-07-30 -
                            title to title: Updated Instruction when <sourcexml>title</sourcexml>
                            contains word "TITLE: " or "NAME: ".</xref>
                    </li>
                    <li>
                        <xref
                            href="../../common_newest/Rosetta_docinfo.doc-heading-LxAdv-dc.title.dita"
                            >2013-07-30 - docinfo:doc-heading to dc:title: Added Instruction when
                                <sourcexml>docinfo:doc-heading</sourcexml> contains word "TITLE: "
                            or NAME: .</xref>
                    </li>
                </ul>
            </section>
            <section>
                <title>admindoc 3.8: PROD</title>
                <p>2014-01-23 <ul>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_Elements-LxAdv-Empty_Elements.dita"
                                >2014-01-16 - Suppress each empty element unless otherwise stated:
                                Added list of elements to suppress if empty.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_date-Chof-docinfo.load-date-LxAdv-dc.date_lnmeta.datetype_load-date-scheme.dita"
                                >2014-01-07 - docinfo:load-date/date to
                                dc:date[@lnmeta:datetype="load-date"]: Added a note along with
                                example which contains "00" value in
                                    <sourcexml>@day="00"</sourcexml> and
                                    <sourcexml>@month="00"</sourcexml> attributes encountered in
                                CANADA contents.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_footnote-LxAdv-footnote.dita"
                                >2014-01-06 - footnotegrp and footnote to footnotegrp and footnote:
                                Updated target example for applying the rule of "deleting extraneous
                                instances of @morerows, @colsep and @rowsep" in sample
                                documents.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_l-LxAdv-list.dita">2014-01-06 -
                                l to list: Added mapping instruction for nested lists.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_ci.cite-LxAdv-lnci.cite.dita"
                                >2013-12-30 - ci.cite to lnci.cite: Minor illustrative change. Added
                                "(AU Journals/Newsitem)" to headings for last example to clarify
                                that retention of <sourcexml>@type="cite4thisdoc"</sourcexml> is an
                                exception for that content, as already described in narrative
                                rules.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_CAN_docinfo.custom-metafields-LxAdv-doc.legacy-metadata_metadatasource_lbu-meta.meta.metaitem.dita"
                                >2013-12-04 - docinfo:custom-metafields to
                                doc:legacy-metadata[@metadatasource="lbu-meta"]/meta/metaitem:
                                Updated target example for retaining "date" and "court" in target
                                example.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_p-LxAdv-p.dita">2013-12-04 - p
                                to p: Updated target example when <sourcexml>p</sourcexml> or
                                    <sourcexml>p/@nl="0"</sourcexml> comes in
                                    <sourcexml>references</sourcexml>, this change directly affects
                                NZ07.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_p-LxAdv-p.dita">2013-11-21 - p
                                to p: Updated instruction and example <sourcexml>p</sourcexml> or
                                    <sourcexml>p/@nl="0"</sourcexml> comes in
                                    <sourcexml>references</sourcexml>, this change directly affects
                                NZ07.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_p-LxAdv-p.dita">2013-10-25 - p
                                to p: Added instruction and example <sourcexml>p/@nl="0"</sourcexml>
                                comes in <sourcexml>references</sourcexml>.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_figure-LxAdv-figure.dita"
                                >2013-10-23 - figure to figure: Added instruction for handling
                                figure/p/text/inlineobject Webteam # 239816</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_remotelink-LxAdv-ref.crossreference.dita"
                                >2013-10-23 - remotelink to ref:crossreference: Added Example when
                                    <sourcexml>remotelink</sourcexml> having child
                                    <sourcexml>emph</sourcexml>. Webteam # 239816</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_docinfo.doc-heading-LxAdv-dc.title.dita"
                                >2013-10-18 - docinfo:doc-heading to dc:title: Updated Instruction
                                when <sourcexml>docinfo:doc-heading</sourcexml> contains word RULE:
                                " or STATUTE: .</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_Elements-LxAdv-Empty_Elements.dita"
                                >2013-10-14 - Suppress each empty element unless otherwise stated:
                                Changed antecedent to singular to match instructions.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_p-LxAdv-p.dita">2013-10-09 - p
                                to p: Added instruction and example <sourcexml>p</sourcexml> comes
                                with <sourcexml>@nl=?0?</sourcexml>.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_remotelink-LxAdv-ref.crossreference.dita"
                                >2013-10-03 - remotelink to ref:crossreference: Added use case where
                                remotelink contains @href which is a URL but does not contain
                                @hrefclass='http'.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_footnote-LxAdv-footnote.dita"
                                >2013-10-02 - footnotegrp and footnote to footnotegrp and footnote:
                                Not a rule change. Cleaned up the note regarding the scenario when
                                footnote/@fntoken has a value of "0" in an attempt to make the
                                directions clearer.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_table-LxAdv-table.dita"
                                >2013-09-16 - table to table: Removed an obsolete note regarding
                                visual styling of tables.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_table-LxAdv-table.dita"
                                >2013-09-12 - table to table: WebTeam #s 235116, 235130, 235126:
                                Added instructions for deleting extraneous instances of @morerows,
                                @colsep and @rowsep. These instructions apply immediately to all UK
                                streams and also to AU18.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_title-LxAdv-title.dita"
                                >2013-09-03 - title to title: Updated Instruction when
                                    <sourcexml>title</sourcexml> contains word "TITLE: " or "NAME: "
                                or "SITE: ".</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_docinfo.doc-heading-LxAdv-dc.title.dita"
                                >2013-09-03 - docinfo:doc-heading to dc:title: Updated Instruction
                                when <sourcexml>docinfo:doc-heading</sourcexml> contains word
                                "TITLE: " or NAME: or SITE: or SUBJECT:.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_footnote-LxAdv-footnote.dita"
                                >2013-08-22 - footnotegrp and footnote to footnotegrp and footnote:
                                Not a rule change. Second target sample modified to remove attribute
                                    <targetxml>lnci:cite[@citeref]</targetxml> because value
                                captured in descendant
                                    <targetxml>ref:crossreference/ref:locator[@anchoridref]</targetxml>.
                                Ancillary/illustrative within this module. Change made to promote
                                uniformity across samples.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_remotelink-LxAdv-ref.crossreference.dita"
                                >2013-08-22 - remotelink to ref:crossreference: Not a rule change.
                                Modified Sample #10 on
                                    <sourcexml>ci:cite/ci:content/remotelink</sourcexml>. Removed
                                target attribute <targetxml>lnci:cite[@citeref]</targetxml> because
                                value captured in
                                    <targetxml>ref:crossreference/ref:locator[@anchoridref]</targetxml>.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_docinfo.lbu-meta-LxAdv-doc.legacy-metadata_metadatasource_lbu-meta-scheme.dita"
                                >2013-08-12 - docinfo:lbu-meta to
                                doc:legacy-metadata[@metadatasource="lbu-meta"]: We removed the
                                docinfo:lbu-meta "include" list so now there is only a "drop" list.
                                Anything not on the "drop" list should be passed through. Webteam
                                230557.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_remotelink-self-inter-document-link-LxAdv-intra-document-link.dita"
                                >2013-08-12 - remotelink (self inter-document link) to ref:lnlink
                                (intra-document link): Changed module heading from
                                ref:crossreference to ref:lnlink. NO instructions are changed.
                                WebTeam # 230229. Affects all streams.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_docinfo-LxAdv-doc.metadata_doc.docinfo.dita"
                                >2013-08-09 - docinfo to doc:metadata/doc:docinfo: Added instruction
                                for creating
                                    <targetxml>dc:date[@lnmeta:datetype="conversion-date"]</targetxml>.
                                Previously, "conversion-date" was created only if "load-date" was
                                not present. Going forward, conversion should always create
                                "conversion-date". This is not a retroactive change. It should be
                                applied only to streams developed after Aug. 9 2013.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_XML_Character_Entities-LxAdv-Unicode.dita"
                                >2013-08-08 - XML Character Entities to Unicode code points: This
                                change does not represent a change to conversion but rather
                                documentation of the existing behavior.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_date-Chof-docinfo.load-date-LxAdv-dc.date_lnmeta.datetype_load-date-scheme.dita"
                                >2013-08-07 - docinfo:load-date/date to
                                dc:date[@lnmeta:datetype="load-date"]: Removed instructions for
                                creating
                                    <targetxml>dc:date[@lnmeta:datetype="conversion-date"]</targetxml>.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_remotelink-self-inter-document-link-LxAdv-intra-document-link.dita"
                                >2013-08-07 - remotelink (self inter-document link) to ref:lnlink
                                (intra-document link): Changed target to
                                    <targetxml>ref:lnlink</targetxml>; formerly
                                    <targetxml>ref:crossreference</targetxml>. Changed because the
                                only supported markup for intradoc linking is
                                    <targetxml>ref:lnlink</targetxml>, as per Bency Thomas. WebTeam
                                # 230229. Affects all streams.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_docinfo.lbu-meta-LxAdv-doc.legacy-metadata_metadatasource_lbu-meta-scheme.dita"
                                >2013-08-02 - docinfo:lbu-meta to
                                doc:legacy-metadata[@metadatasource="lbu-meta"]: Added
                                    <sourcexml>@name="selection_criteria_variant"</sourcexml> to the
                                list of values in docinfo:metaitem/@name that should be retained.
                                And added a example.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_docinfo.doc-heading-LxAdv-dc.title.dita"
                                >2013-08-01 - docinfo:doc-heading to dc:title: For Canada Content
                                streams: Added a note and examples, when
                                    <sourcexml>docinfo:doc-heading</sourcexml> contains
                                    <sourcexml>nl</sourcexml> as a child element.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_CAN_docinfo.custom-metafields-LxAdv-doc.legacy-metadata_metadatasource_lbu-meta.meta.metaitem.dita"
                                >2013-08-01 - docinfo:custom-metafields to
                                doc:legacy-metadata[@metadatasource="lbu-meta"]/meta/metaitem:
                                Updated target example for retaining "JURIS-SORT", "COURT-SORT" and
                                "TERM-SORT" in target example.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_title-LxAdv-title.dita"
                                >2013-07-30 - title to title: Updated Instruction when
                                    <sourcexml>title</sourcexml> contains word "TITLE: " or "NAME:
                                ".</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_docinfo.doc-heading-LxAdv-dc.title.dita"
                                >2013-07-30 - docinfo:doc-heading to dc:title: Added Instruction
                                when <sourcexml>docinfo:doc-heading</sourcexml> contains word
                                "TITLE: " or NAME: .</xref>
                        </li>
                    </ul>
                </p>
            </section>
            <section>
                <title>admindoc 3.1:PROD</title>
                <p>2013-07-22 <ul>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_CAN_docinfo.custom-metafields-LxAdv-doc.legacy-metadata_metadatasource_lbu-meta.meta.metaitem.dita"
                                >2013-07-22 - Added DITA reference having updated instructions for
                                    <sourcexml>docinfo:custom-metafields</sourcexml> handling.
                            </xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_docinfo.assoc-links-LxAdv-doc.related-content.dita"
                                >2013-07-19 - docinfo:assoc-links to doc:related-content: Added rule
                                mapping attribute
                                    <sourcexml>remotelink[@service="DOC-ID"]</sourcexml> to
                                    <targetxml>ref:lnlink[@service="DOCUMENT"]</targetxml>
                            </xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_docinfo-LxAdv-doc.metadata_doc.docinfo.dita"
                                >2013-07-18 - docinfo to doc:metadata/doc:docinfo: Added
                                    <sourcexml>@excludefromalerts</sourcexml> as one of the
                                    <sourcexml>docinfo</sourcexml> attributes to carry
                                through</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_identifier-LxAdv-ID_data_type-HandlingPatternRestrictions.dita"
                                >2013-07-17 - Identifiers to ID Data Type - Handling Pattern
                                Restrictions: Added instructions for handling leading/trailing
                                space(s) and XML entities.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_docinfo.doc-lang-and-doc-country-LxAdv-ROOT_xml.lang.dita"
                                >2013-07-16 - docinfo:doc-lang and docinfo:doc-country to @xml:lang
                                and @xml:ID: Instruction narrative edited for language; no changes
                                to mappings, no impact to stylesheets.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_figure-LxAdv-figure.dita"
                                >2013-07-15 - figure to figure: Added instructions for handling
                                figure/caption and an example demonstrating the mapping.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_identifier-LxAdv-ID_data_type-HandlingPatternRestrictions.dita"
                                >2013-07-10 - Identifiers to ID Data Type - Handling Pattern
                                Restrictions: Added instruction to replace space with
                                underscore.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_title-LxAdv-title.dita"
                                >2013-07-05 - title to title: Added Instruction when
                                    <sourcexml>title</sourcexml> contains word "TITLE: ".</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_CAN_docinfo.custom-metafields-LxAdv-doc.legacy-metadata_metadatasource_lbu-meta.meta.metaitem.dita"
                                >2013-06-04 - docinfo:custom-metafields to
                                doc:legacy-metadata[@metadatasource="lbu-meta"]/meta/metaitem:
                                Consolidated narrative and examples for clarity.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_remotelink-LxAdv-ref.crossreference.dita"
                                >2013-06-03 - remotelink to ref:crossreference: Updated the Target
                                XML 2 by removing the <targetxml>@crossreferencetype</targetxml> for
                                Canada example.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_docinfo.lbu-meta-LxAdv-doc.legacy-metadata_metadatasource_lbu-meta-scheme.dita"
                                >2013-05-31 - docinfo:lbu-meta to
                                doc:legacy-metadata[@metadatasource="lbu-meta"]: Added
                                "document-type" to the list of values in docinfo:metaitem/@name that
                                should be retained.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_CAN_docinfo.custom-metafields-LxAdv-doc.legacy-metadata_metadatasource_lbu-meta.meta.metaitem.dita"
                                >2013-05-24 - docinfo:custom-metafields to
                                doc:legacy-metadata[@metadatasource="lbu-meta"]/meta/metaitem:
                                Instruction and example added for handling of
                                    <sourcexml>docinfo:custom-metafield/@name="pageestimate"</sourcexml>.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_inlineobject-LxAdv-figure_ref.inlineobject.dita"
                                >2013-05-24 - inlineobject to figure/ref:inlineobject: Updated
                                target example, "when smi is present".</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_CAN_docinfo.custom-metafields-LxAdv-doc.legacy-metadata_metadatasource_lbu-meta.meta.metaitem.dita"
                                >2013-05-20 - docinfo:custom-metafields to
                                doc:legacy-metadata[@metadatasource="lbu-meta"]/meta/metaitem:
                                Removed Canada content stream codes from instruction since its a
                                Canada specific rule and will be applicable to all the content
                                streams.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_docinfo-LxAdv-doc.metadata_doc.docinfo.dita"
                                >2013-05-16 - docinfo to doc:metadata/doc:docinfo: Fixed typo
                                updating urn:contentitem to urn:contentItem</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_CAN_docinfo.custom-metafields-LxAdv-doc.legacy-metadata_metadatasource_lbu-meta.meta.metaitem.dita"
                                >2013-05-13 - docinfo:custom-metafields to
                                doc:legacy-metadata[@metadatasource="lbu-meta"]/meta/metaitem:
                                Example added for handling of
                                    <sourcexml>docinfo:custom-metafields/@name="reg-no"</sourcexml>.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_figure-LxAdv-figure.dita"
                                >2013-05-08 - figure to figure: Extended the list of allowable
                                values for image handling.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_glp.note-Chof-figure-LxAdv-figure.dita"
                                >2013-05-08 - (Legislation &amp; Regulation) figure/glp:note to
                                figure: Extended the list of allowable values for image
                                handling.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_inlineobject-LxAdv-figure_ref.inlineobject.dita"
                                >2013-05-08 - inlineobject to figure/ref:inlineobject: Extended the
                                list of allowable values for image handling.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_remotelink-LxAdv-ref.crossreference.dita"
                                >2013-05-08 - remotelink to ref:crossreference: Extended the list of
                                allowable values for image handling.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_inlineobject-LxAdv-figure_ref.inlineobject.dita"
                                >2013-05-02 - inlineobject to figure/ref:inlineobject: Updated
                                target example to if the SMI is present then a
                                    <targetxml>ref:inliineobject/@status</targetxml> attribute is
                                set to “valid?.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_ci.cite-LxAdv-lnci.cite.dita"
                                >2013-05-01 - ci.cite to lnci.cite: Removed special rule for
                                    <sourcexml>ci:cite/ci:content/remotelink</sourcexml> which
                                required suppression of <sourcexml>ci:cite/ci:content</sourcexml>
                                tags. The elements are now retained and convert according to common
                                rules.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_figure-LxAdv-figure.dita"
                                >2013-05-01 - figure to figure: Removed instructions for section
                                "Pre-Release 4.0" because according to latest Apollo markup, section
                                "Release 4.0 and after" and section "Pre-Release 4.0" now have
                                similar conversion markup.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_glp.note-Chof-figure-LxAdv-figure.dita"
                                >2013-05-01 - (Legislation &amp; Regulation) figure/glp:note to
                                figure: Removed instructions for section "Pre-Release 4.0" because
                                according to latest Apollo markup, section "Release 4.0 and after"
                                and section "Pre-Release 4.0" now have similar conversion
                                markup.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_inlineobject-LxAdv-figure_ref.inlineobject.dita"
                                >2013-05-01 - inlineobject to figure/ref:inlineobject: Removed
                                instructions for section "Pre-Release 4.0" because according to
                                latest Apollo markup, section "Release 4.0 and after" and section
                                "Pre-Release 4.0" now have similar conversion markup.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_remotelink-LxAdv-ref.crossreference.dita"
                                >2013-05-01 - remotelink to ref:crossreference: Removed instructions
                                for section "Pre-Release 4.0" because according to latest Apollo
                                markup, section "Release 4.0 and after" and section "Pre-Release
                                4.0" now have similar conversion markup.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_remotelink-LxAdv-ref.crossreference.dita"
                                >2013-05-01 - remotelink to ref:crossreference: "Instruction added
                                for <sourcexml>ci:cite/ci:content/remotelink</sourcexml> specifying
                                that the <sourcexml>remotelink</sourcexml> is to be converted to
                                    <targetxml>ref:crossreference</targetxml> but the containing
                                elements' start-tags and end-tags (<sourcexml>ci:cite</sourcexml>
                                and <sourcexml>ci:content</sourcexml>) are dropped", has been
                                removed from the instructions and now
                                    <sourcexml>remotelink</sourcexml> will be converted to the
                                resulting mapping where it is. For more details you can see example:
                                Source XML 10: <sourcexml>remotelink</sourcexml> as a child of
                                    <sourcexml>ci:cite/ci:content</sourcexml>
                            </xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_figure-LxAdv-figure.dita"
                                >2013-04-30 - figure to figure: Updated target sample according to
                                latest Apollo markup.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_glp.note-Chof-figure-LxAdv-figure.dita"
                                >2013-04-30 - (Legislation &amp; Regulation) figure/glp:note to
                                figure: Updated target sample according to latest Apollo
                                markup.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_inlineobject-LxAdv-figure_ref.inlineobject.dita"
                                >2013-04-30 - inlineobject to figure/ref:inlineobject: Updated
                                target sample according to latest Apollo markup.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_remotelink-LxAdv-ref.crossreference.dita"
                                >2013-04-30 - remotelink to ref:crossreference: Updated target
                                sample according to latest Apollo markup.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_CAN_docinfo.custom-metafields-LxAdv-doc.legacy-metadata_metadatasource_lbu-meta.meta.metaitem.dita"
                                >2013-04-29 - docinfo:custom-metafields to
                                doc:legacy-metadata[@metadatasource="lbu-meta"]/meta/metaitem:
                                Instructions and example added for handling various scenarios of
                                    <sourcexml>docinfo:custom-metafields</sourcexml> for CA06-Regs
                                and CA08-Const.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_ci.cite-LxAdv-lnci.cite.dita"
                                >2013-04-24 - ci.cite to lnci.cite: Added a mapping for
                                    <sourcexml>ci:procphrase</sourcexml> to
                                    <sourcexml>lnci:procphrase</sourcexml>
                            </xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_docinfo.doc-lang-and-doc-country-LxAdv-ROOT_xml.lang.dita"
                                >2013-04-19 - docinfo:doc-lang and docinfo:doc-country to @xml:lang
                                and @xml:ID: Added note about applicability of restrictions and
                                required modifications for <targetxml>xml:id</targetxml> to other
                                scenarios.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_CAN_docinfo.custom-metafields-LxAdv-doc.legacy-metadata_metadatasource_lbu-meta.meta.metaitem.dita"
                                >2013-04-18 - docinfo:custom-metafields to
                                doc:legacy-metadata[@metadatasource="lbu-meta"]/meta/metaitem:
                                Instructions and example added for handling various scenarios of
                                    <sourcexml>docinfo:custom-metafields</sourcexml> for CA Acts and
                                Bills.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_docinfo.assoc-links-LxAdv-doc.related-content.dita"
                                >2013-04-12 - docinfo:assoc-links to doc:related-content: This
                                module was changed from UK specific to applicable to all LBUs</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_docinfo.assoc-links-LxAdv-doc.related-content.dita"
                                >2013-04-10 - docinfo:assoc-links to doc:related-content: An example
                                for related content Source and Target XML 4</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_remotelink-LxAdv-ref.crossreference.dita"
                                >2013-04-10 - remotelink to ref:crossreference: Added Source XML 7a:
                                for link to URL, with non-URL text content because it was previously
                                missing, only the target example was here.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_docinfo.lbu-meta-LxAdv-doc.legacy-metadata_metadatasource_lbu-meta-scheme.dita"
                                >2013-04-09 - docinfo:lbu-meta to
                                doc:legacy-metadata[@metadatasource="lbu-meta"]: Added the
                                instruction for handling
                                    <sourcexml>docinfo:metaitem[@name="QLDB"]</sourcexml>.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_Elements-LxAdv-Empty_Elements.dita"
                                >2013-03-28 - Suppress empty elements unless otherwise stated:
                                Created.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_docinfo.assoc-links-LxAdv-doc.related-content.dita"
                                >2013-03-28 - docinfo:assoc-links to doc:related-content: Added
                                rules for <sourcexml>docinfo:assoc-links-grp</sourcexml> and for
                                child <sourcexml>text</sourcexml>.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_docinfo.doc-id-LxAdv-dcidentifier_lnmetaidentifier-scheme.dita"
                                >2013-03-20 - docinfo:doc-id to
                                dc:identifier[@lnmeta:identifier-scheme]: Updated the information on
                                handling the situation when
                                    <sourcexml>docinfo:dpsi[@id-string]</sourcexml> is absent with
                                instructions to get the dpsi from
                                    <sourcexml>docinfo/docinfo:custom-metafields/docinfo:custom-metafield[@name="dpsi"]</sourcexml>.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_nl-LxAdv-proc.nl.dita"
                                >2013-03-14 - nl to proc:nl: Add instruction and example
                                    <sourcexml>nl/@n</sourcexml>.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_p-LxAdv-p.dita">2013-03-14 - p
                                to p: Add instruction and example
                                <sourcexml>p/@style</sourcexml>.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_pgrp-LxAdv-pgrp.dita">2013-03-14
                                - pgrp to pgrp: Add instruction and example
                                    <sourcexml>pgrp/@id</sourcexml>.</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_remotelink-LxAdv-ref.crossreference.dita"
                                >2013-03-11 - remotelink to ref:crossreference: Instruction and
                                example added on how to handle <targetxml>ref:marker </targetxml> if
                                it is in <targetxml>ref:lnlink@service=?URL?</targetxml>and the
                                    <targetxml>ref:key-value@value</targetxml> starts-with (.,
                                'http://www.lexisnexis.com/au/legal/api')</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_heading-LxAdv-heading.dita"
                                >2013-03-06 - heading to heading: Removed instructions/rules for
                                exceptional desig scenario and deprecated attribute
                                    <targetxml>@followstitle</targetxml>.</xref>
                        </li>
                        <li>
                            <xref href="../../common_newest/Rosetta_figure-LxAdv-figure.dita"
                                >2013-02-18 - figure to figure: Created two sections, one for
                                "Release 4.0 and after" and another for "Pre-Release 4.0".</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_glp.note-Chof-figure-LxAdv-figure.dita"
                                >2013-02-18 - (Legislation &amp; Regulation) figure/glp:note to
                                figure: Created two sections, one for "Release 4.0 and after" and
                                another for "Pre-Release 4.0".</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_inlineobject-LxAdv-figure_ref.inlineobject.dita"
                                >2013-02-18 - inlineobject to figure/ref:inlineobject: Created two
                                sections, one for "Release 4.0 and after" and another for
                                "Pre-Release 4.0".</xref>
                        </li>
                        <li>
                            <xref
                                href="../../common_newest/Rosetta_remotelink-LxAdv-ref.crossreference.dita"
                                >2013-02-18 - remotelink to ref:crossreference: Created two
                                sections, one for "Release 4.0 and after" and another for
                                "Pre-Release 4.0".</xref>
                        </li>
                    </ul>
                </p>
            </section>
            <!-- <section>
      <p>2013-01-30<ul>
          <li>A new section titled "<xref href="CA04admin_decisions_CoderCodesRemoval.dita">Removal
              of Coder Codes</xref>" has been added to the CI with information on the suppression of
            coder codes.</li>
        </ul></p>
    </section>-->
            <section>
                <p>2012-12-24<ul>
                        <li>Example added for case:headnote/case:references/p/pnum scenario. Refer
                                <sourcexml>case:references</sourcexml>.</li>
                        <li>Instruction and example added for multiple
                                <sourcexml>ci:cite/@type="cite4thisdoc"</sourcexml>. Refer
                                <sourcexml>case:courtcite</sourcexml>.</li>
                        <li>The instructions for <sourcexml>case:dates</sourcexml> have been updated
                            with directions for populating the attribute
                                <targetxml>decision:decisiondate/@normdate</targetxml>.</li>
                    </ul></p>
            </section>
            <section>
                <p>2012-12-10<ul>
                        <li>Instruction and example added for handling of <b>Codercodes</b>, Refer
                                <sourcexml>case:appendix</sourcexml>.</li>
                        <li>Added <targetxml>footnotegroup</targetxml> to the content model of
                                <targetxml>admindecision:opinions</targetxml>.</li>
                        <li>Instruction and example added for
                                <sourcexml>docinfo:custom-metafield[@searchtype="CITED-COUNT"]</sourcexml>.</li>
                    </ul></p>
            </section>
            <section>
                <title/>
                <p>2012-11-21<ul>
                        <li>Example updated for <sourcexml>case:priorhist</sourcexml>.</li>
                        <li>Example added for handling of multilple
                                <sourcexml>case:references</sourcexml>.</li>
                        <li>Instruction and example updated for
                                <sourcexml>case:hearingdates</sourcexml>.</li>
                    </ul></p>
            </section>
            <section>
                <title/>
                <p>2012-11-07<ul>
                        <li>Instructions added for <sourcexml>case:references</sourcexml> handling
                            when it is the child of
                                <sourcexml>case:appendix/case:headnote</sourcexml>.</li>
                        <li>Added the section "Mapping to ID Data Type".</li>
                        <li>Added <targetxml>proc:nl</targetxml> to the content model of
                                <targetxml>jurisinfo:courtname</targetxml> and
                                <targetxml>caseinfo:fullcasename</targetxml>, Instruction and
                            example updated.</li>
                        <li>Instruction updated for <targetxml>case:courtcite</targetxml>
                            handling.</li>
                    </ul></p>
            </section>
            <section>
                <title>Created</title>
                <p>2012-08-10</p>
            </section>
        </body>

    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\Admindecisions_Change-Log.dita  -->
    <!--<xsl:message>Admindecisions_Change-Log.xsl requires manual development!</xsl:message> -->



</xsl:stylesheet>
